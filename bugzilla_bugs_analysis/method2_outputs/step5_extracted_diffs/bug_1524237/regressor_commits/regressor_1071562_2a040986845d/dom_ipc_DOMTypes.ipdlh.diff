# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/ipc/DOMTypes.ipdlh
# Commit: 2a040986845d
# Full Hash: 2a040986845da97f1eaf87c33136d9168817606a
# Author: Neil Deakin <neil@mozilla.com>
# Date: 2015-04-13 10:00:52
# Regressor Bug: 1071562
# File Overlap Count: 1
# Description:
#   Bug 1071562, e10s, support non-text types in clipboard (html, images, etc), r=smaug
# ==============================================================================

diff -r 8975ed86f399 -r 2a040986845d dom/ipc/DOMTypes.ipdlh
--- a/dom/ipc/DOMTypes.ipdlh	Fri Apr 10 09:43:38 2015 -0700
+++ b/dom/ipc/DOMTypes.ipdlh	Fri Apr 10 12:51:06 2015 -0400
@@ -137,13 +137,24 @@
 
 union IPCDataTransferData
 {
-  nsString;
-  PBlob;
+  nsString;  // text
+  nsCString; // images
+  PBlob;     // files
+};
+
+struct IPCDataTransferImage
+{
+  uint32_t width;
+  uint32_t height;
+  uint32_t stride;
+  uint8_t format;
 };
 
 struct IPCDataTransferItem
 {
   nsCString flavor;
+  // The image details are only used when transferring images.
+  IPCDataTransferImage imageDetails;
   IPCDataTransferData data;
 };
 