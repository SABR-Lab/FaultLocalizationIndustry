# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/layers/wr/RenderRootTypes.h
# Commit: 1764701d11d1
# Full Hash: 1764701d11d103a2ac02f8cfa5ff4511b8f5dd70
# Author: Doug Thayer <dothayer@mozilla.com>
# Date: 2019-03-22 16:44:08
# Regressor Bug: 1441308
# File Overlap Count: 2
# Description:
#   Bug 1441308 - Always send parent commands when sending mDestroyedActors r=kats,sotaro
#   
#   If we try to send them separately as we were before, we can run into
#   cases where we try to destroy the actors and then send the OpRemoveTexture,
#   which crashes.
# ==============================================================================

diff -r 32f7793dfd1a -r 1764701d11d1 gfx/layers/wr/RenderRootTypes.h
--- a/gfx/layers/wr/RenderRootTypes.h	Thu Mar 21 23:15:32 2019 +0000
+++ b/gfx/layers/wr/RenderRootTypes.h	Thu Mar 21 23:15:42 2019 +0000
@@ -21,12 +21,12 @@
   gfx::IntRect mRect;
   nsTArray<WebRenderParentCommand> mCommands;
   wr::LayoutSize mContentSize;
-  mozilla::ipc::ByteBuf mDL;
+  Maybe<mozilla::ipc::ByteBuf> mDL;
   wr::BuiltDisplayListDescriptor mDLDesc;
   nsTArray<OpUpdateResource> mResourceUpdates;
   nsTArray<RefCountedShmem> mSmallShmems;
   nsTArray<mozilla::ipc::Shmem> mLargeShmems;
-  WebRenderScrollData mScrollData;
+  Maybe<WebRenderScrollData> mScrollData;
 };
 
 struct RenderRootUpdates {
@@ -65,5 +65,4 @@
 }  // namespace ipc
 }  // namespace mozilla
 
-
 #endif /* GFX_RENDERROOTTYPES_H */