# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/layers/wr/RenderRootTypes.cpp
# Commit: 96da9d241051
# Full Hash: 96da9d241051d222bdd693bdb519d058a013b59c
# Author: Doug Thayer <dothayer@mozilla.com>
# Date: 2019-03-23 09:46:24
# Regressor Bug: 1441308
# File Overlap Count: 2
# Description:
#   Bug 1441308 - Core renderroot splitting changes r=kats,sotaro
#   
#   This is a large patch that contains all of the core changes for
#   renderroot splitting.
#   
# ==============================================================================

diff -r 8cefa694f811 -r 96da9d241051 gfx/layers/wr/RenderRootTypes.cpp
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/gfx/layers/wr/RenderRootTypes.cpp	Fri Mar 22 18:28:42 2019 +0000
@@ -0,0 +1,75 @@
+/* -*- Mode: C++; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 2 -*- */
+/* vim: set ts=8 sts=2 et sw=2 tw=80: */
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+#include "RenderRootTypes.h"
+#include "mozilla/layers/WebRenderMessageUtils.h"
+#include "mozilla/layers/WebRenderBridgeChild.h"
+
+namespace mozilla {
+namespace ipc {
+
+void IPDLParamTraits<mozilla::layers::RenderRootDisplayListData>::Write(IPC::Message* aMsg,
+                                                                        IProtocol* aActor,
+                                                                        paramType&& aParam) {
+    WriteIPDLParam(aMsg, aActor, aParam.mRenderRoot);
+    WriteIPDLParam(aMsg, aActor, aParam.mRect);
+    WriteIPDLParam(aMsg, aActor, aParam.mCommands);
+    WriteIPDLParam(aMsg, aActor, aParam.mContentSize);
+    WriteIPDLParam(aMsg, aActor, std::move(aParam.mDL));
+    WriteIPDLParam(aMsg, aActor, aParam.mDLDesc);
+    WriteIPDLParam(aMsg, aActor, aParam.mResourceUpdates);
+    WriteIPDLParam(aMsg, aActor, aParam.mSmallShmems);
+    WriteIPDLParam(aMsg, aActor, std::move(aParam.mLargeShmems));
+    WriteIPDLParam(aMsg, aActor, aParam.mScrollData);
+}
+
+bool IPDLParamTraits<mozilla::layers::RenderRootDisplayListData>::Read(const IPC::Message* aMsg,
+                                                                       PickleIterator* aIter,
+                                                                       IProtocol* aActor,
+                                                                       paramType* aResult) {
+    if (ReadIPDLParam(aMsg, aIter, aActor, &aResult->mRenderRoot) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mRect) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mCommands) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mContentSize) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mDL) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mDLDesc) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mResourceUpdates) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mSmallShmems) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mLargeShmems) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mScrollData)) {
+        return true;
+    }
+    return false;
+}
+
+void IPDLParamTraits<mozilla::layers::RenderRootUpdates>::Write(IPC::Message* aMsg,
+                                                                        IProtocol* aActor,
+                                                                        paramType&& aParam) {
+    WriteIPDLParam(aMsg, aActor, aParam.mRenderRoot);
+    WriteIPDLParam(aMsg, aActor, aParam.mCommands);
+    WriteIPDLParam(aMsg, aActor, aParam.mResourceUpdates);
+    WriteIPDLParam(aMsg, aActor, aParam.mSmallShmems);
+    WriteIPDLParam(aMsg, aActor, std::move(aParam.mLargeShmems));
+    WriteIPDLParam(aMsg, aActor, aParam.mScrollUpdates);
+}
+
+bool IPDLParamTraits<mozilla::layers::RenderRootUpdates>::Read(const IPC::Message* aMsg,
+                                                                       PickleIterator* aIter,
+                                                                       IProtocol* aActor,
+                                                                       paramType* aResult) {
+    if (ReadIPDLParam(aMsg, aIter, aActor, &aResult->mRenderRoot) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mCommands) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mResourceUpdates) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mSmallShmems) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mLargeShmems) &&
+        ReadIPDLParam(aMsg, aIter, aActor, &aResult->mScrollUpdates)) {
+        return true;
+    }
+    return false;
+}
+
+} // namespace ipc
+} // namespace mozilla