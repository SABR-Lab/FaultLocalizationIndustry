# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/ipc/TabChild.cpp
# Commit: d34a8ec4785c
# Full Hash: d34a8ec4785c335bfad41186b200e4ad81d772a4
# Author: Barret Rennie <barret@brennie.ca>
# Date: 2019-04-04 04:33:36
# Regressor Bug: 1510569
# File Overlap Count: 1
# Description:
#   Bug 1510569 - Include innerDOMWindowID in the WebProgressData sent from TabChild to TabParent r=baku
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D24808
# ==============================================================================

diff -r b075ab8b8be4 -r d34a8ec4785c dom/ipc/TabChild.cpp
--- a/dom/ipc/TabChild.cpp	Wed Apr 03 17:29:40 2019 +0000
+++ b/dom/ipc/TabChild.cpp	Wed Apr 03 17:29:58 2019 +0000
@@ -3345,12 +3345,16 @@
     NS_ENSURE_SUCCESS(rv, rv);
     aWebProgressData->loadType() = loadType;
 
-    uint64_t DOMWindowID = 0;
-    // The DOM Window ID getter here may throw if the inner or outer windows
+    uint64_t outerDOMWindowID = 0;
+    uint64_t innerDOMWindowID = 0;
+    // The DOM Window ID getters here may throw if the inner or outer windows
     // aren't created yet or are destroyed at the time we're making this call
     // but that isn't fatal so ignore the exceptions here.
-    Unused << aWebProgress->GetDOMWindowID(&DOMWindowID);
-    aWebProgressData->DOMWindowID() = DOMWindowID;
+    Unused << aWebProgress->GetDOMWindowID(&outerDOMWindowID);
+    aWebProgressData->outerDOMWindowID() = outerDOMWindowID;
+
+    Unused << aWebProgress->GetInnerDOMWindowID(&innerDOMWindowID);
+    aWebProgressData->innerDOMWindowID() = innerDOMWindowID;
   }
 
   nsCOMPtr<nsIChannel> channel = do_QueryInterface(aRequest);