# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/style/nsFontFaceLoader.h
# Commit: 1b1a7d2f27c4
# Full Hash: 1b1a7d2f27c4428fb8a9ff42f0ba361ec0bb56e6
# Author: Cameron McCormack <cam@mcc.id.au>
# Date: 2019-06-07 09:47:19
# Regressor Bug: 1490792
# File Overlap Count: 1
# Description:
#   Bug 1490792 - Part 4: Perform OpenType sanitization OMT. r=jfkthame
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D33897
# ==============================================================================

diff -r f38b9eb31da7 -r 1b1a7d2f27c4 layout/style/nsFontFaceLoader.h
--- a/layout/style/nsFontFaceLoader.h	Thu Jun 06 18:23:31 2019 +0000
+++ b/layout/style/nsFontFaceLoader.h	Thu Jun 06 19:08:52 2019 +0000
@@ -13,6 +13,7 @@
 #include "mozilla/TimeStamp.h"
 #include "mozilla/dom/FontFaceSet.h"
 #include "nsCOMPtr.h"
+#include "nsIFontLoadCompleteCallback.h"
 #include "nsIStreamLoader.h"
 #include "nsIChannel.h"
 #include "nsIRequestObserver.h"
@@ -23,7 +24,8 @@
 class nsIPrincipal;
 
 class nsFontFaceLoader final : public nsIStreamLoaderObserver,
-                               public nsIRequestObserver {
+                               public nsIRequestObserver,
+                               public nsIFontLoadCompleteCallback {
  public:
   nsFontFaceLoader(gfxUserFontEntry* aFontToLoad, nsIURI* aFontURI,
                    mozilla::dom::FontFaceSet* aFontFaceSet,
@@ -46,6 +48,10 @@
 
   gfxUserFontEntry* GetUserFontEntry() const { return mUserFontEntry; }
 
+  // Called by the gfxUserFontEntry once it has finished the platform font
+  // loading.
+  NS_IMETHODIMP FontLoadComplete() final;
+
  protected:
   virtual ~nsFontFaceLoader();
 
