# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit-test/tests/fields/field_types.js
# Commit: d96f98f974e0
# Full Hash: d96f98f974e087224e0a1ef9be67e2fc63397d8b
# Author: Ashley Hauck <khyperia@mozilla.com>
# Date: 2019-03-21 04:34:45
# Regressor Bug: 1535166
# File Overlap Count: 1
# Description:
#   Bug 1535166 - Implement computed field names. r=jorendorff
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D23408
# ==============================================================================

diff -r c786b72a9d8e -r d96f98f974e0 js/src/jit-test/tests/fields/field_types.js
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/js/src/jit-test/tests/fields/field_types.js	Wed Mar 20 17:26:01 2019 +0000
@@ -0,0 +1,45 @@
+// |jit-test| --enable-experimental-fields
+
+class C {
+    [Math.sqrt(16)];
+    [Math.sqrt(8)] = 5 + 2;
+    "hi";
+    "bye" = {};
+    2 = 2;
+    0x101 = 2;
+    0o101 = 2;
+    0b101 = 2;
+    NaN = 0; // actually the field called "NaN", not the number
+    Infinity = 50; // actually the field called "Infinity", not the number
+    // all the keywords below are proper fields (?!?)
+    with = 0;
+    //static = 0; // doesn't work yet
+    async = 0;
+    get = 0;
+    set = 0;
+    export = 0;
+    function = 0;
+}
+
+let obj = new C();
+assertEq(Math.sqrt(16) in obj, true);
+assertEq(obj[Math.sqrt(16)], undefined);
+assertEq(obj[Math.sqrt(8)], 7);
+assertEq("hi" in obj, true);
+assertEq(obj["hi"], undefined);
+assertEq(typeof obj["bye"], "object");
+assertEq(obj[2], 2);
+assertEq(obj[0x101], 2);
+assertEq(obj[0o101], 2);
+assertEq(obj[0b101], 2);
+assertEq(obj.NaN, 0);
+assertEq(obj.Infinity, 50);
+assertEq(obj.with, 0);
+assertEq(obj.async, 0);
+assertEq(obj.get, 0);
+assertEq(obj.set, 0);
+assertEq(obj.export, 0);
+assertEq(obj.function, 0);
+
+if (typeof reportCompare === "function")
+  reportCompare(true, true);