# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: security/sandbox/chromium/sandbox/win/src/restricted_token.h
# Commit: 370c40e49230
# Full Hash: 370c40e4923073a87845b57c1f4851bacd9663da
# Author: Bob Owen <bobowencode@gmail.com>
# Date: 2019-06-12 21:42:35
# Regressor Bug: 1552160
# File Overlap Count: 2
# Description:
#   Bug 1552160 Part 1: Roll-up of chromium sandbox update and mozilla patches to get a running browser. r=jld,aklotz,tjr,bobowen
#   
#   This updates security/sandbox/chromium/ files to chromium commit 84108231f6e6e0772fb9a4643679ce76aa771e67.
#   
#   Existing and new patches applied from security/sandbox/chromium-shim/patches/with_update/ to give a compiling and mostly working browser.
# ==============================================================================

diff -r bd5ecd72f76c -r 370c40e49230 security/sandbox/chromium/sandbox/win/src/restricted_token.h
--- a/security/sandbox/chromium/sandbox/win/src/restricted_token.h	Wed Jun 12 21:55:59 2019 +1200
+++ b/security/sandbox/chromium/sandbox/win/src/restricted_token.h	Wed Jun 12 11:10:48 2019 +0100
@@ -6,6 +6,7 @@
 #define SANDBOX_SRC_RESTRICTED_TOKEN_H_
 
 #include <windows.h>
+
 #include <vector>
 
 #include "base/macros.h"
@@ -29,7 +30,7 @@
 // any token handle.
 // Sample usage:
 //    RestrictedToken restricted_token;
-//    DWORD err_code = restricted_token.Init(NULL);  // Use the current
+//    DWORD err_code = restricted_token.Init(nullptr);  // Use the current
 //                                                   // effective token
 //    if (ERROR_SUCCESS != err_code) {
 //      // handle error.
@@ -49,8 +50,8 @@
   ~RestrictedToken();
 
   // Initializes the RestrictedToken object with effective_token.
-  // If effective_token is NULL, it initializes the RestrictedToken object with
-  // the effective token of the current process.
+  // If effective_token is nullptr, it initializes the RestrictedToken object
+  // with the effective token of the current process.
   DWORD Init(HANDLE effective_token);
 
   // Creates a restricted token.
@@ -72,7 +73,7 @@
 
   // Lists all sids in the token and mark them as Deny Only except for those
   // present in the exceptions parameter. If there is no exception needed,
-  // the caller can pass an empty list or NULL for the exceptions
+  // the caller can pass an empty list or nullptr for the exceptions
   // parameter.
   //
   // If the function succeeds, the return value is ERROR_SUCCESS. If the
@@ -86,7 +87,7 @@
   //    restricted_token.AddAllSidsForDenyOnly(&sid_exceptions);
   // Note: A Sid marked for Deny Only in a token cannot be used to grant
   // access to any resource. It can only be used to deny access.
-  DWORD AddAllSidsForDenyOnly(std::vector<Sid> *exceptions);
+  DWORD AddAllSidsForDenyOnly(std::vector<Sid>* exceptions);
 
   // Adds a user or group SID for Deny Only in the restricted token.
   // Parameter: sid is the SID to add in the Deny Only list.
@@ -94,7 +95,7 @@
   //
   // Sample Usage:
   //    restricted_token.AddSidForDenyOnly(ATL::Sids::Admins().GetPSID());
-  DWORD AddSidForDenyOnly(const Sid &sid);
+  DWORD AddSidForDenyOnly(const Sid& sid);
 
   // Adds the user sid of the token for Deny Only in the restricted token.
   // If the function succeeds, the return value is ERROR_SUCCESS. If the
@@ -104,7 +105,7 @@
 
   // Lists all privileges in the token and add them to the list of privileges
   // to remove except for those present in the exceptions parameter. If
-  // there is no exception needed, the caller can pass an empty list or NULL
+  // there is no exception needed, the caller can pass an empty list or nullptr
   // for the exceptions parameter.
   //
   // If the function succeeds, the return value is ERROR_SUCCESS. If the
@@ -115,7 +116,7 @@
   //    std::vector<base::string16> privilege_exceptions;
   //    privilege_exceptions.push_back(SE_CHANGE_NOTIFY_NAME);
   //    restricted_token.DeleteAllPrivileges(&privilege_exceptions);
-  DWORD DeleteAllPrivileges(const std::vector<base::string16> *exceptions);
+  DWORD DeleteAllPrivileges(const std::vector<base::string16>* exceptions);
 
   // Adds a privilege to the list of privileges to remove in the restricted
   // token.
@@ -127,7 +128,7 @@
   //
   // Sample usage:
   //    restricted_token.DeletePrivilege(SE_LOAD_DRIVER_NAME);
-  DWORD DeletePrivilege(const wchar_t *privilege);
+  DWORD DeletePrivilege(const wchar_t* privilege);
 
   // Adds a SID to the list of restricting sids in the restricted token.
   // Parameter: sid is the sid to add to the list restricting sids.
@@ -139,7 +140,7 @@
   // access checks twice. The first time using your user SID and your groups,
   // and the second time using your list of restricting sids. The access has
   // to be granted in both places to get access to the resource requested.
-  DWORD AddRestrictingSid(const Sid &sid);
+  DWORD AddRestrictingSid(const Sid& sid);
 
   // Adds the logon sid of the token in the list of restricting sids for the
   // restricted token.