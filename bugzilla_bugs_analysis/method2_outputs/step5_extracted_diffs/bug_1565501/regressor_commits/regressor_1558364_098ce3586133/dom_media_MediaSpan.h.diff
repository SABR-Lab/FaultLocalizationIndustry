# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/MediaSpan.h
# Commit: 098ce3586133
# Full Hash: 098ce3586133fe57aa1d53fe4bdf541b26243563
# Author: Chris Pearce <cpearce@mozilla.com>
# Date: 2019-06-14 10:00:22
# Regressor Bug: 1558364
# File Overlap Count: 1
# Description:
#   Bug 1558364 - Convert TrackBuffersManager::mPendingInput into a MediaSpan. r=jya
#   
#   This allows us to avoid a (probably small) copy when we stash the pending input.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D34662
# ==============================================================================

diff -r 2e64d8db2b4b -r 098ce3586133 dom/media/MediaSpan.h
--- a/dom/media/MediaSpan.h	Fri Jun 14 00:31:02 2019 +0000
+++ b/dom/media/MediaSpan.h	Fri Jun 14 00:31:06 2019 +0000
@@ -64,6 +64,8 @@
     return (*mBuffer)[mStart + aIndex];
   }
 
+  bool Append(const MediaSpan& aBuffer) { return Append(aBuffer.Buffer()); }
+
   bool Append(MediaByteBuffer* aBuffer) {
     if (!aBuffer) {
       return true;