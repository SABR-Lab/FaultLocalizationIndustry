# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit-test/tests/debug/Debugger-setInstrumentation-03.js
# Commit: 27cea02bdee4
# Full Hash: 27cea02bdee4b9478bd89a07354a6eebd3d1d76b
# Author: Iain Ireland <iireland@mozilla.com>
# Date: 2021-06-01 09:43:14
# Regressor Bug: 1554524
# File Overlap Count: 1
# Description:
#   Bug 1624792: Remove instrumentation tests r=tcampbell
#   
#   This patch stack is based on the patches for bug 1554524 in more-or-less reverse order, with a few modifications so that the intermediate patches build. This is part 8.
#   
#   Depends on D116304
# ==============================================================================

diff -r 56f9a8184a88 -r 27cea02bdee4 js/src/jit-test/tests/debug/Debugger-setInstrumentation-03.js
--- a/js/src/jit-test/tests/debug/Debugger-setInstrumentation-03.js	Tue Jun 01 01:31:19 2021 +0000
+++ /dev/null	Thu Jan 01 00:00:00 1970 +0000
@@ -1,72 +0,0 @@
-// Test instrumentation functionality when using generators and async functions.
-
-load(libdir + 'eqArrayHelper.js');
-
-var g = newGlobal({ newCompartment: true });
-var dbg = Debugger(g);
-var gdbg = dbg.addDebuggee(g);
-
-var allScripts = [];
-
-function setScriptId(script) {
-  script.setInstrumentationId(allScripts.length);
-  allScripts.push(script);
-
-  script.getChildScripts().forEach(setScriptId);
-}
-
-dbg.onNewScript = setScriptId;
-
-function getOffsetLine(scriptId, offset) {
-  const script = allScripts[scriptId];
-  return script.getOffsetMetadata(offset).lineNumber;
-}
-
-const executedLines = [];
-gdbg.setInstrumentation(
-  gdbg.makeDebuggeeValue((kind, script, offset) => {
-    executedLines.push(getOffsetLine(script, offset));
-  }),
-  ["breakpoint"]
-);
-
-function testFunction(fn, expected) {
-  gdbg.setInstrumentationActive(true);
-
-  for (var i = 0; i < 5; i++) {
-    executedLines.length = 0;
-    fn();
-    assertEqArray(executedLines, expected);
-  }
-
-  gdbg.setInstrumentationActive(false);
-}
-
-g.eval(`
-async function asyncfun() {
-  await Promise.resolve(0);
-  await Promise.resolve(1);
-  var a = 0;
-  await Promise.resolve(2);
-  a++;
-}
-`);
-
-testFunction(() => {
-  async function f() { await g.asyncfun(); }
-  f();
-  drainJobQueue();
-}, [3, 3, 4, 4, 5, 6, 6, 7]);
-
-g.eval(`
-function *generator() {
-  yield 1;
-  var a = 0;
-  yield 2;
-  a++;
-}
-`);
-
-testFunction(() => {
-  for (const i of g.generator()) {}
-}, [3, 4, 5, 6]);