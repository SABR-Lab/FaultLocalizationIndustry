# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit-test/tests/debug/Debugger-setInstrumentation-05.js
# Commit: 27cea02bdee4
# Full Hash: 27cea02bdee4b9478bd89a07354a6eebd3d1d76b
# Author: Iain Ireland <iireland@mozilla.com>
# Date: 2021-06-01 09:43:14
# Regressor Bug: 1554524
# File Overlap Count: 1
# Description:
#   Bug 1624792: Remove instrumentation tests r=tcampbell
#   
#   This patch stack is based on the patches for bug 1554524 in more-or-less reverse order, with a few modifications so that the intermediate patches build. This is part 8.
#   
#   Depends on D116304
# ==============================================================================

diff -r 56f9a8184a88 -r 27cea02bdee4 js/src/jit-test/tests/debug/Debugger-setInstrumentation-05.js
--- a/js/src/jit-test/tests/debug/Debugger-setInstrumentation-05.js	Tue Jun 01 01:31:19 2021 +0000
+++ /dev/null	Thu Jan 01 00:00:00 1970 +0000
@@ -1,43 +0,0 @@
-// Test some inputs that should fail instrumentation validation.
-
-var g = newGlobal({ newCompartment: true });
-var dbg = Debugger(g);
-var gdbg = dbg.addDebuggee(g);
-
-function assertThrows(fn, text) {
-  try {
-    fn();
-    assertEq(true, false);
-  } catch (e) {
-    if (!e.toString().includes(text)) {
-      print(`Expected ${text}, got ${e}`);
-      assertEq(true, false);
-    }
-  }
-}
-
-assertThrows(() => gdbg.setInstrumentation(undefined, []),
-            "Instrumentation callback must be an object");
-assertThrows(() => gdbg.setInstrumentation(gdbg.makeDebuggeeValue({}), ["foo"]),
-            "Unknown instrumentation kind");
-
-let lastScript = null;
-dbg.onNewScript = script => lastScript = script;
-
-assertThrows(() => {
-  g.eval(`x = 3`);
-  lastScript.setInstrumentationId("twelve");
-}, "Script instrumentation ID must be a number");
-
-assertThrows(() => {
-  g.eval(`x = 3`);
-  lastScript.setInstrumentationId(10);
-  lastScript.setInstrumentationId(11);
-}, "Script instrumentation ID is already set");
-
-dbg.onNewScript = undefined;
-gdbg.setInstrumentation(gdbg.makeDebuggeeValue({}), ["main"]);
-gdbg.setInstrumentationActive(true);
-
-assertThrows(() => { g.eval(`x = 3`) },
-             "Instrumentation ID not set for script");