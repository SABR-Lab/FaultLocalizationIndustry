# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: toolkit/components/url-classifier/Classifier.h
# Commit: df6b5b4da8b9
# Full Hash: df6b5b4da8b909d61701356243dd95f20e983bf0
# Author: dlee <dlee@mozilla.com>
# Date: 2019-08-21 16:47:43
# Regressor Bug: 1562822
# File Overlap Count: 1
# Description:
#   Bug 1562822 - P3. Reset all the tables that fail to apply a Safe Browsing update. r=gcp
#   
#   Before this patch, when Safe Browsing updating process discovers an error, it
#   quits and resets the table failing to update.
#   After this patch, updating process will continue to run when an error
# ==============================================================================

diff -r d49cd2aa4568 -r df6b5b4da8b9 toolkit/components/url-classifier/Classifier.h
--- a/toolkit/components/url-classifier/Classifier.h	Wed Aug 21 12:08:03 2019 +0000
+++ b/toolkit/components/url-classifier/Classifier.h	Wed Aug 21 12:08:12 2019 +0000
@@ -187,7 +187,7 @@
    * successful or not.
    */
   nsresult ApplyUpdatesBackground(TableUpdateArray& aUpdates,
-                                  nsACString& aFailedTableName);
+                                  nsTArray<nsCString>& aFailedTableNames);
 
   /**
    * The "foreground" part of ApplyUpdates. The in-use data (in-memory and
@@ -200,7 +200,7 @@
    * |aBackgroundRv| will be returned to forward the background update result.
    */
   nsresult ApplyUpdatesForeground(nsresult aBackgroundRv,
-                                  const nsACString& aFailedTableName);
+                                  const nsTArray<nsCString>& aFailedTableNames);
 
   // Used by worker thread and update thread to abort current operation.
   bool ShouldAbort() const;
