# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/wr/webrender/src/clip.rs
# Commit: 32951c9cc186
# Full Hash: 32951c9cc186f044c7a59e0b132339139dfb9713
# Author: Nicolas Silva <nsilva@mozilla.com>
# Date: 2019-09-18 09:56:40
# Regressor Bug: 1570081
# File Overlap Count: 1
# Description:
#   Bug 1570081 - Support changing the blob image visible rect in WebRender. r=jrmuizel
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D39911
# ==============================================================================

diff -r 37598891cea6 -r 32951c9cc186 gfx/wr/webrender/src/clip.rs
--- a/gfx/wr/webrender/src/clip.rs	Tue Sep 17 09:20:04 2019 +0000
+++ b/gfx/wr/webrender/src/clip.rs	Tue Sep 17 09:12:26 2019 +0000
@@ -380,10 +380,6 @@
                         rect.size,
                     );
 
-                    // TODO: As a followup, if the image is a tiled blob, the device_image_rect below
-                    // will be set to the blob's visible area.
-                    let device_image_rect = DeviceIntRect::from_size(props.descriptor.size);
-
                     for Repetition { origin, .. } in repetitions {
                         let layout_image_rect = LayoutRect {
                             origin,
@@ -392,7 +388,7 @@
                         let tiles = image::tiles(
                             &layout_image_rect,
                             &visible_rect,
-                            &device_image_rect,
+                            &props.visible_rect,
                             tile_size as i32,
                         );
                         for tile in tiles {