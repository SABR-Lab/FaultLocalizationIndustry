# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: media/webrtc/signaling/gtest/mediapipeline_unittest.cpp
# Commit: 243a33803d16
# Full Hash: 243a33803d16d50cfcc8cf0a5c4739a5ed08dc55
# Author: Andreas Pehrson <apehrson@mozilla.com>
# Date: 2018-11-23 21:37:23
# Regressor Bug: 1172394
# File Overlap Count: 1
# Description:
#   Bug 1423241 - Refactor DecodedStream. r=jya
#   
#   This removes DecodedStream's use of MediaStreamListener in favor of
#   MediaStreamTrackListener. This change has however rippled through to a lot
#   more cleanup, per below.
# ==============================================================================

diff -r 12f91d8a1f69 -r 243a33803d16 media/webrtc/signaling/gtest/mediapipeline_unittest.cpp
--- a/media/webrtc/signaling/gtest/mediapipeline_unittest.cpp	Fri Nov 23 15:01:48 2018 +0000
+++ b/media/webrtc/signaling/gtest/mediapipeline_unittest.cpp	Fri Nov 23 15:02:03 2018 +0000
@@ -92,7 +92,7 @@
 public:
 
   FakeAudioStreamTrack()
-    : AudioStreamTrack(new DOMMediaStream(nullptr, nullptr), 0, 1,
+    : AudioStreamTrack(new DOMMediaStream(nullptr), 0, 1,
                        new FakeMediaStreamTrackSource())
     , mMutex("Fake AudioStreamTrack")
     , mStop(false)
@@ -119,11 +119,6 @@
     mListeners.push_back(aListener);
   }
 
-  virtual already_AddRefed<mozilla::dom::MediaStreamTrack> CloneInternal(DOMMediaStream* aOwningStream, TrackID aTrackID) override
-  {
-    return RefPtr<MediaStreamTrack>(new FakeAudioStreamTrack).forget();
-  }
-
   private:
     std::vector<MediaStreamTrackListener*> mListeners;
     mozilla::Mutex mMutex;
