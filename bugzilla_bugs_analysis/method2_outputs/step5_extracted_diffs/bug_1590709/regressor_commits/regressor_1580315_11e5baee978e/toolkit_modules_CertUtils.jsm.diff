# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: toolkit/modules/CertUtils.jsm
# Commit: 11e5baee978e
# Full Hash: 11e5baee978e8f98fa3795e430dd60c7600c9e8c
# Author: Sean Feng <sefeng@mozilla.com>
# Date: 2019-10-22 09:46:06
# Regressor Bug: 1580315
# File Overlap Count: 2
# Description:
#   Bug 1580315 - Convert certList to raw array for nsITransportSecurityInfo r=keeler,Ehsan,kershaw
#   
#   This patch converts the certList attribute of nsITransportSecurityInfo
#   from nsIX509CertList to Array<nsIx509Cert>
#   
# ==============================================================================

diff -r 341d72ef4bf5 -r 11e5baee978e toolkit/modules/CertUtils.jsm
--- a/toolkit/modules/CertUtils.jsm	Mon Oct 21 19:33:02 2019 +0000
+++ b/toolkit/modules/CertUtils.jsm	Mon Oct 21 19:49:01 2019 +0000
@@ -169,8 +169,9 @@
   }
 
   let issuerCert = null;
-  // eslint-disable-next-line no-empty
-  for (issuerCert of secInfo.succeededCertChain.getEnumerator()) {
+  if (secInfo.succeededCertChain.length) {
+    issuerCert =
+      secInfo.succeededCertChain[secInfo.succeededCertChain.length - 1];
   }
 
   const certNotBuiltInErr = "Certificate issuer is not built-in.";