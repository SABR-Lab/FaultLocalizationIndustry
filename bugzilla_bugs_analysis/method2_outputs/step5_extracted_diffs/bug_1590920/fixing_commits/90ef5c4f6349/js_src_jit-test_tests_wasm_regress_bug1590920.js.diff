# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: js/src/jit-test/tests/wasm/regress/bug1590920.js
# Commit: 90ef5c4f6349
# Full Hash: 90ef5c4f6349447e72cfd2fc50ad103969a66464
# Author: Andy Wingo <wingo@igalia.com>
# Date: 2019-10-24 14:47:35
# Description:
#   Bug 1590920 - Fix popBlockResults(Empty) for jump to outer block r=lth
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D50448
# ==============================================================================

diff -r 61a4022333fa -r 90ef5c4f6349 js/src/jit-test/tests/wasm/regress/bug1590920.js
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/js/src/jit-test/tests/wasm/regress/bug1590920.js	Thu Oct 24 09:26:17 2019 +0000
@@ -0,0 +1,11 @@
+let { exports } = new WebAssembly.Instance(new WebAssembly.Module(
+    wasmTextToBinary(`
+      (module
+        (func (export "g")
+          (drop
+            (block (result i32)
+              (i32.clz (i32.const 1))
+              (if
+                (i32.const 1)
+                (return))))))`)));
+exports.g();