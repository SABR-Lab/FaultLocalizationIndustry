# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/indexedDB/IDBCursor.cpp
# Commit: cddcfdcb52f6
# Full Hash: cddcfdcb52f6a465f62bdfb36bf9dc9a8dbd11a7
# Author: Simon Giesecke <sgiesecke@mozilla.com>
# Date: 2019-10-03 16:42:51
# Regressor Bug: 1168606
# File Overlap Count: 1
# Description:
#   Bug 1168606 - Use const where easily possible. r=ttung,asuth
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D43631
# ==============================================================================

diff -r fc11a47c3ea7 -r cddcfdcb52f6 dom/indexedDB/IDBCursor.cpp
--- a/dom/indexedDB/IDBCursor.cpp	Thu Oct 03 07:56:32 2019 +0000
+++ b/dom/indexedDB/IDBCursor.cpp	Thu Oct 03 07:56:45 2019 +0000
@@ -739,12 +739,9 @@
   MOZ_ASSERT(mType == Type_ObjectStore || mType == Type_Index);
   MOZ_ASSERT(!mKey.IsUnset());
 
-  IDBObjectStore* objectStore;
-  if (mType == Type_ObjectStore) {
-    objectStore = mSourceObjectStore;
-  } else {
-    objectStore = mSourceIndex->ObjectStore();
-  }
+  IDBObjectStore* const objectStore = mType == Type_ObjectStore
+                                          ? mSourceObjectStore.get()
+                                          : mSourceIndex->ObjectStore();
 
   MOZ_ASSERT(objectStore);
 