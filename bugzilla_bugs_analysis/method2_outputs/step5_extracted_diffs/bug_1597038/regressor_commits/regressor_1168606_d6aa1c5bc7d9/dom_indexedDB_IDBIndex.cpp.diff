# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/indexedDB/IDBIndex.cpp
# Commit: d6aa1c5bc7d9
# Full Hash: d6aa1c5bc7d96f6a9bc0a76508c50cc852cf3f2e
# Author: Simon Giesecke <sgiesecke@mozilla.com>
# Date: 2019-09-10 15:51:07
# Regressor Bug: 1168606
# File Overlap Count: 1
# Description:
#   Bug 1168606 - Change definition of OpenCursorParams subtypes to allow reducing duplicated code r=ttung
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D40955
# ==============================================================================

diff -r 6e46dad972c8 -r d6aa1c5bc7d9 dom/indexedDB/IDBIndex.cpp
--- a/dom/indexedDB/IDBIndex.cpp	Tue Sep 10 16:47:08 2019 +0300
+++ b/dom/indexedDB/IDBIndex.cpp	Tue Sep 10 16:47:26 2019 +0300
@@ -458,18 +458,22 @@
   OpenCursorParams params;
   if (aKeysOnly) {
     IndexOpenKeyCursorParams openParams;
-    openParams.objectStoreId() = objectStoreId;
-    openParams.indexId() = indexId;
-    openParams.optionalKeyRange() = std::move(optionalKeyRange);
-    openParams.direction() = direction;
+    openParams.commonIndexParams().commonParams().objectStoreId() =
+        objectStoreId;
+    openParams.commonIndexParams().indexId() = indexId;
+    openParams.commonIndexParams().commonParams().optionalKeyRange() =
+        std::move(optionalKeyRange);
+    openParams.commonIndexParams().commonParams().direction() = direction;
 
     params = std::move(openParams);
   } else {
     IndexOpenCursorParams openParams;
-    openParams.objectStoreId() = objectStoreId;
-    openParams.indexId() = indexId;
-    openParams.optionalKeyRange() = std::move(optionalKeyRange);
-    openParams.direction() = direction;
+    openParams.commonIndexParams().commonParams().objectStoreId() =
+        objectStoreId;
+    openParams.commonIndexParams().indexId() = indexId;
+    openParams.commonIndexParams().commonParams().optionalKeyRange() =
+        std::move(optionalKeyRange);
+    openParams.commonIndexParams().commonParams().direction() = direction;
 
     params = std::move(openParams);
   }