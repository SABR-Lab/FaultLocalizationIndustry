# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit/BaselineCodeGen.h
# Commit: 7bd0784e7a6f
# Full Hash: 7bd0784e7a6f3702152bdca395b2305f16ca0479
# Author: Chris Fallin <cfallin@mozilla.com>
# Date: 2019-12-03 09:48:30
# Regressor Bug: 1598347
# File Overlap Count: 1
# Description:
#   Bug 1598347, part 2: pass "inner singleton" to NEWOBJECT group logic. r=djvj,iain
#   
#   This change passes through the "inner singleton" status of a particular
#   object literal to the group-assignment logic for JSOP_NEWOBJECT by
#   instead using a variant opcode, JSOP_NEWOBJECT_WITHGROUP.  "Inner
# ==============================================================================

diff -r 6da3c648995f -r 7bd0784e7a6f js/src/jit/BaselineCodeGen.h
--- a/js/src/jit/BaselineCodeGen.h	Wed Nov 27 22:48:40 2019 +0000
+++ b/js/src/jit/BaselineCodeGen.h	Wed Nov 27 22:49:33 2019 +0000
@@ -95,6 +95,7 @@
   _(JSOP_NEWARRAY_COPYONWRITE)      \
   _(JSOP_INITELEM_ARRAY)            \
   _(JSOP_NEWOBJECT)                 \
+  _(JSOP_NEWOBJECT_WITHGROUP)       \
   _(JSOP_NEWINIT)                   \
   _(JSOP_INITELEM)                  \
   _(JSOP_INITELEM_GETTER)           \
@@ -444,6 +445,9 @@
   // Handles JSOP_LT, JSOP_GT, and friends
   MOZ_MUST_USE bool emitCompare();
 
+  // Handles JSOP_NEWOBJECT, JSOP_NEWOBJECT_WITHGROUP, and JSOP_NEWINIT.
+  MOZ_MUST_USE bool emitNewObject();
+
   // For a JOF_JUMP op, jumps to the op's jump target.
   void emitJump();
 