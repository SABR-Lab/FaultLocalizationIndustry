# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/angle/checkout/src/compiler/translator/StaticType.h
# Commit: 13282d7a47a5
# Full Hash: 13282d7a47a57a73be8d060efd9645b4d642f03e
# Author: Miko Mynttinen <mikokm@gmail.com>
# Date: 2019-09-08 09:46:52
# Regressor Bug: 1578576
# File Overlap Count: 4
# Description:
#   Bug 1578576 - Part 2: Update to ANGLE 3865 r=jgilbert
#   
#   Depends on D44561
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D44579
# ==============================================================================

diff -r 3064469c073d -r 13282d7a47a5 gfx/angle/checkout/src/compiler/translator/StaticType.h
--- a/gfx/angle/checkout/src/compiler/translator/StaticType.h	Sat Sep 07 13:36:46 2019 +0000
+++ b/gfx/angle/checkout/src/compiler/translator/StaticType.h	Sat Sep 07 13:38:36 2019 +0000
@@ -53,7 +53,7 @@
 
 // This "variable" contains the mangled names for every constexpr-generated TType.
 // If kMangledNameInstance<B, P, Q, PS, SS> is used anywhere (specifally
-// in kInstance, below), this is where the appropriate type will be stored.
+// in instance, below), this is where the appropriate type will be stored.
 template <TBasicType basicType,
           TPrecision precision,
           TQualifier qualifier,
@@ -67,14 +67,18 @@
 //
 
 // This "variable" contains every constexpr-generated TType.
-// If kInstance<B, P, Q, PS, SS> is used anywhere (specifally
+// If instance<B, P, Q, PS, SS> is used anywhere (specifally
 // in Get, below), this is where the appropriate type will be stored.
+//
+// TODO(crbug.com/981610): This is constexpr but doesn't follow the kConstant naming convention
+// because TType has a mutable member that prevents it from being in .data.rel.ro and makes the
+// Android Binary Size builder complain when ANGLE is rolled in Chromium.
 template <TBasicType basicType,
           TPrecision precision,
           TQualifier qualifier,
           unsigned char primarySize,
           unsigned char secondarySize>
-static constexpr TType kInstance =
+static constexpr TType instance =
     TType(basicType,
           precision,
           qualifier,
@@ -97,7 +101,7 @@
 {
     static_assert(1 <= primarySize && primarySize <= 4, "primarySize out of bounds");
     static_assert(1 <= secondarySize && secondarySize <= 4, "secondarySize out of bounds");
-    return &Helpers::kInstance<basicType, precision, qualifier, primarySize, secondarySize>;
+    return &Helpers::instance<basicType, precision, qualifier, primarySize, secondarySize>;
 }
 
 //