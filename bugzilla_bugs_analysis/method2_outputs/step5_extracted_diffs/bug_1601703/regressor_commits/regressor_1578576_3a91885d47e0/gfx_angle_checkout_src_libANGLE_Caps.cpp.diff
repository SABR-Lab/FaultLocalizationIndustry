# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/angle/checkout/src/libANGLE/Caps.cpp
# Commit: 3a91885d47e0
# Full Hash: 3a91885d47e0ef7fba9749562d52300eea67c651
# Author: Miko Mynttinen <mikokm@gmail.com>
# Date: 2019-11-11 21:52:52
# Regressor Bug: 1578576
# File Overlap Count: 4
# Description:
#   Bug 1578576 - Part 2: Update to ANGLE 3865 r=jgilbert
#   
#   Depends on D44561
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D44579
# ==============================================================================

diff -r 77cee77c0307 -r 3a91885d47e0 gfx/angle/checkout/src/libANGLE/Caps.cpp
--- a/gfx/angle/checkout/src/libANGLE/Caps.cpp	Fri Nov 08 16:41:42 2019 +0000
+++ b/gfx/angle/checkout/src/libANGLE/Caps.cpp	Fri Nov 08 17:06:00 2019 +0000
@@ -29,13 +29,7 @@
 namespace gl
 {
 
-TextureCaps::TextureCaps()
-    : texturable(false),
-      filterable(false),
-      textureAttachment(false),
-      renderbuffer(false),
-      sampleCounts()
-{}
+TextureCaps::TextureCaps() = default;
 
 TextureCaps::TextureCaps(const TextureCaps &other) = default;
 
@@ -81,8 +75,7 @@
     if (internalFormatInfo.isRequiredRenderbufferFormat(clientVersion))
     {
         if ((clientVersion.major >= 3 && clientVersion.minor >= 1) ||
-            (clientVersion.major >= 3 && internalFormatInfo.componentType != GL_UNSIGNED_INT &&
-             internalFormatInfo.componentType != GL_INT))
+            (clientVersion.major >= 3 && !internalFormatInfo.isInt()))
         {
             caps.sampleCounts.insert(4);
         }
@@ -138,128 +131,7 @@
     }
 }
 
-Extensions::Extensions()
-    : elementIndexUint(false),
-      packedDepthStencil(false),
-      getProgramBinary(false),
-      rgb8rgba8(false),
-      textureFormatBGRA8888(false),
-      readFormatBGRA(false),
-      pixelBufferObject(false),
-      mapBuffer(false),
-      mapBufferRange(false),
-      colorBufferHalfFloat(false),
-      textureHalfFloat(false),
-      textureHalfFloatLinear(false),
-      textureFloat(false),
-      textureFloatLinear(false),
-      textureRG(false),
-      textureCompressionDXT1(false),
-      textureCompressionDXT3(false),
-      textureCompressionDXT5(false),
-      textureCompressionS3TCsRGB(false),
-      textureCompressionASTCHDR(false),
-      textureCompressionASTCLDR(false),
-      textureCompressionBPTC(false),
-      compressedETC1RGB8Texture(false),
-      compressedETC2RGB8Texture(false),
-      compressedETC2sRGB8Texture(false),
-      compressedETC2PunchthroughARGB8Texture(false),
-      compressedETC2PunchthroughAsRGB8AlphaTexture(false),
-      compressedETC2RGBA8Texture(false),
-      compressedETC2sRGB8Alpha8Texture(false),
-      compressedEACR11UnsignedTexture(false),
-      compressedEACR11SignedTexture(false),
-      compressedEACRG11UnsignedTexture(false),
-      compressedEACRG11SignedTexture(false),
-      compressedTextureETC(false),
-      sRGB(false),
-      depthTextures(false),
-      depth32(false),
-      textureStorage(false),
-      textureNPOT(false),
-      drawBuffers(false),
-      textureFilterAnisotropic(false),
-      maxTextureAnisotropy(0.0f),
-      occlusionQueryBoolean(false),
-      fence(false),
-      disjointTimerQuery(false),
-      queryCounterBitsTimeElapsed(0),
-      queryCounterBitsTimestamp(0),
-      robustness(false),
-      robustBufferAccessBehavior(false),
-      blendMinMax(false),
-      framebufferBlit(false),
-      framebufferMultisample(false),
-      instancedArraysANGLE(false),
-      instancedArraysEXT(false),
-      packReverseRowOrder(false),
-      standardDerivatives(false),
-      shaderTextureLOD(false),
-      fragDepth(false),
-      multiview2(false),
-      maxViews(1u),
-      textureUsage(false),
-      translatedShaderSource(false),
-      fboRenderMipmap(false),
-      discardFramebuffer(false),
-      debugMarker(false),
-      eglImage(false),
-      eglImageExternal(false),
-      eglImageExternalEssl3(false),
-      eglSync(false),
-      eglStreamConsumerExternal(false),
-      unpackSubimage(false),
-      packSubimage(false),
-      vertexArrayObject(false),
-      debug(false),
-      maxDebugMessageLength(0),
-      maxDebugLoggedMessages(0),
-      maxDebugGroupStackDepth(0),
-      maxLabelLength(0),
-      noError(false),
-      lossyETCDecode(false),
-      bindUniformLocation(false),
-      syncQuery(false),
-      copyTexture(false),
-      copyCompressedTexture(false),
-      copyTexture3d(false),
-      webglCompatibility(false),
-      requestExtension(false),
-      bindGeneratesResource(false),
-      robustClientMemory(false),
-      textureBorderClamp(false),
-      textureSRGBDecode(false),
-      sRGBWriteControl(false),
-      colorBufferFloatRGB(false),
-      colorBufferFloatRGBA(false),
-      colorBufferFloat(false),
-      multisampleCompatibility(false),
-      framebufferMixedSamples(false),
-      textureNorm16(false),
-      pathRendering(false),
-      surfacelessContext(false),
-      clientArrays(false),
-      robustResourceInitialization(false),
-      programCacheControl(false),
-      textureRectangle(false),
-      geometryShader(false),
-      pointSizeArray(false),
-      textureCubeMap(false),
-      pointSprite(false),
-      drawTexture(false),
-      explicitContextGles1(false),
-      explicitContext(false),
-      parallelShaderCompile(false),
-      textureStorageMultisample2DArray(false),
-      multiviewMultisample(false),
-      blendFuncExtended(false),
-      maxDualSourceDrawBuffers(0),
-      floatBlend(false),
-      memorySize(false),
-      textureMultisample(false),
-      multiDraw(false)
-{}
+Extensions::Extensions() = default;
 
 Extensions::Extensions(const Extensions &other) = default;
 
@@ -278,16 +150,7 @@
     return extensionStrings;
 }
 
-Limitations::Limitations()
-    : noFrontFacingSupport(false),
-      noSampleAlphaToCoverageSupport(false),
-      attributeZeroRequiresZeroDivisorInEXT(false),
-      noSeparateStencilRefsAndMasks(false),
-      shadersRequireIndexedLoopValidation(false),
-      noSimultaneousConstantColorAndAlphaBlendFunc(false),
-      noFlexibleVaryingPacking(false),
-      noDoubleBoundTransformFeedbackBuffers(false)
-{}
+Limitations::Limitations() = default;
 
 static bool GetFormatSupportBase(const TextureCapsMap &textureCaps,
                                  const GLenum *requiredFormats,
@@ -499,8 +362,8 @@
     return GetFormatSupport(textureCaps, requiredFormats, true, true, false, false);
 }
 
-// Check for GL_KHR_texture_compression_astc_hdr and GL_KHR_texture_compression_astc_ldr
-static bool DetermineASTCTextureSupport(const TextureCapsMap &textureCaps)
+// Check for GL_KHR_texture_compression_astc_ldr
+static bool DetermineASTCLDRTextureSupport(const TextureCapsMap &textureCaps)
 {
     constexpr GLenum requiredFormats[] = {
         GL_COMPRESSED_RGBA_ASTC_4x4_KHR,           GL_COMPRESSED_RGBA_ASTC_5x4_KHR,
@@ -522,6 +385,31 @@
     return GetFormatSupport(textureCaps, requiredFormats, true, true, false, false);
 }
 
+// Check for GL_OES_texture_compression_astc
+static bool DetermineASTCOESTExtureSupport(const TextureCapsMap &textureCaps)
+{
+    if (!DetermineASTCLDRTextureSupport(textureCaps))
+    {
+        return false;
+    }
+
+    // The OES version of the extension also requires the 3D ASTC formats
+    constexpr GLenum requiredFormats[] = {
+        GL_COMPRESSED_RGBA_ASTC_3x3x3_OES,         GL_COMPRESSED_RGBA_ASTC_4x3x3_OES,
+        GL_COMPRESSED_RGBA_ASTC_4x4x3_OES,         GL_COMPRESSED_RGBA_ASTC_4x4x4_OES,
+        GL_COMPRESSED_RGBA_ASTC_5x4x4_OES,         GL_COMPRESSED_RGBA_ASTC_5x5x4_OES,
+        GL_COMPRESSED_RGBA_ASTC_5x5x5_OES,         GL_COMPRESSED_RGBA_ASTC_6x5x5_OES,
+        GL_COMPRESSED_RGBA_ASTC_6x6x5_OES,         GL_COMPRESSED_RGBA_ASTC_6x6x6_OES,
+        GL_COMPRESSED_SRGB8_ALPHA8_ASTC_3x3x3_OES, GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4x3x3_OES,
+        GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4x4x3_OES, GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4x4x4_OES,
+        GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5x4x4_OES, GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5x5x4_OES,
+        GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5x5x5_OES, GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6x5x5_OES,
+        GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6x6x5_OES, GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6x6x6_OES,
+    };
+
+    return GetFormatSupport(textureCaps, requiredFormats, true, true, false, false);
+}
+
 // Check for GL_ETC1_RGB8_OES
 static bool DetermineETC1RGB8TextureSupport(const TextureCapsMap &textureCaps)
 {
@@ -649,7 +537,7 @@
 }
 
 // Check for GL_ANGLE_depth_texture
-static bool DetermineDepthTextureSupport(const TextureCapsMap &textureCaps)
+static bool DetermineDepthTextureANGLESupport(const TextureCapsMap &textureCaps)
 {
     constexpr GLenum requiredFormats[] = {
         GL_DEPTH_COMPONENT16,
@@ -660,6 +548,27 @@
     return GetFormatSupport(textureCaps, requiredFormats, true, true, true, true);
 }
 
+// Check for GL_OES_depth_texture
+static bool DetermineDepthTextureOESSupport(const TextureCapsMap &textureCaps)
+{
+    constexpr GLenum requiredFormats[] = {
+        GL_DEPTH_COMPONENT16,
+        GL_DEPTH_COMPONENT32_OES,
+    };
+
+    return GetFormatSupport(textureCaps, requiredFormats, true, true, true, true);
+}
+
+// Check for GL_OES_depth24
+static bool DetermineDepth24OESSupport(const TextureCapsMap &textureCaps)
+{
+    constexpr GLenum requiredFormats[] = {
+        GL_DEPTH_COMPONENT24_OES,
+    };
+
+    return GetFormatSupport(textureCaps, requiredFormats, false, false, false, true);
+}
+
 // Check for GL_OES_depth32
 static bool DetermineDepth32Support(const TextureCapsMap &textureCaps)
 {
@@ -762,12 +671,12 @@
     textureCompressionDXT1 = DetermineDXT1TextureSupport(textureCaps);
     textureCompressionDXT3 = DetermineDXT3TextureSupport(textureCaps);
     textureCompressionDXT5 = DetermineDXT5TextureSupport(textureCaps);
-    textureCompressionS3TCsRGB = DetermineS3TCsRGBTextureSupport(textureCaps);
-    textureCompressionASTCHDR  = DetermineASTCTextureSupport(textureCaps);
-    textureCompressionASTCLDR  = textureCompressionASTCHDR;
-    compressedETC1RGB8Texture  = DetermineETC1RGB8TextureSupport(textureCaps);
-    compressedETC2RGB8Texture  = DetermineETC2RGB8TextureSupport(textureCaps);
-    compressedETC2sRGB8Texture = DetermineETC2sRGB8TextureSupport(textureCaps);
+    textureCompressionS3TCsRGB   = DetermineS3TCsRGBTextureSupport(textureCaps);
+    textureCompressionASTCLDRKHR = DetermineASTCLDRTextureSupport(textureCaps);
+    textureCompressionASTCOES    = DetermineASTCOESTExtureSupport(textureCaps);
+    compressedETC1RGB8Texture    = DetermineETC1RGB8TextureSupport(textureCaps);
+    compressedETC2RGB8Texture    = DetermineETC2RGB8TextureSupport(textureCaps);
+    compressedETC2sRGB8Texture   = DetermineETC2sRGB8TextureSupport(textureCaps);
     compressedETC2PunchthroughARGB8Texture =
         DetermineETC2PunchthroughARGB8TextureSupport(textureCaps);
     compressedETC2PunchthroughAsRGB8AlphaTexture =
@@ -779,7 +688,9 @@
     compressedEACRG11UnsignedTexture = DetermineEACRG11UnsignedTextureSupport(textureCaps);
     compressedEACRG11SignedTexture   = DetermineEACRG11SignedTextureSupport(textureCaps);
     sRGB                             = DetermineSRGBTextureSupport(textureCaps);
-    depthTextures                    = DetermineDepthTextureSupport(textureCaps);
+    depthTextureANGLE                = DetermineDepthTextureANGLESupport(textureCaps);
+    depthTextureOES                  = DetermineDepthTextureOESSupport(textureCaps);
+    depth24OES                       = DetermineDepth24OESSupport(textureCaps);
     depth32                          = DetermineDepth32Support(textureCaps);
     colorBufferFloatRGB              = DetermineColorBufferFloatRGBSupport(textureCaps);
     colorBufferFloatRGBA             = DetermineColorBufferFloatRGBASupport(textureCaps);
@@ -825,8 +736,9 @@
         map["GL_ANGLE_texture_compression_dxt3"] = enableableExtension(&Extensions::textureCompressionDXT3);
         map["GL_ANGLE_texture_compression_dxt5"] = enableableExtension(&Extensions::textureCompressionDXT5);
         map["GL_EXT_texture_compression_s3tc_srgb"] = enableableExtension(&Extensions::textureCompressionS3TCsRGB);
-        map["GL_KHR_texture_compression_astc_hdr"] = enableableExtension(&Extensions::textureCompressionASTCHDR);
-        map["GL_KHR_texture_compression_astc_ldr"] = enableableExtension(&Extensions::textureCompressionASTCLDR);
+        map["GL_KHR_texture_compression_astc_ldr"] = enableableExtension(&Extensions::textureCompressionASTCLDRKHR);
+        map["GL_KHR_texture_compression_astc_hdr"] = enableableExtension(&Extensions::textureCompressionASTCHDRKHR);
+        map["GL_OES_texture_compression_astc"] = enableableExtension(&Extensions::textureCompressionASTCOES);
         map["GL_EXT_texture_compression_bptc"] = enableableExtension(&Extensions::textureCompressionBPTC);
         map["GL_OES_compressed_ETC1_RGB8_texture"] = enableableExtension(&Extensions::compressedETC1RGB8Texture);
         map["OES_compressed_ETC2_RGB8_texture"] = enableableExtension(&Extensions::compressedETC2RGB8Texture);
@@ -841,8 +753,11 @@
         map["OES_compressed_EAC_RG11_signed_texture"] = enableableExtension(&Extensions::compressedEACRG11SignedTexture);
         map["GL_CHROMIUM_compressed_texture_etc"] = enableableExtension(&Extensions::compressedTextureETC);
         map["GL_EXT_sRGB"] = enableableExtension(&Extensions::sRGB);
-        map["GL_ANGLE_depth_texture"] = esOnlyExtension(&Extensions::depthTextures);
+        map["GL_ANGLE_depth_texture"] = esOnlyExtension(&Extensions::depthTextureANGLE);
+        map["GL_OES_depth_texture"] = esOnlyExtension(&Extensions::depthTextureOES);
+        map["GL_OES_depth24"] = esOnlyExtension(&Extensions::depth24OES);
         map["GL_OES_depth32"] = esOnlyExtension(&Extensions::depth32);
+        map["GL_OES_texture_3D"] = enableableExtension(&Extensions::texture3DOES);
         map["GL_EXT_texture_storage"] = enableableExtension(&Extensions::textureStorage);
         map["GL_OES_texture_npot"] = enableableExtension(&Extensions::textureNPOT);
         map["GL_EXT_draw_buffers"] = enableableExtension(&Extensions::drawBuffers);
@@ -861,6 +776,7 @@
         map["GL_OES_standard_derivatives"] = enableableExtension(&Extensions::standardDerivatives);
         map["GL_EXT_shader_texture_lod"] = enableableExtension(&Extensions::shaderTextureLOD);
         map["GL_EXT_frag_depth"] = enableableExtension(&Extensions::fragDepth);
+        map["GL_OVR_multiview"] = enableableExtension(&Extensions::multiview);
         map["GL_OVR_multiview2"] = enableableExtension(&Extensions::multiview2);
         map["GL_ANGLE_texture_usage"] = enableableExtension(&Extensions::textureUsage);
         map["GL_ANGLE_translated_shader_source"] = esOnlyExtension(&Extensions::translatedShaderSource);
@@ -871,6 +787,10 @@
         map["GL_OES_EGL_image_external"] = enableableExtension(&Extensions::eglImageExternal);
         map["GL_OES_EGL_image_external_essl3"] = enableableExtension(&Extensions::eglImageExternalEssl3);
         map["GL_OES_EGL_sync"] = esOnlyExtension(&Extensions::eglSync);
+        map["GL_EXT_memory_object"] = enableableExtension(&Extensions::memoryObject);
+        map["GL_EXT_memory_object_fd"] = enableableExtension(&Extensions::memoryObjectFd);
+        map["GL_EXT_semaphore"] = enableableExtension(&Extensions::semaphore);
+        map["GL_EXT_semaphore_fd"] = enableableExtension(&Extensions::semaphoreFd);
         map["GL_NV_EGL_stream_consumer_external"] = enableableExtension(&Extensions::eglStreamConsumerExternal);
         map["GL_EXT_unpack_subimage"] = enableableExtension(&Extensions::unpackSubimage);
         map["GL_NV_pack_subimage"] = enableableExtension(&Extensions::packSubimage);
@@ -914,6 +834,9 @@
         map["GL_ANGLE_texture_multisample"] = enableableExtension(&Extensions::textureMultisample);
         map["GL_ANGLE_multi_draw"] = enableableExtension(&Extensions::multiDraw);
         map["GL_ANGLE_provoking_vertex"] = enableableExtension(&Extensions::provokingVertex);
+        map["GL_CHROMIUM_lose_context"] = enableableExtension(&Extensions::loseContextCHROMIUM);
+        map["GL_ANGLE_texture_external_update"] = enableableExtension(&Extensions::textureExternalUpdateANGLE);
+        map["GL_ANGLE_base_vertex_base_instance"] = enableableExtension(&Extensions::baseVertexBaseInstance);
         // GLES1 extensinos
         map["GL_OES_point_size_array"] = enableableExtension(&Extensions::pointSizeArray);
         map["GL_OES_texture_cube_map"] = enableableExtension(&Extensions::textureCubeMap);
@@ -929,7 +852,7 @@
     return extensionInfo;
 }
 
-TypePrecision::TypePrecision() : range({{0, 0}}), precision(0) {}
+TypePrecision::TypePrecision() = default;
 
 TypePrecision::TypePrecision(const TypePrecision &other) = default;
 
@@ -963,134 +886,7 @@
     *returnPrecision = precision;
 }
 
-Caps::Caps()
-    : maxElementIndex(0),
-      max3DTextureSize(0),
-      max2DTextureSize(0),
-      maxRectangleTextureSize(0),
-      maxArrayTextureLayers(0),
-      maxLODBias(0),
-      maxCubeMapTextureSize(0),
-      maxRenderbufferSize(0),
-      minAliasedPointSize(1.0f),
-      maxAliasedPointSize(1.0f),
-      minAliasedLineWidth(0),
-      maxAliasedLineWidth(0),
-
-      // Table 20.40
-      maxDrawBuffers(0),
-      maxFramebufferWidth(0),
-      maxFramebufferHeight(0),
-      maxFramebufferSamples(0),
-      maxColorAttachments(0),
-      maxViewportWidth(0),
-      maxViewportHeight(0),
-      maxSampleMaskWords(0),
-      maxColorTextureSamples(0),
-      maxDepthTextureSamples(0),
-      maxIntegerSamples(0),
-      maxServerWaitTimeout(0),
-
-      // Table 20.41
-      maxVertexAttribRelativeOffset(0),
-      maxVertexAttribBindings(0),
-      maxVertexAttribStride(0),
-      maxElementsIndices(0),
-      maxElementsVertices(0),
-
-      // Table 20.43
-      // Table 20.44
-      // Table 20.45
-      // Table 20.43gs (GL_EXT_geometry_shader)
-      // Table 20.46 (GL_EXT_geometry_shader)
-      maxShaderUniformBlocks({}),
-      maxShaderTextureImageUnits({}),
-      maxShaderStorageBlocks({}),
-      maxShaderUniformComponents({}),
-      maxShaderAtomicCounterBuffers({}),
-      maxShaderAtomicCounters({}),
-      maxShaderImageUniforms({}),
-      maxCombinedShaderUniformComponents({}),
-
-      // Table 20.43
-      maxVertexAttributes(0),
-      maxVertexUniformVectors(0),
-      maxVertexOutputComponents(0),
-
-      // Table 20.44
-      maxFragmentUniformVectors(0),
-      maxFragmentInputComponents(0),
-      minProgramTextureGatherOffset(0),
-      maxProgramTextureGatherOffset(0),
-      minProgramTexelOffset(0),
-      maxProgramTexelOffset(0),
-
-      // Table 20.45
-      maxComputeWorkGroupInvocations(0),
-      maxComputeSharedMemorySize(0),
-
-      // Table 20.46
-      maxUniformBufferBindings(0),
-      maxUniformBlockSize(0),
-      uniformBufferOffsetAlignment(0),
-      maxCombinedUniformBlocks(0),
-      maxVaryingComponents(0),
-      maxVaryingVectors(0),
-      maxCombinedTextureImageUnits(0),
-      maxCombinedShaderOutputResources(0),
-
-      // Table 20.47
-      maxUniformLocations(0),
-      maxAtomicCounterBufferBindings(0),
-      maxAtomicCounterBufferSize(0),
-      maxCombinedAtomicCounterBuffers(0),
-      maxCombinedAtomicCounters(0),
-      maxImageUnits(0),
-      maxCombinedImageUniforms(0),
-      maxShaderStorageBufferBindings(0),
-      maxShaderStorageBlockSize(0),
-      maxCombinedShaderStorageBlocks(0),
-      shaderStorageBufferOffsetAlignment(0),
-
-      // Table 20.48
-      maxTransformFeedbackInterleavedComponents(0),
-      maxTransformFeedbackSeparateAttributes(0),
-      maxTransformFeedbackSeparateComponents(0),
-
-      // Table 20.49
-      maxSamples(0),
-
-      // Table 20.40 (cont.) (GL_EXT_geometry_shader)
-      maxFramebufferLayers(0),
-      layerProvokingVertex(0),
-
-      // Table 20.43gs (GL_EXT_geometry_shader)
-      maxGeometryInputComponents(0),
-      maxGeometryOutputComponents(0),
-      maxGeometryOutputVertices(0),
-      maxGeometryTotalOutputComponents(0),
-      maxGeometryShaderInvocations(0),
-
-      // GLES1 emulation: Table 6.20 / 6.22 (ES 1.1 spec)
-      maxMultitextureUnits(0),
-      maxClipPlanes(0),
-      maxLights(0),
-      maxModelviewMatrixStackDepth(0),
-      maxProjectionMatrixStackDepth(0),
-      maxTextureMatrixStackDepth(0),
-      minSmoothPointSize(0),
-      maxSmoothPointSize(0),
-      minSmoothLineWidth(0),
-      maxSmoothLineWidth(0)
-
-{
-    for (size_t i = 0; i < 3; ++i)
-    {
-        maxComputeWorkGroupCount[i] = 0;
-        maxComputeWorkGroupSize[i]  = 0;
-    }
-}
-
+Caps::Caps()                  = default;
 Caps::Caps(const Caps &other) = default;
 Caps::~Caps()                 = default;
 
@@ -1332,56 +1128,9 @@
 namespace egl
 {
 
-Caps::Caps() : textureNPOT(false) {}
+Caps::Caps() = default;
 
-DisplayExtensions::DisplayExtensions()
-    : createContextRobustness(false),
-      d3dShareHandleClientBuffer(false),
-      d3dTextureClientBuffer(false),
-      surfaceD3DTexture2DShareHandle(false),
-      querySurfacePointer(false),
-      windowFixedSize(false),
-      keyedMutex(false),
-      surfaceOrientation(false),
-      postSubBuffer(false),
-      createContext(false),
-      deviceQuery(false),
-      image(false),
-      imageBase(false),
-      imagePixmap(false),
-      glTexture2DImage(false),
-      glTextureCubemapImage(false),
-      glTexture3DImage(false),
-      glRenderbufferImage(false),
-      getAllProcAddresses(false),
-      flexibleSurfaceCompatibility(false),
-      directComposition(false),
-      windowsUIComposition(false),
-      createContextNoError(false),
-      stream(false),
-      streamConsumerGLTexture(false),
-      streamConsumerGLTextureYUV(false),
-      streamProducerD3DTexture(false),
-      fenceSync(false),
-      waitSync(false),
-      createContextWebGLCompatibility(false),
-      createContextBindGeneratesResource(false),
-      getSyncValues(false),
-      swapBuffersWithDamage(false),
-      pixelFormatFloat(false),
-      surfacelessContext(false),
-      displayTextureShareGroup(false),
-      createContextClientArrays(false),
-      programCacheControl(false),
-      robustResourceInitialization(false),
-      iosurfaceClientBuffer(false),
-      createContextExtensionsEnabled(false),
-      presentationTime(false),
-      blobCache(false),
-      imageNativeBuffer(false),
-      getFrameTimestamps(false),
-      recordable(false)
-{}
+DisplayExtensions::DisplayExtensions() = default;
 
 std::vector<std::string> DisplayExtensions::getStrings() const
 {
@@ -1433,7 +1182,12 @@
     InsertExtensionString("EGL_ANDROID_blob_cache",                              blobCache,                          &extensionStrings);
     InsertExtensionString("EGL_ANDROID_image_native_buffer",                     imageNativeBuffer,                  &extensionStrings);
     InsertExtensionString("EGL_ANDROID_get_frame_timestamps",                    getFrameTimestamps,                 &extensionStrings);
-    InsertExtensionString("EGL_ANDROID_recordable",                              recordable,                 &extensionStrings);
+    InsertExtensionString("EGL_ANDROID_recordable",                              recordable,                         &extensionStrings);
+    InsertExtensionString("EGL_ANGLE_power_preference",                          powerPreference,                    &extensionStrings);
+    InsertExtensionString("EGL_ANGLE_image_d3d11_texture",                       imageD3D11Texture,                  &extensionStrings);
+    InsertExtensionString("EGL_ANDROID_get_native_client_buffer",                getNativeClientBufferANDROID,       &extensionStrings);
+    InsertExtensionString("EGL_ANDROID_native_fence_sync",                       nativeFenceSyncANDROID,             &extensionStrings);
+    InsertExtensionString("EGL_ANGLE_create_context_backwards_compatible",       createContextBackwardsCompatible,   &extensionStrings);
     // TODO(jmadill): Enable this when complete.
     //InsertExtensionString("KHR_create_context_no_error",                       createContextNoError,               &extensionStrings);
     // clang-format on
@@ -1441,7 +1195,7 @@
     return extensionStrings;
 }
 
-DeviceExtensions::DeviceExtensions() : deviceD3D(false) {}
+DeviceExtensions::DeviceExtensions() = default;
 
 std::vector<std::string> DeviceExtensions::getStrings() const
 {
@@ -1455,24 +1209,7 @@
     return extensionStrings;
 }
 
-ClientExtensions::ClientExtensions()
-    : clientExtensions(false),
-      platformBase(false),
-      platformDevice(false),
-      platformANGLE(false),
-      platformANGLED3D(false),
-      platformANGLEOpenGL(false),
-      platformANGLEVulkan(false),
-      platformANGLEContextVirtualization(false),
-      deviceCreation(false),
-      deviceCreationD3D11(false),
-      x11Visual(false),
-      experimentalPresentPath(false),
-      clientGetAllProcAddresses(false),
-      debug(false),
-      explicitContext(false)
-{}
-
+ClientExtensions::ClientExtensions()                              = default;
 ClientExtensions::ClientExtensions(const ClientExtensions &other) = default;
 
 std::vector<std::string> ClientExtensions::getStrings() const
@@ -1497,6 +1234,7 @@
     InsertExtensionString("EGL_KHR_client_get_all_proc_addresses",           clientGetAllProcAddresses,          &extensionStrings);
     InsertExtensionString("EGL_KHR_debug",                                   debug,                              &extensionStrings);
     InsertExtensionString("EGL_ANGLE_explicit_context",                      explicitContext,                    &extensionStrings);
+    InsertExtensionString("EGL_ANGLE_feature_control",                       featureControlANGLE,                &extensionStrings);
     // clang-format on
 
     return extensionStrings;