# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: browser/components/ssb/content/ssb.js
# Commit: e650c0acb702
# Full Hash: e650c0acb7027d22d04aeb6525834e5f89eedd92
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-08-19 21:28:29
# Regressor Bug: 1602410
# File Overlap Count: 1
# Description:
#   Bug 1602410 - Make window.print() work with tab-modal printing. r=nika,geckoview-reviewers,agi
#   
#   Do this by spinning the event loop until we've done the clone for
#   preview as appropriate.
#   
# ==============================================================================

diff -r 1f9187fefcb6 -r e650c0acb702 browser/components/ssb/content/ssb.js
--- a/browser/components/ssb/content/ssb.js	Tue Aug 18 21:33:15 2020 +0000
+++ b/browser/components/ssb/content/ssb.js	Wed Aug 19 09:27:18 2020 +0000
@@ -14,6 +14,12 @@
   WindowsSupport: "resource:///modules/ssb/WindowsSupport.jsm",
 });
 
+XPCOMUtils.defineLazyScriptGetter(
+  this,
+  "PrintUtils",
+  "chrome://global/content/printUtils.js"
+);
+
 let gSSBBrowser = null;
 var gSSB = null;
 
@@ -138,6 +144,10 @@
     throw Components.Exception("", Cr.NS_ERROR_FAILURE);
   }
 
+  print(aBrowsingContext) {
+    PrintUtils.startPrintWindow(aBrowsingContext);
+  }
+
   /**
    * Finds a new frame to load some content in.
    *