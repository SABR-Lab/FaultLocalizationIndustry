# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/canvas/ClientWebGLExtensions.h
# Commit: 7e2a2b1b416f
# Full Hash: 7e2a2b1b416f1a64c6548aab29e92acc9554ae7d
# Author: Jeff Gilbert <jgilbert@mozilla.com>
# Date: 2020-01-09 03:40:18
# Regressor Bug: 1477756
# File Overlap Count: 1
# Description:
#   Bug 1477756 - Fix all webgl regression tests according to CI. r=handyman
#   
#   (This is a combination of 31 commits)
#   
#   * Fix Linux compilation.
# ==============================================================================

diff -r ccfa767dba64 -r 7e2a2b1b416f dom/canvas/ClientWebGLExtensions.h
--- a/dom/canvas/ClientWebGLExtensions.h	Wed Jan 08 22:19:16 2020 +0000
+++ b/dom/canvas/ClientWebGLExtensions.h	Wed Jan 08 22:19:23 2020 +0000
@@ -27,7 +27,7 @@
   virtual ~ClientWebGLExtensionBase() = default;
 
  public:
-  auto GetParentObject() const { return mContext.get(); }
+  ClientWebGLContext* GetParentObject() const { return mContext.get(); }
 };
 
 // -
@@ -48,7 +48,7 @@
    public:                                                                   \
     virtual JSObject* WrapObject(JSContext* cx,                              \
                                  JS::Handle<JSObject*> givenProto) override; \
-    Client##_Extension(ClientWebGLContext&);                                 \
+    explicit Client##_Extension(ClientWebGLContext&);                        \
   };
 
 ////
@@ -58,7 +58,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionCompressedTextureASTC(ClientWebGLContext&);
+  explicit ClientWebGLExtensionCompressedTextureASTC(ClientWebGLContext&);
 
   void GetSupportedProfiles(dom::Nullable<nsTArray<nsString>>& retval) const {
     if (MOZ_UNLIKELY(!mContext)) {
@@ -93,7 +93,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionDebugShaders(ClientWebGLContext&);
+  explicit ClientWebGLExtensionDebugShaders(ClientWebGLContext&);
 
   void GetTranslatedShaderSource(const WebGLShaderJS& shader,
                                  nsAString& retval) const {
@@ -117,7 +117,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionLoseContext(ClientWebGLContext&);
+  explicit ClientWebGLExtensionLoseContext(ClientWebGLContext&);
 
   void LoseContext() {
     if (MOZ_UNLIKELY(!mContext)) {
@@ -159,7 +159,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionDrawBuffers(ClientWebGLContext&);
+  explicit ClientWebGLExtensionDrawBuffers(ClientWebGLContext&);
 
   void DrawBuffersWEBGL(const dom::Sequence<GLenum>& buffers) {
     if (MOZ_UNLIKELY(!mContext)) {
@@ -174,7 +174,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionVertexArray(ClientWebGLContext&);
+  explicit ClientWebGLExtensionVertexArray(ClientWebGLContext&);
 
   already_AddRefed<WebGLVertexArrayJS> CreateVertexArrayOES() {
     if (MOZ_UNLIKELY(!mContext)) {
@@ -210,7 +210,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionInstancedArrays(ClientWebGLContext&);
+  explicit ClientWebGLExtensionInstancedArrays(ClientWebGLContext&);
 
   void DrawArraysInstancedANGLE(GLenum mode, GLint first, GLsizei count,
                                 GLsizei primcount) {
@@ -244,7 +244,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionDisjointTimerQuery(ClientWebGLContext&);
+  explicit ClientWebGLExtensionDisjointTimerQuery(ClientWebGLContext&);
 
   already_AddRefed<WebGLQueryJS> CreateQueryEXT() const {
     if (MOZ_UNLIKELY(!mContext)) {
@@ -310,7 +310,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionExplicitPresent(ClientWebGLContext&);
+  explicit ClientWebGLExtensionExplicitPresent(ClientWebGLContext&);
 
   void Present() const {
     if (MOZ_UNLIKELY(!mContext)) {
@@ -325,7 +325,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionMOZDebug(ClientWebGLContext&);
+  explicit ClientWebGLExtensionMOZDebug(ClientWebGLContext&);
 
   void GetParameter(JSContext* cx, GLenum pname,
                     JS::MutableHandle<JS::Value> retval,
@@ -342,7 +342,7 @@
  public:
   virtual JSObject* WrapObject(JSContext* cx,
                                JS::Handle<JSObject*> givenProto) override;
-  ClientWebGLExtensionMultiview(ClientWebGLContext&);
+  explicit ClientWebGLExtensionMultiview(ClientWebGLContext&);
 
   void FramebufferTextureMultiviewOVR(const GLenum target,
                                       const GLenum attachment,