# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: editor/libeditor/EditorEventListener.h
# Commit: 6abe7bfd78b3
# Full Hash: 6abe7bfd78b37a31679419dacc85843790b9c404
# Author: Masayuki Nakano <masayuki@d-toybox.com>
# Date: 2020-01-25 09:45:27
# Regressor Bug: 1610264
# File Overlap Count: 1
# Description:
#   Bug 1610264 - part 1: Make `EditorEventListener` consume `dragenter`, `dragover` and `drop` events if the drop target is managed by it r=smaug
#   
#   Currently, editor does not consume `dragenter`, `dragover` nor `drop` event if
#   `EditorEventListener::CanDrop()` returns false.  Then,
#   `EventStateManager::PostHandleEvent()` does not modify current drag session
# ==============================================================================

diff -r d6551c5af648 -r 6abe7bfd78b3 editor/libeditor/EditorEventListener.h
--- a/editor/libeditor/EditorEventListener.h	Fri Jan 24 20:19:09 2020 +0000
+++ b/editor/libeditor/EditorEventListener.h	Fri Jan 24 20:10:25 2020 +0000
@@ -81,11 +81,12 @@
   nsresult Focus(InternalFocusEvent* aFocusEvent);
   nsresult Blur(InternalFocusEvent* aBlurEvent);
   MOZ_CAN_RUN_SCRIPT nsresult DragEnter(dom::DragEvent* aDragEvent);
-  MOZ_CAN_RUN_SCRIPT nsresult DragOver(dom::DragEvent* aDragEvent);
+  MOZ_CAN_RUN_SCRIPT nsresult DragOverOrDrop(dom::DragEvent* aDragEvent);
   nsresult DragExit(dom::DragEvent* aDragEvent);
-  MOZ_CAN_RUN_SCRIPT nsresult Drop(dom::DragEvent* aDragEvent);
 
-  MOZ_CAN_RUN_SCRIPT bool CanDrop(dom::DragEvent* aEvent);
+  void RefuseToDropAndHideCaret(DragEvent* aDragEvent);
+  bool DragEventHasSupportingData(DragEvent* aDragEvent) const;
+  MOZ_CAN_RUN_SCRIPT bool CanInsertAtDropPosition(DragEvent* aDragEvent);
   void CleanupDragDropCaret();
   PresShell* GetPresShell() const;
   nsPresContext* GetPresContext() const;
