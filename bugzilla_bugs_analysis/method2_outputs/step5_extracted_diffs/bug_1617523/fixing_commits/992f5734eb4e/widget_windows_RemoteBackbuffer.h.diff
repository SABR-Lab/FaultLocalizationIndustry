# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: widget/windows/RemoteBackbuffer.h
# Commit: 992f5734eb4e
# Full Hash: 992f5734eb4e39b3c76ff35b0f744b129f80b483
# Author: Chris Martin <cmartin@mozilla.com>
# Date: 2020-02-28 09:24:28
# Description:
#   Bug 1617523 - Ensure remote backbuffer only reused if initialized properly r=jrmuizel
#   
#   This crash was caused because there was a case where the Provider would
#   store the SharedImage even if it failed to initialize it or send it to the
#   Client.
# ==============================================================================

diff -r 133376007dce -r 992f5734eb4e widget/windows/RemoteBackbuffer.h
--- a/widget/windows/RemoteBackbuffer.h	Fri Feb 28 02:37:42 2020 +0000
+++ b/widget/windows/RemoteBackbuffer.h	Fri Feb 28 01:34:26 2020 +0000
@@ -40,7 +40,8 @@
  private:
   void ThreadMain();
 
-  void HandleBorrowRequest(BorrowResponseData* aResponseData);
+  void HandleBorrowRequest(BorrowResponseData* aResponseData,
+                           bool aAllowSameBuffer);
   void HandlePresentRequest(PresentResponseData* aResponseData);
 
   HWND mWindowHandle;
