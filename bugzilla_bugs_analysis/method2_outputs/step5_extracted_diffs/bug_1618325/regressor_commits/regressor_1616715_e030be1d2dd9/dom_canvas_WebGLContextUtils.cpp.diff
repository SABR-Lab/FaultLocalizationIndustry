# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/canvas/WebGLContextUtils.cpp
# Commit: e030be1d2dd9
# Full Hash: e030be1d2dd9b0bb47680fac29f20447c9d66f8c
# Author: Jeff Gilbert <jgilbert@mozilla.com>
# Date: 2020-02-21 09:51:10
# Regressor Bug: 1616715
# File Overlap Count: 1
# Description:
#   Bug 1616715 - Make ReadPixelDesc per-call. r=lsalzman
#   
#   GetSurfaceSnapshot (and similar) want to ReadPixels the backbuffer,
#   without having to navigate the GL PIXEL_PACK state.
#   Since this is cold cold code, it's nice to reduce the backend state by
# ==============================================================================

diff -r adc841b3e204 -r e030be1d2dd9 dom/canvas/WebGLContextUtils.cpp
--- a/dom/canvas/WebGLContextUtils.cpp	Fri Feb 21 02:27:08 2020 +0000
+++ b/dom/canvas/WebGLContextUtils.cpp	Fri Feb 21 03:12:41 2020 +0000
@@ -546,8 +546,6 @@
   MOZ_ASSERT(int4[0] == mViewportX && int4[1] == mViewportY &&
              int4[2] == mViewportWidth && int4[3] == mViewportHeight);
 
-  AssertUintParamCorrect(gl, LOCAL_GL_PACK_ALIGNMENT,
-                         mPixelStore.mPackAlignment);
   AssertUintParamCorrect(gl, LOCAL_GL_UNPACK_ALIGNMENT,
                          mPixelStore.mUnpackAlignment);
 
@@ -562,12 +560,6 @@
                            mPixelStore.mUnpackSkipRows);
     AssertUintParamCorrect(gl, LOCAL_GL_UNPACK_SKIP_PIXELS,
                            mPixelStore.mUnpackSkipPixels);
-    AssertUintParamCorrect(gl, LOCAL_GL_PACK_ROW_LENGTH,
-                           mPixelStore.mPackRowLength);
-    AssertUintParamCorrect(gl, LOCAL_GL_PACK_SKIP_ROWS,
-                           mPixelStore.mPackSkipRows);
-    AssertUintParamCorrect(gl, LOCAL_GL_PACK_SKIP_PIXELS,
-                           mPixelStore.mPackSkipPixels);
   }
 
   MOZ_ASSERT(!gl::GLContext::IsBadCallError(errorScope.GetError()));