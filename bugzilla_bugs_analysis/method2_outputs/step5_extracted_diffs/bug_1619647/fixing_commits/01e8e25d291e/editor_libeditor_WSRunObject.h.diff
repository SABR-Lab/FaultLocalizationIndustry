# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: editor/libeditor/WSRunObject.h
# Commit: 01e8e25d291e
# Full Hash: 01e8e25d291ef2a49244951b5a277a69c406bfdc
# Author: Masayuki Nakano <masayuki@d-toybox.com>
# Date: 2020-03-04 16:19:40
# Description:
#   Bug 1619647 - Make `WSRunObject::ReplacePreviousNBSPIfUnnecessary()` check `IsEndOfContainer()` before calling `IsCharNBSP()` r=m_kato
#   
#   I forgot to add this check only here. (I also checked again for all similar
#   methods' callers.)  So, if the point is end of a text node (i.e., offset equals
#   its length), `IsCharNBSP()` refers wrong address.
# ==============================================================================

diff -r 9057fcd5c67d -r 01e8e25d291e editor/libeditor/WSRunObject.h
--- a/editor/libeditor/WSRunObject.h	Wed Mar 04 10:46:31 2020 +0200
+++ b/editor/libeditor/WSRunObject.h	Wed Mar 04 08:15:15 2020 +0000
@@ -816,14 +816,14 @@
   MOZ_CAN_RUN_SCRIPT nsresult CheckTrailingNBSPOfRun(WSFragment* aRun);
 
   /**
-   * ReplacePreviousNBSPIfUnncessary() replaces previous character of aPoint
+   * ReplacePreviousNBSPIfUnnecessary() replaces previous character of aPoint
    * if it's a NBSP and it's unnecessary.
    *
    * @param aRun        Current text run.  aPoint must be in this run.
    * @param aPoint      Current insertion point.  Its previous character is
    *                    unnecessary NBSP will be checked.
    */
-  MOZ_CAN_RUN_SCRIPT nsresult ReplacePreviousNBSPIfUnncessary(
+  MOZ_CAN_RUN_SCRIPT nsresult ReplacePreviousNBSPIfUnnecessary(
       WSFragment* aRun, const EditorDOMPoint& aPoint);
 
   MOZ_CAN_RUN_SCRIPT
