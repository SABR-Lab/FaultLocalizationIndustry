# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: editor/libeditor/WSRunObject.h
# Commit: 75b0efe2d2e1
# Full Hash: 75b0efe2d2e107ba25c9de3ae8a902a542726849
# Author: Masayuki Nakano <masayuki@d-toybox.com>
# Date: 2020-03-03 15:54:57
# Regressor Bug: 1618089
# File Overlap Count: 2
# Description:
#   Bug 1618089 - part 8: Make `WSRunObject::PrepareToDeleteRange()` take 2 pointers of `EditorDOMPoint` r=m_kato
#   
#   Note that the input can be `EditorDOMPointInText`, but modified range may start
#   and/or end with different container.  Therefore, it needs to take
#   `EditorDOMPoint` rather than `EditorDOMPointInText`.
# ==============================================================================

diff -r b3fb77a04fc5 -r 75b0efe2d2e1 editor/libeditor/WSRunObject.h
--- a/editor/libeditor/WSRunObject.h	Mon Mar 02 20:07:10 2020 +0000
+++ b/editor/libeditor/WSRunObject.h	Tue Mar 03 04:35:26 2020 +0000
@@ -689,16 +689,14 @@
       HTMLEditor& aHTMLEditor, dom::Element& aLeftBlockElement,
       dom::Element& aRightBlockElement);
 
-  // PrepareToDeleteRange fixes up ws before {aStartNode,aStartOffset}
-  // and after {aEndNode,aEndOffset} in preperation for content
-  // in that range to be deleted.  Note that the nodes and offsets
-  // are adjusted in response to any dom changes we make while
+  // PrepareToDeleteRange fixes up ws before aStartPoint and after aEndPoint in
+  // preperation for content in that range to be deleted.  Note that the nodes
+  // and offsets are adjusted in response to any dom changes we make while
   // adjusting ws.
-  // example of fixup: trailingws before {aStartNode,aStartOffset}
-  //                   needs to be removed.
+  // example of fixup: trailingws before aStartPoint needs to be removed.
   MOZ_CAN_RUN_SCRIPT static nsresult PrepareToDeleteRange(
-      HTMLEditor& aHTMLEditor, nsCOMPtr<nsINode>* aStartNode,
-      int32_t* aStartOffset, nsCOMPtr<nsINode>* aEndNode, int32_t* aEndOffset);
+      HTMLEditor& aHTMLEditor, EditorDOMPoint* aStartPoint,
+      EditorDOMPoint* aEndPoint);
 
   // PrepareToDeleteNode fixes up ws before and after aContent in preparation
   // for aContent to be deleted.  Example of fixup: trailingws before
