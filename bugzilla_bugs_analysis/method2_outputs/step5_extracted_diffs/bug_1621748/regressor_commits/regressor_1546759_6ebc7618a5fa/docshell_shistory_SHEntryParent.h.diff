# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: docshell/shistory/SHEntryParent.h
# Commit: 6ebc7618a5fa
# Full Hash: 6ebc7618a5fadb59585a4d8b9f17eb65e5654cc6
# Author: Anny Gakhokidze <agakhokidze@mozilla.com>
# Date: 2020-03-10 21:44:54
# Regressor Bug: 1546759
# File Overlap Count: 2
# Description:
#   Bug 1546759 - Change nsSHistory::WalkHistoryEntries to walk browsing context tree instead of doc shell tree, r=peterv,nika
#   
#   WalkHistoryEntries function gets called by nsSHistory::CloneAndReplaceChild
#   and nsSHistory::SetChildHistoryEntry recursively, so those have to be moved
#   into the parent process. This eliminates many sync IPC calls.
# ==============================================================================

diff -r ed75364b23c3 -r 6ebc7618a5fa docshell/shistory/SHEntryParent.h
--- a/docshell/shistory/SHEntryParent.h	Tue Mar 10 11:39:06 2020 +0000
+++ b/docshell/shistory/SHEntryParent.h	Tue Mar 10 14:28:22 2020 +0000
@@ -77,6 +77,8 @@
     return mShared.get();
   }
 
+  NS_IMETHOD Clone(nsISHEntry** aResult) override;
+
  private:
   friend class SHEntryParent;
   friend class SHistoryParent;
@@ -203,6 +205,12 @@
   bool RecvClearEntry(const uint64_t& aNewSharedID);
 
   bool RecvCreateLoadInfo(RefPtr<nsDocShellLoadState>* aLoadState);
+  bool RecvClone(RefPtr<CrossProcessSHEntry>* aResult);
+
+  bool RecvSyncTreesForSubframeNavigation(
+      PSHEntryParent* aSHEntry, const MaybeDiscarded<BrowsingContext>& aBC,
+      const MaybeDiscarded<BrowsingContext>& aIgnoreBC,
+      nsTArray<SwapEntriesDocshellData>* aEntriesToUpdate);
 
   bool RecvUpdateLayoutHistoryState(const bool& aScrollPositionOnly,
                                     nsTArray<nsCString>&& aKeys,