# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/wr/wrench/src/yaml_frame_writer.rs
# Commit: aaed31bbe8f4
# Full Hash: aaed31bbe8f4e0a8892e632633c27033549eaf33
# Author: Miko Mynttinen <mikokm@gmail.com>
# Date: 2020-03-19 03:53:34
# Regressor Bug: 1614655
# File Overlap Count: 2
# Description:
#   Bug 1614655 - Part 2: Allow 1:n mapping of Gecko - WR display items r=jrmuizel
#   
#   This patch changes the underlying storage for WR display items in DisplayItemCache
#   from Vec<Option<CachedDisplayItem> to Vec<Vec<CachedDisplayItem>>.
#   This allows storing multiple WebRender display items for one Gecko display item.
# ==============================================================================

diff -r 0e791acac783 -r aaed31bbe8f4 gfx/wr/wrench/src/yaml_frame_writer.rs
--- a/gfx/wr/wrench/src/yaml_frame_writer.rs	Wed Mar 18 23:46:27 2020 +0000
+++ b/gfx/wr/wrench/src/yaml_frame_writer.rs	Wed Mar 18 23:47:05 2020 +0000
@@ -1498,8 +1498,12 @@
                 DisplayItem::PopAllShadows => {
                     str_node(&mut v, "type", "pop-all-shadows");
                 }
-                DisplayItem::ReuseItem(key) => {
-                    str_node(&mut v, "type", "reuse-item");
+                DisplayItem::ReuseItems(key) => {
+                    str_node(&mut v, "type", "reuse-items");
+                    usize_node(&mut v, "key", key as usize);
+                }
+                DisplayItem::RetainedItems(key) => {
+                    str_node(&mut v, "type", "retained-items");
                     usize_node(&mut v, "key", key as usize);
                 }
             }