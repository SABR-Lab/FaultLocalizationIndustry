# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/painting/nsDisplayList.h
# Commit: acb3f6f0a64e
# Full Hash: acb3f6f0a64e5e31daee85c5e991b4ed2a69d721
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-03-30 15:54:08
# Regressor Bug: 1625571
# File Overlap Count: 1
# Description:
#   Bug 1625571 - Invalidate canvas background in ImageLoader rather than nsDisplayBackgroundImage. r=tnikkel
#   
#   This is less error prone and also less code.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D68732
# ==============================================================================

diff -r 059be1f4b4ed -r acb3f6f0a64e layout/painting/nsDisplayList.h
--- a/layout/painting/nsDisplayList.h	Mon Mar 30 11:35:20 2020 +0300
+++ b/layout/painting/nsDisplayList.h	Mon Mar 30 08:35:34 2020 +0000
@@ -4652,9 +4652,6 @@
     if (aFrame == mDependentFrame) {
       mDependentFrame = nullptr;
     }
-    if (mAssociatedImage && aFrame == mFrame) {
-      DisassociateImage();
-    }
     nsDisplayImageContainer::RemoveFrame(aFrame);
   }
 
@@ -4667,9 +4664,6 @@
   nsRect GetBoundsInternal(nsDisplayListBuilder* aBuilder,
                            nsIFrame* aFrameForBounds = nullptr);
 
-  void AssociateImageIfNeeded();
-  void DisassociateImage();
-
   void PaintInternal(nsDisplayListBuilder* aBuilder, gfxContext* aCtx,
                      const nsRect& aBounds, nsRect* aClipRect);
 
@@ -4698,8 +4692,6 @@
   /* Whether the image should be treated as fixed to the viewport. */
   bool mShouldFixToViewport;
   uint32_t mImageFlags;
-  bool mAssociatedImage;
-  bool mTriedToAssociateImage;
 };
 
 enum class TableType : uint8_t {