# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit-test/tests/cacheir/binaryarith.js
# Commit: fbbb339d3fdb
# Full Hash: fbbb339d3fdb70cb2b9f48c1194f6320909b6952
# Author: Andr√© Bargull <andre.bargull@gmail.com>
# Date: 2020-04-08 21:42:38
# Regressor Bug: 1620997
# File Overlap Count: 1
# Description:
#   Bug 1620997 - Part 2: Add JSOp::Pow support to CacheIR. r=jandem
#   
#   There are too few registers available on x86, so the code tries to reuse the output
#   operand's type register in addition to its payload register.
#   
# ==============================================================================

diff -r 815e8172ee57 -r fbbb339d3fdb js/src/jit-test/tests/cacheir/binaryarith.js
--- a/js/src/jit-test/tests/cacheir/binaryarith.js	Tue Apr 07 11:22:51 2020 +0000
+++ b/js/src/jit-test/tests/cacheir/binaryarith.js	Tue Apr 07 11:46:58 2020 +0000
@@ -121,6 +121,26 @@
 var funMod4 = (a,b) => {return a % b};
 warmup(funMod4, [[10, false, NaN], [8, true, 0], [false, 4, 0], [true, 2, 1]]);
 
+//Pow: Int32
+var funPow1 = (a,b) => {return a ** b};
+warmup(funPow1, [[8, 4, 4096], [9, 4, 6561], [-1, 2, 1], [2, -10000, 0],
+               [-3, 3, -27]]);
+
+//Pow: Double
+var funPow2 = (a,b) => {return a ** b};
+warmup(funPow2, [[8.5, 1, 8.5], [16, 0.5, 4], [4.5, 5, 1845.28125], [1.64, 1.16, 1.7750838132231606],
+                 [4, -1, 0.25]]);
+
+//Pow: Type change Int32 -> Double
+var funPow3 = (a,b) => {return a ** b};
+warmup(funPow3, [[10, 0, 1], [8, 4, 4096], [9, 4, 6561], [-1, 2, 1], [2, -10000, 0],
+                 [8.5, 1, 8.5], [16, 0.5, 4], [4.5, 5, 1845.28125], [1.64, 1.16, 1.7750838132231606],
+                 [4, -1, 0.25]]);
+
+//Pow: Boolean w/ Int32
+var funPow4 = (a,b) => {return a ** b};
+warmup(funPow4, [[10, 2, 100], [8, true, 8], [false, 4, 0], [true, 2, 1]]);
+
 //BitOr Int32
 var funBitOr1 = (a, b) => { return a | b; }
 warmup(funBitOr1, [[1, 1, 1], [8, 1, 9], [0, 1233, 1233], [5, 0, 5],