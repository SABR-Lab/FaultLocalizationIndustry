# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: accessible/base/nsCoreUtils.cpp
# Commit: 5626ca788e5c
# Full Hash: 5626ca788e5ca41919945cedabff8685ffb99957
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-04-15 09:25:24
# Description:
#   Bug 1629838 - Don't flush reentrantly from XUL a11y construction. r=Jamie
#   
#   This code has pretty much always been broken, we've started to flush
#   more because we fixed a bug that was not looking at XUL trees inside
#   shadow DOM in bug 1625991.
# ==============================================================================

diff -r 0f37ad2fc083 -r 5626ca788e5c accessible/base/nsCoreUtils.cpp
--- a/accessible/base/nsCoreUtils.cpp	Tue Apr 14 23:35:35 2020 +0000
+++ b/accessible/base/nsCoreUtils.cpp	Wed Apr 15 01:01:12 2020 +0000
@@ -435,12 +435,12 @@
 }
 
 already_AddRefed<nsTreeColumn> nsCoreUtils::GetFirstSensibleColumn(
-    XULTreeElement* aTree) {
+    XULTreeElement* aTree, FlushType aFlushType) {
   if (!aTree) {
     return nullptr;
   }
 
-  RefPtr<nsTreeColumns> cols = aTree->GetColumns();
+  RefPtr<nsTreeColumns> cols = aTree->GetColumns(aFlushType);
   if (!cols) {
     return nullptr;
   }