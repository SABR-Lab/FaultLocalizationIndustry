# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: accessible/base/nsCoreUtils.h
# Commit: 5626ca788e5c
# Full Hash: 5626ca788e5ca41919945cedabff8685ffb99957
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-04-15 09:25:24
# Description:
#   Bug 1629838 - Don't flush reentrantly from XUL a11y construction. r=Jamie
#   
#   This code has pretty much always been broken, we've started to flush
#   more because we fixed a bug that was not looking at XUL trees inside
#   shadow DOM in bug 1625991.
# ==============================================================================

diff -r 0f37ad2fc083 -r 5626ca788e5c accessible/base/nsCoreUtils.h
--- a/accessible/base/nsCoreUtils.h	Tue Apr 14 23:35:35 2020 +0000
+++ b/accessible/base/nsCoreUtils.h	Wed Apr 15 01:01:12 2020 +0000
@@ -11,6 +11,7 @@
 #include "nsIAccessibleEvent.h"
 #include "nsIContent.h"
 #include "mozilla/dom/Document.h"  // for GetPresShell()
+#include "mozilla/FlushType.h"
 
 #include "nsPoint.h"
 #include "nsTArray.h"
@@ -253,7 +254,8 @@
    * Return first sensible column for the given tree box object.
    */
   static already_AddRefed<nsTreeColumn> GetFirstSensibleColumn(
-      mozilla::dom::XULTreeElement* aTree);
+      mozilla::dom::XULTreeElement* aTree,
+      mozilla::FlushType = mozilla::FlushType::Frames);
 
   /**
    * Return sensible columns count for the given tree box object.