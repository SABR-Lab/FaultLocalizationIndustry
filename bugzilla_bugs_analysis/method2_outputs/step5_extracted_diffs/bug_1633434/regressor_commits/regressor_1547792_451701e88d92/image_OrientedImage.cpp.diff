# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: image/OrientedImage.cpp
# Commit: 451701e88d92
# Full Hash: 451701e88d92935b77385235832865dabe8c2942
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2019-05-03 12:59:14
# Regressor Bug: 1547792
# File Overlap Count: 1
# Description:
#   Bug 1547792 - AspectRatio should be a single ratio, not a size. r=dholbert
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D29244
# ==============================================================================

diff -r 020e530d49b3 -r 451701e88d92 image/OrientedImage.cpp
--- a/image/OrientedImage.cpp	Wed Apr 24 19:36:17 2019 +0000
+++ b/image/OrientedImage.cpp	Thu May 02 23:28:21 2019 +0000
@@ -67,15 +67,12 @@
   return rv;
 }
 
-NS_IMETHODIMP
-OrientedImage::GetIntrinsicRatio(nsSize* aRatio) {
-  nsresult rv = InnerImage()->GetIntrinsicRatio(aRatio);
-
-  if (mOrientation.SwapsWidthAndHeight()) {
-    swap(aRatio->width, aRatio->height);
+Maybe<AspectRatio> OrientedImage::GetIntrinsicRatio() {
+  Maybe<AspectRatio> ratio = InnerImage()->GetIntrinsicRatio();
+  if (ratio && mOrientation.SwapsWidthAndHeight()) {
+    ratio = Some(ratio->Inverted());
   }
-
-  return rv;
+  return ratio;
 }
 
 NS_IMETHODIMP_(already_AddRefed<SourceSurface>)