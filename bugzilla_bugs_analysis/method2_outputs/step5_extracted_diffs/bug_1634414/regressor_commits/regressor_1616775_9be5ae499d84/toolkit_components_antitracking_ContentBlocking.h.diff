# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: toolkit/components/antitracking/ContentBlocking.h
# Commit: 9be5ae499d84
# Full Hash: 9be5ae499d84aca2d74d3d42dbe7b120987a1502
# Author: Dimi Lee <dlee@mozilla.com>
# Date: 2020-04-23 21:43:09
# Regressor Bug: 1616775
# File Overlap Count: 1
# Description:
#   Bug 1616775 - P6. Add OnAllowAccessFor to process tasks that need a parent window. r=timhuang,baku
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D71015
# ==============================================================================

diff -r 577f090dae54 -r 9be5ae499d84 toolkit/components/antitracking/ContentBlocking.h
--- a/toolkit/components/antitracking/ContentBlocking.h	Thu Apr 23 14:25:23 2020 +0000
+++ b/toolkit/components/antitracking/ContentBlocking.h	Thu Apr 23 14:25:31 2020 +0000
@@ -95,6 +95,13 @@
       ContentBlockingNotifier::StorageAccessGrantedReason aReason,
       const PerformFinalChecks& aPerformFinalChecks = nullptr);
 
+  // This function handles tasks that have to be done in the process
+  // of the window that we just grant permission for.
+  static void OnAllowAccessFor(
+      dom::BrowsingContext* aParentContext, const nsCString& aTrackingOrigin,
+      uint32_t aCookieBehavior,
+      ContentBlockingNotifier::StorageAccessGrantedReason aReason);
+
   // For IPC only.
   typedef MozPromise<nsresult, bool, true> ParentAccessGrantPromise;
   static RefPtr<ParentAccessGrantPromise> SaveAccessForOriginOnParentProcess(
