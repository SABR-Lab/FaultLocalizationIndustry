# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit-test/tests/debug/Frame-older-generators-03.js
# Commit: fa46d8caefde
# Full Hash: fa46d8caefdeea83b7a41ba3259114c13dd3b145
# Author: Logan Smyth <loganfsmyth@gmail.com>
# Date: 2019-12-09 09:50:39
# Regressor Bug: 1600204
# File Overlap Count: 1
# Description:
#   Bug 1600204 - Part 6: Support .older on suspended generator frames. r=jimb
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D55236
# ==============================================================================

diff -r ea1bb2f0fd39 -r fa46d8caefde js/src/jit-test/tests/debug/Frame-older-generators-03.js
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/js/src/jit-test/tests/debug/Frame-older-generators-03.js	Sun Dec 08 23:54:15 2019 +0000
@@ -0,0 +1,24 @@
+// Test that Debugger.Frame.prototype.older works on suspended generators.
+
+load(libdir + "asserts.js");
+
+const g = newGlobal({ newCompartment: true });
+const dbg = new Debugger(g);
+
+g.eval(`
+function* f() {}
+`);
+
+let frame;
+dbg.onEnterFrame = f => {
+  frame = f;
+  dbg.onEnterFrame = undefined;
+};
+
+const it = g.f();
+
+assertEq(frame.older, null);
+
+it.next();
+
+assertThrowsInstanceOf(() => frame.older, Error);