# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: layout/style/SharedStyleSheetCache.cpp
# Commit: 4533f1eb2e43
# Full Hash: 4533f1eb2e4360d194bfbdce1555bb568cea4cd1
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-10-06 16:17:06
# Description:
#   Bug 1646330 - Downgrade an assertion to a regular MOZ_ASSERT. r=jwatt
#   
#   My two guesses about how this can happen are:
#   
#    * PR_Now() is not guaranteed to be monotonic. We can hit an expired
# ==============================================================================

diff -r eff866cb4c66 -r 4533f1eb2e43 layout/style/SharedStyleSheetCache.cpp
--- a/layout/style/SharedStyleSheetCache.cpp	Tue Oct 06 08:18:21 2020 +0000
+++ b/layout/style/SharedStyleSheetCache.cpp	Tue Oct 06 08:31:47 2020 +0000
@@ -431,7 +431,7 @@
         MOZ_DIAGNOSTIC_ASSERT(entry.GetData().mSheet != sheet,
                               "Same sheet, different keys?");
       } else {
-        MOZ_DIAGNOSTIC_ASSERT(
+        MOZ_ASSERT(
             entry.GetData().Expired() || aData.mLoader->ShouldBypassCache(),
             "Overriding existing complete entry?");
       }
