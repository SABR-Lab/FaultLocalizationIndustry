# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: accessible/mac/MOXTextMarkerDelegate.mm
# Commit: 10a97d7a432d
# Full Hash: 10a97d7a432dc762d63e4a66c05ed89175342b6f
# Author: Eitan Isaacson <eitan@monotonous.org>
# Date: 2020-07-03 03:56:55
# Regressor Bug: 1649575
# File Overlap Count: 2
# Description:
#   Bug 1649575 - Part 5: Implement string building for GeckoTextMarkerRange. r=morgan
#   
#   This is a seperate patch because of the complexity.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D81761
# ==============================================================================

diff -r 9bc12053de5e -r 10a97d7a432d accessible/mac/MOXTextMarkerDelegate.mm
--- a/accessible/mac/MOXTextMarkerDelegate.mm	Thu Jul 02 21:35:05 2020 +0000
+++ b/accessible/mac/MOXTextMarkerDelegate.mm	Thu Jul 02 21:57:55 2020 +0000
@@ -60,11 +60,12 @@
 }
 
 - (NSString*)moxStringForTextMarkerRange:(id)textMarkerRange {
-  return nil;
+  mozilla::a11y::GeckoTextMarkerRange range(mGeckoDocAccessible, textMarkerRange);
+  return range.Text();
 }
 
 - (NSNumber*)moxLengthForTextMarkerRange:(id)textMarkerRange {
-  return nil;
+  return @([[self moxStringForTextMarkerRange:textMarkerRange] length]);
 }
 
 - (id)moxTextMarkerRangeForUnorderedTextMarkers:(NSArray*)textMarkers {
