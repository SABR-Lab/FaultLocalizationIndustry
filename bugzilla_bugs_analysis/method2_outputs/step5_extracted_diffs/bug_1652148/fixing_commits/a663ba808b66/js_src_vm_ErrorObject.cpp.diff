# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: js/src/vm/ErrorObject.cpp
# Commit: a663ba808b66
# Full Hash: a663ba808b666fabd32658d876799070aed9a258
# Author: Andr√© Bargull <andre.bargull@gmail.com>
# Date: 2020-07-14 21:47:02
# Description:
#   Bug 1652148: Handle allocation failure in AggregateError constructor. r=jorendorff
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D83236
# ==============================================================================

diff -r 39a91f5d15dd -r a663ba808b66 js/src/vm/ErrorObject.cpp
--- a/js/src/vm/ErrorObject.cpp	Tue Jul 14 11:14:23 2020 +0000
+++ b/js/src/vm/ErrorObject.cpp	Tue Jul 14 14:03:38 2020 +0000
@@ -287,6 +287,9 @@
   }
 
   RootedArrayObject array(cx, NewDenseEmptyArray(cx));
+  if (!array) {
+    return nullptr;
+  }
 
   RootedValue nextValue(cx);
   while (true) {
