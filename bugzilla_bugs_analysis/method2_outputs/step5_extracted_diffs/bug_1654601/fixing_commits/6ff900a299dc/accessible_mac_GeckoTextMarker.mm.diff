# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: accessible/mac/GeckoTextMarker.mm
# Commit: 6ff900a299dc
# Full Hash: 6ff900a299dce4f3c02fc2946d91d5514e460f49
# Author: Eitan Isaacson <eitan@monotonous.org>
# Date: 2020-07-23 03:20:25
# Description:
#   Bug 1654601 - Ensure given text marker is valid in public API. r=MarcoZ
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D84567
# ==============================================================================

diff -r f1a36fd1fac8 -r 6ff900a299dc accessible/mac/GeckoTextMarker.mm
--- a/accessible/mac/GeckoTextMarker.mm	Wed Jul 22 17:51:14 2020 +0000
+++ b/accessible/mac/GeckoTextMarker.mm	Wed Jul 22 18:08:10 2020 +0000
@@ -119,6 +119,7 @@
 }
 
 void GeckoTextMarker::NormalizeNext() {
+  MOZ_ASSERT(!mContainer.IsNull());
   if (AtEnd()) {
     // If this is the end of the current container, mutate to its parent's
     // end offset.
@@ -159,6 +160,7 @@
 }
 
 void GeckoTextMarker::NormalizePrevious() {
+  MOZ_ASSERT(!mContainer.IsNull());
   if (mOffset == 0) {
     // If we are at the beginning of a container, mutate to its parent's start offset.
     bool unused;
@@ -210,6 +212,7 @@
 }
 
 GeckoTextMarkerRange GeckoTextMarker::WordRange() {
+  MOZ_ASSERT(!mContainer.IsNull());
   int32_t wordstart_start = 0, wordstart_end = 0, wordend_start = 0, wordend_end = 0;
   nsAutoString unused;
   if (mContainer.IsProxy()) {