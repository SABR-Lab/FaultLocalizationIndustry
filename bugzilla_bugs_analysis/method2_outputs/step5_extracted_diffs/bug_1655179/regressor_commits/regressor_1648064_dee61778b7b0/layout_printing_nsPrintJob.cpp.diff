# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/printing/nsPrintJob.cpp
# Commit: dee61778b7b0
# Full Hash: dee61778b7b0f35d4f5adc3793dac6a0f998c26e
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-07-22 21:55:45
# Regressor Bug: 1648064
# File Overlap Count: 1
# Description:
#   Bug 1648064 - Remove some includes from nsPrintJob.h. r=jwatt
#   
#   I had needed this before to export that header, and it's no longer
#   needed, but it seems useful anyways.
#   
# ==============================================================================

diff -r 11ff41f3e95a -r dee61778b7b0 layout/printing/nsPrintJob.cpp
--- a/layout/printing/nsPrintJob.cpp	Wed Jul 22 13:17:02 2020 +0000
+++ b/layout/printing/nsPrintJob.cpp	Wed Jul 22 14:16:14 2020 +0000
@@ -451,11 +451,21 @@
                   nsIObserver)
 
 //-------------------------------------------------------
+nsPrintJob::nsPrintJob() = default;
+
 nsPrintJob::~nsPrintJob() {
   Destroy();  // for insurance
   DisconnectPagePrintTimer();
 }
 
+bool nsPrintJob::CheckBeforeDestroy() const {
+  return mPrt && mPrt->mPreparingForPrint;
+}
+
+PresShell* nsPrintJob::GetPrintPreviewPresShell() {
+  return mPrtPreview->mPrintObject->mPresShell;
+}
+
 //-------------------------------------------------------
 void nsPrintJob::Destroy() {
   if (mIsDestroying) {