# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/printing/nsPrintJob.h
# Commit: dee61778b7b0
# Full Hash: dee61778b7b0f35d4f5adc3793dac6a0f998c26e
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-07-22 21:55:45
# Regressor Bug: 1648064
# File Overlap Count: 1
# Description:
#   Bug 1648064 - Remove some includes from nsPrintJob.h. r=jwatt
#   
#   I had needed this before to export that header, and it's no longer
#   needed, but it seems useful anyways.
#   
# ==============================================================================

diff -r 11ff41f3e95a -r dee61778b7b0 layout/printing/nsPrintJob.h
--- a/layout/printing/nsPrintJob.h	Wed Jul 22 13:17:02 2020 +0000
+++ b/layout/printing/nsPrintJob.h	Wed Jul 22 14:16:14 2020 +0000
@@ -11,19 +11,22 @@
 
 #include "nsCOMPtr.h"
 
-#include "nsPrintObject.h"
-#include "nsPrintData.h"
-#include "nsFrameList.h"
-#include "nsIWebProgress.h"
-#include "mozilla/dom/HTMLCanvasElement.h"
-#include "nsIFrame.h"  // for WeakFrame only
-#include "nsIWebProgressListener.h"
+#include "nsHashKeys.h"
+#include "nsIFrame.h" // For WeakFrame
+#include "nsSize.h"
+#include "nsTHashtable.h"
 #include "nsWeakReference.h"
 
 // Interfaces
 #include "nsIObserver.h"
+#include "nsIWebProgress.h"
+#include "nsIWebProgressListener.h"
 
 // Classes
+class nsIFrame;
+class nsIPrintProgressParams;
+class nsIPrintSettings;
+class nsPrintData;
 class nsPagePrintTimer;
 class nsIDocShell;
 class nsIDocumentViewerPrint;
@@ -31,6 +34,8 @@
 class nsPrintObject;
 class nsIDocShell;
 class nsPageSequenceFrame;
+class nsPIDOMWindowOuter;
+class nsView;
 
 namespace mozilla {
 class PresShell;
@@ -49,7 +54,7 @@
  public:
   static void CloseProgressDialog(nsIWebProgressListener* aWebProgressListener);
 
-  nsPrintJob() = default;
+  nsPrintJob();
 
   // nsISupports interface...
   NS_DECL_ISUPPORTS
@@ -140,12 +145,9 @@
   // object, for example by calling CleanupOnFailure().
   MOZ_CAN_RUN_SCRIPT_BOUNDARY nsresult FinishPrintPreview();
   void FirePrintingErrorEvent(nsresult aPrintError);
-  bool CheckBeforeDestroy() const { return mPrt && mPrt->mPreparingForPrint; }
 
-  mozilla::PresShell* GetPrintPreviewPresShell() {
-    return mPrtPreview->mPrintObject->mPresShell;
-  }
-
+  bool CheckBeforeDestroy() const;
+  mozilla::PresShell* GetPrintPreviewPresShell();
   nsresult Cancel();
   void Destroy();
   void DestroyPrintingData();
