# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: toolkit/components/antitracking/ContentBlocking.cpp
# Commit: fa0dbdf15f29
# Full Hash: fa0dbdf15f291e814b4854d515d7ef3e4548b7fb
# Author: Dimi Lee <dlee@mozilla.com>
# Date: 2020-08-08 09:35:45
# Description:
#   Bug 1658010 - Add null pointer check before notifying content block event r=xeonchen
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D86421
# ==============================================================================

diff -r 5631575db538 -r fa0dbdf15f29 toolkit/components/antitracking/ContentBlocking.cpp
--- a/toolkit/components/antitracking/ContentBlocking.cpp	Sat Aug 08 00:42:21 2020 +0000
+++ b/toolkit/components/antitracking/ContentBlocking.cpp	Sat Aug 08 06:00:00 2020 +0000
@@ -599,6 +599,10 @@
     return;
   }
 
+  if (!doc->GetChannel()) {
+    return;
+  }
+
   // Theoratically this can be done in the parent process. But right now,
   // we need the channel while notifying content blocking events, and
   // we don't have a trivial way to obtain the channel in the parent
