# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: toolkit/components/windowwatcher/nsPIWindowWatcher.idl
# Commit: 93e3344dd1f7
# Full Hash: 93e3344dd1f7454dc46c1553dd05e5e3bc78c349
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-08-26 03:24:37
# Regressor Bug: 1636728
# File Overlap Count: 1
# Description:
#   Bug 1636728 - Centralize printing entry points in nsGlobalWindowOuter, and move cloning out of nsPrintJob. r=jwatt,geckoview-reviewers,smaug,agi
#   
#   This centralizes our print and preview setup in nsGlobalWindowOuter so
#   that we never re-clone a clone, and so that we reuse the window.open()
#   codepath to create the browsing context to clone into.
# ==============================================================================

diff -r 2969f3de028f -r 93e3344dd1f7 toolkit/components/windowwatcher/nsPIWindowWatcher.idl
--- a/toolkit/components/windowwatcher/nsPIWindowWatcher.idl	Tue Aug 25 02:58:57 2020 +0000
+++ b/toolkit/components/windowwatcher/nsPIWindowWatcher.idl	Tue Aug 25 17:45:12 2020 +0000
@@ -43,6 +43,12 @@
   */
   void removeWindow(in mozIDOMWindowProxy aWindow);
 
+  cenum PrintKind : 8 {
+    PRINT_NONE,
+    PRINT_REGULAR,
+    PRINT_PREVIEW,
+  };
+
   /** Like the public interface's open(), but can handle openDialog-style
       arguments and calls which shouldn't result in us navigating the window.
 
@@ -82,6 +88,7 @@
             (which is determined based on the JS stack and the value of
             aParent).  This is not guaranteed, however.
   */
+  [noscript]
   BrowsingContext openWindow2(in mozIDOMWindowProxy aParent, in ACString aUrl,
                               in ACString aName, in ACString aFeatures,
                               in boolean aCalledFromScript,
@@ -91,6 +98,7 @@
                               in boolean aIsPopupSpam,
                               in boolean aForceNoOpener,
                               in boolean aForceNoReferrer,
+                              in nsPIWindowWatcher_PrintKind aPrintKind,
                               in nsDocShellLoadStatePtr aLoadState);
 
   /**