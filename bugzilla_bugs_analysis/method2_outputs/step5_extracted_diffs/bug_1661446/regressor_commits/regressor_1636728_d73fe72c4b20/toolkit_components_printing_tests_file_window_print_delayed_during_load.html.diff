# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: toolkit/components/printing/tests/file_window_print_delayed_during_load.html
# Commit: d73fe72c4b20
# Full Hash: d73fe72c4b20a408d4c0559b7b1dd5d945f3d3b9
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2020-09-25 21:47:43
# Regressor Bug: 1636728
# File Overlap Count: 1
# Description:
#   Bug 1667342 - Make the "deferred window close" keep making sense after bug 1636728. r=smaug
#   
#   This was only being checked on OnDonePrinting() which isn't called in
#   the original docshell. Move it to the window because we don't need to
#   care about document viewers getting closed during print operations,
# ==============================================================================

diff -r 0bd98379fad4 -r d73fe72c4b20 toolkit/components/printing/tests/file_window_print_delayed_during_load.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/toolkit/components/printing/tests/file_window_print_delayed_during_load.html	Fri Sep 25 13:39:01 2020 +0000
@@ -0,0 +1,13 @@
+<!doctype html>
+<body>
+<script>
+  onload = function() {
+    let div = document.createElement("div");
+    div.id = "added-during-load";
+    div.innerHTML = "I should be printed";
+    document.body.appendChild(div);
+  };
+
+  window.print(); // This should be delayed until after load.
+  window.close(); // So should this.
+</script>
