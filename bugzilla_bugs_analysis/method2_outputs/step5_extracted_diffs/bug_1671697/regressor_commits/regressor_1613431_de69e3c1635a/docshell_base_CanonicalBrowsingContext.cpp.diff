# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: docshell/base/CanonicalBrowsingContext.cpp
# Commit: de69e3c1635a
# Full Hash: de69e3c1635a311b5b22716b65b93fc1899a37a4
# Author: Andreas Farre <farre@mozilla.com>
# Date: 2020-08-01 09:48:10
# Regressor Bug: 1613431
# File Overlap Count: 1
# Description:
#   Bug 1613431 - Part 3: Handle synced setters return value. r=nika
#   
#   Depends on D83646
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D83647
# ==============================================================================

diff -r b326d33f98cb -r de69e3c1635a docshell/base/CanonicalBrowsingContext.cpp
--- a/docshell/base/CanonicalBrowsingContext.cpp	Fri Jul 31 13:37:00 2020 +0000
+++ b/docshell/base/CanonicalBrowsingContext.cpp	Fri Jul 31 13:37:13 2020 +0000
@@ -414,10 +414,11 @@
   });
 }
 
-void CanonicalBrowsingContext::NotifyMediaMutedChanged(bool aMuted) {
+void CanonicalBrowsingContext::NotifyMediaMutedChanged(bool aMuted,
+                                                       ErrorResult& aRv) {
   MOZ_ASSERT(!GetParent(),
              "Notify media mute change on non top-level context!");
-  SetMuted(aMuted);
+  SetMuted(aMuted, aRv);
 }
 
 uint32_t CanonicalBrowsingContext::CountSiteOrigins(
@@ -1135,7 +1136,12 @@
     mCurrentLoad->Cancel(NS_BINDING_ABORTED);
   }
   mCurrentLoad = aLoad;
-  SetCurrentLoadIdentifier(Some(aLoad->GetLoadIdentifier()));
+
+  if (NS_FAILED(SetCurrentLoadIdentifier(Some(aLoad->GetLoadIdentifier())))) {
+    mCurrentLoad = nullptr;
+    return false;
+  }
+
   return true;
 }
 