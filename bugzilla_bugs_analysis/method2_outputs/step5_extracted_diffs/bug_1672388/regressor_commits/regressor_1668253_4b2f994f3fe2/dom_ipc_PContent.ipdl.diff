# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/ipc/PContent.ipdl
# Commit: 4b2f994f3fe2
# Full Hash: 4b2f994f3fe2cad3895cc4d5044a3466a2d5eda4
# Author: Jonathan Kew <jkew@mozilla.com>
# Date: 2020-10-12 15:27:19
# Regressor Bug: 1668253
# File Overlap Count: 1
# Description:
#   Bug 1668253 - Convert hyphenation from ipc::SharedMemoryBasic to base::SharedMemory, and freeze blocks before sharing to content processes. r=heycam
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D91945
# ==============================================================================

diff -r bc5b6dcb7057 -r 4b2f994f3fe2 dom/ipc/PContent.ipdl
--- a/dom/ipc/PContent.ipdl	Mon Oct 12 10:23:27 2020 +0000
+++ b/dom/ipc/PContent.ipdl	Mon Oct 12 10:24:06 2020 +0000
@@ -109,7 +109,6 @@
 using mozilla::dom::MaybeDiscardedWindowContext from "mozilla/dom/WindowContext.h";
 using mozilla::dom::WindowContextTransaction from "mozilla/dom/WindowContext.h";
 using base::SharedMemoryHandle from "base/shared_memory.h";
-using mozilla::ipc::SharedMemoryBasic::Handle from "mozilla/ipc/SharedMemoryBasic.h";
 using mozilla::fontlist::Pointer from "SharedFontList.h";
 using gfxSparseBitSet from "gfxFontUtils.h";
 using FontVisibility from "gfxFontEntry.h";
@@ -1337,7 +1336,7 @@
      *   In a typical case, there will be a handful of blocks altogether, so
      *   each content process only needs to make this request a few times.
      * @returns aHandle
-     *   Handle that can be used to construct a SharedMemoryBasic that maps the
+     *   Handle that can be used to construct a SharedMemory that maps the
      *   requested block of memory.
      *   If aGeneration does not match the parent's font list generation ID, or
      *   if requesting a block that does not exist (i.e. with aIndex greater
@@ -1447,7 +1446,7 @@
      * @param aLoaded
      *   Returns the size in bytes of the resource.
      */
-    sync GetHyphDict(nsIURI aURI) returns (Handle aHandle, uint32_t aSize);
+    sync GetHyphDict(nsIURI aURI) returns (SharedMemoryHandle aHandle, uint32_t aSize);
 
     async CreateWindow(PBrowser aThisTab,
                        MaybeDiscardedBrowsingContext aParent,