# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/platforms/PDMFactory.h
# Commit: 57607f8b6d8e
# Full Hash: 57607f8b6d8e1619b5c488494fd57547944c47b1
# Author: Dan Glastonbury <dan.glastonbury@gmail.com>
# Date: 2020-10-21 09:51:28
# Regressor Bug: 1595994
# File Overlap Count: 1
# Description:
#   Bug 1595994 - P7: Add Supports messages to PRemoteDecoderManager. r=kamidphish,nika,ipc-reviewers
#   
#   Add a synchronous Supports message to the IPDL PRemoteDecoderManager protocol so
#   decoder modules can query for playback support in the actual process that will
#   attempt to do the decoding.
# ==============================================================================

diff -r 1932f2f34993 -r 57607f8b6d8e dom/media/platforms/PDMFactory.h
--- a/dom/media/platforms/PDMFactory.h	Tue Oct 20 23:26:25 2020 +0000
+++ b/dom/media/platforms/PDMFactory.h	Tue Oct 20 23:26:27 2020 +0000
@@ -7,6 +7,7 @@
 #if !defined(PDMFactory_h_)
 #  define PDMFactory_h_
 
+#  include "DecoderDoctorDiagnostics.h"
 #  include "PlatformDecoderModule.h"
 #  include "mozilla/StaticMutex.h"
 
@@ -14,7 +15,6 @@
 
 namespace mozilla {
 
-class DecoderDoctorDiagnostics;
 class PDMFactoryImpl;
 template <class T>
 class StaticAutoPtr;
@@ -78,9 +78,7 @@
   RefPtr<PlatformDecoderModule> mEMEPDM;
   RefPtr<PlatformDecoderModule> mNullPDM;
 
-  bool mWMFFailedToLoad = false;
-  bool mFFmpegFailedToLoad = false;
-  bool mGMPPDMFailedToStartup = false;
+  DecoderDoctorDiagnostics::FlagsSet mFailureFlags;
 
   friend class RemoteVideoDecoderParent;
   static void EnsureInit();