# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/platforms/PDMFactory.cpp
# Commit: 9914d2e0f6ca
# Full Hash: 9914d2e0f6ca513c77cb92098e75ff3881e4e47a
# Author: Dan Glastonbury <dan.glastonbury@gmail.com>
# Date: 2020-10-21 09:51:28
# Regressor Bug: 1595994
# File Overlap Count: 1
# Description:
#   Bug 1595994 - PF: Allow FFVPX decoding in RDD process. r=mattwoodrow
#   
#   Enabled by default on non-ARM64 Windows.
#   
#   Depends on D56856
# ==============================================================================

diff -r 85b9abba021d -r 9914d2e0f6ca dom/media/platforms/PDMFactory.cpp
--- a/dom/media/platforms/PDMFactory.cpp	Tue Oct 20 23:27:00 2020 +0000
+++ b/dom/media/platforms/PDMFactory.cpp	Tue Oct 20 23:27:13 2020 +0000
@@ -362,6 +362,12 @@
     CreateAndStartupPDM<WMFDecoderModule>();
   }
 #endif
+#ifdef MOZ_FFVPX
+  if (StaticPrefs::media_ffvpx_enabled() &&
+      StaticPrefs::media_rdd_ffvpx_enabled()) {
+    CreateAndStartupPDM<FFVPXRuntimeLinker>();
+  }
+#endif
   CreateAndStartupPDM<AgnosticDecoderModule>();
 }
 