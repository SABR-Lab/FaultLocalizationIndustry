# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: gfx/webrender_bindings/RenderCompositorD3D11SWGL.h
# Commit: f0d21589e3fd
# Full Hash: f0d21589e3fd67d7939e694a2f49adbaa7f5c6d6
# Author: Matt Woodrow <mwoodrow@mozilla.com>
# Date: 2020-11-10 09:57:49
# Description:
#   Bug 1675665 - Don't draw surfaces if we're not currently presenting a frame. r=lsalzman
#   
#   WR can run an update which outputs the compositor surfaces, but never calls Begin/EndFrame.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D96380
# ==============================================================================

diff -r af637d06295a -r f0d21589e3fd gfx/webrender_bindings/RenderCompositorD3D11SWGL.h
--- a/gfx/webrender_bindings/RenderCompositorD3D11SWGL.h	Mon Nov 09 21:35:50 2020 +0000
+++ b/gfx/webrender_bindings/RenderCompositorD3D11SWGL.h	Mon Nov 09 22:05:46 2020 +0000
@@ -154,6 +154,7 @@
     gfx::SamplingFilter mFilter;
   };
   nsTArray<FrameSurface> mFrameSurfaces;
+  bool mInFrame = false;
 };
 
 static inline bool operator==(const RenderCompositorD3D11SWGL::TileKey& a0,
