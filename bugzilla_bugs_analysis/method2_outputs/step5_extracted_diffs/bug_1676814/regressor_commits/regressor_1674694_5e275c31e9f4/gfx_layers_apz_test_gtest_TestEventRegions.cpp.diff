# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/layers/apz/test/gtest/TestEventRegions.cpp
# Commit: 5e275c31e9f4
# Full Hash: 5e275c31e9f42def8437d7c8a87cf4cf7aabf0c6
# Author: Hiroyuki Ikezoe <hikezoe.birchill@mozilla.com>
# Date: 2020-11-11 09:55:06
# Regressor Bug: 1674694
# File Overlap Count: 1
# Description:
#   Bug 1674694 - Change APZEventResult::mHandledByRootApzc to Maybe<APZHandledResult>. r=botond
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D96331
# ==============================================================================

diff -r 279eb8cf0dcd -r 5e275c31e9f4 gfx/layers/apz/test/gtest/TestEventRegions.cpp
--- a/gfx/layers/apz/test/gtest/TestEventRegions.cpp	Sat Nov 07 03:43:53 2020 +0000
+++ b/gfx/layers/apz/test/gtest/TestEventRegions.cpp	Wed Nov 11 00:33:20 2020 +0000
@@ -311,7 +311,7 @@
   manager->SetTargetAPZC(inputBlockId, targets);
 }
 
-// Test that APZEventResult::mHandledByRootApzc is correctly
+// Test that APZEventResult::mHandledResult is correctly
 // populated.
 TEST_F(APZEventRegionsTester, HandledByRootApzcFlag) {
   // Create simple layer tree containing a dispatch-to-content region
@@ -341,13 +341,13 @@
   APZEventResult result =
       TouchDown(manager, ScreenIntPoint(50, 25), mcc->Time());
   TouchUp(manager, ScreenIntPoint(50, 25), mcc->Time());
-  EXPECT_EQ(result.mHandledByRootApzc, Some(true));
+  EXPECT_EQ(result.mHandledResult, Some(APZHandledResult::HandledByRoot));
 
   // Tap the bottom half and check that we report that we're not
   // sure whether the event was handled by the root APZC.
   result = TouchDown(manager, ScreenIntPoint(50, 75), mcc->Time());
   TouchUp(manager, ScreenIntPoint(50, 75), mcc->Time());
-  EXPECT_EQ(result.mHandledByRootApzc, Nothing());
+  EXPECT_EQ(result.mHandledResult, Nothing());
 
   // Register an input block callback that will tell us the
   // delayed answer.
@@ -373,7 +373,7 @@
   // This time, we expect a delayed answer of `HandledByContent`.
   result = TouchDown(manager, ScreenIntPoint(50, 75), mcc->Time());
   TouchUp(manager, ScreenIntPoint(50, 75), mcc->Time());
-  EXPECT_EQ(result.mHandledByRootApzc, Nothing());
+  EXPECT_EQ(result.mHandledResult, Nothing());
   manager->AddInputBlockCallback(result.mInputBlockId,
                                  [&](uint64_t id, APZHandledResult answer) {
                                    EXPECT_EQ(id, result.mInputBlockId);
@@ -395,7 +395,7 @@
   // This time, we expect a delayed answer of `Unhandled`.
   result = TouchDown(manager, ScreenIntPoint(50, 75), mcc->Time());
   TouchUp(manager, ScreenIntPoint(50, 75), mcc->Time());
-  EXPECT_EQ(result.mHandledByRootApzc, Nothing());
+  EXPECT_EQ(result.mHandledResult, Nothing());
   manager->AddInputBlockCallback(result.mInputBlockId,
                                  [&](uint64_t id, APZHandledResult answer) {
                                    EXPECT_EQ(id, result.mInputBlockId);