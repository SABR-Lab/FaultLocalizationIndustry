# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/vr/ipc/PVRManager.ipdl
# Commit: ec6a64b639a8
# Full Hash: ec6a64b639a82e957376c09a71aef7ce62b3a5aa
# Author: Chris Martin <cmartin@mozilla.com>
# Date: 2020-12-03 09:47:26
# Regressor Bug: 1657404
# File Overlap Count: 3
# Description:
#   Bug 1657404 - Implement a strongly-typed, service-dependent gamepad handle r=handyman,aklotz
#   
#   Currently, the gamepad code uses a uint32_t as a handle and does some trickery
#   with it by trying to create a unique ID and adding an offset to it for VR code.
#   
# ==============================================================================

diff -r 6792f28b99bd -r ec6a64b639a8 gfx/vr/ipc/PVRManager.ipdl
--- a/gfx/vr/ipc/PVRManager.ipdl	Wed Dec 02 22:36:35 2020 +0000
+++ b/gfx/vr/ipc/PVRManager.ipdl	Wed Dec 02 23:06:05 2020 +0000
@@ -21,6 +21,7 @@
 using mozilla::gfx::VRDisplayCapabilityFlags from "moz_external_vr.h";
 using mozilla::layers::LayersBackend from "mozilla/layers/LayersTypes.h";
 using mozilla::layers::TextureFlags from "mozilla/layers/CompositorTypes.h";
+using mozilla::dom::GamepadHandle from "mozilla/dom/GamepadHandle.h";
 
 
 namespace mozilla {
@@ -51,9 +52,9 @@
 
   async ControllerListenerAdded();
   async ControllerListenerRemoved();
-  async VibrateHaptic(uint32_t aControllerIdx, uint32_t aHapticIndex,
+  async VibrateHaptic(GamepadHandle aGamepadHandle, uint32_t aHapticIndex,
                       double aIntensity, double aDuration, uint32_t aPromiseID);
-  async StopVibrateHaptic(uint32_t aControllerIdx);
+  async StopVibrateHaptic(GamepadHandle aGamepadHandle);
   async StartVRNavigation(uint32_t aDeviceID);
   async StopVRNavigation(uint32_t aDeviceID, TimeDuration aDuration);
   async StartActivity();