# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: gfx/thebes/gfxFontInfoLoader.cpp
# Commit: 585c85986b92
# Full Hash: 585c85986b921482bc28ff846c255dcdfe816864
# Author: Jonathan Kew <jkew@mozilla.com>
# Date: 2021-01-05 04:31:31
# Description:
#   Bug 1684846 - Bail out of font-info loader if the platform doesn't actually care about loading any info. r=lsalzman
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D100694
# ==============================================================================

diff -r 704b5b20ab48 -r 585c85986b92 gfx/thebes/gfxFontInfoLoader.cpp
--- a/gfx/thebes/gfxFontInfoLoader.cpp	Mon Jan 04 20:57:05 2021 +0000
+++ b/gfx/thebes/gfxFontInfoLoader.cpp	Mon Jan 04 20:57:43 2021 +0000
@@ -194,6 +194,11 @@
                "before observer");
 
   mFontInfo = CreateFontInfoData();
+  if (!mFontInfo) {
+    // The platform doesn't want anything loaded, so just bail out.
+    mState = stateTimerOff;
+    return;
+  }
 
   // initialize
   InitLoader();
