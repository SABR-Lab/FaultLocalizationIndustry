# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/webrender_bindings/RenderCompositorNative.cpp
# Commit: b9665e89a3b4
# Full Hash: b9665e89a3b433e95db7574f3c06bfc1b641bd46
# Author: Brad Werth <bwerth@mozilla.com>
# Date: 2021-01-12 04:33:40
# Regressor Bug: 1685046
# File Overlap Count: 1
# Description:
#   Bug 1685046: Hoist release asserts in RenderCompositorNativeOGL::Bind to crash earlier. r=jrmuizel
#   
#   This change spreads the release asserts to functions that are invoked by other
#   callers, potentially increasing the cases where the assert will fail. This is
#   being done intentionally; we want additional information on the reasons for
# ==============================================================================

diff -r 82d8d42717df -r b9665e89a3b4 gfx/webrender_bindings/RenderCompositorNative.cpp
--- a/gfx/webrender_bindings/RenderCompositorNative.cpp	Sat Jan 09 02:34:21 2021 +0000
+++ b/gfx/webrender_bindings/RenderCompositorNative.cpp	Mon Jan 11 15:49:09 2021 +0000
@@ -527,7 +527,6 @@
 
   Maybe<GLuint> fbo = mCurrentlyBoundNativeLayer->NextSurfaceAsFramebuffer(
       validRect, dirtyRect, true);
-  MOZ_RELEASE_ASSERT(fbo);  // TODO: make fallible
 
   *aFboId = *fbo;
   *aOffset = wr::DeviceIntPoint{0, 0};
