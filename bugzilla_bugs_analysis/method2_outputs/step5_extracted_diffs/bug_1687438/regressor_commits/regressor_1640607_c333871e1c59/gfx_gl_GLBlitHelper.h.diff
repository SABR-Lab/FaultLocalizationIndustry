# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/gl/GLBlitHelper.h
# Commit: c333871e1c59
# Full Hash: c333871e1c59abe6daf30c396e5e0a09591ac440
# Author: sotaro <sotaro.ikeda.g@gmail.com>
# Date: 2022-01-19 09:34:35
# Regressor Bug: 1640607
# File Overlap Count: 1
# Description:
#   Bug 1736793 - Add SurfaceTexture support to GLBlitHelper::BlitSdToFramebuffer() r=jgilbert,gfx-reviewers
#   
#   Blit support of android SurfaceTexture was removed by Bug 1640607.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D128992
# ==============================================================================

diff -r bb40a646b246 -r c333871e1c59 gfx/gl/GLBlitHelper.h
--- a/gfx/gl/GLBlitHelper.h	Wed Jan 19 02:03:31 2022 +0000
+++ b/gfx/gl/GLBlitHelper.h	Wed Jan 19 02:13:48 2022 +0000
@@ -36,6 +36,10 @@
 class MacIOSurface;
 #endif
 
+#ifdef MOZ_WIDGET_ANDROID
+#  include "mozilla/java/GeckoSurfaceTextureWrappers.h"
+#endif
+
 namespace mozilla {
 
 namespace layers {
@@ -54,7 +58,7 @@
 #endif
 
 #ifdef MOZ_WIDGET_ANDROID
-class SurfaceTextureImage;
+class SurfaceTextureDescriptor;
 #endif
 
 #ifdef XP_MACOSX
@@ -177,9 +181,8 @@
   bool BlitPlanarYCbCr(const layers::PlanarYCbCrData&,
                        const gfx::IntSize& destSize, OriginPos destOrigin);
 #ifdef MOZ_WIDGET_ANDROID
-  // Blit onto the current FB.
-  bool BlitImage(layers::SurfaceTextureImage* stImage,
-                 const gfx::IntSize& destSize, OriginPos destOrigin) const;
+  bool Blit(const java::GeckoSurfaceTexture::Ref& surfaceTexture,
+            const gfx::IntSize& destSize, const OriginPos destOrigin) const;
 #endif
 #ifdef XP_MACOSX
   bool BlitImage(layers::MacIOSurfaceImage* srcImage,