# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: gfx/wr/swgl/src/composite.h
# Commit: 2590d04ff745
# Full Hash: 2590d04ff745a26f356936c6943b5863262e8770
# Author: Lee Salzman <lsalzman@mozilla.com>
# Date: 2021-03-12 15:32:35
# Description:
#   Bug 1695782 - Verify that YUV texture step is non-zero. r=jrmuizel
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D107778
# ==============================================================================

diff -r dcc686463127 -r 2590d04ff745 gfx/wr/swgl/src/composite.h
--- a/gfx/wr/swgl/src/composite.h	Thu Mar 11 20:47:37 2021 +0000
+++ b/gfx/wr/swgl/src/composite.h	Thu Mar 11 20:48:05 2021 +0000
@@ -890,7 +890,7 @@
 
     // If we're sampling the UV planes at half the resolution of the Y plane,
     // then try to use half resolution fast-path.
-    if (yDU >= cDU && yDU <= (4 << (STEP_BITS + 7)) &&
+    if (yDU >= cDU && cDU > 0 && yDU <= (4 << (STEP_BITS + 7)) &&
         cDU <= (2 << (STEP_BITS + 7))) {
       // Ensure that samples don't fall outside of the valid bounds of each
       // planar texture. Step until the initial X coordinates are positive.
