# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: servo/components/style/properties/declaration_block.rs
# Commit: 825aae40c273
# Full Hash: 825aae40c2739c92716b7447a0449e61f15b1d48
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2021-02-17 09:45:59
# Regressor Bug: 1690836
# File Overlap Count: 1
# Description:
#   Bug 1690836 - Reduce the amount of code generated by UnparsedValues::substitute_variables. r=boris
#   
#   This reduces the amount of assembly instructions generated by this
#   function from 18k+ to ~800.
#   
# ==============================================================================

diff -r ef1676ed357b -r 825aae40c273 servo/components/style/properties/declaration_block.rs
--- a/servo/components/style/properties/declaration_block.rs	Wed Feb 17 00:21:36 2021 +0000
+++ b/servo/components/style/properties/declaration_block.rs	Wed Feb 17 00:21:36 2021 +0000
@@ -829,11 +829,12 @@
             // getKeyframes() implementation for CSS animations, if
             // |computed_values| is supplied, we use it to expand such variable
             // declarations. This will be fixed properly in Gecko bug 1391537.
-            (&PropertyDeclaration::WithVariables(ref declaration), Some(ref _computed_values)) => {
+            (&PropertyDeclaration::WithVariables(ref declaration), Some(ref computed_values)) => {
                 declaration
                     .value
                     .substitute_variables(
                         declaration.id,
+                        computed_values.writing_mode,
                         custom_properties.as_ref(),
                         QuirksMode::NoQuirks,
                         device,