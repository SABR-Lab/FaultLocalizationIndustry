# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: servo/components/style/properties/helpers.mako.rs
# Commit: 825aae40c273
# Full Hash: 825aae40c2739c92716b7447a0449e61f15b1d48
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2021-02-17 09:45:59
# Regressor Bug: 1690836
# File Overlap Count: 1
# Description:
#   Bug 1690836 - Reduce the amount of code generated by UnparsedValues::substitute_variables. r=boris
#   
#   This reduces the amount of assembly instructions generated by this
#   function from 18k+ to ~800.
#   
# ==============================================================================

diff -r ef1676ed357b -r 825aae40c273 servo/components/style/properties/helpers.mako.rs
--- a/servo/components/style/properties/helpers.mako.rs	Wed Feb 17 00:21:36 2021 +0000
+++ b/servo/components/style/properties/helpers.mako.rs	Wed Feb 17 00:21:36 2021 +0000
@@ -948,7 +948,7 @@
             input.parse_entirely(|input| parse_value(context, input)).map(|longhands| {
                 % for sub_property in shorthand.sub_properties:
                 % if sub_property.may_be_disabled_in(shorthand, engine):
-                if NonCustomPropertyId::from(LonghandId::${sub_property.camel_case}).allowed_in(context) {
+                if NonCustomPropertyId::from(LonghandId::${sub_property.camel_case}).allowed_in_ignoring_rule_type(context) {
                 % endif
                     declarations.push(PropertyDeclaration::${sub_property.camel_case}(
                         longhands.${sub_property.ident}
@@ -980,7 +980,7 @@
     #[allow(unused_imports)]
     use crate::values::specified;
 
-    pub fn parse_value<'i, 't>(
+    fn parse_value<'i, 't>(
         context: &ParserContext,
         input: &mut Parser<'i, 't>,
     ) -> Result<Longhands, ParseError<'i>> {
@@ -1024,7 +1024,7 @@
         #[allow(unused_imports)]
         use crate::values::specified;
 
-        pub fn parse_value<'i, 't>(
+        fn parse_value<'i, 't>(
             context: &ParserContext,
             input: &mut Parser<'i, 't>,
         ) -> Result<Longhands, ParseError<'i>> {