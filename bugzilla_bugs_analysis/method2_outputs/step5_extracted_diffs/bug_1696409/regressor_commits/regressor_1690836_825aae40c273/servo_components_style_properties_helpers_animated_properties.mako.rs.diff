# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: servo/components/style/properties/helpers/animated_properties.mako.rs
# Commit: 825aae40c273
# Full Hash: 825aae40c2739c92716b7447a0449e61f15b1d48
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2021-02-17 09:45:59
# Regressor Bug: 1690836
# File Overlap Count: 1
# Description:
#   Bug 1690836 - Reduce the amount of code generated by UnparsedValues::substitute_variables. r=boris
#   
#   This reduces the amount of assembly instructions generated by this
#   function from 18k+ to ~800.
#   
# ==============================================================================

diff -r ef1676ed357b -r 825aae40c273 servo/components/style/properties/helpers/animated_properties.mako.rs
--- a/servo/components/style/properties/helpers/animated_properties.mako.rs	Wed Feb 17 00:21:36 2021 +0000
+++ b/servo/components/style/properties/helpers/animated_properties.mako.rs	Wed Feb 17 00:21:36 2021 +0000
@@ -248,7 +248,7 @@
         decl: &PropertyDeclaration,
         context: &mut Context,
         extra_custom_properties: Option<<&Arc<crate::custom_properties::CustomPropertiesMap>>,
-        initial: &ComputedValues
+        initial: &ComputedValues,
     ) -> Option<Self> {
         use super::PropertyDeclarationVariantRepr;
 
@@ -374,6 +374,7 @@
 
                     declaration.value.substitute_variables(
                         declaration.id,
+                        context.builder.writing_mode,
                         custom_properties,
                         context.quirks_mode,
                         context.device(),