# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: servo/components/style/properties/declaration_block.rs
# Commit: ef1676ed357b
# Full Hash: ef1676ed357b4434d17a71e40e0b04753bdbff0b
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2021-02-17 09:45:59
# Regressor Bug: 1690836
# File Overlap Count: 1
# Description:
#   Bug 1690836 - Cache substituted values from shorthand properties during the cascade. r=xidorn
#   
#   This brings the time down to 1.6ms from 4.8ms on the test-case in the
#   bug. This should be improvable too, but I think this is a nice
#   improvement for regular styling as well.
# ==============================================================================

diff -r be5f469a4424 -r ef1676ed357b servo/components/style/properties/declaration_block.rs
--- a/servo/components/style/properties/declaration_block.rs	Wed Feb 17 00:21:35 2021 +0000
+++ b/servo/components/style/properties/declaration_block.rs	Wed Feb 17 00:21:36 2021 +0000
@@ -837,6 +837,7 @@
                         custom_properties.as_ref(),
                         QuirksMode::NoQuirks,
                         device,
+                        &mut Default::default()
                     )
                     .to_css(dest)
             },