# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/security/nsHTTPSOnlyUtils.cpp
# Commit: 1fd97331a29d
# Full Hash: 1fd97331a29de5586a231cd690252655c3512a2f
# Author: lyavor <lyavor@mozilla.com>
# Date: 2021-05-11 16:15:28
# Description:
#   Bug 1710234 Crash in [@ TestHTTPAnswerRunnable::IsBackgroundRequestRedirected]. r=ckerschb
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D114840
# ==============================================================================

diff -r c95906cdbbea -r 1fd97331a29d dom/security/nsHTTPSOnlyUtils.cpp
--- a/dom/security/nsHTTPSOnlyUtils.cpp	Tue May 11 12:09:51 2021 +0000
+++ b/dom/security/nsHTTPSOnlyUtils.cpp	Tue May 11 12:27:51 2021 +0000
@@ -677,6 +677,11 @@
 /* static */
 bool TestHTTPAnswerRunnable::IsBackgroundRequestRedirected(
     nsIHttpChannel* aChannel) {
+  // If there is no background request (aChannel), then there is nothing
+  // to do here.
+  if (!aChannel) {
+    return false;
+  }
   // If the request was not redirected, then there is nothing to do here.
   nsCOMPtr<nsILoadInfo> loadinfo = aChannel->LoadInfo();
   if (loadinfo->RedirectChain().IsEmpty()) {
