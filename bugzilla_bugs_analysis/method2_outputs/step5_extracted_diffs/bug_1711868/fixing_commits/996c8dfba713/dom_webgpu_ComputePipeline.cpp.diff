# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/webgpu/ComputePipeline.cpp
# Commit: 996c8dfba713
# Full Hash: 996c8dfba713a14e330743920974a4b53b4a0a4b
# Author: Dzmitry Malyshau <dmalyshau@mozilla.com>
# Date: 2021-05-21 09:57:54
# Description:
#   Bug 1711868 - Only free WebGPU implicit layouts if they are given r=jimb
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D115537
# ==============================================================================

diff -r f10854e202d8 -r 996c8dfba713 dom/webgpu/ComputePipeline.cpp
--- a/dom/webgpu/ComputePipeline.cpp	Thu May 20 15:18:45 2021 +0000
+++ b/dom/webgpu/ComputePipeline.cpp	Thu May 20 15:30:55 2021 +0000
@@ -31,8 +31,10 @@
     auto bridge = mParent->GetBridge();
     if (bridge && bridge->IsOpen()) {
       bridge->SendComputePipelineDestroy(mId);
-      bridge->SendImplicitLayoutDestroy(mImplicitPipelineLayoutId,
-                                        mImplicitBindGroupLayoutIds);
+      if (mImplicitPipelineLayoutId) {
+        bridge->SendImplicitLayoutDestroy(mImplicitPipelineLayoutId,
+                                          mImplicitBindGroupLayoutIds);
+      }
     }
   }
 }