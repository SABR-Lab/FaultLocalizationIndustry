# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: xpcom/base/MemoryTelemetry.cpp
# Commit: 9fccb38453a4
# Full Hash: 9fccb38453a4fc43b21784c850d4236fdea7d489
# Author: Gabriele Svelto <gsvelto@mozilla.com>
# Date: 2019-11-02 21:51:29
# Regressor Bug: 1586236
# File Overlap Count: 1
# Description:
#   Bug 1586236 - Use memory resource notifications to detect low memory scenarios on Windows; r=dmajor
#   
#   This patch uses the low memory resource notification facility to detect
#   scenarios where physical memory is running low without polling. This is a
#   significant change compared to the previous behavior which measured both
# ==============================================================================

diff -r d60821c527f2 -r 9fccb38453a4 xpcom/base/MemoryTelemetry.cpp
--- a/xpcom/base/MemoryTelemetry.cpp	Sat Nov 02 08:19:46 2019 +0000
+++ b/xpcom/base/MemoryTelemetry.cpp	Fri Nov 01 23:08:59 2019 +0000
@@ -286,10 +286,6 @@
          UNITS_BYTES);
   RECORD(MEMORY_STORAGE_SQLITE, StorageSQLite, UNITS_BYTES);
 #ifdef XP_WIN
-  RECORD(LOW_MEMORY_EVENTS_VIRTUAL, LowMemoryEventsVirtual,
-         UNITS_COUNT_CUMULATIVE);
-  RECORD(LOW_MEMORY_EVENTS_COMMIT_SPACE, LowMemoryEventsCommitSpace,
-         UNITS_COUNT_CUMULATIVE);
   RECORD(LOW_MEMORY_EVENTS_PHYSICAL, LowMemoryEventsPhysical,
          UNITS_COUNT_CUMULATIVE);
 #endif