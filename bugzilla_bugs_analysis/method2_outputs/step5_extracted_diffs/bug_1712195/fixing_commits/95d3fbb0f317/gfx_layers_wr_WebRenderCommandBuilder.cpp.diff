# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: gfx/layers/wr/WebRenderCommandBuilder.cpp
# Commit: 95d3fbb0f317
# Full Hash: 95d3fbb0f317131fe566fdb1838f5cf49266a63f
# Author: Jeff Muizelaar <jmuizelaar@mozilla.com>
# Date: 2021-06-04 15:42:19
# Description:
#   Bug 1712195. Use SafeIntersect. r=aosmond
#   
#   This uses the new SafeIntersect function
#   to avoid empty rects that overflow from leaking
#   through.
# ==============================================================================

diff -r 6a301646ecc9 -r 95d3fbb0f317 gfx/layers/wr/WebRenderCommandBuilder.cpp
--- a/gfx/layers/wr/WebRenderCommandBuilder.cpp	Fri Jun 04 12:35:16 2021 +0000
+++ b/gfx/layers/wr/WebRenderCommandBuilder.cpp	Fri Jun 04 12:35:42 2021 +0000
@@ -2428,7 +2428,7 @@
       LayerIntRect::FromUnknownRect(
           aMaskItem->GetBuildingRect().ScaleToOutsidePixels(
               scale.width, scale.height, appUnitsPerDevPixel))
-          .Intersect(itemRect);
+          .SafeIntersect(itemRect);
 
   if (visibleRect.IsEmpty()) {
     return Nothing();