# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/base/nsContentUtils.cpp
# Commit: cc1458da3e8f
# Full Hash: cc1458da3e8fed4378686f42866acb8a5832cb46
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2021-05-13 09:33:03
# Regressor Bug: 1710756
# File Overlap Count: 1
# Description:
#   Bug 1710756 - Use WindowGlobalOrNull rather than WindowOrNull in IsCallerChromeOrErrorPage. r=mccr8
#   
#   WindowOrNull only works if the object is a window (or document,
#   apparently), but won't work more generally. Use the global of the
#   object instead so that it works for properties exposed on Element.
# ==============================================================================

diff -r 8c0812db03be -r cc1458da3e8f dom/base/nsContentUtils.cpp
--- a/dom/base/nsContentUtils.cpp	Wed May 12 23:32:38 2021 +0000
+++ b/dom/base/nsContentUtils.cpp	Wed May 12 23:38:46 2021 +0000
@@ -2135,7 +2135,7 @@
   if (ThreadsafeIsSystemCaller(aCx)) {
     return true;
   }
-  nsGlobalWindowInner* win = xpc::WindowOrNull(aObject);
+  nsGlobalWindowInner* win = xpc::WindowGlobalOrNull(aObject);
   if (!win) {
     return false;
   }
