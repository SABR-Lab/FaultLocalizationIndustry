# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: accessible/html/HTMLListAccessible.h
# Commit: 5ff1cc0ecdb3
# Full Hash: 5ff1cc0ecdb3cc503d6e0b6f5509eda78d551c7a
# Author: Eitan Isaacson <eitan@monotonous.org>
# Date: 2021-05-05 04:13:36
# Regressor Bug: 1513447
# File Overlap Count: 1
# Description:
#   Bug 1513447 - Use generated marker elements for list bullet accessibles. r=Jamie
#   
#   In 1513447 there is a demonstrated instance in which the generated
#   marker is replaced with another one and throws the list item bullet
#   state into an unknown state. To remedy this we need to observe when such
# ==============================================================================

diff -r 029a5e8fa8f3 -r 5ff1cc0ecdb3 accessible/html/HTMLListAccessible.h
--- a/accessible/html/HTMLListAccessible.h	Tue May 04 18:46:44 2021 +0000
+++ b/accessible/html/HTMLListAccessible.h	Tue May 04 19:07:59 2021 +0000
@@ -49,24 +49,15 @@
                                        HyperTextAccessibleWrap)
 
   // LocalAccessible
-  virtual void Shutdown() override;
   virtual nsRect BoundsInAppUnits() const override;
   virtual a11y::role NativeRole() const override;
   virtual uint64_t NativeState() const override;
 
-  virtual bool InsertChildAt(uint32_t aIndex, LocalAccessible* aChild) override;
-  virtual void RelocateChild(uint32_t aNewIndex,
-                             LocalAccessible* aChild) override;
-
   // HTMLLIAccessible
-  HTMLListBulletAccessible* Bullet() const { return mBullet; }
-  void UpdateBullet(bool aHasBullet);
+  LocalAccessible* Bullet() const;
 
  protected:
   virtual ~HTMLLIAccessible() {}
-
- private:
-  HTMLListBulletAccessible* mBullet;
 };
 
 /**
@@ -78,19 +69,12 @@
   virtual ~HTMLListBulletAccessible() {}
 
   // LocalAccessible
-  virtual nsIFrame* GetFrame() const override;
   virtual ENameValueFlag Name(nsString& aName) const override;
   virtual a11y::role NativeRole() const override;
   virtual uint64_t NativeState() const override;
+  virtual already_AddRefed<nsIPersistentProperties> NativeAttributes() override;
   virtual void AppendTextTo(nsAString& aText, uint32_t aStartOffset = 0,
                             uint32_t aLength = UINT32_MAX) override;
-
-  // HTMLListBulletAccessible
-
-  /**
-   * Return true if the bullet is inside of list item element boundaries.
-   */
-  bool IsInside() const;
 };
 
 inline HTMLLIAccessible* LocalAccessible::AsHTMLListItem() {