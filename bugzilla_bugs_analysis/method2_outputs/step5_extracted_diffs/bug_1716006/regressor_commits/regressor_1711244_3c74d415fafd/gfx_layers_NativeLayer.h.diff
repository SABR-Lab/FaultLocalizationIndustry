# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/layers/NativeLayer.h
# Commit: 3c74d415fafd
# Full Hash: 3c74d415fafd4bff5576ed0a2256c1a0232b5937
# Author: Robert Mader <robert.mader@posteo.de>
# Date: 2021-06-11 09:42:05
# Regressor Bug: 1711244
# File Overlap Count: 2
# Description:
#   Bug 1711244 - Integrate NativeLayerWayland with WaylandVsyncSource, r=stransky,gfx-reviewers,jrmuizel
#   
#   Make the vsync source request frame callbacks from opaque native
#   layers. This is necessary as opaque layers may occlude the
#   MozContainer surface, which is normally used for frame callbacks.
# ==============================================================================

diff -r bc5ca21bf534 -r 3c74d415fafd gfx/layers/NativeLayer.h
--- a/gfx/layers/NativeLayer.h	Thu Jun 10 14:58:53 2021 +0000
+++ b/gfx/layers/NativeLayer.h	Thu Jun 10 15:12:54 2021 +0000
@@ -31,6 +31,8 @@
 class NativeLayer;
 class NativeLayerCA;
 class NativeLayerWayland;
+class NativeLayerRootCA;
+class NativeLayerRootWayland;
 class NativeLayerRootSnapshotter;
 class SurfacePoolHandle;
 
@@ -44,6 +46,9 @@
  public:
   NS_INLINE_DECL_THREADSAFE_REFCOUNTING(NativeLayerRoot)
 
+  virtual NativeLayerRootCA* AsNativeLayerRootCA() { return nullptr; }
+  virtual NativeLayerRootWayland* AsNativeLayerRootWayland() { return nullptr; }
+
   virtual already_AddRefed<NativeLayer> CreateLayer(
       const gfx::IntSize& aSize, bool aIsOpaque,
       SurfacePoolHandle* aSurfacePoolHandle) = 0;