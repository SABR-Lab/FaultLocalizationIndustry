# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: ipc/glue/NodeChannel.h
# Commit: 115187a5f512
# Full Hash: 115187a5f5120c5fda63685fd8a1471339852735
# Author: Nika Layzell <nika@thelayzells.com>
# Date: 2021-06-26 09:46:54
# Description:
#   Bug 1717993 - Hold a WeakPtr to mExistingListener in NodeChannel, r=handyman
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D118868
# ==============================================================================

diff -r d0b8984194c6 -r 115187a5f512 ipc/glue/NodeChannel.h
--- a/ipc/glue/NodeChannel.h	Fri Jun 25 21:10:50 2021 +0000
+++ b/ipc/glue/NodeChannel.h	Fri Jun 25 21:30:49 2021 +0000
@@ -138,7 +138,7 @@
   bool mClosed = false;
 
   // WARNING: Must only be accessed on the IO thread.
-  IPC::Channel::Listener* mExistingListener = nullptr;
+  WeakPtr<IPC::Channel::Listener> mExistingListener;
 };
 
 }  // namespace mozilla::ipc
