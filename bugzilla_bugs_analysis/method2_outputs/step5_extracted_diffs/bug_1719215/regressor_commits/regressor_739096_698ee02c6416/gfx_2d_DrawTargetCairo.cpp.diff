# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/2d/DrawTargetCairo.cpp
# Commit: 698ee02c6416
# Full Hash: 698ee02c64164310cc03aa69d259960b12cf751f
# Author: Jonathan Kew <jkew@mozilla.com>
# Date: 2021-04-29 21:42:31
# Regressor Bug: 739096
# File Overlap Count: 1
# Description:
#   Bug 739096 - Remove support for CGLayer-backed cairo quartz surface. r=jrmuizel
#   
#   This was a performance optimization that we no longer care about.
#   Removing it will avoid the need to merge the additions into the new
#   cairo-quartz-surface code from upstream.
# ==============================================================================

diff --git a/gfx/2d/DrawTargetCairo.cpp b/gfx/2d/DrawTargetCairo.cpp
--- a/gfx/2d/DrawTargetCairo.cpp
+++ b/gfx/2d/DrawTargetCairo.cpp
@@ -1745,23 +1745,16 @@ already_AddRefed<DrawTarget> DrawTargetC
   cairo_surface_t* similar;
   switch (cairo_surface_get_type(mSurface)) {
 #ifdef CAIRO_HAS_WIN32_SURFACE
     case CAIRO_SURFACE_TYPE_WIN32:
       similar = cairo_win32_surface_create_with_dib(
           GfxFormatToCairoFormat(aFormat), aSize.width, aSize.height);
       break;
 #endif
-#ifdef CAIRO_HAS_QUARTZ_SURFACE
-    case CAIRO_SURFACE_TYPE_QUARTZ:
-      similar = cairo_quartz_surface_create_cg_layer(
-          mSurface, GfxFormatToCairoContent(aFormat), aSize.width,
-          aSize.height);
-      break;
-#endif
     default:
       similar = cairo_surface_create_similar(mSurface,
                                              GfxFormatToCairoContent(aFormat),
                                              aSize.width, aSize.height);
       break;
   }
 
   if (!cairo_surface_status(similar)) {