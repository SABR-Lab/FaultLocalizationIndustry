# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/PuppetWidget.cpp
# Commit: 7398bc391379
# Full Hash: 7398bc391379a76e4bdde7dd13b0410ea7137ad7
# Author: Matt Woodrow <mwoodrow@mozilla.com>
# Date: 2021-08-18 15:53:06
# Regressor Bug: 1726063
# File Overlap Count: 2
# Description:
#   Bug 1726063 - Remove option to use BasicLayerManager. r=jrmuizel
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D122796
# ==============================================================================

diff -r f62cad8b2ebd -r 7398bc391379 widget/PuppetWidget.cpp
--- a/widget/PuppetWidget.cpp	Tue Aug 17 21:35:35 2021 +0000
+++ b/widget/PuppetWidget.cpp	Tue Aug 17 23:19:44 2021 +0000
@@ -602,13 +602,7 @@
     if (XRE_IsParentProcess()) {
       // On the parent process there is no CompositorBridgeChild which confuses
       // some layers code, so we use basic layers instead. Note that we create
-      // a non-retaining layer manager since we don't care about performance.
-      if (StaticPrefs::gfx_basic_layer_manager_force_enabled()) {
-        mWindowRenderer =
-            new BasicLayerManager(BasicLayerManager::BLM_OFFSCREEN);
-      } else {
-        mWindowRenderer = new FallbackRenderer;
-      }
+      mWindowRenderer = new FallbackRenderer;
       return mWindowRenderer;
     }
 