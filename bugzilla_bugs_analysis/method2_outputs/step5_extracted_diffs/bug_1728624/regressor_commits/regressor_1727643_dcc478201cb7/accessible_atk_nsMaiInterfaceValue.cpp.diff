# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: accessible/atk/nsMaiInterfaceValue.cpp
# Commit: dcc478201cb7
# Full Hash: dcc478201cb75d078d3a5fd33f306c7b9cfcd527
# Author: Eitan Isaacson <eitan@monotonous.org>
# Date: 2021-08-27 03:42:22
# Regressor Bug: 1727643
# File Overlap Count: 1
# Description:
#   Bug 1727643 - P4: Make use of new common methods in platforms and XPCOM. r=morgan
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D123698
# ==============================================================================

diff -r 1a9901750064 -r dcc478201cb7 accessible/atk/nsMaiInterfaceValue.cpp
--- a/accessible/atk/nsMaiInterfaceValue.cpp	Thu Aug 26 19:40:05 2021 +0000
+++ b/accessible/atk/nsMaiInterfaceValue.cpp	Thu Aug 26 19:40:06 2021 +0000
@@ -18,17 +18,10 @@
 extern "C" {
 
 static void getCurrentValueCB(AtkValue* obj, GValue* value) {
-  RemoteAccessible* proxy = nullptr;
-  AccessibleWrap* accWrap = GetAccessibleWrap(ATK_OBJECT(obj));
-  if (!accWrap) {
-    proxy = GetProxy(ATK_OBJECT(obj));
-    if (!proxy) {
-      return;
-    }
-  }
+  Accessible* acc = GetInternalObj(ATK_OBJECT(obj));
 
   memset(value, 0, sizeof(GValue));
-  double accValue = accWrap ? accWrap->CurValue() : proxy->CurValue();
+  double accValue = acc->CurValue();
   if (IsNaN(accValue)) return;
 
   g_value_init(value, G_TYPE_DOUBLE);
@@ -36,17 +29,10 @@
 }
 
 static void getMaximumValueCB(AtkValue* obj, GValue* value) {
-  RemoteAccessible* proxy = nullptr;
-  AccessibleWrap* accWrap = GetAccessibleWrap(ATK_OBJECT(obj));
-  if (!accWrap) {
-    proxy = GetProxy(ATK_OBJECT(obj));
-    if (!proxy) {
-      return;
-    }
-  }
+  Accessible* acc = GetInternalObj(ATK_OBJECT(obj));
 
   memset(value, 0, sizeof(GValue));
-  double accValue = accWrap ? accWrap->MaxValue() : proxy->MaxValue();
+  double accValue = acc->MaxValue();
   if (IsNaN(accValue)) return;
 
   g_value_init(value, G_TYPE_DOUBLE);
@@ -54,17 +40,10 @@
 }
 
 static void getMinimumValueCB(AtkValue* obj, GValue* value) {
-  RemoteAccessible* proxy = nullptr;
-  AccessibleWrap* accWrap = GetAccessibleWrap(ATK_OBJECT(obj));
-  if (!accWrap) {
-    proxy = GetProxy(ATK_OBJECT(obj));
-    if (!proxy) {
-      return;
-    }
-  }
+  Accessible* acc = GetInternalObj(ATK_OBJECT(obj));
 
   memset(value, 0, sizeof(GValue));
-  double accValue = accWrap ? accWrap->MinValue() : proxy->MinValue();
+  double accValue = acc->MinValue();
   if (IsNaN(accValue)) return;
 
   g_value_init(value, G_TYPE_DOUBLE);
@@ -72,17 +51,10 @@
 }
 
 static void getMinimumIncrementCB(AtkValue* obj, GValue* minimumIncrement) {
-  RemoteAccessible* proxy = nullptr;
-  AccessibleWrap* accWrap = GetAccessibleWrap(ATK_OBJECT(obj));
-  if (!accWrap) {
-    proxy = GetProxy(ATK_OBJECT(obj));
-    if (!proxy) {
-      return;
-    }
-  }
+  Accessible* acc = GetInternalObj(ATK_OBJECT(obj));
 
   memset(minimumIncrement, 0, sizeof(GValue));
-  double accValue = accWrap ? accWrap->Step() : proxy->Step();
+  double accValue = acc->Step();
   if (IsNaN(accValue)) {
     accValue = 0;  // zero if the minimum increment is undefined
   }