# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: gfx/thebes/gfxPlatform.h
# Commit: 454a9b07d164
# Full Hash: 454a9b07d164c2824388c758ded0036a76c56287
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2021-09-23 21:45:25
# Description:
#   Bug 1730456 - InitPlatformFontList should reframe. r=jfkthame
#   
#   I don't know why it didn't broadcast the reflow request to child
#   processes... Perhaps it doesn't have to?
#   
# ==============================================================================

diff -r c6819fdea3a5 -r 454a9b07d164 gfx/thebes/gfxPlatform.h
--- a/gfx/thebes/gfxPlatform.h	Thu Sep 23 16:28:23 2021 +0000
+++ b/gfx/thebes/gfxPlatform.h	Thu Sep 23 16:35:32 2021 +0000
@@ -607,13 +607,19 @@
   int32_t GetBidiNumeralOption();
 
   /**
-   * This is a bit ugly, but useful... force all presContexts to reflow,
-   * by toggling a preference that they observe. This is used when
-   * something about platform settings changes that might have an effect
-   * on layout, such as font rendering settings that influence metrics.
+   * Force all presContexts to reflow (and reframe if needed).
+   *
+   * This is used when something about platform settings changes that might have
+   * an effect on layout, such as font rendering settings that influence
+   * metrics, or installed fonts.
+   *
+   * By default it also broadcast it to child processes, but some callers might
+   * not need it if they implement their own notification.
    */
   enum class NeedsReframe : bool { No, Yes };
-  static void ForceGlobalReflow(NeedsReframe);
+  enum class BroadcastToChildren : bool { No, Yes };
+  static void ForceGlobalReflow(NeedsReframe,
+                                BroadcastToChildren = BroadcastToChildren::Yes);
 
   static void FlushFontAndWordCaches();
 