# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/media/webrtc/libwebrtcglue/VideoConduit.h
# Commit: b99b71e755e4
# Full Hash: b99b71e755e470a5dd152a5d6313f3002b2b9ba9
# Author: Andreas Pehrson <apehrson@mozilla.com>
# Date: 2021-12-18 09:43:08
# Description:
#   Bug 1744081 - Move VideoConduit::Shutdown asyncness ownership into VideoConduit. r=bryce,ng
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D133933
# ==============================================================================

diff -r f69c775a1024 -r b99b71e755e4 dom/media/webrtc/libwebrtcglue/VideoConduit.h
--- a/dom/media/webrtc/libwebrtcglue/VideoConduit.h	Fri Dec 17 20:29:15 2021 +0000
+++ b/dom/media/webrtc/libwebrtcglue/VideoConduit.h	Fri Dec 17 20:34:18 2021 +0000
@@ -128,7 +128,7 @@
 
   bool HasCodecPluginID(uint64_t aPluginID) const override;
 
-  void Shutdown() override;
+  RefPtr<GenericPromise> Shutdown() override;
 
   bool Denoising() const { return mDenoising; }
 
@@ -151,8 +151,6 @@
 
   // Necessary Init steps on main thread.
   MediaConduitErrorCode Init();
-  // Necessary Init steps on the Call thread.
-  void InitCall();
 
   Ssrcs GetLocalSSRCs() const override;
   Maybe<Ssrc> GetRemoteSSRC() const override;
@@ -478,7 +476,7 @@
   // Main thread only
   nsTArray<uint64_t> mRecvCodecPluginIDs;
 
-  // Call thread only
+  // Main thread only
   MediaEventListener mSendPluginCreated;
   MediaEventListener mSendPluginReleased;
   MediaEventListener mRecvPluginCreated;