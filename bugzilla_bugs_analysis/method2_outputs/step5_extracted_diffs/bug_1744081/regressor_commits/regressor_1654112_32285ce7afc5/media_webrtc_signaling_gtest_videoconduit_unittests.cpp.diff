# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: media/webrtc/signaling/gtest/videoconduit_unittests.cpp
# Commit: 32285ce7afc5
# Full Hash: 32285ce7afc5f2ec6e6d259fc4e5c26234537602
# Author: Andreas Pehrson <apehrson@mozilla.com>
# Date: 2021-11-01 18:17:33
# Regressor Bug: 1654112
# File Overlap Count: 1
# Description:
#   Bug 1654112 - Don't create two WebRtcCallWrappers in VideoConduitTest. r=ng
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D108082
# ==============================================================================

diff -r 449198942a70 -r 32285ce7afc5 media/webrtc/signaling/gtest/videoconduit_unittests.cpp
--- a/media/webrtc/signaling/gtest/videoconduit_unittests.cpp	Wed Mar 10 23:37:27 2021 +0100
+++ b/media/webrtc/signaling/gtest/videoconduit_unittests.cpp	Thu Mar 11 10:32:28 2021 +0100
@@ -44,8 +44,7 @@
       : mCall(new MockCall()),
         mCallWrapper(WebRtcCallWrapper::Create(UniquePtr<MockCall>(mCall))),
         mVideoConduit(MakeRefPtr<WebrtcVideoConduit>(
-            WebRtcCallWrapper::Create(UniquePtr<MockCall>(mCall)),
-            GetCurrentSerialEventTarget(), "")) {
+            mCallWrapper, GetCurrentSerialEventTarget(), "")) {
     NSS_NoDB_Init(nullptr);
 
     mVideoConduit->SetLocalSSRCs({42}, {43});
