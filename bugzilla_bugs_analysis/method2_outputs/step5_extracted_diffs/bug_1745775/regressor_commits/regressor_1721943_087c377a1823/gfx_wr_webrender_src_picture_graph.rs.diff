# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/wr/webrender/src/picture_graph.rs
# Commit: 087c377a1823
# Full Hash: 087c377a18238567e38b0d2edf5afa4baa0fc81e
# Author: Glenn Watson <git@intuitionlibrary.com>
# Date: 2021-07-28 09:43:36
# Regressor Bug: 1721943
# File Overlap Count: 1
# Description:
#   Bug 1721943 - Fix clear of picture graph update passes r=kvark,gfx-reviewers
#   
#   When changing a reserve/push loop to a resize_with during review
#   I accidentally removed the clear. This can mean that we end up
#   with duplicate entries in this pass update arrays.
# ==============================================================================

diff -r e7b81cc1f26d -r 087c377a1823 gfx/wr/webrender/src/picture_graph.rs
--- a/gfx/wr/webrender/src/picture_graph.rs	Tue Jul 27 18:54:52 2021 +0300
+++ b/gfx/wr/webrender/src/picture_graph.rs	Tue Jul 27 15:41:37 2021 +0000
@@ -75,6 +75,7 @@
 
         let pass_count = max_pass_index + 1;
 
+        self.update_passes.clear();
         self.update_passes.resize_with(pass_count, Vec::new);
 
         for (pic_index, info) in self.pic_info.iter().enumerate() {
