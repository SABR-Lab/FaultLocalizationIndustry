# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/IMEData.h
# Commit: 4fe6068164c1
# Full Hash: 4fe6068164c1d3ceee832a161056e870d5417d2a
# Author: Masayuki Nakano <masayuki@d-toybox.com>
# Date: 2022-02-08 17:32:27
# Regressor Bug: 1746104
# File Overlap Count: 1
# Description:
#   Bug 1746104 - part 6-3: Wrap `ContentCache::mText` with `Maybe` r=m_kato
#   
#   For managing the state of text content cache independent from selection, it
#   should be wrapped with `Maybe`.
#   
# ==============================================================================

diff -r 88cd68e70502 -r 4fe6068164c1 widget/IMEData.h
--- a/widget/IMEData.h	Mon Feb 07 22:33:40 2022 +0000
+++ b/widget/IMEData.h	Mon Feb 07 22:33:40 2022 +0000
@@ -23,6 +23,9 @@
 class ContentSelection;
 class WritingMode;
 
+template <class T>
+class Maybe;
+
 // Helper class to logging string which may contain various Unicode characters
 // and/or may be too long string for logging.
 class MOZ_STACK_CLASS PrintStringDetail : public nsAutoCString {
@@ -34,6 +37,9 @@
   PrintStringDetail() = delete;
   explicit PrintStringDetail(const nsAString& aString,
                              uint32_t aMaxLength = UINT32_MAX);
+  template <typename StringType>
+  explicit PrintStringDetail(const Maybe<StringType>& aMaybeString,
+                             uint32_t aMaxLength = UINT32_MAX);
 
  private:
   static nsCString PrintCharData(char32_t aChar);
