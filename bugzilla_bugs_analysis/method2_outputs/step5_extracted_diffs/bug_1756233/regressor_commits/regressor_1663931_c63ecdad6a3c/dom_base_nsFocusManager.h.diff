# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/base/nsFocusManager.h
# Commit: c63ecdad6a3c
# Full Hash: c63ecdad6a3c60ba625517d34bb29c8aae9f5e95
# Author: Henri Sivonen <hsivonen@hsivonen.fi>
# Date: 2021-02-22 17:34:52
# Regressor Bug: 1663931
# File Overlap Count: 1
# Description:
#   Bug 1663931 - Avoid moving focus when changing iframe remoteness. r=nika,mccr8
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D99215
# ==============================================================================

diff -r 828c62bfc0a2 -r c63ecdad6a3c dom/base/nsFocusManager.h
--- a/dom/base/nsFocusManager.h	Mon Feb 22 10:48:53 2021 +0000
+++ b/dom/base/nsFocusManager.h	Mon Feb 22 10:51:51 2021 +0000
@@ -258,6 +258,8 @@
    */
   void FireDelayedEvents(Document* aDocument);
 
+  void WasNuked(nsPIDOMWindowOuter* aWindow);
+
   /**
    * Indicate that a plugin wishes to take the focus. This is similar to a
    * normal focus except that the widget focus is not changed. Updating the
@@ -752,7 +754,8 @@
                                      int32_t aFlags, bool aGettingFocus,
                                      bool aShouldShowFocusRing);
 
-  void SetFocusedWindowInternal(nsPIDOMWindowOuter* aWindow);
+  void SetFocusedWindowInternal(nsPIDOMWindowOuter* aWindow,
+                                bool aSyncBrowsingContext = true);
 
   bool TryDocumentNavigation(nsIContent* aCurrentContent,
                              bool* aCheckSubDocument,