# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/script/ScriptTrace.h
# Commit: b8ecf23519c9
# Full Hash: b8ecf23519c9ab5180d08f00c712674bfe968dac
# Author: Yulia Startsev <ystartsev@mozilla.com>
# Date: 2022-02-21 21:39:46
# Regressor Bug: 1742437
# File Overlap Count: 5
# Description:
#   Bug 1742437 - re-scope all generic module/script loader files under js/loader; r=jonco
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D138133
# ==============================================================================

diff -r 85fd9fc9cffa -r b8ecf23519c9 dom/script/ScriptTrace.h
--- a/dom/script/ScriptTrace.h	Mon Feb 21 15:39:08 2022 +0000
+++ b/dom/script/ScriptTrace.h	Mon Feb 21 15:39:09 2022 +0000
@@ -10,34 +10,33 @@
 #include "mozilla/AsyncEventDispatcher.h"
 #include "mozilla/StaticPrefs_dom.h"
 
-namespace mozilla {
-namespace dom {
-namespace script {
-
 // This macro is used to wrap a tracing mechanism which is scheduling events
 // which are then used by the JavaScript code of test cases to track the code
 // path to verify the optimizations are working as expected.
-#define TRACE_FOR_TEST(elem, str)                                              \
-  PR_BEGIN_MACRO                                                               \
-  nsresult rv = NS_OK;                                                         \
-  rv =                                                                         \
-      script::TestingDispatchEvent(elem, NS_LITERAL_STRING_FROM_CSTRING(str)); \
-  NS_ENSURE_SUCCESS(rv, rv);                                                   \
+#define TRACE_FOR_TEST(elem, str)                  \
+  PR_BEGIN_MACRO                                   \
+  nsresult rv = NS_OK;                             \
+  rv = mozilla::dom::script::TestingDispatchEvent( \
+      elem, NS_LITERAL_STRING_FROM_CSTRING(str));  \
+  NS_ENSURE_SUCCESS(rv, rv);                       \
   PR_END_MACRO
 
-#define TRACE_FOR_TEST_BOOL(elem, str)                                         \
-  PR_BEGIN_MACRO                                                               \
-  nsresult rv = NS_OK;                                                         \
-  rv =                                                                         \
-      script::TestingDispatchEvent(elem, NS_LITERAL_STRING_FROM_CSTRING(str)); \
-  NS_ENSURE_SUCCESS(rv, false);                                                \
+#define TRACE_FOR_TEST_BOOL(elem, str)             \
+  PR_BEGIN_MACRO                                   \
+  nsresult rv = NS_OK;                             \
+  rv = mozilla::dom::script::TestingDispatchEvent( \
+      elem, NS_LITERAL_STRING_FROM_CSTRING(str));  \
+  NS_ENSURE_SUCCESS(rv, false);                    \
   PR_END_MACRO
 
-#define TRACE_FOR_TEST_NONE(elem, str)                                     \
-  PR_BEGIN_MACRO                                                           \
-  script::TestingDispatchEvent(elem, NS_LITERAL_STRING_FROM_CSTRING(str)); \
+#define TRACE_FOR_TEST_NONE(elem, str)            \
+  PR_BEGIN_MACRO                                  \
+  mozilla::dom::script::TestingDispatchEvent(     \
+      elem, NS_LITERAL_STRING_FROM_CSTRING(str)); \
   PR_END_MACRO
 
+namespace mozilla::dom::script {
+
 static nsresult TestingDispatchEvent(nsIScriptElement* aScriptElement,
                                      const nsAString& aEventType) {
   if (!StaticPrefs::dom_expose_test_interfaces()) {
@@ -53,8 +52,6 @@
       target, aEventType, CanBubble::eYes, ChromeOnlyDispatch::eNo);
   return dispatcher->PostDOMEvent();
 }
-}  // namespace script
-}  // namespace dom
-}  // namespace mozilla
+}  // namespace mozilla::dom::script
 
 #endif  // mozilla_dom_ScriptTrace_h