# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/loader/LoadedScript.h
# Commit: b8ecf23519c9
# Full Hash: b8ecf23519c9ab5180d08f00c712674bfe968dac
# Author: Yulia Startsev <ystartsev@mozilla.com>
# Date: 2022-02-21 21:39:46
# Regressor Bug: 1742437
# File Overlap Count: 5
# Description:
#   Bug 1742437 - re-scope all generic module/script loader files under js/loader; r=jonco
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D138133
# ==============================================================================

diff -r 85fd9fc9cffa -r b8ecf23519c9 js/loader/LoadedScript.h
--- a/js/loader/LoadedScript.h	Mon Feb 21 15:39:08 2022 +0000
+++ b/js/loader/LoadedScript.h	Mon Feb 21 15:39:09 2022 +0000
@@ -4,8 +4,8 @@
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-#ifndef mozilla_dom_LoadedScript_h
-#define mozilla_dom_LoadedScript_h
+#ifndef js_loader_LoadedScript_h
+#define js_loader_LoadedScript_h
 
 #include "nsCOMPtr.h"
 #include "nsCycleCollectionParticipant.h"
@@ -14,11 +14,7 @@
 
 class nsIURI;
 
-namespace mozilla {
-namespace dom {
-
-class Element;
-class ScriptLoader;
+namespace JS::loader {
 
 void HostAddRefTopLevelScript(const JS::Value& aPrivate);
 void HostReleaseTopLevelScript(const JS::Value& aPrivate);
@@ -31,11 +27,11 @@
   ScriptKind mKind;
   RefPtr<ScriptFetchOptions> mFetchOptions;
   nsCOMPtr<nsIURI> mBaseURL;
-  nsCOMPtr<Element> mElement;
+  RefPtr<mozilla::dom::Element> mElement;
 
  protected:
   LoadedScript(ScriptKind aKind, ScriptFetchOptions* aFetchOptions,
-               nsIURI* aBaseURL, Element* aElement);
+               nsIURI* aBaseURL, mozilla::dom::Element* aElement);
 
   virtual ~LoadedScript();
 
@@ -54,7 +50,7 @@
   ScriptFetchOptions* GetFetchOptions() const { return mFetchOptions; }
 
   // Used by the Debugger to get the associated Script Element
-  Element* GetScriptElement() const { return mElement; }
+  mozilla::dom::Element* GetScriptElement() const { return mElement; }
 
   nsIURI* BaseURL() const { return mBaseURL; }
 
@@ -66,7 +62,7 @@
 
  public:
   ClassicScript(ScriptFetchOptions* aFetchOptions, nsIURI* aBaseURL,
-                Element* aElement);
+                mozilla::dom::Element* aElement);
 };
 
 class EventScript final : public LoadedScript {
@@ -74,7 +70,7 @@
 
  public:
   EventScript(ScriptFetchOptions* aFetchOptions, nsIURI* aBaseURL,
-              Element* aElement);
+              mozilla::dom::Element* aElement);
 };
 
 // A single module script. May be used to satisfy multiple load requests.
@@ -93,7 +89,7 @@
                                                          LoadedScript)
 
   ModuleScript(ScriptFetchOptions* aFetchOptions, nsIURI* aBaseURL,
-               Element* aElement);
+               mozilla::dom::Element* aElement);
 
   void SetModuleRecord(JS::Handle<JSObject*> aModuleRecord);
   void SetParseError(const JS::Value& aError);
@@ -123,7 +119,6 @@
   return static_cast<ModuleScript*>(this);
 }
 
-}  // namespace dom
-}  // namespace mozilla
+}  // namespace JS::loader
 
-#endif  // mozilla_dom_LoadedScript_h
+#endif  // js_loader_LoadedScript_h