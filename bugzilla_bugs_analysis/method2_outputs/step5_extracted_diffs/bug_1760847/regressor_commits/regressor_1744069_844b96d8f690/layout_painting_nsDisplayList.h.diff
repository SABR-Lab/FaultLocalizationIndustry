# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/painting/nsDisplayList.h
# Commit: 844b96d8f690
# Full Hash: 844b96d8f690c6f0d997c1bed10c9a66c9d2ef85
# Author: Miko Mynttinen <mikokm@gmail.com>
# Date: 2022-03-14 21:49:02
# Regressor Bug: 1744069
# File Overlap Count: 1
# Description:
#   Bug 1744069 - Restore the previous behavior of merging RDL list traversal r=emilio
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D140920
# ==============================================================================

diff -r 76c68029dfca -r 844b96d8f690 layout/painting/nsDisplayList.h
--- a/layout/painting/nsDisplayList.h	Mon Mar 14 12:27:48 2022 -0400
+++ b/layout/painting/nsDisplayList.h	Mon Mar 14 15:11:05 2022 +0000
@@ -3244,6 +3244,25 @@
     return list;
   }
 
+  nsDisplayItem* RemoveBottom() {
+    if (!mBottom) {
+      return nullptr;
+    }
+
+    nsDisplayItem* bottom = mBottom->mValue;
+    mBottom = mBottom->mNext;
+
+    if (!mBottom) {
+      // No bottom item means no items at all.
+      mTop = nullptr;
+    }
+
+    MOZ_ASSERT(mLength > 0);
+    mLength--;
+
+    return bottom;
+  }
+
   /**
    * Paint the list to the rendering context. We assume that (0,0) in aCtx
    * corresponds to the origin of the reference frame. For best results,
