# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/cocoa/nsDeviceContextSpecX.h
# Commit: 8b047a24a91d
# Full Hash: 8b047a24a91df99818fd01165b6b00d05258a3d4
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2022-03-31 09:35:41
# Regressor Bug: 1760836
# File Overlap Count: 1
# Description:
#   Bug 1760836 - Support printing to an nsIOutputStream. r=jfkthame,jrmuizel,webdriver-reviewers,geckoview-reviewers,agi
#   
#   The trickiest bits are the PrintTargetCG ones, the rest is just plumbing
#   and cleanups and tests, but let me know if you want those to be split
#   out, can do.
# ==============================================================================

diff -r a04583558158 -r 8b047a24a91d widget/cocoa/nsDeviceContextSpecX.h
--- a/widget/cocoa/nsDeviceContextSpecX.h	Wed Mar 30 18:46:53 2022 +0000
+++ b/widget/cocoa/nsDeviceContextSpecX.h	Wed Mar 30 18:51:58 2022 +0000
@@ -37,13 +37,14 @@
   virtual ~nsDeviceContextSpecX();
 
  protected:
-  PMPrintSession mPrintSession;    // printing context.
-  PMPageFormat mPageFormat;        // page format.
-  PMPrintSettings mPrintSettings;  // print settings.
+  PMPrintSession mPrintSession = nullptr;    // printing context.
+  PMPageFormat mPageFormat = nullptr;        // page format.
+  PMPrintSettings mPrintSettings = nullptr;  // print settings.
+  nsCOMPtr<nsIOutputStream> mOutputStream;   // Output stream from settings.
 #ifdef MOZ_ENABLE_SKIA_PDF
-  nsCOMPtr<nsIFile>
-      mTempFile;  // file "print" output is generated to if printing via PDF
-  bool mPrintViaSkPDF;
+  // file "print" output generated if printing via PDF
+  nsCOMPtr<nsIFile> mTempFile;
+  bool mPrintViaSkPDF = false;
 #endif
 };
 