# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit/MIR.cpp
# Commit: 4676e18c3cf0
# Full Hash: 4676e18c3cf0bb2d3a73f37e125ba29582812402
# Author: Andr√© Bargull <andre.bargull@gmail.com>
# Date: 2022-04-21 15:23:18
# Regressor Bug: 1765397
# File Overlap Count: 1
# Description:
#   Bug 1765397 - Part 4: Scalar replace ArgumentsSlice on inline arguments. r=iain
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D144044
# ==============================================================================

diff -r b037127d38f3 -r 4676e18c3cf0 js/src/jit/MIR.cpp
--- a/js/src/jit/MIR.cpp	Thu Apr 21 08:45:45 2022 +0000
+++ b/js/src/jit/MIR.cpp	Thu Apr 21 08:45:46 2022 +0000
@@ -6653,6 +6653,28 @@
   return arg;
 }
 
+MInlineArgumentsSlice* MInlineArgumentsSlice::New(
+    TempAllocator& alloc, MDefinition* begin, MDefinition* count,
+    MCreateInlinedArgumentsObject* args, JSObject* templateObj,
+    gc::InitialHeap initialHeap) {
+  auto* ins = new (alloc) MInlineArgumentsSlice(templateObj, initialHeap);
+
+  uint32_t argc = args->numActuals();
+  MOZ_ASSERT(argc <= ArgumentsObject::MaxInlinedArgs);
+
+  if (!ins->init(alloc, argc + NumNonArgumentOperands)) {
+    return nullptr;
+  }
+
+  ins->initOperand(0, begin);
+  ins->initOperand(1, count);
+  for (uint32_t i = 0; i < argc; i++) {
+    ins->initOperand(i + NumNonArgumentOperands, args->getArg(i));
+  }
+
+  return ins;
+}
+
 MDefinition* MNormalizeSliceTerm::foldsTo(TempAllocator& alloc) {
   auto* length = this->length();
   if (!length->isConstant() && !length->isArgumentsLength()) {