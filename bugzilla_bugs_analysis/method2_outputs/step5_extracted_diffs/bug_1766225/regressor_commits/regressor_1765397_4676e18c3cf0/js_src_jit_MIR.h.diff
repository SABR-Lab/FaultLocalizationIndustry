# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit/MIR.h
# Commit: 4676e18c3cf0
# Full Hash: 4676e18c3cf0bb2d3a73f37e125ba29582812402
# Author: Andr√© Bargull <andre.bargull@gmail.com>
# Date: 2022-04-21 15:23:18
# Regressor Bug: 1765397
# File Overlap Count: 1
# Description:
#   Bug 1765397 - Part 4: Scalar replace ArgumentsSlice on inline arguments. r=iain
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D144044
# ==============================================================================

diff -r b037127d38f3 -r 4676e18c3cf0 js/src/jit/MIR.h
--- a/js/src/jit/MIR.h	Thu Apr 21 08:45:45 2022 +0000
+++ b/js/src/jit/MIR.h	Thu Apr 21 08:45:46 2022 +0000
@@ -3004,6 +3004,44 @@
   MDefinition* foldsTo(TempAllocator& alloc) override;
 };
 
+class MInlineArgumentsSlice
+    : public MVariadicInstruction,
+      public MixPolicy<UnboxedInt32Policy<0>, UnboxedInt32Policy<1>,
+                       NoFloatPolicyAfter<2>>::Data {
+  JSObject* templateObj_;
+  gc::InitialHeap initialHeap_;
+
+  MInlineArgumentsSlice(JSObject* templateObj, gc::InitialHeap initialHeap)
+      : MVariadicInstruction(classOpcode),
+        templateObj_(templateObj),
+        initialHeap_(initialHeap) {
+    setResultType(MIRType::Object);
+  }
+
+  static const size_t NumNonArgumentOperands = 2;
+
+ public:
+  INSTRUCTION_HEADER(InlineArgumentsSlice)
+  static MInlineArgumentsSlice* New(TempAllocator& alloc, MDefinition* begin,
+                                    MDefinition* count,
+                                    MCreateInlinedArgumentsObject* args,
+                                    JSObject* templateObj,
+                                    gc::InitialHeap initialHeap);
+  NAMED_OPERANDS((0, begin), (1, count))
+
+  JSObject* templateObj() const { return templateObj_; }
+  gc::InitialHeap initialHeap() const { return initialHeap_; }
+
+  MDefinition* getArg(uint32_t idx) const {
+    return getOperand(idx + NumNonArgumentOperands);
+  }
+  uint32_t numActuals() const { return numOperands() - NumNonArgumentOperands; }
+
+  AliasSet getAliasSet() const override { return AliasSet::None(); }
+
+  bool possiblyCalls() const override { return true; }
+};
+
 class MToFPInstruction : public MUnaryInstruction, public ToDoublePolicy::Data {
  public:
   // Types of values which can be converted.