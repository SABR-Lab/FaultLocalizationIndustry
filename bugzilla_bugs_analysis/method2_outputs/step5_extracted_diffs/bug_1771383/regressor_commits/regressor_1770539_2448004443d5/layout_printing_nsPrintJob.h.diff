# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/printing/nsPrintJob.h
# Commit: 2448004443d5
# Full Hash: 2448004443d5d97127fe3e972bae95f2efb2c958
# Author: Jonathan Watt <jwatt@jwatt.org>
# Date: 2022-05-23 09:52:44
# Regressor Bug: 1770539
# File Overlap Count: 1
# Description:
#   Bug 1770539 p7 - Move nsPrintData::mSelectionRoot to nsPrintJob. r=emilio
#   
#   Depends on D146978
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D146979
# ==============================================================================

diff -r f907e3b915ed -r 2448004443d5 layout/printing/nsPrintJob.h
--- a/layout/printing/nsPrintJob.h	Sun May 22 09:37:57 2022 +0000
+++ b/layout/printing/nsPrintJob.h	Sun May 22 09:37:57 2022 +0000
@@ -255,6 +255,11 @@
   // Only set if this nsPrintJob was created for a real print.
   RefPtr<RemotePrintJobChild> mRemotePrintJob;
 
+  // If there is a focused iframe, mSelectionRoot is set to its nsPrintObject.
+  // Otherwise, if there is a selection, it is set to the root nsPrintObject.
+  // Otherwise, it is unset.
+  nsPrintObject* mSelectionRoot = nullptr;
+
   // Array of non-owning pointers to all the nsPrintObjects owned by this
   // nsPrintJob. This includes mPrintObject, as well as all of its mKids (and
   // their mKids, etc.)
