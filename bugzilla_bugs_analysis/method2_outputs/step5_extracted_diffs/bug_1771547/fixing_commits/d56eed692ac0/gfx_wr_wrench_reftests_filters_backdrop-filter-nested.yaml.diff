# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: gfx/wr/wrench/reftests/filters/backdrop-filter-nested.yaml
# Commit: d56eed692ac0
# Full Hash: d56eed692ac0a798b3d38e5ce1ebcdf928a1281e
# Author: Glenn Watson <git@intuitionlibrary.com>
# Date: 2022-05-30 09:39:43
# Description:
#   Bug 1771547 - Fix task graph dependencies with nested / sibling backdrop-filters r=gfx-reviewers,lsalzman
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D147614
# ==============================================================================

diff -r 8e5ff7264e5d -r d56eed692ac0 gfx/wr/wrench/reftests/filters/backdrop-filter-nested.yaml
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/gfx/wr/wrench/reftests/filters/backdrop-filter-nested.yaml	Mon May 30 06:17:30 2022 +0000
@@ -0,0 +1,29 @@
+# Verify that when there are sibling backdrop-filters on the same backdrop
+# root, but they are separated by a filter / clip chain, the dependencies
+# are correctly set to ensure that the constrints for Existing render task
+# locations are met (that the existing task is scheduled prior to the
+# existing task, even if it's not needed for rendering order).
+---
+root:
+  items:
+    - type: clip
+      bounds: [0, 0, 100, 100]
+      id: 2
+      image-mask:
+          image: solid-color(255,255,255,255,100,100)
+          rect: [0, 0, 100, 100]
+          repeat: false
+    - type: stacking-context
+      filters: [identity]
+      wraps-backdrop-filter: true
+      items:
+        - type: backdrop-filter
+          bounds: 0 0 100 100
+          filters: identity
+        - type: stacking-context
+          wraps-backdrop-filter: true
+          clip-node: 2
+          items:
+          - type: backdrop-filter
+            bounds: 0 0 100 100
+            filters: identity