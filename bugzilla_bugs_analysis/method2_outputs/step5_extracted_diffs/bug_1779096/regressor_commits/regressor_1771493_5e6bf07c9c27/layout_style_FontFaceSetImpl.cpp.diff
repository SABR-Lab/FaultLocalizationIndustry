# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/style/FontFaceSetImpl.cpp
# Commit: 5e6bf07c9c27
# Full Hash: 5e6bf07c9c2783dba94107fc4b7ddf7ae466b9b6
# Author: Andrew Osmond <aosmond@mozilla.com>
# Date: 2022-06-29 03:44:30
# Regressor Bug: 1771493
# File Overlap Count: 1
# Description:
#   Bug 1771493 - Part 3. Abstract away buffer extraction from FontFaceImpl::InitializeSource. r=emilio
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D147818
# ==============================================================================

diff -r fbfb5b7dfb30 -r 5e6bf07c9c27 layout/style/FontFaceSetImpl.cpp
--- a/layout/style/FontFaceSetImpl.cpp	Tue Jun 28 14:27:21 2022 +0000
+++ b/layout/style/FontFaceSetImpl.cpp	Tue Jun 28 14:27:21 2022 +0000
@@ -878,7 +878,7 @@
     }
 
     face->mSourceType = gfxFontFaceSrc::eSourceType_Buffer;
-    face->mBuffer = aFontFace->CreateBufferSource();
+    face->mBuffer = aFontFace->TakeBufferSource();
   } else {
     AutoTArray<StyleFontFaceSourceListComponent, 8> sourceListComponents;
     aFontFace->GetSources(sourceListComponents);
