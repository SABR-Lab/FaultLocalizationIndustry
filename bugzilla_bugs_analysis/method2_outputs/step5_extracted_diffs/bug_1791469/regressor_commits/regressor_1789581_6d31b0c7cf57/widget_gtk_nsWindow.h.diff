# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/gtk/nsWindow.h
# Commit: 6d31b0c7cf57
# Full Hash: 6d31b0c7cf5760006767dd93c32acaa50e39e809
# Author: stransky <stransky@redhat.com>
# Date: 2022-09-19 15:58:06
# Regressor Bug: 1789581
# File Overlap Count: 1
# Description:
#   Bug 1789581 [Wayland] Call gdk_window_move() to reset GdkWindow internal position method r=emilio
#   
#   When widget is hidden gtk_window_move() does not move the widget but sets new widget coordinates
#   when widget is mapped again.
#   
# ==============================================================================

diff -r b6e830c59764 -r 6d31b0c7cf57 widget/gtk/nsWindow.h
--- a/widget/gtk/nsWindow.h	Mon Sep 19 10:39:16 2022 +0000
+++ b/widget/gtk/nsWindow.h	Mon Sep 19 10:39:16 2022 +0000
@@ -843,8 +843,9 @@
       nsTArray<nsIWidget*>* aLayoutWidgetHierarchy);
   void CloseAllPopupsBeforeRemotePopup();
   void WaylandPopupHideClosedPopups();
-  void WaylandPopupMove();
   void WaylandPopupPrepareForMove();
+  void WaylandPopupMoveImpl();
+  void WaylandPopupMovePlain(int aX, int aY);
   bool WaylandPopupRemoveNegativePosition(int* aX = nullptr, int* aY = nullptr);
   bool WaylandPopupCheckAndGetAnchor(GdkRectangle* aPopupAnchor,
                                      GdkPoint* aOffset);
