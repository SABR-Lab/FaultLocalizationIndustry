# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: editor/libeditor/DeleteRangeTransaction.cpp
# Commit: 6fab61424d92
# Full Hash: 6fab61424d92dfeadd6732ccf6b125ff25f797b4
# Author: Jan-Niklas Jaeschke <jjaschke@mozilla.com>
# Date: 2022-11-12 09:47:29
# Description:
#   Bug 1800043: Fixed condition to determine end of selected string. r=masayuki
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D161881
# ==============================================================================

diff -r 0926249d2745 -r 6fab61424d92 editor/libeditor/DeleteRangeTransaction.cpp
--- a/editor/libeditor/DeleteRangeTransaction.cpp	Fri Nov 11 12:55:28 2022 +0000
+++ b/editor/libeditor/DeleteRangeTransaction.cpp	Fri Nov 11 13:04:54 2022 +0000
@@ -57,12 +57,11 @@
   EditorRawDOMPoint startPoint(aRange.StartRef());
   EditorRawDOMPoint endPoint(aRange.EndRef());
   const bool maybeRangeStartsAfterWhiteSpace =
-      !(startPoint.IsStartOfContainer() && !startPoint.IsEndOfContainer() &&
-        startPoint.IsInTextNode());
+      startPoint.IsInTextNode() &&
+      !(startPoint.IsStartOfContainer() && !startPoint.IsEndOfContainer());
   const bool maybeRangeEndsAtWhiteSpace =
-      !((endPoint.IsEndOfContainer() && !endPoint.IsStartOfContainer() &&
-         endPoint.IsInTextNode()) ||
-        endPoint.IsBRElementAtEndOfContainer());
+      endPoint.IsInTextNode() &&
+      !(endPoint.IsEndOfContainer() && !endPoint.IsStartOfContainer());
   if (!maybeRangeStartsAfterWhiteSpace && !maybeRangeEndsAtWhiteSpace) {
     // no whitespace before or after word => nothing to do here.
     return NS_OK;