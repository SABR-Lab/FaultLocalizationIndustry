# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/fs/test/gtest/child/TestFileSystemRequestHandler.cpp
# Commit: 214c4d6bf7f9
# Full Hash: 214c4d6bf7f98a332c4ab81d325d9245ae810955
# Author: Jan Varga <jvarga@mozilla.com>
# Date: 2022-10-20 21:51:26
# Regressor Bug: 1792245
# File Overlap Count: 2
# Description:
#   Bug 1792245 - Add ErrorResult to FileSystemRequestHandler methods; r=dom-storage-reviewers,jesup
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D159572
# ==============================================================================

diff -r 330c69218a93 -r 214c4d6bf7f9 dom/fs/test/gtest/child/TestFileSystemRequestHandler.cpp
--- a/dom/fs/test/gtest/child/TestFileSystemRequestHandler.cpp	Thu Oct 20 07:33:41 2022 +0300
+++ b/dom/fs/test/gtest/child/TestFileSystemRequestHandler.cpp	Thu Oct 20 04:21:30 2022 +0000
@@ -88,7 +88,7 @@
 
   RefPtr<Promise> promise = GetDefaultPromise();
   auto testable = GetFileSystemRequestHandler();
-  testable->GetRootHandle(mManager, promise);
+  testable->GetRootHandle(mManager, promise, IgnoredErrorResult());
   SpinEventLoopUntil("Promise is fulfilled or timeout"_ns,
                      [this]() { return mListener->IsDone(); });
 }
@@ -114,7 +114,8 @@
   RefPtr<Promise> promise = GetDefaultPromise();
   auto testable = GetFileSystemRequestHandler();
   testable->GetDirectoryHandle(mManager, mChild,
-                               /* create */ true, promise);
+                               /* create */ true, promise,
+                               IgnoredErrorResult());
   SpinEventLoopUntil("Promise is fulfilled or timeout"_ns,
                      [this]() { return mListener->IsDone(); });
 }
@@ -139,7 +140,8 @@
 
   RefPtr<Promise> promise = GetDefaultPromise();
   auto testable = GetFileSystemRequestHandler();
-  testable->GetFileHandle(mManager, mChild, /* create */ true, promise);
+  testable->GetFileHandle(mManager, mChild, /* create */ true, promise,
+                          IgnoredErrorResult());
   SpinEventLoopUntil("Promise is fulfilled or timeout"_ns,
                      [this]() { return mListener->IsDone(); });
 }
@@ -187,7 +189,7 @@
 
   RefPtr<Promise> promise = GetDefaultPromise();
   auto testable = GetFileSystemRequestHandler();
-  testable->GetFile(mManager, mEntry, promise);
+  testable->GetFile(mManager, mEntry, promise, IgnoredErrorResult());
   SpinEventLoopUntil("Promise is fulfilled or timeout"_ns,
                      [this]() { return mListener->IsDone(); });
 }
@@ -222,7 +224,8 @@
   auto testable = GetFileSystemRequestHandler();
   RefPtr<FileSystemEntryMetadataArray> sink;
 
-  testable->GetEntries(mManager, mEntry.entryId(), /* page */ 0, promise, sink);
+  testable->GetEntries(mManager, mEntry.entryId(), /* page */ 0, promise, sink,
+                       IgnoredErrorResult());
   SpinEventLoopUntil("Promise is fulfilled or timeout"_ns,
                      [listener]() { return listener->IsDone(); });
 }
@@ -246,7 +249,8 @@
 
   auto testable = GetFileSystemRequestHandler();
   RefPtr<Promise> promise = GetDefaultPromise();
-  testable->RemoveEntry(mManager, mChild, /* recursive */ true, promise);
+  testable->RemoveEntry(mManager, mChild, /* recursive */ true, promise,
+                        IgnoredErrorResult());
   SpinEventLoopUntil("Promise is fulfilled or timeout"_ns,
                      [this]() { return mListener->IsDone(); });
 }
