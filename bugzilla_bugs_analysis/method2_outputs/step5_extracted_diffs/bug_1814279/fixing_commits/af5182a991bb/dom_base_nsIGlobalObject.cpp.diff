# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/base/nsIGlobalObject.cpp
# Commit: af5182a991bb
# Full Hash: af5182a991bb3d627972f68eb3348d53118e9a07
# Author: Tom Ritter <tom@mozilla.com>
# Date: 2023-02-10 05:08:19
# Description:
#   Bug 1814279: Check for a null Principal before use r=peterv
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D168992
# ==============================================================================

diff -r 2fbbe5e4b32f -r af5182a991bb dom/base/nsIGlobalObject.cpp
--- a/dom/base/nsIGlobalObject.cpp	Thu Feb 09 18:30:41 2023 +0000
+++ b/dom/base/nsIGlobalObject.cpp	Thu Feb 09 18:59:24 2023 +0000
@@ -393,7 +393,7 @@
 }
 
 RTPCallerType nsIGlobalObject::GetRTPCallerType() const {
-  if (PrincipalOrNull()->IsSystemPrincipal()) {
+  if (PrincipalOrNull() && PrincipalOrNull()->IsSystemPrincipal()) {
     return RTPCallerType::SystemPrincipal;
   }
 
