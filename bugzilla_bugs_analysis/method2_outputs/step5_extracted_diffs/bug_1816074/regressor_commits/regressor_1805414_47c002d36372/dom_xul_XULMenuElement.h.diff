# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/xul/XULMenuElement.h
# Commit: 47c002d36372
# Full Hash: 47c002d3637247e71ee901f32421deaecc9d8ea3
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-01-05 03:40:49
# Regressor Bug: 1805414
# File Overlap Count: 2
# Description:
#   Bug 1805414 - Remove nsMenuFrame and nsMenuParent. r=smaug,Jamie,desktop-theme-reviewers,settings-reviewers,dao
#   
#   Move most the event handling stuff to the DOM. I've left nsMenuBarFrame
#   for now, but I will be removing that in the future.
#   
# ==============================================================================

diff -r 0c989b2bcd78 -r 47c002d36372 dom/xul/XULMenuElement.h
--- a/dom/xul/XULMenuElement.h	Wed Jan 04 18:28:34 2023 +0000
+++ b/dom/xul/XULMenuElement.h	Wed Jan 04 19:01:13 2023 +0000
@@ -7,27 +7,29 @@
 #ifndef mozilla_dom_XULMenuElement_h
 #define mozilla_dom_XULMenuElement_h
 
+#include "XULButtonElement.h"
+#include "nsINode.h"
 #include "nsXULElement.h"
 
 namespace mozilla::dom {
 
 class KeyboardEvent;
 
-class XULMenuElement final : public nsXULElement {
+class XULMenuElement final : public XULButtonElement {
  public:
   explicit XULMenuElement(already_AddRefed<mozilla::dom::NodeInfo>&& aNodeInfo)
-      : nsXULElement(std::move(aNodeInfo)) {}
+      : XULButtonElement(std::move(aNodeInfo)) {}
 
-  MOZ_CAN_RUN_SCRIPT already_AddRefed<Element> GetActiveChild();
-  MOZ_CAN_RUN_SCRIPT void SetActiveChild(Element* arg);
-  MOZ_CAN_RUN_SCRIPT bool HandleKeyPress(KeyboardEvent& keyEvent);
-  MOZ_CAN_RUN_SCRIPT bool OpenedWithKey();
+  MOZ_CAN_RUN_SCRIPT void SetActiveMenuChild(Element*);
+  Element* GetActiveMenuChild();
+
+  NS_IMPL_FROMNODE_HELPER(XULMenuElement,
+                          IsAnyOfXULElements(nsGkAtoms::menu,
+                                             nsGkAtoms::menulist));
 
  private:
   virtual ~XULMenuElement() = default;
   JSObject* WrapNode(JSContext* aCx, JS::Handle<JSObject*> aGivenProto) final;
-
-  nsIFrame* GetFrame();
 };
 
 }  // namespace mozilla::dom