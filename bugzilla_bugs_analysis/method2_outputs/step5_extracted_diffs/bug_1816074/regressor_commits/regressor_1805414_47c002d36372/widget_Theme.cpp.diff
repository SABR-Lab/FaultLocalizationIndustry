# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/Theme.cpp
# Commit: 47c002d36372
# Full Hash: 47c002d3637247e71ee901f32421deaecc9d8ea3
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-01-05 03:40:49
# Regressor Bug: 1805414
# File Overlap Count: 2
# Description:
#   Bug 1805414 - Remove nsMenuFrame and nsMenuParent. r=smaug,Jamie,desktop-theme-reviewers,settings-reviewers,dao
#   
#   Move most the event handling stuff to the DOM. I've left nsMenuBarFrame
#   for now, but I will be removing that in the future.
#   
# ==============================================================================

diff -r 0c989b2bcd78 -r 47c002d36372 widget/Theme.cpp
--- a/widget/Theme.cpp	Wed Jan 04 18:28:34 2023 +0000
+++ b/widget/Theme.cpp	Wed Jan 04 19:01:13 2023 +0000
@@ -1132,15 +1132,11 @@
   const DocumentState docState = pc->Document()->GetDocumentState();
   ElementState elementState = GetContentState(aFrame, aAppearance);
   if (aAppearance == StyleAppearance::MozMenulistArrowButton) {
-    bool isHTML = IsHTMLContent(aFrame);
-    nsIFrame* parentFrame = aFrame->GetParent();
-    bool isMenulist = !isHTML && parentFrame->IsMenuFrame();
     // HTML select and XUL menulist dropdown buttons get state from the
     // parent.
-    if (isHTML || isMenulist) {
-      aFrame = parentFrame;
-      elementState = GetContentState(parentFrame, aAppearance);
-    }
+    nsIFrame* parentFrame = aFrame->GetParent();
+    aFrame = parentFrame;
+    elementState = GetContentState(parentFrame, aAppearance);
   }
 
   // Paint the outline iff we're asked to draw overflow and we have