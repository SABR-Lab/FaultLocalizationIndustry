# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: accessible/tests/mochitest/actions/test_general.xhtml
# Commit: f11c529b2407
# Full Hash: f11c529b240799df93c4dd8c17ecd8636f9b10de
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-01-04 09:43:05
# Regressor Bug: 1805414
# File Overlap Count: 2
# Description:
#   Bug 1805414 - Remove nsMenuFrame and nsMenuParent. r=smaug,Jamie,desktop-theme-reviewers,settings-reviewers,dao
#   
#   Move most the event handling stuff to the DOM. I've left nsMenuBarFrame
#   for now, but I will be removing that in the future.
#   
# ==============================================================================

diff -r 11d72eaa9cd9 -r f11c529b2407 accessible/tests/mochitest/actions/test_general.xhtml
--- a/accessible/tests/mochitest/actions/test_general.xhtml	Tue Jan 03 21:55:14 2023 +0000
+++ b/accessible/tests/mochitest/actions/test_general.xhtml	Tue Jan 03 22:06:01 2023 +0000
@@ -28,11 +28,7 @@
     //gA11yEventDumpToConsole = true;
     //enableLogging("tree,verbose"); // debug
 
-    if (navigator.platform.startsWith("Mac")) {
-      SimpleTest.expectAssertions(0, 1);
-    } else {
-      SimpleTest.expectAssertions(0, 1);
-    }
+    SimpleTest.expectAssertions(0, 1);
 
     function doTest()
     {
@@ -41,10 +37,9 @@
           ID: "menu",
           actionName: "click",
           events: CLICK_EVENTS,
-          // Wait for focus event, it guarantees us the submenu tree is created,
-          // that's necessary for next test.
+          // Wait for the submenu to show up.
           eventSeq: [
-            new invokerChecker(EVENT_FOCUS, getNode("menu"))
+            new invokerChecker(EVENT_SHOW, getNode("submenu"))
           ]
         },
         {