# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: accessible/tests/mochitest/events/test_focus_contextmenu.xhtml
# Commit: f11c529b2407
# Full Hash: f11c529b240799df93c4dd8c17ecd8636f9b10de
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-01-04 09:43:05
# Regressor Bug: 1805414
# File Overlap Count: 2
# Description:
#   Bug 1805414 - Remove nsMenuFrame and nsMenuParent. r=smaug,Jamie,desktop-theme-reviewers,settings-reviewers,dao
#   
#   Move most the event handling stuff to the DOM. I've left nsMenuBarFrame
#   for now, but I will be removing that in the future.
#   
# ==============================================================================

diff -r 11d72eaa9cd9 -r f11c529b2407 accessible/tests/mochitest/events/test_focus_contextmenu.xhtml
--- a/accessible/tests/mochitest/events/test_focus_contextmenu.xhtml	Tue Jan 03 21:55:14 2023 +0000
+++ b/accessible/tests/mochitest/events/test_focus_contextmenu.xhtml	Tue Jan 03 22:06:01 2023 +0000
@@ -4,7 +4,7 @@
                  type="text/css"?>
 
 <window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        title="Context nenu focus testing">
+        title="Context menu focus testing">
 
   <script src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js" />
   <script src="chrome://mochikit/content/tests/SimpleTest/EventUtils.js"/>
@@ -43,8 +43,11 @@
       gQueue = new eventQueue();
 
       gQueue.push(new synthFocus("button"));
-      gQueue.push(new synthContextMenu("button",
-                                       new invokerChecker(EVENT_MENUPOPUP_START, "contextmenu")));
+      gQueue.push(new synthContextMenu("button", [
+        new invokerChecker(EVENT_MENUPOPUP_START, "contextmenu"),
+        new invokerChecker("popupshown", "contextmenu"),
+      ]));
+      gQueue.push(new synthDownKey("button", new focusChecker("item1")));
       gQueue.push(new synthEscapeKey("contextmenu", new focusChecker("button")));
 
       gQueue.push(new synthContextMenu("button",