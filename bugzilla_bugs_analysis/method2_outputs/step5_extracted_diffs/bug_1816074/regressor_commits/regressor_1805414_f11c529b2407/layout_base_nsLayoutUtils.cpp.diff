# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/base/nsLayoutUtils.cpp
# Commit: f11c529b2407
# Full Hash: f11c529b240799df93c4dd8c17ecd8636f9b10de
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-01-04 09:43:05
# Regressor Bug: 1805414
# File Overlap Count: 2
# Description:
#   Bug 1805414 - Remove nsMenuFrame and nsMenuParent. r=smaug,Jamie,desktop-theme-reviewers,settings-reviewers,dao
#   
#   Move most the event handling stuff to the DOM. I've left nsMenuBarFrame
#   for now, but I will be removing that in the future.
#   
# ==============================================================================

diff -r 11d72eaa9cd9 -r f11c529b2407 layout/base/nsLayoutUtils.cpp
--- a/layout/base/nsLayoutUtils.cpp	Tue Jan 03 21:55:14 2023 +0000
+++ b/layout/base/nsLayoutUtils.cpp	Tue Jan 03 22:06:01 2023 +0000
@@ -822,18 +822,7 @@
     }
   } else {
     LayoutFrameType childType = aChildFrame->Type();
-    if (LayoutFrameType::MenuPopup == childType) {
-      nsIFrame* parent = aChildFrame->GetParent();
-      MOZ_ASSERT(parent, "nsMenuPopupFrame can't be the root frame");
-      MOZ_ASSERT(parent->IsMenuFrame(),
-                 "nsMenuPopupFrame should be out of flow if not under a menu");
-      nsIFrame* firstPopup =
-          parent->GetChildList(FrameChildListID::Popup).FirstChild();
-      MOZ_ASSERT(!firstPopup || !firstPopup->GetNextSibling(),
-                 "We assume popupList only has one child, but it has more.");
-      id = firstPopup == aChildFrame ? FrameChildListID::Popup
-                                     : FrameChildListID::Principal;
-    } else if (LayoutFrameType::TableColGroup == childType) {
+    if (LayoutFrameType::TableColGroup == childType) {
       id = FrameChildListID::ColGroup;
     } else if (aChildFrame->IsTableCaption()) {
       id = FrameChildListID::Caption;