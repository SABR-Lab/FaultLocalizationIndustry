# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/fs/api/FileSystemSyncAccessHandle.h
# Commit: 302fdb94bf7f
# Full Hash: 302fdb94bf7f5cd817b69fc4eaaaf6ff8b62bec8
# Author: Jan Varga <jvarga@mozilla.com>
# Date: 2023-02-06 21:36:23
# Regressor Bug: 1809064
# File Overlap Count: 1
# Description:
#   Bug 1809064 - Use managed endpoints for PFileSystemAccessHandle construction; r=dom-storage-reviewers,jari
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D166342
# ==============================================================================

diff -r 100b45bcf622 -r 302fdb94bf7f dom/fs/api/FileSystemSyncAccessHandle.h
--- a/dom/fs/api/FileSystemSyncAccessHandle.h	Mon Feb 06 15:01:20 2023 +0000
+++ b/dom/fs/api/FileSystemSyncAccessHandle.h	Mon Feb 06 15:10:34 2023 +0000
@@ -36,8 +36,9 @@
 
   static Result<RefPtr<FileSystemSyncAccessHandle>, nsresult> Create(
       nsIGlobalObject* aGlobal, RefPtr<FileSystemManager>& aManager,
-      RefPtr<FileSystemAccessHandleChild> aActor,
       mozilla::ipc::RandomAccessStreamParams&& aStreamParams,
+      mozilla::ipc::ManagedEndpoint<PFileSystemAccessHandleChild>&&
+          aAccessHandleChildEndpoint,
       const fs::FileSystemEntryMetadata& aMetadata);
 
   NS_DECL_CYCLE_COLLECTING_ISUPPORTS
@@ -83,9 +84,9 @@
  private:
   FileSystemSyncAccessHandle(
       nsIGlobalObject* aGlobal, RefPtr<FileSystemManager>& aManager,
+      mozilla::ipc::RandomAccessStreamParams&& aStreamParams,
       RefPtr<FileSystemAccessHandleChild> aActor,
       RefPtr<TaskQueue> aIOTaskQueue,
-      mozilla::ipc::RandomAccessStreamParams&& aStreamParams,
       const fs::FileSystemEntryMetadata& aMetadata);
 
   virtual ~FileSystemSyncAccessHandle();