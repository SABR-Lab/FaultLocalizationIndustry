# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: accessible/xul/XULMenuAccessible.cpp
# Commit: 5464978a27a8
# Full Hash: 5464978a27a8e770db08b80e3a98b281f6e78318
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-02-08 09:52:31
# Regressor Bug: 1812329
# File Overlap Count: 1
# Description:
#   Bug 1812329 - Remove nsMenuBarFrame. r=smaug
#   
#   This ended up being a lot more straight-forward than the menu changes.
#   
#   TLDR:
# ==============================================================================

diff -r 38ecc5076ab3 -r 5464978a27a8 accessible/xul/XULMenuAccessible.cpp
--- a/accessible/xul/XULMenuAccessible.cpp	Tue Feb 07 18:08:30 2023 +0000
+++ b/accessible/xul/XULMenuAccessible.cpp	Tue Feb 07 18:09:37 2023 +0000
@@ -6,6 +6,7 @@
 #include "XULMenuAccessible.h"
 
 #include "LocalAccessible-inl.h"
+#include "XULMenuBarElement.h"
 #include "XULMenuParentElement.h"
 #include "XULPopupElement.h"
 #include "mozilla/Assertions.h"
@@ -21,7 +22,6 @@
 #include "nsIDOMXULSelectCntrlEl.h"
 #include "nsIDOMXULSelectCntrlItemEl.h"
 #include "nsIContent.h"
-#include "nsMenuBarFrame.h"
 #include "nsMenuPopupFrame.h"
 
 #include "mozilla/Preferences.h"
@@ -464,8 +464,8 @@
 // XULMenubarAccessible: Widgets
 
 bool XULMenubarAccessible::IsActiveWidget() const {
-  nsMenuBarFrame* menuBarFrame = do_QueryFrame(GetFrame());
-  return menuBarFrame && menuBarFrame->IsActive();
+  auto* menuBar = dom::XULMenuBarElement::FromNode(GetContent());
+  return menuBar && menuBar->IsActive();
 }
 
 bool XULMenubarAccessible::AreItemsOperable() const { return true; }