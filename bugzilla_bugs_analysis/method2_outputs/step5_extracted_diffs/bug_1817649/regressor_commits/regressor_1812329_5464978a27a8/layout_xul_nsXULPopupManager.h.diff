# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/xul/nsXULPopupManager.h
# Commit: 5464978a27a8
# Full Hash: 5464978a27a8e770db08b80e3a98b281f6e78318
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-02-08 09:52:31
# Regressor Bug: 1812329
# File Overlap Count: 1
# Description:
#   Bug 1812329 - Remove nsMenuBarFrame. r=smaug
#   
#   This ended up being a lot more straight-forward than the menu changes.
#   
#   TLDR:
# ==============================================================================

diff -r 38ecc5076ab3 -r 5464978a27a8 layout/xul/nsXULPopupManager.h
--- a/layout/xul/nsXULPopupManager.h	Tue Feb 07 18:08:30 2023 +0000
+++ b/layout/xul/nsXULPopupManager.h	Tue Feb 07 18:09:37 2023 +0000
@@ -12,23 +12,19 @@
 #define nsXULPopupManager_h__
 
 #include "mozilla/Logging.h"
-#include "mozilla/widget/InitData.h"
 #include "nsHashtablesFwd.h"
 #include "nsIContent.h"
 #include "nsIRollupListener.h"
 #include "nsIDOMEventListener.h"
+#include "Units.h"
 #include "nsPoint.h"
 #include "nsCOMPtr.h"
 #include "nsTArray.h"
 #include "nsIObserver.h"
-#include "nsITimer.h"
-#include "nsIReflowCallback.h"
 #include "nsThreadUtils.h"
-#include "nsPresContext.h"
-#include "nsStyleConsts.h"
 #include "mozilla/Attributes.h"
+#include "mozilla/widget/InitData.h"
 #include "mozilla/widget/NativeMenu.h"
-#include "Units.h"
 
 // XXX Avoid including this here by moving function bodies to the cpp file.
 #include "mozilla/dom/Element.h"
@@ -54,9 +50,9 @@
  */
 
 class nsContainerFrame;
+class nsITimer;
+class nsIDocShellTreeItem;
 class nsMenuPopupFrame;
-class nsMenuBarFrame;
-class nsIDocShellTreeItem;
 class nsPIDOMWindowOuter;
 class nsRefreshDriver;
 
@@ -67,6 +63,7 @@
 class KeyboardEvent;
 class UIEvent;
 class XULButtonElement;
+class XULMenuBarElement;
 }  // namespace dom
 }  // namespace mozilla
 
@@ -178,17 +175,6 @@
 
 using HidePopupOptions = mozilla::EnumSet<HidePopupOption>;
 
-#define NS_DIRECTION_IS_INLINE(dir) \
-  (dir == eNavigationDirection_Start || dir == eNavigationDirection_End)
-#define NS_DIRECTION_IS_BLOCK(dir) \
-  (dir == eNavigationDirection_Before || dir == eNavigationDirection_After)
-#define NS_DIRECTION_IS_BLOCK_TO_EDGE(dir) \
-  (dir == eNavigationDirection_First || dir == eNavigationDirection_Last)
-
-static_assert(static_cast<uint8_t>(mozilla::StyleDirection::Ltr) == 0 &&
-                  static_cast<uint8_t>(mozilla::StyleDirection::Rtl) == 1,
-              "Left to Right should be 0 and Right to Left should be 1");
-
 /**
  * DirectionFromKeyCodeTable: two arrays, the first for left-to-right and the
  * other for right-to-left, that map keycodes to values of
@@ -437,7 +423,8 @@
   // when the active menu bar should be defocused. In the latter case, if
   // aMenuBar isn't currently active, yet another menu bar is, that menu bar
   // will remain active.
-  void SetActiveMenuBar(nsMenuBarFrame* aMenuBar, bool aActivate);
+  void SetActiveMenuBar(mozilla::dom::XULMenuBarElement* aMenuBar,
+                        bool aActivate);
 
   struct MayShowMenuResult {
     const bool mIsNative = false;
@@ -865,7 +852,7 @@
   nsCOMPtr<nsIWidget> mWidget;
 
   // set to the currently active menu bar, if any
-  nsMenuBarFrame* mActiveMenuBar;
+  mozilla::dom::XULMenuBarElement* mActiveMenuBar;
 
   // linked list of normal menus and panels. mPopups points to the innermost
   // popup, which keeps alive all their parents.
