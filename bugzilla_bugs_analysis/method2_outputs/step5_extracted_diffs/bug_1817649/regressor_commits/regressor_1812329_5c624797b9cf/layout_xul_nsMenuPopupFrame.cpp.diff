# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/xul/nsMenuPopupFrame.cpp
# Commit: 5c624797b9cf
# Full Hash: 5c624797b9cfc9a130d143a7d018c7c0d4a60b60
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-02-08 21:41:44
# Regressor Bug: 1812329
# File Overlap Count: 1
# Description:
#   Bug 1812329 - Remove nsMenuBarFrame. r=smaug
#   
#   This ended up being a lot more straight-forward than the menu changes.
#   
#   TLDR:
# ==============================================================================

diff -r 59c4e9d17bfc -r 5c624797b9cf layout/xul/nsMenuPopupFrame.cpp
--- a/layout/xul/nsMenuPopupFrame.cpp	Wed Feb 08 13:06:36 2023 +0000
+++ b/layout/xul/nsMenuPopupFrame.cpp	Wed Feb 08 13:12:23 2023 +0000
@@ -19,7 +19,6 @@
 #include "nsIFrameInlines.h"
 #include "nsViewManager.h"
 #include "nsWidgetsCID.h"
-#include "nsMenuBarFrame.h"
 #include "nsPIDOMWindow.h"
 #include "nsFrameManager.h"
 #include "mozilla/dom/Document.h"
@@ -2028,10 +2027,8 @@
 
 void nsMenuPopupFrame::HandleEnterKeyPress(WidgetEvent& aEvent) {
   mIncrementalString.Truncate();
-  if (RefPtr menu = GetCurrentMenuItem()) {
-    // Give it to the child.
-    menu->HandleEnterKeyPress(aEvent);
-  }
+  RefPtr popup = &PopupElement();
+  popup->HandleEnterKeyPress(aEvent);
 }
 
 XULButtonElement* nsMenuPopupFrame::FindMenuWithShortcut(