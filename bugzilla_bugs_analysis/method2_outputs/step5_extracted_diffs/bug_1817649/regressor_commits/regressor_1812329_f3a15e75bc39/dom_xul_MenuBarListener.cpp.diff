# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/xul/MenuBarListener.cpp
# Commit: f3a15e75bc39
# Full Hash: f3a15e75bc393a3367703fb1e173ab37278d905c
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-02-08 21:41:44
# Regressor Bug: 1812329
# File Overlap Count: 1
# Description:
#   Bug 1812329 - Add missing null-check for the case where we can't reach our window root from detach() anymore.
#   
#   MANUAL PUSH: Trivial fix CLOSED TREE
# ==============================================================================

diff -r 85bb9123f20c -r f3a15e75bc39 dom/xul/MenuBarListener.cpp
--- a/dom/xul/MenuBarListener.cpp	Wed Feb 08 14:06:37 2023 +0000
+++ b/dom/xul/MenuBarListener.cpp	Wed Feb 08 15:20:14 2023 +0100
@@ -446,7 +446,7 @@
 MOZ_CAN_RUN_SCRIPT_BOUNDARY nsresult
 MenuBarListener::HandleEvent(Event* aEvent) {
   // If the menu bar is collapsed, don't do anything.
-  if (!mMenuBar->GetPrimaryFrame() ||
+  if (!mMenuBar || !mMenuBar->GetPrimaryFrame() ||
       !mMenuBar->GetPrimaryFrame()->StyleVisibility()->IsVisible()) {
     return NS_OK;
   }
