# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: netwerk/protocol/http/EarlyHintPreloader.cpp
# Commit: cd54758690f3
# Full Hash: cd54758690f3fe164ccbfe49904716081bafed1b
# Author: Manuel Bucher <manuel@mozilla.com>
# Date: 2023-03-23 09:45:37
# Description:
#   Bug 1823547 r=necko-reviewers,kershaw
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D173133
# ==============================================================================

diff -r 7b02c229d8cb -r cd54758690f3 netwerk/protocol/http/EarlyHintPreloader.cpp
--- a/netwerk/protocol/http/EarlyHintPreloader.cpp	Wed Mar 22 15:22:53 2023 +0000
+++ b/netwerk/protocol/http/EarlyHintPreloader.cpp	Wed Mar 22 15:29:44 2023 +0000
@@ -519,6 +519,7 @@
 // https://searchfox.org/mozilla-central/rev/b4150d1c6fae0c51c522df2d2c939cf5ad331d4c/netwerk/ipc/DocumentLoadListener.cpp#1311
 void EarlyHintPreloader::InvokeStreamListenerFunctions() {
   AssertIsOnMainThread();
+  RefPtr<EarlyHintPreloader> self(this);
 
   LOG((
       "EarlyHintPreloader::InvokeStreamListenerFunctions [this=%p parent=%p]\n",
