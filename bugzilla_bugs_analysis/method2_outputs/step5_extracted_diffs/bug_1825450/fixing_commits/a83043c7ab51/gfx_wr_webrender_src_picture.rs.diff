# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: gfx/wr/webrender/src/picture.rs
# Commit: a83043c7ab51
# Full Hash: a83043c7ab51233d38f3f65704de87aa3db3feac
# Author: Glenn Watson <git@intuitionlibrary.com>
# Date: 2023-07-10 09:40:14
# Description:
#   Bug 1825450 - Ensure device pixel scale for surfaces can't become infinite r=gfx-reviewers,lsalzman
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D182429
# ==============================================================================

diff -r d3ca9e70625b -r a83043c7ab51 gfx/wr/webrender/src/picture.rs
--- a/gfx/wr/webrender/src/picture.rs	Sun Jul 09 21:06:35 2023 +0000
+++ b/gfx/wr/webrender/src/picture.rs	Sun Jul 09 21:22:10 2023 +0000
@@ -6076,7 +6076,9 @@
                                 RasterSpace::Local(scale) => (scale, scale),
                             };
 
-                            let device_pixel_scale = Scale::new(world_scale_factors.0.max(world_scale_factors.1));
+                            let device_pixel_scale = Scale::new(
+                                world_scale_factors.0.max(world_scale_factors.1).min(max_scale)
+                            );
 
                             (device_pixel_scale, surface_spatial_node_index, (1.0, 1.0), world_scale_factors)
                         }
