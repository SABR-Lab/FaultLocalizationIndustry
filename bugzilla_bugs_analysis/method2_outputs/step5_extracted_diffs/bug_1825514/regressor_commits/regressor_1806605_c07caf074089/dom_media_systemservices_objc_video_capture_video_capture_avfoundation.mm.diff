# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/systemservices/objc_video_capture/video_capture_avfoundation.mm
# Commit: c07caf074089
# Full Hash: c07caf07408914b5514f89c3d46fb1dced9fef06
# Author: Andreas Pehrson <apehrson@mozilla.com>
# Date: 2023-01-13 21:39:47
# Regressor Bug: 1806605
# File Overlap Count: 1
# Description:
#   Bug 1806605 - Pass TrackingId instead of nsCString to CaptureStage. r=padenot
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D165824
# ==============================================================================

diff -r 731dcbc83284 -r c07caf074089 dom/media/systemservices/objc_video_capture/video_capture_avfoundation.mm
--- a/dom/media/systemservices/objc_video_capture/video_capture_avfoundation.mm	Fri Jan 13 14:25:00 2023 +0000
+++ b/dom/media/systemservices/objc_video_capture/video_capture_avfoundation.mm	Fri Jan 13 14:25:00 2023 +0000
@@ -228,7 +228,7 @@
   return rv;
 }
 
-void VideoCaptureAvFoundation::SetTrackingId(const char* _Nonnull aTrackingId) {
+void VideoCaptureAvFoundation::SetTrackingId(uint32_t aTrackingIdProcId) {
   RTC_DCHECK_RUN_ON(&mChecker);
   MutexLock lock(&api_lock_);
   if (NS_WARN_IF(mTrackingId.isSome())) {
@@ -236,7 +236,7 @@
     // requests than the first.
     return;
   }
-  mTrackingId = Some(nsCString(aTrackingId));
+  mTrackingId.emplace(TrackingId::Source::Camera, aTrackingIdProcId);
 }
 
 void VideoCaptureAvFoundation::StartFrameRecording(int32_t aWidth, int32_t aHeight) {