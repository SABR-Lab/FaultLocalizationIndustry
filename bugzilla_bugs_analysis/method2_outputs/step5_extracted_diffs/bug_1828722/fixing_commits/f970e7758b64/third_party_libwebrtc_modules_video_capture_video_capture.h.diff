# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: third_party/libwebrtc/modules/video_capture/video_capture.h
# Commit: f970e7758b64
# Full Hash: f970e7758b6474aaee9ac43d0fcc74f053bed0ab
# Author: Andreas Pehrson <apehrson@mozilla.com>
# Date: 2023-04-21 21:12:46
# Description:
#   Bug 1828722 - Revert 30340541c9a1 - Crash in case VideoCaptureAVFoundation is destroyed unexpectedly. r=webrtc-reviewers,mjf
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D175853
# ==============================================================================

diff -r 1455946414f1 -r f970e7758b64 third_party/libwebrtc/modules/video_capture/video_capture.h
--- a/third_party/libwebrtc/modules/video_capture/video_capture.h	Fri Apr 21 08:42:26 2023 +0000
+++ b/third_party/libwebrtc/modules/video_capture/video_capture.h	Fri Apr 21 08:47:46 2023 +0000
@@ -158,13 +158,8 @@
   // Mozilla: TrackingId setter for use in profiler markers.
   virtual void SetTrackingId(uint32_t aTrackingIdProcId) {}
 
-  // Mozilla: Diagnostic
-  void NotifyReleasing() { mOkToDestroy = true; }
-
  protected:
   ~VideoCaptureModule() override {}
-
-  std::atomic<bool> mOkToDestroy = {false};
 };
 
 }  // namespace webrtc
