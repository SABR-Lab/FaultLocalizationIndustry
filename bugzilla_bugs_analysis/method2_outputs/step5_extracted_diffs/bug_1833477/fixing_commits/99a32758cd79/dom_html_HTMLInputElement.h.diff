# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/html/HTMLInputElement.h
# Commit: 99a32758cd79
# Full Hash: 99a32758cd79b97f5c4f9444f4b860d1870b3446
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-05-24 09:41:21
# Description:
#   Bug 1833477 - Make type attribute changes follow the spec more closely. r=smaug,masayuki
#   
#   The issue here is that the SetValueInternal call made us go from empty
#   value to non-empty due to color's specialness of returning black always,
#   but since the value dirty flag wasn't set, the non-empty value actually
# ==============================================================================

diff -r e6916184642e -r 99a32758cd79 dom/html/HTMLInputElement.h
--- a/dom/html/HTMLInputElement.h	Tue May 23 15:09:14 2023 +0000
+++ b/dom/html/HTMLInputElement.h	Tue May 23 15:18:03 2023 +0000
@@ -1533,6 +1533,8 @@
   nsContentUtils::AutocompleteAttrState mAutocompleteAttrState;
   nsContentUtils::AutocompleteAttrState mAutocompleteInfoState;
   bool mDisabledChanged : 1;
+  // https://html.spec.whatwg.org/#concept-fe-dirty
+  // TODO: Maybe rename to match the spec?
   bool mValueChanged : 1;
   bool mLastValueChangeWasInteractive : 1;
   bool mCheckedChanged : 1;