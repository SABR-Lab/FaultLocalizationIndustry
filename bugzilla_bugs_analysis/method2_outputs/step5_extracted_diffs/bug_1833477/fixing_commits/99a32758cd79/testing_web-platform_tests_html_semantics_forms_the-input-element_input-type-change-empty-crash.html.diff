# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: testing/web-platform/tests/html/semantics/forms/the-input-element/input-type-change-empty-crash.html
# Commit: 99a32758cd79
# Full Hash: 99a32758cd79b97f5c4f9444f4b860d1870b3446
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2023-05-24 09:41:21
# Description:
#   Bug 1833477 - Make type attribute changes follow the spec more closely. r=smaug,masayuki
#   
#   The issue here is that the SetValueInternal call made us go from empty
#   value to non-empty due to color's specialness of returning black always,
#   but since the value dirty flag wasn't set, the non-empty value actually
# ==============================================================================

diff -r e6916184642e -r 99a32758cd79 testing/web-platform/tests/html/semantics/forms/the-input-element/input-type-change-empty-crash.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/testing/web-platform/tests/html/semantics/forms/the-input-element/input-type-change-empty-crash.html	Tue May 23 15:18:03 2023 +0000
@@ -0,0 +1,8 @@
+<script>
+document.addEventListener('DOMContentLoaded', () => {
+  a.type = "foo"
+  document.execCommand("insertHorizontalRule", false)
+  a.type = "text"
+})
+</script>
+<input id="a" type="color">