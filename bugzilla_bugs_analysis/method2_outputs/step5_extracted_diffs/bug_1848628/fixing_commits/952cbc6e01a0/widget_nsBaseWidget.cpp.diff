# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: widget/nsBaseWidget.cpp
# Commit: 952cbc6e01a0
# Full Hash: 952cbc6e01a0efabde94b34a5c6dfdc9658f4c06
# Author: Daniel Holbert <dholbert@cs.stanford.edu>
# Date: 2023-08-16 03:43:43
# Description:
#   Bug 1848628: Null-check swipe tracker before cleaning it up, in nsBaseWidget::SwipeFinished. r=hiro
#   
#   It seems unexpected that the swipe tracker would be non-null when a swipe
#   finishes, but there are several codepaths that can clear it, which might
#   conceivably fire while the SwipeFinished callback is in the queue to be
# ==============================================================================

diff -r bbd42656d00d -r 952cbc6e01a0 widget/nsBaseWidget.cpp
--- a/widget/nsBaseWidget.cpp	Tue Aug 15 15:19:55 2023 +0000
+++ b/widget/nsBaseWidget.cpp	Tue Aug 15 15:39:12 2023 +0000
@@ -2230,8 +2230,10 @@
 }
 
 void nsBaseWidget::SwipeFinished() {
-  mSwipeTracker->Destroy();
-  mSwipeTracker = nullptr;
+  if (mSwipeTracker) {
+    mSwipeTracker->Destroy();
+    mSwipeTracker = nullptr;
+  }
 }
 
 void nsBaseWidget::ReportSwipeStarted(uint64_t aInputBlockId,
