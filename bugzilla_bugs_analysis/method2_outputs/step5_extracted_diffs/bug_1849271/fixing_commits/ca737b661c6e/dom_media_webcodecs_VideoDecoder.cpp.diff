# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/media/webcodecs/VideoDecoder.cpp
# Commit: ca737b661c6e
# Full Hash: ca737b661c6eeaecfebf6f2bd27aca46ef656ae4
# Author: Paul Adenot <paul@paul.cx>
# Date: 2023-08-23 04:21:33
# Description:
#   Bug 1849271 - Flip test when checking for the presence of optional colorspace members on a VideoDecoderConfig. r=media-playback-reviewers,alwu
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D186530
# ==============================================================================

diff -r bc91ede31572 -r ca737b661c6e dom/media/webcodecs/VideoDecoder.cpp
--- a/dom/media/webcodecs/VideoDecoder.cpp	Tue Aug 22 14:03:58 2023 +0000
+++ b/dom/media/webcodecs/VideoDecoder.cpp	Tue Aug 22 14:33:21 2023 +0000
@@ -300,16 +300,16 @@
 
   if (aConfig.mColorSpace.isSome()) {
     const VideoColorSpaceInternal& colorSpace(aConfig.mColorSpace.value());
-    if (!colorSpace.mFullRange.isSome()) {
+    if (colorSpace.mFullRange.isSome()) {
       vi->mColorRange = ToColorRange(colorSpace.mFullRange.value());
     }
-    if (!colorSpace.mMatrix.isSome()) {
+    if (colorSpace.mMatrix.isSome()) {
       vi->mColorSpace.emplace(ToColorSpace(colorSpace.mMatrix.value()));
     }
-    if (!colorSpace.mPrimaries.isSome()) {
+    if (colorSpace.mPrimaries.isSome()) {
       vi->mColorPrimaries.emplace(ToPrimaries(colorSpace.mPrimaries.value()));
     }
-    if (!colorSpace.mTransfer.isSome()) {
+    if (colorSpace.mTransfer.isSome()) {
       vi->mTransferFunction.emplace(
           ToTransferFunction(colorSpace.mTransfer.value()));
     }