# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/webcodecs/moz.build
# Commit: 0fca9e6c2ef6
# Full Hash: 0fca9e6c2ef6f23ee7866ca7562437b08208f18c
# Author: Chun-Min Chang <chun.m.chang@gmail.com>
# Date: 2023-06-29 15:31:45
# Regressor Bug: 1831451
# File Overlap Count: 1
# Description:
#   Bug 1831451 - Introduce DecoderAgent r=alwu
#   
#   DecoderAgent is a class operating MediaDataDecoder. It combines multiple
#   MediaDataDecoder APIs into one to serve WebCodecs' needs.
#   
# ==============================================================================

diff -r 05ae55dd0cec -r 0fca9e6c2ef6 dom/media/webcodecs/moz.build
--- a/dom/media/webcodecs/moz.build	Thu Jun 29 04:15:02 2023 +0000
+++ b/dom/media/webcodecs/moz.build	Thu Jun 29 04:15:02 2023 +0000
@@ -6,6 +6,16 @@
 
 MOCHITEST_MANIFESTS += ["test/mochitest.ini"]
 
+# For mozilla/layers/ImageBridgeChild.h
+LOCAL_INCLUDES += [
+    "!/ipc/ipdl/_ipdlheaders",
+    "/ipc/chromium/src/",
+]
+
+EXPORTS.mozilla += [
+    "DecoderAgent.h",
+]
+
 EXPORTS.mozilla.dom += [
     "EncodedVideoChunk.h",
     "VideoColorSpace.h",
@@ -15,6 +25,7 @@
 ]
 
 UNIFIED_SOURCES += [
+    "DecoderAgent.cpp",
     "EncodedVideoChunk.cpp",
     "VideoColorSpace.cpp",
     "VideoDecoder.cpp",
