# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/webcodecs/VideoDecoder.h
# Commit: 58a0e543998b
# Full Hash: 58a0e543998b08bd6032a12dd3efa18637c83c04
# Author: Chun-Min Chang <chun.m.chang@gmail.com>
# Date: 2023-06-30 04:06:43
# Regressor Bug: 1831451
# File Overlap Count: 1
# Description:
#   Bug 1831451 - Implement VideoDecoder::Reset r=padenot
#   
#   This patch implements the reset method [1] for WebCodecs' VideoDecoder
#   interface. The implementation has not been completed yet. It will be
#   completed by the following patches.
# ==============================================================================

diff -r 23bc44bf238c -r 58a0e543998b dom/media/webcodecs/VideoDecoder.h
--- a/dom/media/webcodecs/VideoDecoder.h	Thu Jun 29 22:33:11 2023 +0000
+++ b/dom/media/webcodecs/VideoDecoder.h	Thu Jun 29 22:33:11 2023 +0000
@@ -11,6 +11,7 @@
 #include "mozilla/Attributes.h"
 #include "mozilla/DOMEventTargetHelper.h"
 #include "mozilla/ErrorResult.h"
+#include "mozilla/Result.h"
 #include "mozilla/dom/BindingDeclarations.h"
 #include "nsCycleCollectionParticipant.h"
 #include "nsWrapperCache.h"
@@ -82,9 +83,13 @@
   // VideoDecoder can run on either main thread or worker thread.
   void AssertIsOnOwningThread() const { NS_ASSERT_OWNINGTHREAD(VideoDecoder); }
 
+  Result<Ok, nsresult> Reset(const nsresult& aResult);
+
   // Constant in practice, only set in ::Constructor.
   RefPtr<WebCodecsErrorCallback> mErrorCallback;
   RefPtr<VideoFrameOutputCallback> mOutputCallback;
+
+  CodecState mState;
 };
 
 }  // namespace mozilla::dom
