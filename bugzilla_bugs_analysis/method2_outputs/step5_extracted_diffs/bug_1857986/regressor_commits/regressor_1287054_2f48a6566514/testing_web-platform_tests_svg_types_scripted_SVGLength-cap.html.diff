# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: testing/web-platform/tests/svg/types/scripted/SVGLength-cap.html
# Commit: 2f48a6566514
# Full Hash: 2f48a65665147ef98c0f1e7d26a99f1931f9470d
# Author: Robert Longson <longsonr@gmail.com>
# Date: 2023-09-12 21:17:53
# Regressor Bug: 1287054
# File Overlap Count: 1
# Description:
#   Bug 1287054 part 1 - support rem, ch, ic and cap units for non-CSS lengths r=emilio,jgilbert
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D180618
# ==============================================================================

diff -r fc9333c3b9f7 -r 2f48a6566514 testing/web-platform/tests/svg/types/scripted/SVGLength-cap.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/testing/web-platform/tests/svg/types/scripted/SVGLength-cap.html	Tue Sep 12 11:45:26 2023 +0000
@@ -0,0 +1,23 @@
+<!DOCTYPE HTML>
+<title>SVGLength with 'cap' unit</title>
+<link rel="help" href="https://www.w3.org/TR/SVG/types.html#InterfaceSVGLength">
+<script src="/resources/testharness.js"></script>
+<script src="/resources/testharnessreport.js"></script>
+<div id="cap_ref" style="font-family:initial; font-size:20px; width:10cap"></div>
+<svg>
+  <text id="cap_test" x="10cap" style="font-family:initial; font-size:20px"></text>
+</svg>
+<script>
+  let ref_width = cap_ref.offsetWidth;
+  let cap_length = cap_test.x.baseVal[0];
+
+  test(() => {
+    assert_equals(cap_length.unitType, SVGLength.SVG_LENGTHTYPE_UNKNOWN);
+    assert_approx_equals(cap_length.value, ref_width, 0.5);
+  }, "cap unit in SVGLength");
+
+  test(() => {
+    cap_length.value = ref_width * 2;
+    assert_approx_equals(cap_length.valueInSpecifiedUnits, 20, 0.1);
+  }, "Convert back to cap from new user unit value");
+</script>