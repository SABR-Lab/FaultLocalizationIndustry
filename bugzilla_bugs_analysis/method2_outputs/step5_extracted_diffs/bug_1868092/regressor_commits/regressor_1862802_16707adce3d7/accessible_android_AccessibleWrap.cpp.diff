# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: accessible/android/AccessibleWrap.cpp
# Commit: 16707adce3d7
# Full Hash: 16707adce3d7036be5a196ea1a77ecd8c4761244
# Author: James Teh <jteh@mozilla.com>
# Date: 2023-11-30 04:12:04
# Regressor Bug: 1862802
# File Overlap Count: 1
# Description:
#   Bug 1862802 part 2: Support find in page on Android using only caret events instead of converting them to virtual cursor change events. r=eeejay
#   
#   Depends on D192642
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D192643
# ==============================================================================

diff -r 2f75e063b5f9 -r 16707adce3d7 accessible/android/AccessibleWrap.cpp
--- a/accessible/android/AccessibleWrap.cpp	Wed Nov 29 03:53:19 2023 +0000
+++ b/accessible/android/AccessibleWrap.cpp	Wed Nov 29 03:53:19 2023 +0000
@@ -65,25 +65,6 @@
       static_cast<DocAccessibleWrap*>(accessible->Document());
   if (doc) {
     switch (aEvent->GetEventType()) {
-      case nsIAccessibleEvent::EVENT_TEXT_CARET_MOVED: {
-        if (accessible != aEvent->Document() && !aEvent->IsFromUserInput()) {
-          AccCaretMoveEvent* caretEvent = downcast_accEvent(aEvent);
-          HyperTextAccessible* ht = AsHyperText();
-          // Pivot to the caret's position if it has an expanded selection.
-          // This is used mostly for find in page.
-          if ((ht && ht->SelectionCount())) {
-            DOMPoint point =
-                AsHyperText()->OffsetToDOMPoint(caretEvent->GetCaretOffset());
-            if (LocalAccessible* newPos =
-                    doc->GetAccessibleOrContainer(point.node)) {
-              static_cast<AccessibleWrap*>(newPos)->PivotTo(
-                  java::SessionAccessibility::HTML_GRANULARITY_DEFAULT, true,
-                  true);
-            }
-          }
-        }
-        break;
-      }
       case nsIAccessibleEvent::EVENT_SCROLLING_START: {
         accessible->PivotTo(
             java::SessionAccessibility::HTML_GRANULARITY_DEFAULT, true, true);