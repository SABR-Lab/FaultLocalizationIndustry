# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/base/nsIFrameTraversal.h
# Commit: 738fe6bbf913
# Full Hash: 738fe6bbf913710aed2d6b4a24b99c562619af8d
# Author: Masayuki Nakano <masayuki@d-toybox.com>
# Date: 2023-12-23 09:52:03
# Regressor Bug: 779684
# File Overlap Count: 1
# Description:
#   Bug 779684 - part 1: Get rid of `nsIFrameEnumerator` interface r=emilio
#   
#   It's inherited only by `nsFrameIterator`, and `nsFrameIterator` can be declared
#   in a header file. So, the interface is not required and removing it can avoid
#   virtual calls.
# ==============================================================================

diff -r be94de3bcd0f -r 738fe6bbf913 layout/base/nsIFrameTraversal.h
--- a/layout/base/nsIFrameTraversal.h	Sat Dec 23 03:36:53 2023 +0000
+++ b/layout/base/nsIFrameTraversal.h	Sat Dec 23 05:39:38 2023 +0000
@@ -8,40 +8,10 @@
 
 #include "nsISupports.h"
 
+class nsFrameIterator;
 class nsIFrame;
 class nsPresContext;
 
-#define NS_IFRAMEENUMERATOR_IID                      \
-  {                                                  \
-    0x7c633f5d, 0x91eb, 0x494e, {                    \
-      0xa1, 0x40, 0x17, 0x46, 0x17, 0x4c, 0x23, 0xd3 \
-    }                                                \
-  }
-
-class nsIFrameEnumerator : public nsISupports {
- public:
-  NS_DECLARE_STATIC_IID_ACCESSOR(NS_IFRAMEENUMERATOR_IID)
-
-  virtual void First() = 0;
-  virtual void Next() = 0;
-  virtual nsIFrame* CurrentItem() = 0;
-  virtual bool IsDone() = 0;
-
-  virtual void Last() = 0;
-  virtual void Prev() = 0;
-
-  inline nsIFrame* Traverse(bool aForward) {
-    if (aForward) {
-      Next();
-    } else {
-      Prev();
-    }
-    return CurrentItem();
-  };
-};
-
-NS_DEFINE_STATIC_IID_ACCESSOR(nsIFrameEnumerator, NS_IFRAMEENUMERATOR_IID)
-
 enum nsIteratorType { eLeaf, ePreOrder, ePostOrder };
 
 // {d33fe76c-207c-4359-a315-8eb1eecf80e5}
@@ -75,7 +45,7 @@
    * @param aLimiter [in] if this is non-null and an ancestor of aStart,
    *        iteration will be limited to just the descendants of this frame.
    */
-  NS_IMETHOD NewFrameTraversal(nsIFrameEnumerator** aEnumerator,
+  NS_IMETHOD NewFrameTraversal(nsFrameIterator** aEnumerator,
                                nsPresContext* aPresContext, nsIFrame* aStart,
                                int32_t aType, bool aVisual,
                                bool aLockInScrollView, bool aFollowOOFs,