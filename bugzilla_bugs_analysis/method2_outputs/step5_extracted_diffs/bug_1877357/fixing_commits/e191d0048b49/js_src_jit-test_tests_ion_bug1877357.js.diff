# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: js/src/jit-test/tests/ion/bug1877357.js
# Commit: e191d0048b49
# Full Hash: e191d0048b4905326fbc8002846517709dfe19be
# Author: Nicolas B. Pierron <nicolas.b.pierron@mozilla.com>
# Date: 2024-02-23 03:40:30
# Description:
#   Bug 1877357 - Insert coercion instruction in the precedessor. r=iain
#   
#   Previously, when resolving Phi's type, we would insert the coercion instruction
#   at the end of the block in which the instruction is.
#   
# ==============================================================================

diff -r 61af32f40777 -r e191d0048b49 js/src/jit-test/tests/ion/bug1877357.js
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/js/src/jit-test/tests/ion/bug1877357.js	Thu Feb 22 10:28:14 2024 +0000
@@ -0,0 +1,17 @@
+function f(x) {
+  let y = x | 0;
+  z = 1;
+  Function((x | 0 ? 1 : 9999999999) ? (z ? y : 9999999999) : 1);
+}
+f(1);
+f(1);
+f(1);
+f(1);
+f(1);
+f(1);
+f(1);
+f(1);
+f(9999999999);
+f(1);
+f();
+f(9007199254740993);