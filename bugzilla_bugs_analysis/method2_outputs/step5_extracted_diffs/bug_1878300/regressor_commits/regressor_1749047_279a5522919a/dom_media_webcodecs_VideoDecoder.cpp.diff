# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/webcodecs/VideoDecoder.cpp
# Commit: 279a5522919a
# Full Hash: 279a5522919ac625c1f35151dc8d70fccfb4b8a1
# Author: Paul Adenot <paul@paul.cx>
# Date: 2023-12-23 09:52:03
# Regressor Bug: 1749047
# File Overlap Count: 1
# Description:
#   Bug 1749047 - Add the ability to print a VideoInfo and a VideoDecoderConfigInternal. r=chunmin,media-playback-reviewers
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D196336
# ==============================================================================

diff -r d43f0c82f214 -r 279a5522919a dom/media/webcodecs/VideoDecoder.cpp
--- a/dom/media/webcodecs/VideoDecoder.cpp	Fri Dec 22 21:39:16 2023 +0000
+++ b/dom/media/webcodecs/VideoDecoder.cpp	Fri Dec 22 21:39:16 2023 +0000
@@ -592,7 +592,7 @@
 Result<UniquePtr<TrackInfo>, nsresult> VideoDecoderTraits::CreateTrackInfo(
     const VideoDecoderConfigInternal& aConfig) {
   LOG("Create a VideoInfo from %s config",
-      NS_ConvertUTF16toUTF8(aConfig.mCodec).get());
+      NS_ConvertUTF16toUTF8(aConfig.ToString()).get());
 
   nsTArray<UniquePtr<TrackInfo>> tracks = GetTracksInfo(aConfig);
   if (tracks.Length() != 1 || tracks[0]->GetType() != TrackInfo::kVideoTrack) {
@@ -738,10 +738,8 @@
     LOGW("image height is set to %d compulsively", vi->mImage.height);
   }
 
-  LOG("Create a VideoInfo - image: %d x %d, display: %d x %d, with extra-data: "
-      "%s",
-      vi->mImage.width, vi->mImage.height, vi->mDisplay.width,
-      vi->mDisplay.height, vi->mExtraData ? "yes" : "no");
+  LOG("Created a VideoInfo for decoder - %s",
+      NS_ConvertUTF16toUTF8(vi->ToString()).get());
 
   return track;
 }
