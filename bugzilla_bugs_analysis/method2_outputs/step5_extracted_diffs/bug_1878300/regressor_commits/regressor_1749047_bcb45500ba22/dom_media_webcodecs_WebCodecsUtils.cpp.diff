# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/webcodecs/WebCodecsUtils.cpp
# Commit: bcb45500ba22
# Full Hash: bcb45500ba2223a5e21bcc29922c1260d350694f
# Author: Paul Adenot <paul@paul.cx>
# Date: 2023-12-23 09:52:03
# Regressor Bug: 1749047
# File Overlap Count: 3
# Description:
#   Bug 1749047 - Wire up more codecs from VideoEncoder to the new FFmpeg PEM. r=chunmin
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D196108
# ==============================================================================

diff -r a78bb8799ef4 -r bcb45500ba22 dom/media/webcodecs/WebCodecsUtils.cpp
--- a/dom/media/webcodecs/WebCodecsUtils.cpp	Fri Dec 22 21:39:12 2023 +0000
+++ b/dom/media/webcodecs/WebCodecsUtils.cpp	Fri Dec 22 21:39:13 2023 +0000
@@ -532,4 +532,21 @@
   colorSpace.mPrimaries = VideoColorPrimaries::Bt709;
   return colorSpace;
 }
+
+Maybe<CodecType> CodecStringToCodecType(const nsAString& aCodecString) {
+  if (StringBeginsWith(aCodecString, u"av01"_ns)) {
+    return Some(CodecType::AV1);
+  }
+  if (StringBeginsWith(aCodecString, u"vp8"_ns)) {
+    return Some(CodecType::VP8);
+  }
+  if (StringBeginsWith(aCodecString, u"vp09"_ns)) {
+    return Some(CodecType::VP9);
+  }
+  if (StringBeginsWith(aCodecString, u"avc1"_ns)) {
+    return Some(CodecType::H264);
+  }
+  return Nothing();
+}
+
 };  // namespace mozilla::dom