# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: testing/web-platform/tests/css/selectors/dir-pseudo-on-input-element.html
# Commit: f01818290718
# Full Hash: f018182907189490b43f3e89c76cfe1851bf41e7
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-04-03 09:34:09
# Description:
#   Bug 1888595 - Auto directionality of non-value-associated form elements should always be LTR. r=smaug
#   
#   https://html.spec.whatwg.org/#auto-directionality always returns null,
#   effectively, so should default to always LTR. Inheriting of the parent
#   directionality wouldn't be handled correctly because we stop the
# ==============================================================================

diff -r 96cda2b1a568 -r f01818290718 testing/web-platform/tests/css/selectors/dir-pseudo-on-input-element.html
--- a/testing/web-platform/tests/css/selectors/dir-pseudo-on-input-element.html	Tue Apr 02 17:16:41 2024 +0000
+++ b/testing/web-platform/tests/css/selectors/dir-pseudo-on-input-element.html	Tue Apr 02 17:38:03 2024 +0000
@@ -1,14 +1,10 @@
 <!DOCTYPE html>
-<html>
-<head>
 <meta name="author" title="Ryosuke Niwa" href="mailto:rniwa@webkit.org">
 <link rel="help" href="https://html.spec.whatwg.org/multipage/dom.html#the-directionality">
 <script src="/resources/testharness.js"></script>
 <script src="/resources/testharnessreport.js"></script>
-</head>
 <body>
 <script>
-
 test(() => {
     const input = document.createElement('input');
     input.type = 'tel';
@@ -195,9 +191,17 @@
         input.removeAttribute('dir');
         assert_true(input.matches(':dir(ltr)'));
         assert_false(input.matches(':dir(rtl)'));
+
+        let rtlParent = document.createElement("div");
+        rtlParent.dir = "rtl";
+        input.dir = "auto";
+        rtlParent.appendChild(input);
+        document.body.appendChild(rtlParent); // Just for good measure.
+        assert_true(input.matches(':dir(ltr)'));
+        assert_false(input.matches(':dir(rtl)'));
+        rtlParent.remove();
     }, `input element whose type attribute is in the ${type} state`);
 }
 
 </script>
-</body>
 </html>
