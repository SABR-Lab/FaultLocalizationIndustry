# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/html/HTMLInputElement.h
# Commit: 14ed8bcf372c
# Full Hash: 14ed8bcf372c696393c3083d29d78959aa0cb5a3
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-01-16 05:03:21
# Regressor Bug: 1856156
# File Overlap Count: 1
# Description:
#   Bug 1856156 - Recompute auto directionality on input type changes. r=smaug
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D198588
# ==============================================================================

diff -r d84b730f202a -r 14ed8bcf372c dom/html/HTMLInputElement.h
--- a/dom/html/HTMLInputElement.h	Mon Jan 15 19:30:40 2024 +0000
+++ b/dom/html/HTMLInputElement.h	Mon Jan 15 19:35:43 2024 +0000
@@ -1112,7 +1112,7 @@
    * Sets the direction from the input value. if aKnownValue is provided, it
    * saves a GetValue call.
    */
-  void SetDirectionFromValue(bool aNotify,
+  void SetAutoDirectionality(bool aNotify,
                              const nsAString* aKnownValue = nullptr);
 
   /**
@@ -1600,8 +1600,8 @@
   /**
    * https://html.spec.whatwg.org/#auto-directionality-form-associated-elements
    */
-  bool IsAutoDirectionalityAssociated() const {
-    switch (mType) {
+  static bool IsAutoDirectionalityAssociated(FormControlType aType) {
+    switch (aType) {
       case FormControlType::InputHidden:
       case FormControlType::InputText:
       case FormControlType::InputSearch:
@@ -1618,6 +1618,10 @@
     }
   }
 
+  bool IsAutoDirectionalityAssociated() const {
+    return IsAutoDirectionalityAssociated(mType);
+  }
+
   static bool CreatesDateTimeWidget(FormControlType aType) {
     return aType == FormControlType::InputDate ||
            aType == FormControlType::InputTime ||