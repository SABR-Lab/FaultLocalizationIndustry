# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/base/CharacterData.cpp
# Commit: f23204fe8592
# Full Hash: f23204fe8592425c9995a3a5e1c2f6b0c688a978
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-01-16 05:03:21
# Regressor Bug: 1856156
# File Overlap Count: 1
# Description:
#   Bug 1856156 - Make Directionality an enum class. r=smaug
#   
#   A bit neater this way.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D198590
# ==============================================================================

diff -r 14ed8bcf372c -r f23204fe8592 dom/base/CharacterData.cpp
--- a/dom/base/CharacterData.cpp	Mon Jan 15 19:35:43 2024 +0000
+++ b/dom/base/CharacterData.cpp	Mon Jan 15 19:35:44 2024 +0000
@@ -258,11 +258,11 @@
     MutationObservers::NotifyCharacterDataWillChange(this, info);
   }
 
-  Directionality oldDir = eDir_NotSet;
-  bool dirAffectsAncestor =
-      (NodeType() == TEXT_NODE &&
-       TextNodeWillChangeDirection(static_cast<nsTextNode*>(this), &oldDir,
-                                   aOffset));
+  auto oldDir = Directionality::Unset;
+  const bool dirAffectsAncestor =
+      NodeType() == TEXT_NODE &&
+      TextNodeWillChangeDirection(static_cast<nsTextNode*>(this), &oldDir,
+                                  aOffset);
 
   if (aOffset == 0 && endOffset == textLength) {
     // Replacing whole text or old text was empty.