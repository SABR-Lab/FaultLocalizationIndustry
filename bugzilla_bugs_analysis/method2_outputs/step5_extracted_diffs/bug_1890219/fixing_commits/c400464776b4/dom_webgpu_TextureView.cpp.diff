# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/webgpu/TextureView.cpp
# Commit: c400464776b4
# Full Hash: c400464776b40839926cc31272254e4e93ea8dc8
# Author: Nicolas Silva <nsilva@mozilla.com>
# Date: 2024-04-11 21:36:48
# Description:
#   Bug 1890219 - Null-check the device in TextureView::Cleanup. r=webgpu-reviewers,teoxoy
#   
#   Also Rename Texture::GetParentDevice into Texture::GetDevice.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D206888
# ==============================================================================

diff -r 41fc5b7b0cad -r c400464776b4 dom/webgpu/TextureView.cpp
--- a/dom/webgpu/TextureView.cpp	Thu Apr 11 13:01:25 2024 +0000
+++ b/dom/webgpu/TextureView.cpp	Thu Apr 11 13:19:31 2024 +0000
@@ -27,12 +27,12 @@
 }  // namespace webgpu
 
 void TextureView::Cleanup() {
-  if (!mValid) {
+  if (!mValid || !mParent || !mParent->GetDevice()) {
     return;
   }
   mValid = false;
 
-  auto bridge = mParent->GetParentDevice()->GetBridge();
+  auto bridge = mParent->GetDevice()->GetBridge();
   if (!bridge) {
     return;
   }
