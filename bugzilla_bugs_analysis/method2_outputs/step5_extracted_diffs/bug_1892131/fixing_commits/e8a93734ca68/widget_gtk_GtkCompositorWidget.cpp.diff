# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: widget/gtk/GtkCompositorWidget.cpp
# Commit: e8a93734ca68
# Full Hash: e8a93734ca68cef5516fe09b3362fe2fca0d2a36
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-04-18 09:53:14
# Description:
#   Bug 1892131 - Null-check mWidget in GtkCompositorWidget::GetTransparentRegion(). r=gfx-reviewers,aosmond
#   
#   Presumably with the GPU process enabled there's no widget. This
#   preserves the behavior.
#   
# ==============================================================================

diff -r 48ea6b3c1cc7 -r e8a93734ca68 widget/gtk/GtkCompositorWidget.cpp
--- a/widget/gtk/GtkCompositorWidget.cpp	Thu Apr 18 02:27:23 2024 +0000
+++ b/widget/gtk/GtkCompositorWidget.cpp	Thu Apr 18 02:43:23 2024 +0000
@@ -143,7 +143,9 @@
 LayoutDeviceIntRegion GtkCompositorWidget::GetTransparentRegion() {
   LayoutDeviceIntRegion fullRegion(
       LayoutDeviceIntRect(LayoutDeviceIntPoint(), GetClientSize()));
-  fullRegion.SubOut(mWidget->GetOpaqueRegion());
+  if (mWidget) {
+    fullRegion.SubOut(mWidget->GetOpaqueRegion());
+  }
   return fullRegion;
 }
 
