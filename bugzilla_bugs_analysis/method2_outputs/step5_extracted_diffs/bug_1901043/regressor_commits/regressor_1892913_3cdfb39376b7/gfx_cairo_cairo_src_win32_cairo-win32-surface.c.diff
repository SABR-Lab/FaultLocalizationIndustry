# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: gfx/cairo/cairo/src/win32/cairo-win32-surface.c
# Commit: 3cdfb39376b7
# Full Hash: 3cdfb39376b736597fe658a322389117686b7e82
# Author: Jonathan Kew <jkew@mozilla.com>
# Date: 2024-05-07 09:13:07
# Regressor Bug: 1892913
# File Overlap Count: 3
# Description:
#   Bug 1892913 - patch 1 - Update cairo source to 1.18.0 r=gfx-reviewers,lsalzman
#   
#   Wholesale replacement of files in gfx/cairo/cairo with contents of the 1.18.0 release tarball,
#   omitting subdirectories that are not part of the core library build.
#   
# ==============================================================================

diff -r 9daa351f875b -r 3cdfb39376b7 gfx/cairo/cairo/src/win32/cairo-win32-surface.c
--- a/gfx/cairo/cairo/src/win32/cairo-win32-surface.c	Mon May 06 19:22:35 2024 +0000
+++ b/gfx/cairo/cairo/src/win32/cairo-win32-surface.c	Mon May 06 19:25:12 2024 +0000
@@ -37,15 +37,6 @@
  *	Vladimir Vukicevic <vladimir@pobox.com>
  */
 
-#define WIN32_LEAN_AND_MEAN
-/* We require Windows 2000 features such as ETO_PDY */
-#if !defined(WINVER) || (WINVER < 0x0500)
-# define WINVER 0x0500
-#endif
-#if !defined(_WIN32_WINNT) || (_WIN32_WINNT < 0x0500)
-# define _WIN32_WINNT 0x0500
-#endif
-
 #include "cairoint.h"
 
 #include "cairo-backend-private.h"
@@ -171,48 +162,6 @@
     return NULL;
 }
 
-HDC
-cairo_win32_get_dc_with_clip (cairo_t *cr)
-{
-    cairo_surface_t *surface = cairo_get_target (cr);
-    if (cr->backend->type == CAIRO_TYPE_DEFAULT) {
-        cairo_default_context_t *c = (cairo_default_context_t *) cr;
-        cairo_clip_t *clip = _cairo_clip_copy (_cairo_gstate_get_clip (c->gstate));
-        if (_cairo_surface_is_win32 (surface)) {
-            cairo_win32_display_surface_t *winsurf = (cairo_win32_display_surface_t *) surface;
-
-            _cairo_win32_display_surface_set_clip (winsurf, clip);
-
-            _cairo_clip_destroy (clip);
-            return winsurf->win32.dc;
-        }
-
-        if (_cairo_surface_is_paginated (surface)) {
-            cairo_surface_t *target;
-
-            target = _cairo_paginated_surface_get_target (surface);
-
-#ifndef CAIRO_OMIT_WIN32_PRINTING
-            if (_cairo_surface_is_win32_printing (target)) {
-                cairo_status_t status;
-                cairo_win32_printing_surface_t *psurf = (cairo_win32_printing_surface_t *) target;
-
-                status = _cairo_surface_clipper_set_clip (&psurf->clipper, clip);
-
-                _cairo_clip_destroy (clip);
-
-                if (status)
-                    return NULL;
-
-                return psurf->win32.dc;
-            }
-#endif
-        }
-        _cairo_clip_destroy (clip);
-    }
-    return NULL;
-}
-
 /**
  * _cairo_surface_is_win32:
  * @surface: a #cairo_surface_t
@@ -388,18 +337,3 @@
 #endif
 }
 #undef STACK_GLYPH_SIZE
-
-cairo_status_t
-cairo_win32_surface_get_size (const cairo_surface_t *surface, int *width, int *height)
-{
-    if (surface->type != CAIRO_SURFACE_TYPE_WIN32)
-        return CAIRO_STATUS_SURFACE_TYPE_MISMATCH;
-
-    const cairo_win32_surface_t *winsurface = (const cairo_win32_surface_t *) surface;
-
-    *width = winsurface->extents.width;
-    *height = winsurface->extents.height;
-
-    return CAIRO_STATUS_SUCCESS;
-}
-