# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: third_party/rust/cubeb-coreaudio/src/backend/device_property.rs
# Commit: 073990df3224
# Full Hash: 073990df32240a0cda9381678ed133b014741644
# Author: Andreas Pehrson <apehrson@mozilla.com>
# Date: 2024-06-17 21:44:16
# Description:
#   Bug 1902801 - Update cubeb-coreaudio-rs to f8a4ec05e5. r=cubeb-reviewers,padenot
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D213930
# ==============================================================================

diff -r f183a6936e48 -r 073990df3224 third_party/rust/cubeb-coreaudio/src/backend/device_property.rs
--- a/third_party/rust/cubeb-coreaudio/src/backend/device_property.rs	Mon Jun 17 12:32:00 2024 +0000
+++ b/third_party/rust/cubeb-coreaudio/src/backend/device_property.rs	Mon Jun 17 12:50:03 2024 +0000
@@ -254,7 +254,11 @@
             );
             return Ok(sub_device_ids
                 .into_iter()
-                .filter_map(|sub_id| get_device_streams(sub_id, devtype).ok())
+                .filter_map(|sub_id| match sub_id {
+                    #[allow(non_upper_case_globals)]
+                    kAudioObjectUnknown => None,
+                    i => get_device_streams(i, devtype).ok(),
+                })
                 .flatten()
                 .collect());
         }