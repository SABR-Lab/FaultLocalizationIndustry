# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/base/RangeBoundary.h
# Commit: 2d732ba0d3b6
# Full Hash: 2d732ba0d3b6f7ec0be35261ebffb8331fe2cb23
# Author: Sean Feng <sefeng@mozilla.com>
# Date: 2024-06-21 04:13:05
# Regressor Bug: 1881096
# File Overlap Count: 2
# Description:
#   Bug 1881096 - Invalidate the boundary offset when a child of container is being removed for CrossShadowBoundaryRange r=emilio,jjaschke,dom-core
#   
#   This is added to support the use case of nsPrintJob where new
#   ranges were created and elements within these ranges are removed.
#   
# ==============================================================================

diff -r ae87b6009cbc -r 2d732ba0d3b6 dom/base/RangeBoundary.h
--- a/dom/base/RangeBoundary.h	Thu Jun 20 20:15:15 2024 +0000
+++ b/dom/base/RangeBoundary.h	Thu Jun 20 20:15:50 2024 +0000
@@ -16,6 +16,9 @@
 class nsRange;
 
 namespace mozilla {
+namespace dom {
+class CrossShadowBoundaryRange;
+}
 
 template <typename T, typename U>
 class EditorDOMPointBase;
@@ -78,6 +81,8 @@
 
   friend nsRange;
 
+  friend class mozilla::dom::CrossShadowBoundaryRange;
+
   friend void ImplCycleCollectionTraverse(nsCycleCollectionTraversalCallback&,
                                           RangeBoundary&, const char*,
                                           uint32_t);