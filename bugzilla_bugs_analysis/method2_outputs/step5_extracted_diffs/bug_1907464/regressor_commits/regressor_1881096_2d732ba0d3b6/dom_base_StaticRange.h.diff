# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/base/StaticRange.h
# Commit: 2d732ba0d3b6
# Full Hash: 2d732ba0d3b6f7ec0be35261ebffb8331fe2cb23
# Author: Sean Feng <sefeng@mozilla.com>
# Date: 2024-06-21 04:13:05
# Regressor Bug: 1881096
# File Overlap Count: 2
# Description:
#   Bug 1881096 - Invalidate the boundary offset when a child of container is being removed for CrossShadowBoundaryRange r=emilio,jjaschke,dom-core
#   
#   This is added to support the use case of nsPrintJob where new
#   ranges were created and elements within these ranges are removed.
#   
# ==============================================================================

diff -r ae87b6009cbc -r 2d732ba0d3b6 dom/base/StaticRange.h
--- a/dom/base/StaticRange.h	Thu Jun 20 20:15:15 2024 +0000
+++ b/dom/base/StaticRange.h	Thu Jun 20 20:15:50 2024 +0000
@@ -76,9 +76,14 @@
   // They could be in different trees, i.e, cross shadow boundaries.
   bool mAreStartAndEndInSameTree = false;
 
+  // Whether mutation is observed.
+  RangeBoundaryIsMutationObserved mIsMutationObserved;
+
  protected:
-  explicit StaticRange(nsINode* aNode)
-      : AbstractRange(aNode, /* aIsDynamicRange = */ false) {}
+  explicit StaticRange(nsINode* aNode,
+                       RangeBoundaryIsMutationObserved aIsMutationObserved)
+      : AbstractRange(aNode, /* aIsDynamicRange = */ false),
+        mIsMutationObserved(aIsMutationObserved) {}
   virtual ~StaticRange();
 
  public:
