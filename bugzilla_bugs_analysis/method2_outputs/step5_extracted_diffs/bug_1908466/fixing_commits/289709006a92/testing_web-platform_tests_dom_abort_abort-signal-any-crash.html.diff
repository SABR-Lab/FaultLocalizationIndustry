# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: testing/web-platform/tests/dom/abort/abort-signal-any-crash.html
# Commit: 289709006a92
# Full Hash: 289709006a928c950041021bec8e1567d41d473e
# Author: Vincent Hilla <vhilla@mozilla.com>
# Date: 2024-07-22 21:46:43
# Description:
#   Bug 1908466 - Ensure source signal is not null when creating a dependent signal. r=saschanaz
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D217233
# ==============================================================================

diff -r 95624d3e6b46 -r 289709006a92 testing/web-platform/tests/dom/abort/abort-signal-any-crash.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/testing/web-platform/tests/dom/abort/abort-signal-any-crash.html	Mon Jul 22 12:32:06 2024 +0000
@@ -0,0 +1,23 @@
+<!DOCTYPE html>
+<html class=test-wait>
+  <head>
+    <title>AbortSignal::Any when source signal was garbage collected</title>
+    <link rel="help" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1908466">
+    <link rel="author" title="Vincent Hilla" href="mailto:vhilla@mozilla.com">
+    <script src="/common/gc.js"></script>
+  </head>
+  <body>
+    <p>Test passes if the browser does not crash.</p>
+    <script>
+        async function test() {
+            let controller = new AbortController();
+            let signal = AbortSignal.any([controller.signal]);
+            controller = undefined;
+            await garbageCollect();
+            AbortSignal.any([signal]);
+            document.documentElement.classList.remove('test-wait');
+        }
+        test();
+    </script>
+  </body>
+</html>
