# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/ipc/PreallocatedProcessManager.cpp
# Commit: 45735575df21
# Full Hash: 45735575df2199548014488ad70c0a6352f83161
# Author: Nika Layzell <nika@thelayzells.com>
# Date: 2024-06-20 04:08:16
# Regressor Bug: 1728331
# File Overlap Count: 1
# Description:
#   Bug 1728331 - Part 1: Remove e10s process recycling, r=smaug
#   
#   This logic did nothing in Fission, however it did have an effect for
#   e10s-Android, which will no longer have process recycling. I expect the impact
#   of this to be minimal given Android's tendency to kill processes already.
# ==============================================================================

diff -r fbafea1663e3 -r 45735575df21 dom/ipc/PreallocatedProcessManager.cpp
--- a/dom/ipc/PreallocatedProcessManager.cpp	Wed Jun 19 20:14:48 2024 +0000
+++ b/dom/ipc/PreallocatedProcessManager.cpp	Wed Jun 19 20:14:48 2024 +0000
@@ -371,14 +371,6 @@
     process->ShutDownProcess(ContentParent::SEND_SHUTDOWN_MESSAGE);
     // drop ref and let it free
   }
-
-  // Make sure to also clear out the recycled E10S process cache, as it's also
-  // controlled by the same preference, and can be cleaned up due to memory
-  // pressure.
-  if (RefPtr<ContentParent> recycled =
-          ContentParent::sRecycledE10SProcess.forget()) {
-    recycled->MaybeBeginShutDown();
-  }
 }
 
 inline PreallocatedProcessManagerImpl*
