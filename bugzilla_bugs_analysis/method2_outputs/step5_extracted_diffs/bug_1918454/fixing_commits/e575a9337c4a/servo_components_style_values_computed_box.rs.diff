# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: servo/components/style/values/computed/box.rs
# Commit: e575a9337c4a
# Full Hash: e575a9337c4a2dbe8dd219a2a1212ca2008512b1
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-09-13 21:45:07
# Description:
#   Bug 1918454 - Prevent divide by zero when inverting effective zoom. r=firefox-style-system-reviewers,layout-reviewers,boris
#   
#   See comment.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D222090
# ==============================================================================

diff -r ba640de8df47 -r e575a9337c4a servo/components/style/values/computed/box.rs
--- a/servo/components/style/values/computed/box.rs	Fri Sep 13 18:19:57 2024 +0000
+++ b/servo/components/style/values/computed/box.rs	Fri Sep 13 18:24:57 2024 +0000
@@ -365,8 +365,11 @@
 
     /// Returns the inverse of our value.
     #[inline]
-    pub fn inverted(&self) -> Self {
-        Self(Self::ONE.0 / self.0)
+    pub fn inverted(&self) -> Option<Self> {
+        if self.0.value == 0 {
+            return None;
+        }
+        Some(Self(Self::ONE.0 / self.0))
     }
 
     /// Returns the value as a float.