# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/quota/QuotaManager.h
# Commit: aaa63956f3f0
# Full Hash: aaa63956f3f022575b29059d5909f63079723d3a
# Author: Jan Varga <jvarga@mozilla.com>
# Date: 2024-10-10 09:22:33
# Regressor Bug: 1866402
# File Overlap Count: 1
# Description:
#   Bug 1866402 - Add nsIQuotaManagerService::PersistentOriginInitialized and nsIQuotaManagerService::TemporaryOriginInitialized methods; r=dom-storage-reviewers,jari
#   
#   This additional testing infrastructure is needed for verifying origin
#   initialization status.
#   
# ==============================================================================

diff -r f799f35b1c84 -r aaa63956f3f0 dom/quota/QuotaManager.h
--- a/dom/quota/QuotaManager.h	Wed Oct 09 22:16:50 2024 +0000
+++ b/dom/quota/QuotaManager.h	Wed Oct 09 22:16:50 2024 +0000
@@ -372,6 +372,12 @@
       const PrincipalInfo& aPrincipalInfo,
       RefPtr<UniversalDirectoryLock> aDirectoryLock);
 
+  RefPtr<BoolPromise> PersistentOriginInitialized(
+      const PrincipalInfo& aPrincipalInfo);
+
+  bool IsPersistentOriginInitializedInternal(
+      const OriginMetadata& aOriginMetadata) const;
+
   // Returns a pair of an nsIFile object referring to the directory, and a bool
   // indicating whether the directory was newly created.
   Result<std::pair<nsCOMPtr<nsIFile>, bool>, nsresult>
@@ -385,6 +391,9 @@
       PersistenceType aPersistenceType, const PrincipalInfo& aPrincipalInfo,
       RefPtr<UniversalDirectoryLock> aDirectoryLock);
 
+  RefPtr<BoolPromise> TemporaryOriginInitialized(
+      PersistenceType aPersistenceType, const PrincipalInfo& aPrincipalInfo);
+
   bool IsTemporaryOriginInitializedInternal(
       const OriginMetadata& aOriginMetadata) const;
 