# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: mozglue/tests/gtest/TestFmt.cpp
# Commit: f1bf7410e5ba
# Full Hash: f1bf7410e5bad00a16f1df25639681e28df26feb
# Author: Paul Adenot <paul@paul.cx>
# Date: 2024-10-24 04:11:07
# Description:
#   Bug 1926089 - Disable an fmt test on Linux debug x86.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D226482
# ==============================================================================

diff -r bb13832b86fc -r f1bf7410e5ba mozglue/tests/gtest/TestFmt.cpp
--- a/mozglue/tests/gtest/TestFmt.cpp	Wed Oct 23 14:40:39 2024 +0000
+++ b/mozglue/tests/gtest/TestFmt.cpp	Wed Oct 23 14:46:30 2024 +0000
@@ -208,7 +208,10 @@
 {
   FILE* duped = fdopen(dup(fileno(stderr)), "w");
   fclose(duped);
+  // glibc will crash here on x86 Linux debug
+#    if defined(DEBUG) && defined(XP_LINUX) && !defined(__i386__)
   fmt::println(duped, FMT_STRING("Hi {}"), 14);
+#    endif
 }
 #  endif
 #endif
