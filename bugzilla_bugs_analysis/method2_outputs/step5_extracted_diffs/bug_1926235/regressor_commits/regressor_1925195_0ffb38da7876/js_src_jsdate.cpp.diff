# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jsdate.cpp
# Commit: 0ffb38da7876
# Full Hash: 0ffb38da787659de3a222a7fef0b4890023d0aee
# Author: Andr√© Bargull <andre.bargull@gmail.com>
# Date: 2024-10-17 20:50:15
# Regressor Bug: 1925195
# File Overlap Count: 1
# Description:
#   Bug 1925195 - Part 1: Inline Date.prototype.{getTime,valueOf}. r=jandem
#   
#   Inline for `getTime` for parity with V8 and JSC. Also enables inlining `valueOf`
#   and `ThisTimeValue` for free, because they return the same result as `getTime`.
#   
# ==============================================================================

diff -r ba249529f7cc -r 0ffb38da7876 js/src/jsdate.cpp
--- a/js/src/jsdate.cpp	Thu Oct 17 12:37:00 2024 +0000
+++ b/js/src/jsdate.cpp	Thu Oct 17 12:37:00 2024 +0000
@@ -37,6 +37,7 @@
 #ifdef JS_HAS_TEMPORAL_API
 #  include "builtin/temporal/Instant.h"
 #endif
+#include "jit/InlinableNatives.h"
 #include "js/CallAndConstruct.h"  // JS::IsCallable
 #include "js/Conversions.h"
 #include "js/Date.h"
@@ -4450,7 +4451,7 @@
 };
 
 static const JSFunctionSpec date_methods[] = {
-    JS_FN("getTime", date_getTime, 0, 0),
+    JS_INLINABLE_FN("getTime", date_getTime, 0, 0, DateGetTime),
     JS_FN("getTimezoneOffset", date_getTimezoneOffset, 0, 0),
     JS_FN("getYear", date_getYear, 0, 0),
     JS_FN("getFullYear", date_getFullYear, 0, 0),
@@ -4504,7 +4505,7 @@
     JS_FN("toJSON", date_toJSON, 1, 0),
     JS_FN("toSource", date_toSource, 0, 0),
     JS_FN("toString", date_toString, 0, 0),
-    JS_FN("valueOf", date_valueOf, 0, 0),
+    JS_INLINABLE_FN("valueOf", date_valueOf, 0, 0, DateGetTime),
     JS_SYM_FN(toPrimitive, date_toPrimitive, 1, JSPROP_READONLY),
     JS_FS_END,
 };