# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/jit/MacroAssembler.h
# Commit: fb72a2390e63
# Full Hash: fb72a2390e63c25c244588c80ae15b8b8e8a5910
# Author: Andr√© Bargull <andre.bargull@gmail.com>
# Date: 2024-10-17 20:50:15
# Regressor Bug: 1925195
# File Overlap Count: 1
# Description:
#   Bug 1925195 - Part 4: Inline Date.prototype.get{Hours,Minutes,Seconds}. r=jandem
#   
#   The local time components aren't stored in separate slots, but instead in a
#   single slot which stores the number of seconds since the start of the year.
#   
# ==============================================================================

diff -r 12d75626c542 -r fb72a2390e63 js/src/jit/MacroAssembler.h
--- a/js/src/jit/MacroAssembler.h	Thu Oct 17 12:37:01 2024 +0000
+++ b/js/src/jit/MacroAssembler.h	Thu Oct 17 12:37:02 2024 +0000
@@ -5849,6 +5849,30 @@
   void dateFillLocalTimeSlots(Register obj, Register scratch,
                               const LiveRegisterSet& volatileRegs);
 
+ private:
+  void udiv32ByConstant(Register src, uint32_t divisor, Register dest);
+
+  void umod32ByConstant(Register src, uint32_t divisor, Register dest,
+                        Register scratch);
+
+  template <typename GetTimeFn>
+  void dateTimeFromSecondsIntoYear(ValueOperand secondsIntoYear,
+                                   ValueOperand output, Register scratch1,
+                                   Register scratch2, GetTimeFn getTimeFn);
+
+ public:
+  void dateHoursFromSecondsIntoYear(ValueOperand secondsIntoYear,
+                                    ValueOperand output, Register scratch1,
+                                    Register scratch2);
+
+  void dateMinutesFromSecondsIntoYear(ValueOperand secondsIntoYear,
+                                      ValueOperand output, Register scratch1,
+                                      Register scratch2);
+
+  void dateSecondsFromSecondsIntoYear(ValueOperand secondsIntoYear,
+                                      ValueOperand output, Register scratch1,
+                                      Register scratch2);
+
   void computeImplicitThis(Register env, ValueOperand output, Label* slowPath);
 
  private: