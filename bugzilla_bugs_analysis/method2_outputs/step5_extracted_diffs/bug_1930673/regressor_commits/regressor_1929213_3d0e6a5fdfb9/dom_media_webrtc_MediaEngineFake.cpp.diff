# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/webrtc/MediaEngineFake.cpp
# Commit: 3d0e6a5fdfb9
# Full Hash: 3d0e6a5fdfb9f2a0618e4dcd8637b2369259f09e
# Author: serge-sans-paille <sguelton@mozilla.com>
# Date: 2024-11-06 16:51:31
# Regressor Bug: 1929213
# File Overlap Count: 1
# Description:
#   Bug 1929213 - Use std::clamp instead of min/max chain in dom/media/webrtc r=bwc
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D227936
# ==============================================================================

diff -r 66fa16b4e99e -r 3d0e6a5fdfb9 dom/media/webrtc/MediaEngineFake.cpp
--- a/dom/media/webrtc/MediaEngineFake.cpp	Wed Nov 06 10:14:24 2024 +0000
+++ b/dom/media/webrtc/MediaEngineFake.cpp	Wed Nov 06 10:15:25 2024 +0000
@@ -238,10 +238,9 @@
 #endif
       );
   mOpts.mWidth =
-      std::max(VIDEO_WIDTH_MIN, std::min(mOpts.mWidth, VIDEO_WIDTH_MAX)) & ~1;
+      std::clamp(mOpts.mWidth, VIDEO_WIDTH_MIN, VIDEO_WIDTH_MAX) & ~1;
   mOpts.mHeight =
-      std::max(VIDEO_HEIGHT_MIN, std::min(mOpts.mHeight, VIDEO_HEIGHT_MAX)) &
-      ~1;
+      std::clamp(mOpts.mHeight, VIDEO_HEIGHT_MIN, VIDEO_HEIGHT_MAX) & ~1;
 
   NS_DispatchToMainThread(NS_NewRunnableFunction(
       __func__, [settings = mSettings, frameRate = mOpts.mFPS,