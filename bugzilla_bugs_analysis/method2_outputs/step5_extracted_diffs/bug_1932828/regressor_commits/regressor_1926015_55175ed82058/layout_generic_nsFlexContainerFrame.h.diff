# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/generic/nsFlexContainerFrame.h
# Commit: 55175ed82058
# Full Hash: 55175ed820584bbb1afe88f936b7dc2e382a7e0a
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-11-22 09:28:00
# Regressor Bug: 1926015
# File Overlap Count: 1
# Description:
#   Bug 1926015 - Percentage-basis aware intrinsic cache. r=TYLin,dholbert
#   
#   This avoids returning wrong intrinsic values with different calls into
#   intrinsic size computation, which is wrong by definition.
#   
# ==============================================================================

diff -r a4434b7aabda -r 55175ed82058 layout/generic/nsFlexContainerFrame.h
--- a/layout/generic/nsFlexContainerFrame.h	Thu Nov 21 16:53:09 2024 +0000
+++ b/layout/generic/nsFlexContainerFrame.h	Thu Nov 21 17:04:14 2024 +0000
@@ -12,6 +12,7 @@
 #include <tuple>
 
 #include "mozilla/dom/FlexBinding.h"
+#include "mozilla/IntrinsicISizesCache.h"
 #include "nsContainerFrame.h"
 #include "nsILineIterator.h"
 
@@ -656,8 +657,7 @@
   /**
    * Cached values to optimize IntrinsicISize().
    */
-  nscoord mCachedMinISize = NS_INTRINSIC_ISIZE_UNKNOWN;
-  nscoord mCachedPrefISize = NS_INTRINSIC_ISIZE_UNKNOWN;
+  mozilla::IntrinsicISizesCache mCachedIntrinsicSizes;
 
   /**
    * Cached baselines computed in our last reflow to optimize