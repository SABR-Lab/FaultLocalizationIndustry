# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/base/Document.h
# Commit: 3d4472548fb9
# Full Hash: 3d4472548fb9d48cce00f59066690611ee20ffcb
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-11-26 09:36:10
# Regressor Bug: 1931301
# File Overlap Count: 1
# Description:
#   Bug 1931301 - Notify of removals on a stable state, not mid-remove. r=smaug,masayuki,dshin
#   
#   This simplifies some observers, and makes others a bit more subtle, but I think
#   over-all it is an improvement.
#   
# ==============================================================================

diff -r 20a0394d798f -r 3d4472548fb9 dom/base/Document.h
--- a/dom/base/Document.h	Mon Nov 25 17:56:21 2024 +0000
+++ b/dom/base/Document.h	Mon Nov 25 17:58:40 2024 +0000
@@ -1594,22 +1594,26 @@
   // Get the root <html> element, or return null if there isn't one (e.g.
   // if the root isn't <html>)
   Element* GetHtmlElement() const;
-  // Returns the first child of GetHtmlContent which has the given tag,
-  // or nullptr if that doesn't exist.
-  Element* GetHtmlChildElement(nsAtom* aTag);
+  // Returns the first child of GetHtmlContent which has the given tag and is
+  // not aContentToIgnore, or nullptr if that doesn't exist.
+  Element* GetHtmlChildElement(
+      nsAtom* aTag, const nsIContent* aContentToIgnore = nullptr) const;
   // Get the canonical <body> element, or return null if there isn't one (e.g.
   // if the root isn't <html> or if the <body> isn't there)
-  HTMLBodyElement* GetBodyElement();
+  HTMLBodyElement* GetBodyElement(
+      const nsIContent* aContentToIgnore = nullptr) const;
   // Get the canonical <head> element, or return null if there isn't one (e.g.
   // if the root isn't <html> or if the <head> isn't there)
-  Element* GetHeadElement() { return GetHtmlChildElement(nsGkAtoms::head); }
+  Element* GetHeadElement() const {
+    return GetHtmlChildElement(nsGkAtoms::head);
+  }
   // Get the "body" in the sense of document.body: The first <body> or
   // <frameset> that's a child of a root <html>
-  nsGenericHTMLElement* GetBody();
+  nsGenericHTMLElement* GetBody() const;
   // Set the "body" in the sense of document.body.
   void SetBody(nsGenericHTMLElement* aBody, ErrorResult& rv);
   // Get the "head" element in the sense of document.head.
-  HTMLSharedElement* GetHead();
+  HTMLSharedElement* GetHead() const;
 
   ServoStyleSet* StyleSetForPresShell() const {
     MOZ_ASSERT(!!mStyleSet.get());