# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/cookiestore/CookieStoreParent.h
# Commit: 01c2bc6d727a
# Full Hash: 01c2bc6d727a70be74dbf7babb7f6294824a571a
# Author: Andrea Marchesini <amarchesini@mozilla.com>
# Date: 2024-09-11 09:21:34
# Regressor Bug: 1475599
# File Overlap Count: 1
# Description:
#   Bug 1475599 - part 10 - CookieStore API - CHIP implementation shared between Document and CookieStore, r=cookie-reviewers,valentin
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D220288
# ==============================================================================

diff -r 2d925ea3da19 -r 01c2bc6d727a dom/cookiestore/CookieStoreParent.h
--- a/dom/cookiestore/CookieStoreParent.h	Tue Sep 10 16:31:41 2024 +0000
+++ b/dom/cookiestore/CookieStoreParent.h	Tue Sep 10 16:31:41 2024 +0000
@@ -32,46 +32,55 @@
 
   mozilla::ipc::IPCResult RecvGetRequest(
       const nsString& aDomain, const OriginAttributes& aOriginAttributes,
-      const bool& aMatchName, const nsString& aName, const nsCString& aPath,
+      const Maybe<OriginAttributes>& aPartitionedOriginAttributes,
+      const bool& aThirdPartyContext, const bool& aPartitionForeign,
+      const bool& aUsingStorageAccess, const bool& aMatchName,
+      const nsString& aName, const nsCString& aPath,
       const bool& aOnlyFirstMatch, GetRequestResolver&& aResolver);
 
   mozilla::ipc::IPCResult RecvSetRequest(
       const nsString& aDomain, const OriginAttributes& aOriginAttributes,
-      const nsString& aName, const nsString& aValue, const bool& aSession,
-      const int64_t& aExpires, const nsString& aPath, const int32_t& aSameSite,
-      const bool& aPartitioned, const nsID& aOperationID,
-      SetRequestResolver&& aResolver);
+      const bool& aThirdPartyContext, const bool& aPartitionForeign,
+      const bool& aUsingStorageAccess, const nsString& aName,
+      const nsString& aValue, const bool& aSession, const int64_t& aExpires,
+      const nsString& aPath, const int32_t& aSameSite, const bool& aPartitioned,
+      const nsID& aOperationID, SetRequestResolver&& aResolver);
 
   mozilla::ipc::IPCResult RecvDeleteRequest(
       const nsString& aDomain, const OriginAttributes& aOriginAttributes,
-      const nsString& aName, const nsString& aPath, const bool& aPartitioned,
-      const nsID& aOperationID, DeleteRequestResolver&& aResolver);
+      const bool& aThirdPartyContext, const bool& aPartitionForeign,
+      const bool& aUsingStorageAccess, const nsString& aName,
+      const nsString& aPath, const bool& aPartitioned, const nsID& aOperationID,
+      DeleteRequestResolver&& aResolver);
 
   mozilla::ipc::IPCResult RecvClose();
 
-  void GetRequestOnMainThread(const nsAString& aDomain,
-                              const OriginAttributes& aOriginAttributes,
-                              bool aMatchName, const nsAString& aName,
-                              const nsACString& aPath, bool aOnlyFirstMatch,
-                              nsTArray<CookieData>& aResults);
+  void GetRequestOnMainThread(
+      const nsAString& aDomain, const OriginAttributes& aOriginAttributes,
+      const Maybe<OriginAttributes>& aPartitionedOriginAttributes,
+      bool aThirdPartyContext, bool aPartitionForeign, bool aUsingStorageAccess,
+      bool aMatchName, const nsAString& aName, const nsACString& aPath,
+      bool aOnlyFirstMatch, nsTArray<CookieData>& aResults);
 
   // Returns true if a cookie notification has been generated while completing
   // the operation.
   bool SetRequestOnMainThread(ThreadsafeContentParentHandle* aParent,
                               const nsAString& aDomain,
                               const OriginAttributes& aOriginAttributes,
-                              const nsAString& aName, const nsAString& aValue,
-                              bool aSession, int64_t aExpires,
-                              const nsAString& aPath, int32_t aSameSite,
-                              bool aPartitioned, const nsID& aOperationID);
+                              bool aThirdPartyContext, bool aPartitionForeign,
+                              bool aUsingStorageAccess, const nsAString& aName,
+                              const nsAString& aValue, bool aSession,
+                              int64_t aExpires, const nsAString& aPath,
+                              int32_t aSameSite, bool aPartitioned,
+                              const nsID& aOperationID);
 
   // Returns true if a cookie notification has been generated while completing
   // the operation.
-  bool DeleteRequestOnMainThread(ThreadsafeContentParentHandle* aParent,
-                                 const nsAString& aDomain,
-                                 const OriginAttributes& aOriginAttributes,
-                                 const nsAString& aName, const nsAString& aPath,
-                                 bool aPartitioned, const nsID& aOperationID);
+  bool DeleteRequestOnMainThread(
+      ThreadsafeContentParentHandle* aParent, const nsAString& aDomain,
+      const OriginAttributes& aOriginAttributes, bool aThirdPartyContext,
+      bool aPartitionForeign, bool aUsingStorageAccess, const nsAString& aName,
+      const nsAString& aPath, bool aPartitioned, const nsID& aOperationID);
 
   CookieStoreNotificationWatcher* GetOrCreateNotificationWatcherOnMainThread(
       const OriginAttributes& aOriginAttributes);