# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/src/frontend/BytecodeCompiler.h
# Commit: f10838447589
# Full Hash: f10838447589dc565d7d12d39f6e00ae00f98175
# Author: Tooru Fujisawa <arai_a@mac.com>
# Date: 2024-12-05 09:58:04
# Regressor Bug: 1933681
# File Overlap Count: 1
# Description:
#   Bug 1933681 - Part 7: Move storeDelazification call into CompileLazyFunctionToStencilMaybeInstantiate. r=nbp
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D231022
# ==============================================================================

diff -r adb4d60ce68c -r f10838447589 js/src/frontend/BytecodeCompiler.h
--- a/js/src/frontend/BytecodeCompiler.h	Wed Dec 04 23:44:35 2024 +0000
+++ b/js/src/frontend/BytecodeCompiler.h	Wed Dec 04 23:44:35 2024 +0000
@@ -243,7 +243,10 @@
   Other,
 };
 
-extern already_AddRefed<CompilationStencil> DelazifyCanonicalScriptedFunction(
+// Delazify a function specified by a pair of `context` + `scriptIndex`, and
+// store the delazification stencil into `stencils`, and return a borrowing
+// pointer for the delazification.
+extern const CompilationStencil* DelazifyCanonicalScriptedFunction(
     FrontendContext* fc, js::LifoAlloc& tempLifoAlloc,
     const JS::PrefableCompileOptions& prefableOptions,
     ScopeBindingCache* scopeCache, CompilationStencil& context,