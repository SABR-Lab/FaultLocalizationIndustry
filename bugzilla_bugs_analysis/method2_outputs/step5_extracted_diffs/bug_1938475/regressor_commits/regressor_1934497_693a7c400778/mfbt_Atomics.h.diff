# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: mfbt/Atomics.h
# Commit: 693a7c400778
# Full Hash: 693a7c4007782b5b3276d4dadefd9cb0a7c71dc6
# Author: stransky <stransky@redhat.com>
# Date: 2024-12-17 05:09:10
# Regressor Bug: 1934497
# File Overlap Count: 2
# Description:
#   Bug 1934497 [Wayland] Implement wl_surface abstraction as WaylandSurface r=emilio
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D230847
# ==============================================================================

diff -r 75d095afa9cf -r 693a7c400778 mfbt/Atomics.h
--- a/mfbt/Atomics.h	Mon Dec 16 20:12:13 2024 +0000
+++ b/mfbt/Atomics.h	Mon Dec 16 20:12:13 2024 +0000
@@ -512,6 +512,27 @@
   Atomic(Atomic& aOther) = delete;
 };
 
+/**
+ * Atomic<T> implementation for double type.
+ */
+template <MemoryOrdering Order>
+class Atomic<double, Order> : protected detail::AtomicBase<double, Order> {
+  typedef typename detail::AtomicBase<double, Order> Base;
+
+ public:
+  constexpr Atomic() : Base() {}
+  explicit constexpr Atomic(double aInit) : Base(aInit) {}
+
+  operator double() const {
+    return double(Base::Intrinsics::load(Base::mValue));
+  }
+
+  double operator=(double aVal) { return Base::operator=(aVal); }
+
+ private:
+  Atomic(Atomic& aOther) = delete;
+};
+
 // Relax the CPU during a spinlock.  It's a good idea to place this in a
 // spinlock so that the CPU doesn't pipeline the loop otherwise flushing the
 // pipeline when the loop finally breaks can be expensive.