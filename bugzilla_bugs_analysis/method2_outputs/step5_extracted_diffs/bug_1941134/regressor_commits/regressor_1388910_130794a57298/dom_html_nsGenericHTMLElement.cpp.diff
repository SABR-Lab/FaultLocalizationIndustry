# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/html/nsGenericHTMLElement.cpp
# Commit: 130794a57298
# Full Hash: 130794a57298f50adb259e805866e563ec72cf63
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-11-20 04:44:54
# Regressor Bug: 1388910
# File Overlap Count: 3
# Description:
#   Bug 1388910 - Remove -moz-user-modify property. r=dshin
#   
#   We successfully unshipped it in bug 1920118.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D229530
# ==============================================================================

diff -r 059d2181d771 -r 130794a57298 dom/html/nsGenericHTMLElement.cpp
--- a/dom/html/nsGenericHTMLElement.cpp	Tue Nov 19 19:31:58 2024 +0000
+++ b/dom/html/nsGenericHTMLElement.cpp	Tue Nov 19 19:35:35 2024 +0000
@@ -1328,23 +1328,6 @@
  */
 void nsGenericHTMLElement::MapCommonAttributesIntoExceptHidden(
     MappedDeclarationsBuilder& aBuilder) {
-  if (!aBuilder.PropertyIsSet(eCSSProperty__moz_user_modify)) {
-    const nsAttrValue* value = aBuilder.GetAttr(nsGkAtoms::contenteditable);
-    if (value) {
-      // FIXME: plaintext-only should be mapped to read-write-plaintext-only
-      if (value->Equals(nsGkAtoms::_empty, eCaseMatters) ||
-          value->Equals(nsGkAtoms::_true, eIgnoreCase) ||
-          (StaticPrefs::dom_element_contenteditable_plaintext_only_enabled() &&
-           value->Equals(nsGkAtoms::plaintextOnly, eIgnoreCase))) {
-        aBuilder.SetKeywordValue(eCSSProperty__moz_user_modify,
-                                 StyleUserModify::ReadWrite);
-      } else if (value->Equals(nsGkAtoms::_false, eIgnoreCase)) {
-        aBuilder.SetKeywordValue(eCSSProperty__moz_user_modify,
-                                 StyleUserModify::ReadOnly);
-      }
-    }
-  }
-
   MapLangAttributeInto(aBuilder);
 }
 