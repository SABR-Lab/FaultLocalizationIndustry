# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: editor/libeditor/EditorBase.cpp
# Commit: 130794a57298
# Full Hash: 130794a57298f50adb259e805866e563ec72cf63
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2024-11-20 04:44:54
# Regressor Bug: 1388910
# File Overlap Count: 3
# Description:
#   Bug 1388910 - Remove -moz-user-modify property. r=dshin
#   
#   We successfully unshipped it in bug 1920118.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D229530
# ==============================================================================

diff -r 059d2181d771 -r 130794a57298 editor/libeditor/EditorBase.cpp
--- a/editor/libeditor/EditorBase.cpp	Tue Nov 19 19:31:58 2024 +0000
+++ b/editor/libeditor/EditorBase.cpp	Tue Nov 19 19:35:35 2024 +0000
@@ -5588,14 +5588,6 @@
   NS_WARNING_ASSERTION(
       NS_SUCCEEDED(rvIgnored),
       "nsISelectionController::SetCaretEnabled() failed, but ignored");
-  // NOTE(emilio): It's important for this call to be after
-  // SetCaretEnabled(true), since that would override mIgnoreUserModify to true.
-  //
-  // Also, make sure to always ignore it for designMode, since that effectively
-  // overrides everything and we allow to edit stuff with
-  // contenteditable="false" subtrees in such a document.
-  caret->SetIgnoreUserModify(aOriginalEventTargetNode.IsInDesignMode());
-
   // Init selection
   rvIgnored =
       selectionController->SetSelectionFlags(nsISelectionDisplay::DISPLAY_ALL);
@@ -5674,7 +5666,6 @@
   }
 
   if (RefPtr<nsCaret> caret = GetCaret()) {
-    caret->SetIgnoreUserModify(true);
     DebugOnly<nsresult> rvIgnored = selectionController->SetCaretEnabled(false);
     NS_WARNING_ASSERTION(
         NS_SUCCEEDED(rvIgnored),