# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: js/xpconnect/metrics.yaml
# Commit: 49990191195a
# Full Hash: 49990191195a650baeb77150e18916b4a998c49c
# Author: Denis Palmeiro <dpalmeiro@mozilla.com>
# Date: 2025-01-15 21:57:20
# Regressor Bug: 1932686
# File Overlap Count: 1
# Description:
#   Bug 1932686: Migrate boolean legacy GC metrics to glean using a labled_counter type.  r=jonco
#   
#   Depends on D231644
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D231645
# ==============================================================================

diff -r ba8bd50a3a28 -r 49990191195a js/xpconnect/metrics.yaml
--- a/js/xpconnect/metrics.yaml	Wed Jan 15 15:30:15 2025 +0000
+++ b/js/xpconnect/metrics.yaml	Wed Jan 15 15:30:16 2025 +0000
@@ -551,6 +551,102 @@
       - jcoppeard@mozilla.com
     expires: never
 
+  is_zone_gc:
+    type: labeled_counter
+    description: >
+      Is it a zone GC?
+    bugs:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    data_reviews:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    notification_emails:
+      - dev-telemetry-gc-alerts@mozilla.org
+      - jcoppeard@mozilla.com
+    expires: never
+    labels:
+      - "false"
+      - "true"
+
+  budget_was_increased:
+    type: labeled_counter
+    description: >
+      Whether the budget was increased due to taking too long or approaching the incremental limit
+    bugs:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    data_reviews:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    notification_emails:
+      - dev-telemetry-gc-alerts@mozilla.org
+      - jcoppeard@mozilla.com
+    expires: never
+    labels:
+      - "false"
+      - "true"
+
+  slice_was_long:
+    type: labeled_counter
+    description: >
+      Whether a GC slice took 1.5 times or 5ms more than its budget
+    bugs:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    data_reviews:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    notification_emails:
+      - dev-telemetry-gc-alerts@mozilla.org
+      - jcoppeard@mozilla.com
+    expires: never
+    labels:
+      - "false"
+      - "true"
+
+  reset:
+    type: labeled_counter
+    description: >
+      Was an incremental GC canceled?
+    bugs:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    data_reviews:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    notification_emails:
+      - dev-telemetry-gc-alerts@mozilla.org
+      - jcoppeard@mozilla.com
+    expires: never
+    labels:
+      - "false"
+      - "true"
+
+  non_incremental:
+    type: labeled_counter
+    description: >
+      Was the GC non-incremental?
+    bugs:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    data_reviews:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    notification_emails:
+      - dev-telemetry-gc-alerts@mozilla.org
+      - jcoppeard@mozilla.com
+    expires: never
+    labels:
+      - "false"
+      - "true"
+
+  parallel_mark_used:
+    type: labeled_counter
+    description: >
+      Whether parallel marking was used for this collection
+    bugs:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    data_reviews:
+      - https://bugzilla.mozilla.org/show_bug.cgi?id=1932686
+    notification_emails:
+      - dev-telemetry-gc-alerts@mozilla.org
+      - jcoppeard@mozilla.com
+    expires: never
+    labels:
+      - "false"
+      - "true"
+
 slow_script_warning:
   shown_browser:
     type: event