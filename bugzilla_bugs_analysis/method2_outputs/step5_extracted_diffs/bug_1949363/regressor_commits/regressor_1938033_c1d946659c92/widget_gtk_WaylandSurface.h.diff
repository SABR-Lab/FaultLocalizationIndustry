# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/gtk/WaylandSurface.h
# Commit: c1d946659c92
# Full Hash: c1d946659c921aaaf3d329e4af69c4b5b866b9e3
# Author: stransky <stransky@redhat.com>
# Date: 2025-02-19 21:53:46
# Regressor Bug: 1938033
# File Overlap Count: 1
# Description:
#   Bug 1938033 [Wayland] Implement NativeLayerWayland by WaylandSurface r=lsalzman,emilio
#   
#   Make NativeLayerRootWayland to use WaylandSurface owned by nsWindow widget and create WaylandSurface for every NativeLayerWayland.
#   WaylandSurface implementation is shared by native compositing code, SWWR and WR rendering so we don't duplicate the implementation here.
#   
# ==============================================================================

diff -r 6064ee48431c -r c1d946659c92 widget/gtk/WaylandSurface.h
--- a/widget/gtk/WaylandSurface.h	Wed Feb 19 13:54:16 2025 +0000
+++ b/widget/gtk/WaylandSurface.h	Wed Feb 19 13:54:17 2025 +0000
@@ -111,6 +111,8 @@
   // on main thread.
   void SetUnmapCallbackLocked(const WaylandSurfaceLock& aProofOfLock,
                               const std::function<void(void)>& aUnmapCB);
+  void ClearUnmapCallbackLocked(const WaylandSurfaceLock& aProofOfLock);
+
   void RunUnmapCallback();
 
   // Create Viewport to manage surface transformations.
@@ -157,6 +159,7 @@
   void EnableDMABufFormatsLocked(
       const WaylandSurfaceLock& aProofOfLock,
       const std::function<void(DMABufFormats*)>& aFormatRefreshCB);
+  void DisableDMABufFormatsLocked(const WaylandSurfaceLock& aProofOfLock);
 
   // Place this WaylandSurface above aLowerSurface
   void PlaceAboveLocked(const WaylandSurfaceLock& aProofOfLock,
@@ -246,6 +249,7 @@
   void SetGdkCommitCallbackLocked(
       const WaylandSurfaceLock& aProofOfLock,
       const std::function<void(void)>& aGdkCommitCB);
+  void ClearGdkCommitCallbackLocked(const WaylandSurfaceLock& aProofOfLock);
   void RequestFrameCallbackForceCommitLocked(
       const WaylandSurfaceLock& aProofOfLock) {
     mFrameCallbackForceCommit = true;
