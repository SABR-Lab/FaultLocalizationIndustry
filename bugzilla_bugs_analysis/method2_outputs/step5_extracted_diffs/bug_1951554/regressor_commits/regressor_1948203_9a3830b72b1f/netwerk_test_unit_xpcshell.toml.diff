# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: netwerk/test/unit/xpcshell.toml
# Commit: 9a3830b72b1f
# Full Hash: 9a3830b72b1f2a9640a7ff945b91d17d67828bcd
# Author: Kershaw Chang <kershaw@mozilla.com>
# Date: 2025-02-24 17:07:55
# Regressor Bug: 1948203
# File Overlap Count: 5
# Description:
#   Bug 1948203 - Skip alt-svc validation if we already connected to the server, r=necko-reviewers,jesup
#   
#   This patch optimizes how Firefox handles speculative connections for alt-svc headers. When a server sends an alt-svc header, Firefox normally creates a speculative connection to validate it. With this patch, if the connectionâ€™s hash key matches the one generated from the alt-svc header, the validation step is skipped since an equivalent connection is already in place, avoiding unnecessary work.
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D238218
# ==============================================================================

diff -r d5962b430cd3 -r 9a3830b72b1f netwerk/test/unit/xpcshell.toml
--- a/netwerk/test/unit/xpcshell.toml	Mon Feb 24 09:01:12 2025 +0000
+++ b/netwerk/test/unit/xpcshell.toml	Mon Feb 24 09:20:35 2025 +0000
@@ -325,6 +325,16 @@
 
 ["test_bug1940663.js"]
 
+["test_bug1948203.js"]
+skip-if = [
+  "os == 'android'", # bug 1622901
+  "os == 'mac' && os_version == '10.15' && processor == 'x86_64' && opt",
+  "os == 'mac' && os_version == '11.20' && arch == 'aarch64' && opt",
+  "asan",
+  "os == 'win'", # https://bugzilla.mozilla.org/show_bug.cgi?id=1808048
+]
+run-sequentially = "node server exceptions dont replay well"
+
 ["test_bug_1918928.js"]
 skip-if = [
   "socketprocess_networking", # confirmation state isn't passed cross-process
