# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/painting/nsDisplayList.cpp
# Commit: bf3033ae1fe7
# Full Hash: bf3033ae1fe73d4384d9f3957f3efbfe4d36223a
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2025-03-25 21:02:33
# Regressor Bug: 1955697
# File Overlap Count: 3
# Description:
#   Bug 1955697 - Remove nsDisplayCanvasBackgroundColor. r=mstange
#   
#   We no longer need it, as now it behaves just like a solid color.
#   
#   This causes an expectation change in an internal windowUtils.elementFromPoint
# ==============================================================================

diff -r 01cecf5bf7e5 -r bf3033ae1fe7 layout/painting/nsDisplayList.cpp
--- a/layout/painting/nsDisplayList.cpp	Tue Mar 25 08:09:57 2025 +0000
+++ b/layout/painting/nsDisplayList.cpp	Tue Mar 25 08:09:58 2025 +0000
@@ -1140,7 +1140,6 @@
   for (nsDisplayItem* i : *aList) {
     switch (i->GetType()) {
       case DisplayItemType::TYPE_COMPOSITOR_HITTEST_INFO:
-      case DisplayItemType::TYPE_CANVAS_BACKGROUND_COLOR:
       case DisplayItemType::TYPE_CANVAS_BACKGROUND_IMAGE:
         continue;
       case DisplayItemType::TYPE_SOLID_COLOR:
@@ -7165,8 +7164,7 @@
 
   GetChildren()->HitTest(aBuilder, resultingRect, aState, aOutFrames);
 
-  if (aState->mHitOccludingItem && !testingPoint &&
-      !mBounds.Contains(aRect)) {
+  if (aState->mHitOccludingItem && !testingPoint && !mBounds.Contains(aRect)) {
     MOZ_ASSERT(aBuilder->HitTestIsForVisibility());
     // We're hit-testing a rect that's bigger than our child bounds, but
     // resultingRect is clipped by our bounds (in ProjectRectBounds above), so