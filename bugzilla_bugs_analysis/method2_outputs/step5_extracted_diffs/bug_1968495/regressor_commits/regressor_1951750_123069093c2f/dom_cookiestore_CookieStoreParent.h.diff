# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/cookiestore/CookieStoreParent.h
# Commit: 123069093c2f
# Full Hash: 123069093c2fc18e87e9ee19c2d22815bc6b2804
# Author: Valentin Gosu <valentin.gosu@gmail.com>
# Date: 2025-03-28 21:29:38
# Regressor Bug: 1951750
# File Overlap Count: 4
# Description:
#   Bug 1951750 - Handle domain argument in CookieStoreParent r=baku,edgul,cookie-reviewers
#   
#   Depends on D241966
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D240695
# ==============================================================================

diff -r f3959de161ba -r 123069093c2f dom/cookiestore/CookieStoreParent.h
--- a/dom/cookiestore/CookieStoreParent.h	Thu Mar 27 19:06:33 2025 +0000
+++ b/dom/cookiestore/CookieStoreParent.h	Thu Mar 27 19:06:33 2025 +0000
@@ -34,7 +34,7 @@
   ~CookieStoreParent();
 
   mozilla::ipc::IPCResult RecvGetRequest(
-      const nsString& aDomain, const OriginAttributes& aOriginAttributes,
+      nsIURI* aCookieURI, const OriginAttributes& aOriginAttributes,
       const Maybe<OriginAttributes>& aPartitionedOriginAttributes,
       const bool& aThirdPartyContext, const bool& aPartitionForeign,
       const bool& aUsingStorageAccess, const bool& aIsOn3PCBExceptionList,
@@ -42,20 +42,21 @@
       const bool& aOnlyFirstMatch, GetRequestResolver&& aResolver);
 
   mozilla::ipc::IPCResult RecvSetRequest(
-      const nsString& aDomain, const OriginAttributes& aOriginAttributes,
+      nsIURI* aCookieURI, const OriginAttributes& aOriginAttributes,
       const bool& aThirdPartyContext, const bool& aPartitionForeign,
       const bool& aUsingStorageAccess, const bool& aIsOn3PCBExceptionList,
       const nsString& aName, const nsString& aValue, const bool& aSession,
-      const int64_t& aExpires, const nsString& aPath, const int32_t& aSameSite,
-      const bool& aPartitioned, const nsID& aOperationID,
-      SetRequestResolver&& aResolver);
+      const int64_t& aExpires, const nsString& aDomain, const nsString& aPath,
+      const int32_t& aSameSite, const bool& aPartitioned,
+      const nsID& aOperationID, SetRequestResolver&& aResolver);
 
   mozilla::ipc::IPCResult RecvDeleteRequest(
-      const nsString& aDomain, const OriginAttributes& aOriginAttributes,
+      nsIURI* aCookieURI, const OriginAttributes& aOriginAttributes,
       const bool& aThirdPartyContext, const bool& aPartitionForeign,
       const bool& aUsingStorageAccess, const bool& aIsOn3PCBExceptionList,
-      const nsString& aName, const nsString& aPath, const bool& aPartitioned,
-      const nsID& aOperationID, DeleteRequestResolver&& aResolver);
+      const nsString& aName, const nsString& aDomain, const nsString& aPath,
+      const bool& aPartitioned, const nsID& aOperationID,
+      DeleteRequestResolver&& aResolver);
 
   mozilla::ipc::IPCResult RecvGetSubscriptionsRequest(
       const PrincipalInfo& aPrincipalInfo, const nsCString& aScopeURL,
@@ -69,7 +70,7 @@
   mozilla::ipc::IPCResult RecvClose();
 
   void GetRequestOnMainThread(
-      const nsAString& aDomain, const OriginAttributes& aOriginAttributes,
+      nsIURI* aCookieURI, const OriginAttributes& aOriginAttributes,
       const Maybe<OriginAttributes>& aPartitionedOriginAttributes,
       bool aThirdPartyContext, bool aPartitionForeign, bool aUsingStorageAccess,
       bool aIsOn3PCBExceptionList, bool aMatchName, const nsAString& aName,
@@ -79,7 +80,7 @@
   // Returns true if a cookie notification has been generated while completing
   // the operation.
   bool SetRequestOnMainThread(ThreadsafeContentParentHandle* aParent,
-                              const nsAString& aDomain,
+                              nsIURI* aCookieURI, const nsAString& aDomain,
                               const OriginAttributes& aOriginAttributes,
                               bool aThirdPartyContext, bool aPartitionForeign,
                               bool aUsingStorageAccess,
@@ -92,9 +93,9 @@
   // Returns true if a cookie notification has been generated while completing
   // the operation.
   bool DeleteRequestOnMainThread(
-      ThreadsafeContentParentHandle* aParent, const nsAString& aDomain,
-      const OriginAttributes& aOriginAttributes, bool aThirdPartyContext,
-      bool aPartitionForeign, bool aUsingStorageAccess,
+      ThreadsafeContentParentHandle* aParent, nsIURI* aCookieURI,
+      const nsAString& aDomain, const OriginAttributes& aOriginAttributes,
+      bool aThirdPartyContext, bool aPartitionForeign, bool aUsingStorageAccess,
       bool aIsOn3PCBExceptionList, const nsAString& aName,
       const nsAString& aPath, bool aPartitioned, const nsID& aOperationID);
 