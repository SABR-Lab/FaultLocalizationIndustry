# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: toolkit/components/cookiebanners/nsCookieInjector.cpp
# Commit: 123069093c2f
# Full Hash: 123069093c2fc18e87e9ee19c2d22815bc6b2804
# Author: Valentin Gosu <valentin.gosu@gmail.com>
# Date: 2025-03-28 21:29:38
# Regressor Bug: 1951750
# File Overlap Count: 4
# Description:
#   Bug 1951750 - Handle domain argument in CookieStoreParent r=baku,edgul,cookie-reviewers
#   
#   Depends on D241966
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D240695
# ==============================================================================

diff -r f3959de161ba -r 123069093c2f toolkit/components/cookiebanners/nsCookieInjector.cpp
--- a/toolkit/components/cookiebanners/nsCookieInjector.cpp	Thu Mar 27 19:06:33 2025 +0000
+++ b/toolkit/components/cookiebanners/nsCookieInjector.cpp	Thu Mar 27 19:06:33 2025 +0000
@@ -324,10 +324,11 @@
             ("Setting cookie: %s, %s, %s, %s\n", c.Host().get(), c.Name().get(),
              c.Path().get(), c.Value().get()));
     rv = cookieManager->AddNative(
-        c.Host(), c.Path(), c.Name(), c.Value(), c.IsSecure(), c.IsHttpOnly(),
-        c.IsSession(), c.Expiry(), &aOriginAttributes, c.SameSite(),
-        static_cast<nsICookie::schemeType>(c.SchemeMap()),
-        /* is partitioned: */ false, nullptr);
+        nullptr, c.Host(), c.Path(), c.Name(), c.Value(), c.IsSecure(),
+        c.IsHttpOnly(), c.IsSession(), c.Expiry(), &aOriginAttributes,
+        c.SameSite(), static_cast<nsICookie::schemeType>(c.SchemeMap()),
+        /* is partitioned: */ false, nullptr,
+        [](mozilla::net::CookieStruct&) { return true; });
     NS_ENSURE_SUCCESS(rv, rv);
 
     aHasInjectedCookie = true;
