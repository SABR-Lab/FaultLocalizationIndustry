# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: netwerk/cookie/nsICookieManager.idl
# Commit: bb99a3d0d1e7
# Full Hash: bb99a3d0d1e7bf2278834e61e8878440bca791e3
# Author: Valentin Gosu <valentin.gosu@gmail.com>
# Date: 2025-03-29 09:19:43
# Regressor Bug: 1951750
# File Overlap Count: 4
# Description:
#   Bug 1951750 - Handle domain argument in CookieStoreParent r=baku,edgul,cookie-reviewers
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D240695
# ==============================================================================

diff -r ee233c9ac108 -r bb99a3d0d1e7 netwerk/cookie/nsICookieManager.idl
--- a/netwerk/cookie/nsICookieManager.idl	Fri Mar 28 13:48:31 2025 +0000
+++ b/netwerk/cookie/nsICookieManager.idl	Fri Mar 28 13:48:31 2025 +0000
@@ -6,14 +6,20 @@
 #include "nsISupports.idl"
 #include "nsICookie.idl"
 #include "nsIThirdPartyCookieBlockingExceptionListService.idl"
+#include "nsIURI.idl"
 
 %{ C++
+#include <functional>
 namespace mozilla {
 class OriginAttributes;
+namespace net {
+class CookieStruct;
+} // namespace net
 } // mozilla namespace
 %}
 
 [ptr] native OriginAttributesPtr(mozilla::OriginAttributes);
+native CheckStructFunctionRef(const std::function< bool(mozilla::net::CookieStruct&) > &);
 
 /**
  * An optional interface for accessing or removing the cookies
@@ -139,7 +145,8 @@
            [optional] in boolean aIsPartitioned);
 
   [notxpcom]
-  nsresult addNative(in AUTF8String aHost,
+  nsresult addNative(in nsIURI aCookieURI,
+                     in AUTF8String aHost,
                      in AUTF8String aPath,
                      in ACString    aName,
                      in AUTF8String aValue,
@@ -151,7 +158,8 @@
                      in int32_t aSameSite,
                      in nsICookie_schemeType aSchemeMap,
                      in boolean     aIsPartitioned,
-                     in nsIDPtr     aOperationID);
+                     in nsIDPtr     aOperationID,
+                     in CheckStructFunctionRef aCheckValid);
 
   /**
    * Find whether a given cookie already exists.