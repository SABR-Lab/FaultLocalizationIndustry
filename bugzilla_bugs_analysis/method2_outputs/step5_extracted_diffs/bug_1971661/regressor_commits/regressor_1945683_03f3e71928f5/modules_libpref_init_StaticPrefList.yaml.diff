# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: modules/libpref/init/StaticPrefList.yaml
# Commit: 03f3e71928f5
# Full Hash: 03f3e71928f5db04a68e19d0af6f92d3519d50c3
# Author: agoloman <agoloman@mozilla.com>
# Date: 2025-06-12 16:31:09
# Regressor Bug: 1945683
# File Overlap Count: 1
# Description:
#   Revert "Bug 1945683 - Enable layer compositor on Windows in Nightly r=gfx-reviewers,lsalzman" for causing performance regression on Speedometer 3 on Windows 11.
#   
#   This reverts commit c7b785cbc18de37b0db02ced9285aebe7efbf580.
# ==============================================================================

diff -r b29e61ac6b83 -r 03f3e71928f5 modules/libpref/init/StaticPrefList.yaml
--- a/modules/libpref/init/StaticPrefList.yaml	Thu Jun 12 13:56:38 2025 +0000
+++ b/modules/libpref/init/StaticPrefList.yaml	Thu Jun 12 17:05:04 2025 +0300
@@ -7530,14 +7530,14 @@
 #endif
   mirror: once
 
+#ifdef NIGHTLY_BUILD
+  # Keep this pref hidden on non-nightly builds to avoid people accidentally
+  # turning it on.
 - name: gfx.webrender.layer-compositor
   type: bool
-#if defined(XP_WIN)
-  value: @IS_NIGHTLY_BUILD@
-#else
-  value: false
-#endif
-  mirror: once
+  value: false
+  mirror: once
+#endif
 
 #ifdef XP_WIN
 - name: gfx.webrender.layer-compositor-use-composition-surface
