# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: modules/libpref/init/StaticPrefList.yaml
# Commit: 1cfeac9e52c0
# Full Hash: 1cfeac9e52c09a98fb1a38c4b381c49aeded2ac3
# Author: Atila Butkovits <abutkovits@mozilla.com>
# Date: 2025-06-16 21:40:59
# Regressor Bug: 1945683
# File Overlap Count: 1
# Description:
#   Revert "Bug 1945683 - Enable layer compositor on Windows in Nightly r=gfx-reviewers,lsalzman" for causing performance regression in a critical test (speedometer3).
#   
#   This reverts commit 585b6fd1d4d2c46be6cba8c2efea6200be8bc70d.
# ==============================================================================

diff -r da09dea47f05 -r 1cfeac9e52c0 modules/libpref/init/StaticPrefList.yaml
--- a/modules/libpref/init/StaticPrefList.yaml	Mon Jun 16 10:05:03 2025 +0000
+++ b/modules/libpref/init/StaticPrefList.yaml	Mon Jun 16 15:21:05 2025 +0300
@@ -7530,14 +7530,14 @@
 #endif
   mirror: once
 
+#ifdef NIGHTLY_BUILD
+  # Keep this pref hidden on non-nightly builds to avoid people accidentally
+  # turning it on.
 - name: gfx.webrender.layer-compositor
   type: bool
-#if defined(XP_WIN)
-  value: @IS_NIGHTLY_BUILD@
-#else
-  value: false
-#endif
-  mirror: once
+  value: false
+  mirror: once
+#endif
 
 #ifdef XP_WIN
 - name: gfx.webrender.layer-compositor-use-composition-surface
