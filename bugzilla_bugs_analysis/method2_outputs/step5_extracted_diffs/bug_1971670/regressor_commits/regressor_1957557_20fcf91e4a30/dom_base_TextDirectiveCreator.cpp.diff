# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/base/TextDirectiveCreator.cpp
# Commit: 20fcf91e4a30
# Full Hash: 20fcf91e4a307797786bfed33428d6c59e52f51b
# Author: Jan-Niklas Jaeschke <jjaschke@mozilla.com>
# Date: 2025-05-27 03:54:23
# Regressor Bug: 1957557
# File Overlap Count: 1
# Description:
#   Bug 1957557 - fix compilation issue with non-Nightly builds
# ==============================================================================

diff -r 83bb423d94f1 -r 20fcf91e4a30 dom/base/TextDirectiveCreator.cpp
--- a/dom/base/TextDirectiveCreator.cpp	Mon May 26 09:16:05 2025 +0000
+++ b/dom/base/TextDirectiveCreator.cpp	Mon May 26 13:00:17 2025 +0300
@@ -209,15 +209,16 @@
           return Ok();
         }));
   } else {
-    const uint32_t kMaxLength = StaticPrefs::
-        dom_text_fragments_create_text_fragment_exact_match_max_length();
     MOZ_TRY(TextDirectiveUtil::RangeContentAsString(mRange).andThen(
         [start = &mStartContent](
             const nsString& content) -> Result<Ok, ErrorResult> {
           *start = content;
           return Ok();
         }));
-    MOZ_DIAGNOSTIC_ASSERT(mStartContent.Length() > kMaxLength);
+    MOZ_DIAGNOSTIC_ASSERT(
+        mStartContent.Length() >
+        StaticPrefs::
+            dom_text_fragments_create_text_fragment_exact_match_max_length());
     const auto [wordStart, wordEnd] =
         intl::WordBreaker::FindWord(mStartContent, mStartContent.Length() / 2);
     mEndContent = Substring(mStartContent, wordEnd);
