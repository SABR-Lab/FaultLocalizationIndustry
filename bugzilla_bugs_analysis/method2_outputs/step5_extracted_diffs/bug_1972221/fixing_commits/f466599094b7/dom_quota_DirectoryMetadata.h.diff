# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/quota/DirectoryMetadata.h
# Commit: f466599094b7
# Full Hash: f466599094b7e16948794a49b0571e03eb2b4df9
# Author: Serban Stanca <sstanca@mozilla.com>
# Date: 2025-06-15 13:49:48
# Description:
#   Revert "Bug 1962133 - QM: Add accessed flag to FullOriginMetadata and persist it in the origin metadata file; r=dom-storage-reviewers,hsingh" as requested by dmeehan for causing top crash in Bug 1972221.
#   
#   This reverts commit 433768e64dd71c996694e08005854756b7c45fb3.
# ==============================================================================

diff -r 2408bee8bcc4 -r f466599094b7 dom/quota/DirectoryMetadata.h
--- a/dom/quota/DirectoryMetadata.h	Sat Jun 14 05:48:43 2025 +0000
+++ b/dom/quota/DirectoryMetadata.h	Sun Jun 15 16:46:59 2025 +0300
@@ -39,19 +39,9 @@
  * - bool mPersisted
  *     True if the origin is marked as persisted and should survive origin
  *     eviction.
- * - uint32_t flags
- *     A bitfield of DirectoryMetadataFlags used to store boolean state flags.
- *     This field currently maps only to mAccessed. The defined flags are:
- *       - Initialized: Always set when writing metadata; indicates that this
- *         field contains valid flag bits. Older files written before this
- *         flag was introduced will have this field set to zero.
- *       - Accessed: Indicates whether the origin has been accessed by a quota
- *         client. This maps directly to the mAccessed field in memory.
- *
- *     If the Initialized flag is not set, the flags field is considered
- *     invalid and mAccessed is conservatively set to true to ensure a full
- *     initialization scan.
- * - uint32_t reservedData
+ * - uint32_t reservedData1
+ *     Reserved for future use. Must be zero. Validation fails if nonzero.
+ * - uint32_t reservedData2
  *     Reserved for future use. Currently ignored.
  *
  * Legacy fields (still written and read for backward compatibility, but no