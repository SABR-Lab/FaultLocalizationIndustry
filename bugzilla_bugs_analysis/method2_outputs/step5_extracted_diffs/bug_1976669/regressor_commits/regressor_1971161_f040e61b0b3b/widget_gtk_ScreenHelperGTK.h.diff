# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/gtk/ScreenHelperGTK.h
# Commit: f040e61b0b3b
# Full Hash: f040e61b0b3bff7d6b3c355b23d2cbecf4e8796b
# Author: stransky <stransky@redhat.com>
# Date: 2025-06-11 18:38:51
# Regressor Bug: 1971161
# File Overlap Count: 1
# Description:
#   Bug 1971161 [Wayland] Move system monitor probe to ScreenGetterGtk class r=emilio
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D253148
# ==============================================================================

diff -r 36ff3b312a9e -r f040e61b0b3b widget/gtk/ScreenHelperGTK.h
--- a/widget/gtk/ScreenHelperGTK.h	Wed Jun 11 06:45:15 2025 +0000
+++ b/widget/gtk/ScreenHelperGTK.h	Wed Jun 11 06:46:01 2025 +0000
@@ -15,6 +15,8 @@
 
 namespace mozilla::widget {
 
+class ScreenGetterGtk;
+
 class ScreenHelperGTK final : public ScreenManager::Helper {
  public:
   ScreenHelperGTK();
@@ -23,6 +25,13 @@
   static int GetMonitorCount();
   static gint GetGTKMonitorScaleFactor(gint aMonitorNum = 0);
   static RefPtr<widget::Screen> GetScreenForWindow(nsWindow* aWindow);
+
+  static void RequestRefreshScreens();
+
+ private:
+  static GdkWindow* sRootWindow;
+  static StaticRefPtr<ScreenGetterGtk> gLastScreenGetter;
+  static int gLastSerial;
 };
 
 }  // namespace mozilla::widget
