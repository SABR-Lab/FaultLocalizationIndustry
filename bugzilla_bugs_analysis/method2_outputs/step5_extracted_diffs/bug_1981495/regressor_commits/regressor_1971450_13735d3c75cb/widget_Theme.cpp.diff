# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/Theme.cpp
# Commit: 13735d3c75cb
# Full Hash: 13735d3c75cb7a6fabbdcae93bdfce3376d526e4
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2025-06-17 09:24:05
# Regressor Bug: 1971450
# File Overlap Count: 1
# Description:
#   Bug 1971450 - Remove internal appearance values for meter / progress / range thumb / chunk. r=dshin
#   
#   This is technically a behavior change because we don't really look at
#   the appearance value of the progressbar etc anymore. We could do that if
#   wanted, but it's more consistent to just look at the individual frame
# ==============================================================================

diff -r 275b63046ac5 -r 13735d3c75cb widget/Theme.cpp
--- a/widget/Theme.cpp	Mon Jun 16 22:22:24 2025 +0000
+++ b/widget/Theme.cpp	Mon Jun 16 22:28:59 2025 +0000
@@ -74,7 +74,6 @@
 static constexpr gfx::sRGBColor sColorMeterRed20(
     gfx::sRGBColor::UnusualFromARGB(0xff810220));
 
-static const CSSCoord kMinimumRangeThumbSize = 20.0f;
 static const CSSCoord kMinimumDropdownArrowButtonWidth = 18.0f;
 static const CSSCoord kMinimumSpinnerButtonWidth = 18.0f;
 static const CSSCoord kMinimumSpinnerButtonHeight = 9.0f;
@@ -799,8 +798,9 @@
   auto tickMarks = rangeFrame->TickMarks();
   double progress = rangeFrame->GetValueAsFractionOfRange();
   auto rect = aRect;
-  LayoutDeviceRect thumbRect(0, 0, kMinimumRangeThumbSize * aDpiRatio,
-                             kMinimumRangeThumbSize * aDpiRatio);
+  const CSSCoord minThumbSize = GetMinimumRangeThumbSize();
+  LayoutDeviceRect thumbRect(0, 0, minThumbSize * aDpiRatio,
+                             minThumbSize * aDpiRatio);
   LayoutDeviceRect progressClipRect(aRect);
   LayoutDeviceRect trackClipRect(aRect);
   const LayoutDeviceCoord verticalSize = kRangeHeight * aDpiRatio;
@@ -1193,25 +1193,16 @@
       PaintRange(aFrame, aPaintData, devPxRect, elementState, colors, dpiRatio,
                  IsRangeHorizontal(aFrame));
       break;
-    case StyleAppearance::RangeThumb:
-      // Painted as part of StyleAppearance::Range.
-      break;
     case StyleAppearance::ProgressBar:
       PaintProgress(aFrame, aPaintData, devPxRect, elementState, colors,
                     dpiRatio,
                     /* aIsMeter = */ false);
       break;
-    case StyleAppearance::Progresschunk:
-      /* Painted as part of the progress bar */
-      break;
     case StyleAppearance::Meter:
       PaintProgress(aFrame, aPaintData, devPxRect, elementState, colors,
                     dpiRatio,
                     /* aIsMeter = */ true);
       break;
-    case StyleAppearance::Meterchunk:
-      /* Painted as part of the meter bar */
-      break;
     case StyleAppearance::ScrollbarthumbHorizontal:
     case StyleAppearance::ScrollbarthumbVertical: {
       bool isHorizontal =
@@ -1527,10 +1518,6 @@
 
   LayoutDeviceIntSize result;
   switch (aAppearance) {
-    case StyleAppearance::RangeThumb:
-      result.SizeTo((kMinimumRangeThumbSize * dpiRatio).Rounded(),
-                    (kMinimumRangeThumbSize * dpiRatio).Rounded());
-      break;
     case StyleAppearance::MozMenulistArrowButton:
       result.width = (kMinimumDropdownArrowButtonWidth * dpiRatio).Rounded();
       break;
@@ -1592,11 +1579,8 @@
     case StyleAppearance::Textarea:
     case StyleAppearance::Textfield:
     case StyleAppearance::Range:
-    case StyleAppearance::RangeThumb:
     case StyleAppearance::ProgressBar:
-    case StyleAppearance::Progresschunk:
     case StyleAppearance::Meter:
-    case StyleAppearance::Meterchunk:
     case StyleAppearance::ScrollbarbuttonUp:
     case StyleAppearance::ScrollbarbuttonDown:
     case StyleAppearance::ScrollbarbuttonLeft: