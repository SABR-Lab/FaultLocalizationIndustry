# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: dom/media/webrtc/libwebrtcglue/WebrtcEnvironmentWrapper.cpp
# Commit: 1c0d9fdb8a06
# Full Hash: 1c0d9fdb8a06724c0166a9e08578e81952161b67
# Author: Andreas Pehrson <apehrson@mozilla.com>
# Date: 2025-06-19 21:40:31
# Regressor Bug: 1968812
# File Overlap Count: 1
# Description:
#   Bug 1968812 - Remove the CallWorker thread and use TaskQueue::Observer instead. r=bwc
#   
#   Differential Revision: https://phabricator.services.mozilla.com/D252686
# ==============================================================================

diff -r a3b51595f6d1 -r 1c0d9fdb8a06 dom/media/webrtc/libwebrtcglue/WebrtcEnvironmentWrapper.cpp
--- a/dom/media/webrtc/libwebrtcglue/WebrtcEnvironmentWrapper.cpp	Thu Jun 19 08:18:29 2025 +0000
+++ b/dom/media/webrtc/libwebrtcglue/WebrtcEnvironmentWrapper.cpp	Thu Jun 19 08:18:29 2025 +0000
@@ -16,8 +16,7 @@
 /* static */ RefPtr<WebrtcEnvironmentWrapper> WebrtcEnvironmentWrapper::Create(
     const dom::RTCStatsTimestampMaker& aTimestampMaker) {
   RefPtr<WebrtcEnvironmentWrapper> wrapper = new WebrtcEnvironmentWrapper(
-      MakeUnique<webrtc::RtcEventLogNull>(),
-      MakeUnique<SharedThreadPoolWebRtcTaskQueueFactory>(),
+      MakeUnique<webrtc::RtcEventLogNull>(), CreateWebrtcTaskQueueFactory(),
       WrapUnique(new webrtc::MozTrialsConfig()), aTimestampMaker);
 
   return wrapper;