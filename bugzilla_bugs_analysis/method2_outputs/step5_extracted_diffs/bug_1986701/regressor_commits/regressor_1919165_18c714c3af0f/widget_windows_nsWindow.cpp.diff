# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/windows/nsWindow.cpp
# Commit: 18c714c3af0f
# Full Hash: 18c714c3af0f77750cc36ec9f162e9d84d3f537f
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2025-04-29 20:49:47
# Regressor Bug: 1919165
# File Overlap Count: 1
# Description:
#   Bug 1919165 - Remove support for WindowType::Child, which is now unused. r=stransky
#   
#   We don't take this codepath anymore in any platform. Windows and GTK
#   were already asserting against it.
#   
# ==============================================================================

diff -r 734373410b28 -r 18c714c3af0f widget/windows/nsWindow.cpp
--- a/widget/windows/nsWindow.cpp	Tue Apr 29 14:04:48 2025 +0000
+++ b/widget/windows/nsWindow.cpp	Tue Apr 29 14:04:53 2025 +0000
@@ -671,8 +671,6 @@
       mCachedHitTestTime(TimeStamp::Now()),
       mSizeConstraintsScale(GetDefaultScale().scale),
       mDesktopId("DesktopIdMutex") {
-  MOZ_ASSERT(mWindowType == WindowType::Child);
-
   if (!gInitializedVirtualDesktopManager) {
     TaskController::Get()->AddTask(
         MakeAndAddRef<InitializeVirtualDesktopManagerTask>());
@@ -873,7 +871,6 @@
   if (!aInitData) aInitData = &defaultInitData;
 
   MOZ_DIAGNOSTIC_ASSERT(aInitData->mWindowType != WindowType::Invisible);
-  MOZ_DIAGNOSTIC_ASSERT(aInitData->mWindowType != WindowType::Child);
 
   mBounds = aRect;
 
@@ -1310,10 +1307,6 @@
 DWORD nsWindow::WindowStyle() {
   DWORD style;
   switch (mWindowType) {
-    case WindowType::Child:
-      style = WS_OVERLAPPED;
-      break;
-
     case WindowType::Dialog:
       style = WS_OVERLAPPED | WS_BORDER | WS_DLGFRAME | WS_SYSMENU |
               DS_MODALFRAME | WS_CLIPCHILDREN;
@@ -1345,8 +1338,6 @@
 // Return nsWindow extended styles
 DWORD nsWindow::WindowExStyle() {
   switch (mWindowType) {
-    case WindowType::Child:
-      return 0;
     case WindowType::Popup: {
       DWORD extendedStyle = WS_EX_TOOLWINDOW;
       if (mPopupLevel == PopupLevel::Top) {
