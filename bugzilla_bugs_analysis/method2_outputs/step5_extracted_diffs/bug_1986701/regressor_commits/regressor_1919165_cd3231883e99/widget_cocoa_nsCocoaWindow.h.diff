# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: widget/cocoa/nsCocoaWindow.h
# Commit: cd3231883e99
# Full Hash: cd3231883e993634ed5484fd6fc3807caacf9053
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2025-04-29 20:49:47
# Regressor Bug: 1919165
# File Overlap Count: 1
# Description:
#   Bug 1919165 - Notify attached listener for paint like in other platforms.
#   
#   This should fix browser_startup_content_mainthreadio.js because it's not
#   getting the widget-first-paint notification.
#   
# ==============================================================================

diff -r ca14d7c98775 -r cd3231883e99 widget/cocoa/nsCocoaWindow.h
--- a/widget/cocoa/nsCocoaWindow.h	Tue Apr 29 17:16:13 2025 +0300
+++ b/widget/cocoa/nsCocoaWindow.h	Tue Apr 29 17:39:11 2025 +0200
@@ -475,6 +475,10 @@
   void CocoaSendToplevelActivateEvents();
   void CocoaSendToplevelDeactivateEvents();
 
+  nsIWidgetListener* GetPaintListener() const {
+    return mAttachedWidgetListener ? mAttachedWidgetListener : mWidgetListener;
+  }
+
   enum class TransitionType {
     Windowed,
     Fullscreen,