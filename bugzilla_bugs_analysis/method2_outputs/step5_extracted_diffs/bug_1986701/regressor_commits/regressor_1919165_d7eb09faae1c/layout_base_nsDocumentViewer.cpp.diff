# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: layout/base/nsDocumentViewer.cpp
# Commit: d7eb09faae1c
# Full Hash: d7eb09faae1c39fe5ba7039c0c14b9ee13fe6f48
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2025-04-29 20:49:47
# Regressor Bug: 1919165
# File Overlap Count: 1
# Description:
#   Bug 1919165 - Get rid of nsChildView. r=mac-reviewers,mstange
#   
#   In a follow-up I want to merge nsChildView.mm into nsCocoaWindow.mm, but
#   I thought I'd send this for feedback.
#   
# ==============================================================================

diff -r 1eeb386120ff -r d7eb09faae1c layout/base/nsDocumentViewer.cpp
--- a/layout/base/nsDocumentViewer.cpp	Tue Apr 29 13:50:20 2025 +0000
+++ b/layout/base/nsDocumentViewer.cpp	Tue Apr 29 13:51:02 2025 +0000
@@ -3270,18 +3270,12 @@
   if (nsIWidget::UsePuppetWidgets() || mParentWidget->IsPuppetWidget()) {
     return true;
   }
-
-  // TODO(emilio, bug 1919165): Unify this between macOS and other platforms?
-#ifdef XP_MACOSX
-  return false;
-#else
-#  ifdef DEBUG
+#ifdef DEBUG
   nsIWidgetListener* parentListener = mParentWidget->GetWidgetListener();
   MOZ_ASSERT(!parentListener || !parentListener->GetView(),
              "Expect a top level widget");
-#  endif
+#endif
   return true;
-#endif
 }
 
 //------------------------------------------------------------