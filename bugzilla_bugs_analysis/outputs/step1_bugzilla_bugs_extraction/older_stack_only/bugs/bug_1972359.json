{
  "bug_id": "1972359",
  "summary": "Crash in [@ webrender::prepare::write_brush_segment_description] in panic!(\"bug: masks not supported on old segment path\")",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "Graphics: WebRender",
  "version": "unspecified",
  "severity": "--",
  "priority": "--",
  "creation_time": "2025-06-16T15:57:37Z",
  "last_change_time": "2025-06-26T16:03:37Z",
  "is_recent": false,
  "crash_signature_raw": "[@ webrender::prepare::write_brush_segment_description]",
  "crash_signatures": [
    "webrender::prepare::write_brush_segment_description"
  ],
  "keywords": [
    "crash",
    "regression"
  ],
  "regressed_by": [
    1970028
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1972359",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/cb81bf7c-0db3-4a40-bd06-18f260250615",
      "crash_id": "cb81bf7c-0db3-4a40-bd06-18f260250615",
      "comment_index": 0,
      "comment_text": "Found while looking through GPU process crashes in 141 Nightly.\n\nCrash report: https://crash-stats.mozilla.org/report/index/cb81bf7c-0db3-4a40-bd06-18f260250615\n\nMOZ_CRASH Reason:\n```\nbug: masks not supported on old segment path\n```\n\nTop 10 frames:\n```\n0  xul.dll  MOZ_Crash(char const*, int, char const*)  mfbt/Assertions.h:381\n0  xul.dll  RustMozCrash(char const*, int, char const*)  mozglue/static/rust/wrappers.cpp:18\n1  xul.dll  mozglue_static::panic_hook(std::panic::PanicHookInfo*)  mozglue/static/rust/lib.rs:99\n2  xul.dll  core::ops::function::Fn::call<void (*)(ref$<std::panic::PanicHookInfo>), tupl...  /rustc/05f9846f893b09a1be1fc8560e33fc3c815cfecb/library/core/src/ops/function.rs:250\n3  xul.dll  alloc::boxed::impl$30::call()  library/alloc/src/boxed.rs:1990\n3  xul.dll  std::panicking::rust_panic_with_hook()  library/std/src/panicking.rs:839\n4  xul.dll  std::panicking::begin_panic::closure$0<ref$<str$> >()  library/std/src/panicking.rs:768\n5  xul.dll  std::sys::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic::...  library/std/src/sys/backtrace.rs:168\n6  xul.dll  std::panicking::begin_panic<ref$<str$> >()  library/std/src/panicking.rs:767\n7  xul.dll  webrender::prepare::write_brush_segment_description(euclid::box2d::Box2D<f32,...  gfx/wr/webrender/src/prepare.rs:1711\n```"
    }
  ],
  "socorro_crash_ids": [
    "cb81bf7c-0db3-4a40-bd06-18f260250615"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17539086,
      "comment_count": 0,
      "creator": "mstange.moz@gmail.com",
      "creation_time": "2025-06-16T15:57:37Z",
      "raw_text": "Found while looking through GPU process crashes in 141 Nightly.\n\nCrash report: https://crash-stats.mozilla.org/report/index/cb81bf7c-0db3-4a40-bd06-18f260250615\n\nMOZ_CRASH Reason:\n```\nbug: masks not supported on old segment path\n```\n\nTop 10 frames:\n```\n0  xul.dll  MOZ_Crash(char const*, int, char const*)  mfbt/Assertions.h:381\n0  xul.dll  RustMozCrash(char const*, int, char const*)  mozglue/static/rust/wrappers.cpp:18\n1  xul.dll  mozglue_static::panic_hook(std::panic::PanicHookInfo*)  mozglue/static/rust/lib.rs:99\n2  xul.dll  core::ops::function::Fn::call<void (*)(ref$<std::panic::PanicHookInfo>), tupl...  /rustc/05f9846f893b09a1be1fc8560e33fc3c815cfecb/library/core/src/ops/function.rs:250\n3  xul.dll  alloc::boxed::impl$30::call()  library/alloc/src/boxed.rs:1990\n3  xul.dll  std::panicking::rust_panic_with_hook()  library/std/src/panicking.rs:839\n4  xul.dll  std::panicking::begin_panic::closure$0<ref$<str$> >()  library/std/src/panicking.rs:768\n5  xul.dll  std::sys::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic::...  library/std/src/sys/backtrace.rs:168\n6  xul.dll  std::panicking::begin_panic<ref$<str$> >()  library/std/src/panicking.rs:767\n7  xul.dll  webrender::prepare::write_brush_segment_description(euclid::box2d::Box2D<f32,...  gfx/wr/webrender/src/prepare.rs:1711\n```",
      "matched_patterns": [
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "MOZ_Crash(char const*, int, char const*)",
          "file": "mfbt/Assertions.h",
          "line": 381,
          "raw": "0  xul.dll  MOZ_Crash(char const*, int, char const*)  mfbt/Assertions.h:381"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "RustMozCrash(char const*, int, char const*)",
          "file": "mozglue/static/rust/wrappers.cpp",
          "line": 18,
          "raw": "0  xul.dll  RustMozCrash(char const*, int, char const*)  mozglue/static/rust/wrappers.cpp:18"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozglue_static::panic_hook(std::panic::PanicHookInfo*)",
          "file": "mozglue/static/rust/lib.rs",
          "line": 99,
          "raw": "1  xul.dll  mozglue_static::panic_hook(std::panic::PanicHookInfo*)  mozglue/static/rust/lib.rs:99"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "core::ops::function::Fn::call<void (*)(ref$<std::panic::PanicHookInfo>), tupl...",
          "file": "/rustc/05f9846f893b09a1be1fc8560e33fc3c815cfecb/library/core/src/ops/function.rs",
          "line": 250,
          "raw": "2  xul.dll  core::ops::function::Fn::call<void (*)(ref$<std::panic::PanicHookInfo>), tupl...  /rustc/05f9846f893b09a1be1fc8560e33fc3c815cfecb/library/core/src/ops/function.rs:250"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "alloc::boxed::impl$30::call()",
          "file": "library/alloc/src/boxed.rs",
          "line": 1990,
          "raw": "3  xul.dll  alloc::boxed::impl$30::call()  library/alloc/src/boxed.rs:1990"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "std::panicking::rust_panic_with_hook()",
          "file": "library/std/src/panicking.rs",
          "line": 839,
          "raw": "3  xul.dll  std::panicking::rust_panic_with_hook()  library/std/src/panicking.rs:839"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "std::panicking::begin_panic::closure$0<ref$<str$> >()",
          "file": "library/std/src/panicking.rs",
          "line": 768,
          "raw": "4  xul.dll  std::panicking::begin_panic::closure$0<ref$<str$> >()  library/std/src/panicking.rs:768"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "std::sys::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic::...",
          "file": "library/std/src/sys/backtrace.rs",
          "line": 168,
          "raw": "5  xul.dll  std::sys::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic::...  library/std/src/sys/backtrace.rs:168"
        },
        {
          "frame_index": 6,
          "module": "xul.dll",
          "function": "std::panicking::begin_panic<ref$<str$> >()",
          "file": "library/std/src/panicking.rs",
          "line": 767,
          "raw": "6  xul.dll  std::panicking::begin_panic<ref$<str$> >()  library/std/src/panicking.rs:767"
        },
        {
          "frame_index": 7,
          "module": "xul.dll",
          "function": "webrender::prepare::write_brush_segment_description(euclid::box2d::Box2D<f32,...",
          "file": "gfx/wr/webrender/src/prepare.rs",
          "line": 1711,
          "raw": "7  xul.dll  webrender::prepare::write_brush_segment_description(euclid::box2d::Box2D<f32,...  gfx/wr/webrender/src/prepare.rs:1711"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}