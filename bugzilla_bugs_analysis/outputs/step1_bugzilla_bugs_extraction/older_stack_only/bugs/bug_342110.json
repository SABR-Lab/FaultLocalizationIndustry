{
  "bug_id": "342110",
  "summary": "crash when copying and pasting bookmark folder [@ nsBookmarksService::UpdateBookmarkForwardProxy]",
  "status": "VERIFIED",
  "resolution": "FIXED",
  "product": "Firefox",
  "component": "Bookmarks & History",
  "version": "2.0 Branch",
  "severity": "critical",
  "priority": "--",
  "creation_time": "2006-06-20T06:48:02Z",
  "last_change_time": "2011-06-09T21:58:44Z",
  "is_recent": false,
  "crash_signature_raw": "[@ nsBookmarksService::UpdateBookmarkForwardProxy]",
  "crash_signatures": [
    "nsBookmarksService::UpdateBookmarkForwardProxy"
  ],
  "keywords": [
    "crash",
    "regression",
    "verified1.8.1"
  ],
  "regressed_by": [],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=342110",
  "socorro_links": [],
  "socorro_crash_ids": [],
  "has_socorro_link": false,
  "has_direct_crash_id": false,
  "stack_traces": [
    {
      "comment_id": 2887687,
      "comment_count": 0,
      "creator": "ispiked@gmail.com",
      "creation_time": "2006-06-20T06:48:02Z",
      "raw_text": "Using latest branch 1.8 build...\n\nSteps to reproduce:\n1. Create a new folder on the Bookmarks Toolbar.\n2. Add five bookmarks to the folder.\n3. Right click > copy on the folder, then right click > paste on an empty area on the toolbar.\n\nResults:\nCrash.\n\nExpected results:\nNo crash.\n\nPhil Ringnalda has verified by local backout that this is a regression from bug 168411.\n\nRelevant bits of the stack:\nThread 0 Crashed:\n0   org.mozilla.firefox \t0x003a1188 nsBookmarksService::UpdateBookmarkForwardProxy(nsIRDFDataSource*, nsIRDFResource*) + 268\n1   org.mozilla.firefox \t0x003a13b0 nsBookmarksService::Assert(nsIRDFResource*, nsIRDFResource*, nsIRDFNode*, int) + 180\n2   libxpcom_core.dylib \t0x2c05eaec _XPTC_InvokeByIndex + 216\n3   org.mozilla.firefox \t0x0047fe70 XPCWrappedNative::CallMethod(XPCCallContext&, XPCWrappedNative::CallMode) + 2524\n4   org.mozilla.firefox \t0x004730b0 XPC_WN_CallMethod(JSContext*, JSObject*, unsigned, long*, long*) + 220\n5   libmozjs.dylib      \t0x2302d57c js_Invoke + 1808\n6   libmozjs.dylib      \t0x23035788 js_Interpret + 29200\n7   libmozjs.dylib      \t0x2302d5c0 js_Invoke + 1876\n8   org.mozilla.firefox \t0x007564a0 nsXPCWrappedJSClass::CallMethod(nsXPCWrappedJS*, unsigned short, nsXPTMethodInfo const*, nsXPTCMiniVariant*) + 3260\n9   libxpcom_core.dylib \t0x2c05e988 PrepareAndDispatch + 560\n10  libxpcom_core.dylib \t0x2c05f32c SharedStub + 112\n11  org.mozilla.firefox \t0x003fd90c nsTransactionManager::BeginTransaction(nsITransaction*) + 172\n12  org.mozilla.firefox \t0x003fbe30 nsTransactionManager::DoTransaction(nsITransaction*) + 160\n13  libxpcom_core.dylib \t0x2c05eaec _XPTC_InvokeByIndex + 216\n14  org.mozilla.firefox \t0x0047fe70 XPCWrappedNative::CallMethod(XPCCallContext&, XPCWrappedNative::CallMode) + 2524\n15  org.mozilla.firefox \t0x004730b0 XPC_WN_CallMethod(JSContext*, JSObject*, unsigned, long*, long*) + 220\n16  libmozjs.dylib      \t0x2302d57c js_Invoke + 1808\n17  libmozjs.dylib      \t0x23035788 js_Interpret + 29200\n18  libmozjs.dylib      \t0x2302d5c0 js_Invoke + 1876\n19  org.mozilla.firefox \t0x007564a0 nsXPCWrappedJSClass::CallMethod(nsXPCWrappedJS*, unsigned short, nsXPTMethodInfo const*, nsXPTCMiniVariant*) + 3260\n20  libxpcom_core.dylib \t0x2c05e988 PrepareAndDispatch + 560\n21  libxpcom_core.dylib \t0x2c05f32c SharedStub + 112\n22  libxpcom_core.dylib \t0x2c05eaec _XPTC_InvokeByIndex + 216\n23  org.mozilla.firefox \t0x0047fe70 XPCWrappedNative::CallMethod(XPCCallContext&, XPCWrappedNative::CallMode) + 2524\n24  org.mozilla.firefox \t0x004730b0 XPC_WN_CallMethod(JSContext*, JSObject*, unsigned, long*, long*) + 220\n25  libmozjs.dylib      \t0x2302d57c js_Invoke + 1808\n26  libmozjs.dylib      \t0x23035788 js_Interpret + 29200\n27  libmozjs.dylib      \t0x2302d5c0 js_Invoke + 1876\n28  org.mozilla.firefox \t0x007564a0 nsXPCWrappedJSClass::CallMethod(nsXPCWrappedJS*, unsigned short, nsXPTMethodInfo const*, nsXPTCMiniVariant*) + 3260\n29  libxpcom_core.dylib \t0x2c05e988 PrepareAndDispatch + 560\n30  libxpcom_core.dylib \t0x2c05f32c SharedStub + 112\n31  libxpcom_core.dylib \t0x2c05eaec _XPTC_InvokeByIndex + 216\n32  org.mozilla.firefox \t0x0047fe70 XPCWrappedNative::CallMethod(XPCCallContext&, XPCWrappedNative::CallMode) + 2524\n33  org.mozilla.firefox \t0x004730b0 XPC_WN_CallMethod(JSContext*, JSObject*, unsigned, long*, long*) + 220\n34  libmozjs.dylib      \t0x2302d57c js_Invoke + 1808\n35  libmozjs.dylib      \t0x23035788 js_Interpret + 29200\n36  libmozjs.dylib      \t0x2302d5c0 js_Invoke + 1876\n37  libmozjs.dylib      \t0x2302d7cc js_InternalInvoke + 184\n38  libmozjs.dylib      \t0x230080f0 JS_CallFunctionValue + 44\n39  org.mozilla.firefox \t0x0024e6a8 nsJSContext::CallEventHandler(JSObject*, JSObject*, unsigned, long*, long*) + 284\n40  org.mozilla.firefox \t0x0059af54 nsJSEventListener::HandleEvent(nsIDOMEvent*) + 948\n41  org.mozilla.firefox \t0x001cfc20 nsEventListenerManager::HandleEventSubType(nsListenerStruct*, nsIDOMEventListener*, nsIDOMEvent*, nsIDOMEventTarget*, unsigned, unsigned) + 580\n42  org.mozilla.firefox \t0x001cff78 nsEventListenerManager::HandleEvent(nsPresContext*, nsEvent*, nsIDOMEvent**, nsIDOMEventTarget*, unsigned, nsEventStatus*) + 772\n43  org.mozilla.firefox \t0x0020a9e0 nsXULElement::HandleDOMEvent(nsPresContext*, nsEvent*, nsIDOMEvent**, unsigned, nsEventStatus*) + 2888\n44  org.mozilla.firefox \t0x0020a234 nsXULElement::HandleDOMEvent(nsPresContext*, nsEvent*, nsIDOMEvent**, unsigned, nsEventStatus*) + 924\n45  org.mozilla.firefox \t0x001500c0 PresShell::HandleDOMEventWithTarget(nsIContent*, nsEvent*, nsEventStatus*) + 112\n46  org.mozilla.firefox \t0x005ca5ac nsMenuFrame::Execute(nsGUIEvent*) + 820\n47  org.mozilla.firefox \t0x005c7770 nsMenuFrame::HandleEvent(nsPresContext*, nsGUIEvent*, nsEventStatus*) + 532\n48  org.mozilla.firefox \t0x0014febc PresShell::HandleEventInternal(nsEvent*, nsIView*, unsigned, nsEventStatus*) + 1088\n49  org.mozilla.firefox \t0x0014f968 PresShell::HandleEvent(nsIView*, nsGUIEvent*, nsEventStatus*, int, int&) + 1300\n50  org.mozilla.firefox \t0x00215264 nsViewManager::HandleEvent(nsView*, nsGUIEvent*, int) + 792\n51  org.mozilla.firefox \t0x00214428 nsViewManager::DispatchEvent(nsGUIEvent*, nsEventStatus*) + 3356\n52  org.mozilla.firefox \t0x0053a974 ViewWrapper::GetInterface(nsID const&, void**) + 468\n53  org.mozilla.firefox \t0x006d5bd8 nsWindow::DispatchEvent(nsGUIEvent*, nsEventStatus&) + 172\n54  org.mozilla.firefox \t0x006d5c64 nsWindow::DispatchWindowEvent(nsGUIEvent&) + 32\n55  org.mozilla.firefox \t0x006d5d28 nsWindow::DispatchMouseEvent(nsMouseEvent&) + 112\n56  org.mozilla.firefox \t0x006d22c0 nsMacEventHandler::HandleMouseUpEvent(EventRecord&) + 200\n57  org.mozilla.firefox \t0x006d0824 nsMacEventHandler::HandleOSEvent(EventRecord&) + 108\n58  org.mozilla.firefox \t0x00325960 nsMacWindow::DispatchEvent(void*, int*) + 64\n59  org.mozilla.firefox \t0x006ccd4c nsMacMessagePump::DispatchOSEventToRaptor(EventRecord&, OpaqueWindowPtr*) + 96\n60  org.mozilla.firefox \t0x006ccc48 nsMacMessagePump::DoMouseUp(EventRecord&) + 76\n61  org.mozilla.firefox \t0x006cc5d0 nsMacMessagePump::DispatchEvent(EventRecord*) + 92\n62  org.mozilla.firefox \t0x006cce5c nsMacMessagePump::WNETransitionEventHandler(OpaqueEventHandlerCallRef*, OpaqueEventRef*, void*) + 44\n63  com.apple.HIToolbox \t0x931d7794 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 692\n64  com.apple.HIToolbox \t0x931d6eec SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 372\n65  com.apple.HIToolbox \t0x931ddc8c SendEventToEventTarget + 40\n66  com.apple.HIToolbox \t0x93269e58 HandleMouseEventForWindow(OpaqueWindowPtr*, OpaqueEventRef*, unsigned short) + 236\n67  com.apple.HIToolbox \t0x933cc9c8 HandleMouseEvent(OpaqueEventRef*) + 368\n68  com.apple.HIToolbox \t0x931ddff8 ToolboxEventDispatcherHandler(OpaqueEventHandlerCallRef*, OpaqueEventRef*, void*) + 496\n69  com.apple.HIToolbox \t0x931d79e4 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 1284\n70  com.apple.HIToolbox \t0x931d6eec SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 372\n71  com.apple.HIToolbox \t0x931ddc8c SendEventToEventTarget + 40\n72  com.apple.HIToolbox \t0x9321e9a0 ToolboxEventDispatcher + 92\n73  com.apple.HIToolbox \t0x9321e92c HLTBEventDispatcher + 16\n74  com.apple.HIToolbox \t0x9321cee4 RunApplicationEventLoop + 148\n75  org.mozilla.firefox \t0x0031ef30 nsAppShell::Run() + 64\n76  org.mozilla.firefox \t0x003b9acc nsAppStartup::Run() + 60\n77  org.mozilla.firefox \t0x0001252c XRE_main + 3972\n78  org.mozilla.firefox \t0x0000d768 start + 432\n79  org.mozilla.firefox \t0x0000d5e8 start + 48",
      "matched_patterns": [
        "^\\s*\\d+\\s+\\S+\\s+0x[0-9a-fA-F]+",
        "ns[A-Z]\\w+::\\w+"
      ],
      "parsed_frames": [
        {
          "frame_index": 2,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05eaec _XPTC_InvokeByIndex + 216",
          "file": "",
          "line": null,
          "raw": "2   libxpcom_core.dylib \t0x2c05eaec _XPTC_InvokeByIndex + 216"
        },
        {
          "frame_index": 5,
          "module": "libmozjs.dylib",
          "function": "0x2302d57c js_Invoke + 1808",
          "file": "",
          "line": null,
          "raw": "5   libmozjs.dylib      \t0x2302d57c js_Invoke + 1808"
        },
        {
          "frame_index": 6,
          "module": "libmozjs.dylib",
          "function": "0x23035788 js_Interpret + 29200",
          "file": "",
          "line": null,
          "raw": "6   libmozjs.dylib      \t0x23035788 js_Interpret + 29200"
        },
        {
          "frame_index": 7,
          "module": "libmozjs.dylib",
          "function": "0x2302d5c0 js_Invoke + 1876",
          "file": "",
          "line": null,
          "raw": "7   libmozjs.dylib      \t0x2302d5c0 js_Invoke + 1876"
        },
        {
          "frame_index": 9,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05e988 PrepareAndDispatch + 560",
          "file": "",
          "line": null,
          "raw": "9   libxpcom_core.dylib \t0x2c05e988 PrepareAndDispatch + 560"
        },
        {
          "frame_index": 10,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05f32c SharedStub + 112",
          "file": "",
          "line": null,
          "raw": "10  libxpcom_core.dylib \t0x2c05f32c SharedStub + 112"
        },
        {
          "frame_index": 13,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05eaec _XPTC_InvokeByIndex + 216",
          "file": "",
          "line": null,
          "raw": "13  libxpcom_core.dylib \t0x2c05eaec _XPTC_InvokeByIndex + 216"
        },
        {
          "frame_index": 16,
          "module": "libmozjs.dylib",
          "function": "0x2302d57c js_Invoke + 1808",
          "file": "",
          "line": null,
          "raw": "16  libmozjs.dylib      \t0x2302d57c js_Invoke + 1808"
        },
        {
          "frame_index": 17,
          "module": "libmozjs.dylib",
          "function": "0x23035788 js_Interpret + 29200",
          "file": "",
          "line": null,
          "raw": "17  libmozjs.dylib      \t0x23035788 js_Interpret + 29200"
        },
        {
          "frame_index": 18,
          "module": "libmozjs.dylib",
          "function": "0x2302d5c0 js_Invoke + 1876",
          "file": "",
          "line": null,
          "raw": "18  libmozjs.dylib      \t0x2302d5c0 js_Invoke + 1876"
        },
        {
          "frame_index": 20,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05e988 PrepareAndDispatch + 560",
          "file": "",
          "line": null,
          "raw": "20  libxpcom_core.dylib \t0x2c05e988 PrepareAndDispatch + 560"
        },
        {
          "frame_index": 21,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05f32c SharedStub + 112",
          "file": "",
          "line": null,
          "raw": "21  libxpcom_core.dylib \t0x2c05f32c SharedStub + 112"
        },
        {
          "frame_index": 22,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05eaec _XPTC_InvokeByIndex + 216",
          "file": "",
          "line": null,
          "raw": "22  libxpcom_core.dylib \t0x2c05eaec _XPTC_InvokeByIndex + 216"
        },
        {
          "frame_index": 25,
          "module": "libmozjs.dylib",
          "function": "0x2302d57c js_Invoke + 1808",
          "file": "",
          "line": null,
          "raw": "25  libmozjs.dylib      \t0x2302d57c js_Invoke + 1808"
        },
        {
          "frame_index": 26,
          "module": "libmozjs.dylib",
          "function": "0x23035788 js_Interpret + 29200",
          "file": "",
          "line": null,
          "raw": "26  libmozjs.dylib      \t0x23035788 js_Interpret + 29200"
        },
        {
          "frame_index": 27,
          "module": "libmozjs.dylib",
          "function": "0x2302d5c0 js_Invoke + 1876",
          "file": "",
          "line": null,
          "raw": "27  libmozjs.dylib      \t0x2302d5c0 js_Invoke + 1876"
        },
        {
          "frame_index": 29,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05e988 PrepareAndDispatch + 560",
          "file": "",
          "line": null,
          "raw": "29  libxpcom_core.dylib \t0x2c05e988 PrepareAndDispatch + 560"
        },
        {
          "frame_index": 30,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05f32c SharedStub + 112",
          "file": "",
          "line": null,
          "raw": "30  libxpcom_core.dylib \t0x2c05f32c SharedStub + 112"
        },
        {
          "frame_index": 31,
          "module": "libxpcom_core.dylib",
          "function": "0x2c05eaec _XPTC_InvokeByIndex + 216",
          "file": "",
          "line": null,
          "raw": "31  libxpcom_core.dylib \t0x2c05eaec _XPTC_InvokeByIndex + 216"
        },
        {
          "frame_index": 34,
          "module": "libmozjs.dylib",
          "function": "0x2302d57c js_Invoke + 1808",
          "file": "",
          "line": null,
          "raw": "34  libmozjs.dylib      \t0x2302d57c js_Invoke + 1808"
        },
        {
          "frame_index": 35,
          "module": "libmozjs.dylib",
          "function": "0x23035788 js_Interpret + 29200",
          "file": "",
          "line": null,
          "raw": "35  libmozjs.dylib      \t0x23035788 js_Interpret + 29200"
        },
        {
          "frame_index": 36,
          "module": "libmozjs.dylib",
          "function": "0x2302d5c0 js_Invoke + 1876",
          "file": "",
          "line": null,
          "raw": "36  libmozjs.dylib      \t0x2302d5c0 js_Invoke + 1876"
        },
        {
          "frame_index": 37,
          "module": "libmozjs.dylib",
          "function": "0x2302d7cc js_InternalInvoke + 184",
          "file": "",
          "line": null,
          "raw": "37  libmozjs.dylib      \t0x2302d7cc js_InternalInvoke + 184"
        },
        {
          "frame_index": 38,
          "module": "libmozjs.dylib",
          "function": "0x230080f0 JS_CallFunctionValue + 44",
          "file": "",
          "line": null,
          "raw": "38  libmozjs.dylib      \t0x230080f0 JS_CallFunctionValue + 44"
        }
      ],
      "frame_count": 24
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 24
}