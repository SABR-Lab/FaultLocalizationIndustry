{
  "bug_id": "786153",
  "summary": "crash in nsBaseAppShell::OnProcessNextEvent with Trusteer Rapport",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Firefox",
  "component": "Extension Compatibility",
  "version": "20 Branch",
  "severity": "critical",
  "priority": "--",
  "creation_time": "2012-08-28T04:20:32Z",
  "last_change_time": "2015-12-27T18:19:31Z",
  "is_recent": false,
  "crash_signature_raw": "[@ nsBaseAppShell::OnProcessNextEvent(nsIThreadInternal*, bool, unsigned int)]",
  "crash_signatures": [
    "nsBaseAppShell::OnProcessNextEvent(nsIThreadInternal*, bool, unsigned int)"
  ],
  "keywords": [
    "crash",
    "qawanted",
    "steps-wanted",
    "topcrash"
  ],
  "regressed_by": [],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=786153",
  "socorro_links": [],
  "socorro_crash_ids": [],
  "has_socorro_link": false,
  "has_direct_crash_id": false,
  "stack_traces": [
    {
      "comment_id": 6588551,
      "comment_count": 0,
      "creator": "mozillamarcia.knous@gmail.com",
      "creation_time": "2012-08-28T04:20:32Z",
      "raw_text": "This bug was filed from the Socorro interface and is \nreport bp-2ec9052c-2893-4f0d-bc13-429db2120827 .\n============================================================= \n\nSeen while looking at crash stats. This one moved up the ranks of Beta 6 during the course of the day and now sits as #36 top crash in Beta 6: https://crash-stats.mozilla.com/report/list?signature=nsBaseAppShell::OnProcessNextEvent%28nsIThreadInternal*,%20bool,%20unsigned%20int%29\n\nATM I don't see any crashes in Firefox 15 final (buildID=20120824154833), but filing to keep on eye on this.\n\nnsBaseAppShell::OnProcessNextEvent(nsIThreadInternal*, bool, unsigned int)|EXCEPTION_ACCESS_VIOLATION_EXEC (74 crashes)\n    301% (223/74) vs.   3% (1364/42848) msvcp80.dll\n    304% (225/74) vs.   9% (3857/42848) msvcr80.dll\n    200% (148/74) vs.   1% (254/42848) atl80.dll\n    100% (74/74) vs.   0% (126/42848) TanzanLight.dll\n    100% (74/74) vs.   0% (153/42848) riched20.dll\n    100% (74/74) vs.   0% (209/42848) RapportGP.dll\n    100% (74/74) vs.   0% (214/42848) rooksdol.dll\n    100% (74/74) vs.   0% (214/42848) RapportUtil.dll\n    100% (74/74) vs.   0% (214/42848) rookscom.dll\n    100% (74/74) vs.   1% (240/42848) rooksbas.dll\n    100% (74/74) vs.  10% (4123/42848) GdiPlus.dll\n    100% (74/74) vs.  18% (7725/42848) oleacc.dll\n    100% (74/74) vs.  23% (10041/42848) wtsapi32.dll\n\nBreakdown by module:\n\n100% (74/74) vs.   0% (214/42848) rooksdol.dll\n          0% (0/74) vs.   0% (4/42848) 2.115.0.0\n        100% (74/74) vs.   0% (205/42848) 2.116.0.0\n          0% (0/74) vs.   0% (1/42848) 2.94.0.0\n          0% (0/74) vs.   0% (2/42848) 2.97.0.0\n          0% (0/74) vs.   0% (2/42848) 2.98.0.0\n100% (74/74) vs.   0% (214/42848) RapportUtil.dll\n          0% (0/74) vs.   0% (1/42848) 3.5.1105.59\n          0% (0/74) vs.   0% (1/42848) 3.5.1108.52\n          0% (0/74) vs.   0% (1/42848) 3.5.1108.55\n          0% (0/74) vs.   0% (2/42848) 3.5.1108.73\n          0% (0/74) vs.   0% (1/42848) 3.5.1201.78\n          0% (0/74) vs.   0% (1/42848) 3.5.1201.84\n          0% (0/74) vs.   0% (2/42848) 3.5.1201.91\n          0% (0/74) vs.   0% (76/42848) 3.5.1201.94\n          0% (0/74) vs.   0% (1/42848) 3.5.1201.95\n          1% (1/74) vs.   0% (1/42848) 3.5.1201.98\n         99% (73/74) vs.   0% (127/42848) 3.5.1205.4\n    100% (74/74) vs.   0% (214/42848) rookscom.dll\n        100% (74/74) vs.   0% (213/42848) 2.16.0.0\n          0% (0/74) vs.   0% (1/42848) 2.9.0.0\n    100% (74/74) vs.   1% (240/42848) rooksbas.dll\n          0% (0/74) vs.   0% (6/42848) 2.56.0.0\n        100% (74/74) vs.   1% (234/42848) 2.57.0.0\n\n\nFrame \tModule \tSignature \tSource\n0 \t\t@0xa491336b \t\n1 \t\t@0x7198ffff \t\n2 \txul.dll \tnsBaseAppShell::OnProcessNextEvent \twidget/xpwidgets/nsBaseAppShell.cpp:280\n3 \txul.dll \tnsThread::ProcessNextEvent \txpcom/threads/nsThread.cpp:586\n4 \txul.dll \tmozilla::ipc::MessagePump::Run \tipc/glue/MessagePump.cpp:82\n5 \txul.dll \tMessageLoop::RunHandler \tipc/chromium/src/base/message_loop.cc:201\n6 \txul.dll \tMessageLoop::Run \tipc/chromium/src/base/message_loop.cc:175\n7 \txul.dll \tnsBaseAppShell::Run \twidget/xpwidgets/nsBaseAppShell.cpp:163\n8 \txul.dll \tnsAppShell::Run \twidget/windows/nsAppShell.cpp:232\n9 \txul.dll \tnsAppStartup::Run \ttoolkit/components/startup/nsAppStartup.cpp:255\n10 \txul.dll \tXREMain::XRE_mainRun \ttoolkit/xre/nsAppRunner.cpp:3786\n11 \txul.dll \tXREMain::XRE_main \ttoolkit/xre/nsAppRunner.cpp:3863\n12 \txul.dll \tXRE_main \ttoolkit/xre/nsAppRunner.cpp:3939\n13 \tfirefox.exe \twmain \ttoolkit/xre/nsWindowsWMain.cpp:100\n14 \tfirefox.exe \t__tmainCRTStartup \tcrtexe.c:552\n15 \tkernel32.dll \tBaseThreadInitThunk \t\n16 \tntdll.dll \t__RtlUserThreadStart \t\n17 \tntdll.dll \t_RtlUserThreadStart",
      "matched_patterns": [
        "ns[A-Z]\\w+::\\w+"
      ],
      "parsed_frames": [
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "nsBaseAppShell::OnProcessNextEvent",
          "file": "widget/xpwidgets/nsBaseAppShell.cpp",
          "line": 280,
          "raw": "2 \txul.dll \tnsBaseAppShell::OnProcessNextEvent \twidget/xpwidgets/nsBaseAppShell.cpp:280"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "nsThread::ProcessNextEvent",
          "file": "xpcom/threads/nsThread.cpp",
          "line": 586,
          "raw": "3 \txul.dll \tnsThread::ProcessNextEvent \txpcom/threads/nsThread.cpp:586"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "mozilla::ipc::MessagePump::Run",
          "file": "ipc/glue/MessagePump.cpp",
          "line": 82,
          "raw": "4 \txul.dll \tmozilla::ipc::MessagePump::Run \tipc/glue/MessagePump.cpp:82"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "MessageLoop::RunHandler",
          "file": "ipc/chromium/src/base/message_loop.cc",
          "line": 201,
          "raw": "5 \txul.dll \tMessageLoop::RunHandler \tipc/chromium/src/base/message_loop.cc:201"
        },
        {
          "frame_index": 6,
          "module": "xul.dll",
          "function": "MessageLoop::Run",
          "file": "ipc/chromium/src/base/message_loop.cc",
          "line": 175,
          "raw": "6 \txul.dll \tMessageLoop::Run \tipc/chromium/src/base/message_loop.cc:175"
        },
        {
          "frame_index": 7,
          "module": "xul.dll",
          "function": "nsBaseAppShell::Run",
          "file": "widget/xpwidgets/nsBaseAppShell.cpp",
          "line": 163,
          "raw": "7 \txul.dll \tnsBaseAppShell::Run \twidget/xpwidgets/nsBaseAppShell.cpp:163"
        },
        {
          "frame_index": 8,
          "module": "xul.dll",
          "function": "nsAppShell::Run",
          "file": "widget/windows/nsAppShell.cpp",
          "line": 232,
          "raw": "8 \txul.dll \tnsAppShell::Run \twidget/windows/nsAppShell.cpp:232"
        },
        {
          "frame_index": 9,
          "module": "xul.dll",
          "function": "nsAppStartup::Run",
          "file": "toolkit/components/startup/nsAppStartup.cpp",
          "line": 255,
          "raw": "9 \txul.dll \tnsAppStartup::Run \ttoolkit/components/startup/nsAppStartup.cpp:255"
        },
        {
          "frame_index": 10,
          "module": "xul.dll",
          "function": "XREMain::XRE_mainRun",
          "file": "toolkit/xre/nsAppRunner.cpp",
          "line": 3786,
          "raw": "10 \txul.dll \tXREMain::XRE_mainRun \ttoolkit/xre/nsAppRunner.cpp:3786"
        },
        {
          "frame_index": 11,
          "module": "xul.dll",
          "function": "XREMain::XRE_main",
          "file": "toolkit/xre/nsAppRunner.cpp",
          "line": 3863,
          "raw": "11 \txul.dll \tXREMain::XRE_main \ttoolkit/xre/nsAppRunner.cpp:3863"
        },
        {
          "frame_index": 12,
          "module": "xul.dll",
          "function": "XRE_main",
          "file": "toolkit/xre/nsAppRunner.cpp",
          "line": 3939,
          "raw": "12 \txul.dll \tXRE_main \ttoolkit/xre/nsAppRunner.cpp:3939"
        },
        {
          "frame_index": 15,
          "module": "kernel32.dll",
          "function": "BaseThreadInitThunk",
          "file": "",
          "line": null,
          "raw": "15 \tkernel32.dll \tBaseThreadInitThunk"
        },
        {
          "frame_index": 16,
          "module": "ntdll.dll",
          "function": "__RtlUserThreadStart",
          "file": "",
          "line": null,
          "raw": "16 \tntdll.dll \t__RtlUserThreadStart"
        },
        {
          "frame_index": 17,
          "module": "ntdll.dll",
          "function": "_RtlUserThreadStart",
          "file": "",
          "line": null,
          "raw": "17 \tntdll.dll \t_RtlUserThreadStart"
        }
      ],
      "frame_count": 14
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 14
}