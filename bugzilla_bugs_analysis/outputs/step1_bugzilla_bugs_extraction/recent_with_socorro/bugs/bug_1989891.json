{
  "bug_id": "1989891",
  "summary": "Crash in [@ mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<T>]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "DOM: Navigation",
  "version": "unspecified",
  "severity": "S2",
  "priority": "P3",
  "creation_time": "2025-09-22T08:20:28Z",
  "last_change_time": "2025-09-24T09:54:19Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<T> ]",
  "crash_signatures": [
    "mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<T>"
  ],
  "keywords": [
    "crash",
    "regression",
    "topcrash"
  ],
  "regressed_by": [
    1979588
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1989891",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/85998ad3-d168-407b-b2bb-453450250910",
      "crash_id": "85998ad3-d168-407b-b2bb-453450250910",
      "comment_index": 0,
      "comment_text": "Similar to bug 1987845 after bug 1979588 relanded but with reduced crash volume.\n\nCrash report: https://crash-stats.mozilla.org/report/index/85998ad3-d168-407b-b2bb-453450250910\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(!nsContentUtils::IsHTMLWhitespace(aReferenceString.First()))\n```\n\nTop 10 frames:\n```\n0  xul.dll  mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<-1>(nsTSubstrin...  dom/base/TextDirectiveUtil.h:554\n1  xul.dll  mozilla::dom::RangeBasedTextDirectiveCreator::FindEndMatchCommonSubstringLeng...  dom/base/TextDirectiveCreator.cpp:624\n2  xul.dll  mozilla::dom::RangeBasedTextDirectiveCreator::FindAllMatchingCandidates()  dom/base/TextDirectiveCreator.cpp:575\n3  xul.dll  mozilla::dom::TextDirectiveCreator::CreateTextDirectiveFromRange(mozilla::dom...  dom/base/TextDirectiveCreator.cpp:57\n4  xul.dll  mozilla::dom::FragmentDirective::CreateTextDirectiveForRanges(mozilla::dom::S...  dom/base/FragmentDirective.cpp:465\n5  xul.dll  mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges(JSConte...  dom/bindings/FragmentDirectiveBinding.cpp:194\n5  xul.dll  mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges_promise...  dom/bindings/FragmentDirectiveBinding.cpp:205\n6  xul.dll  mozilla::dom::binding_detail::GenericMethod<mozilla::dom::binding_detail::Nor...  dom/bindings/BindingUtils.cpp:3308\n7  xul.dll  CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::...  js/src/vm/Interpreter.cpp:501\n7  xul.dll  js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstru...  js/src/vm/Interpreter.cpp:597\n```"
    }
  ],
  "socorro_crash_ids": [
    "85998ad3-d168-407b-b2bb-453450250910"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17681692,
      "comment_count": 0,
      "creator": "aryx.bugmail@gmx-topmail.de",
      "creation_time": "2025-09-22T08:20:28Z",
      "raw_text": "Similar to bug 1987845 after bug 1979588 relanded but with reduced crash volume.\n\nCrash report: https://crash-stats.mozilla.org/report/index/85998ad3-d168-407b-b2bb-453450250910\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(!nsContentUtils::IsHTMLWhitespace(aReferenceString.First()))\n```\n\nTop 10 frames:\n```\n0  xul.dll  mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<-1>(nsTSubstrin...  dom/base/TextDirectiveUtil.h:554\n1  xul.dll  mozilla::dom::RangeBasedTextDirectiveCreator::FindEndMatchCommonSubstringLeng...  dom/base/TextDirectiveCreator.cpp:624\n2  xul.dll  mozilla::dom::RangeBasedTextDirectiveCreator::FindAllMatchingCandidates()  dom/base/TextDirectiveCreator.cpp:575\n3  xul.dll  mozilla::dom::TextDirectiveCreator::CreateTextDirectiveFromRange(mozilla::dom...  dom/base/TextDirectiveCreator.cpp:57\n4  xul.dll  mozilla::dom::FragmentDirective::CreateTextDirectiveForRanges(mozilla::dom::S...  dom/base/FragmentDirective.cpp:465\n5  xul.dll  mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges(JSConte...  dom/bindings/FragmentDirectiveBinding.cpp:194\n5  xul.dll  mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges_promise...  dom/bindings/FragmentDirectiveBinding.cpp:205\n6  xul.dll  mozilla::dom::binding_detail::GenericMethod<mozilla::dom::binding_detail::Nor...  dom/bindings/BindingUtils.cpp:3308\n7  xul.dll  CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::...  js/src/vm/Interpreter.cpp:501\n7  xul.dll  js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstru...  js/src/vm/Interpreter.cpp:597\n```",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "ns[A-Z]\\w+::\\w+",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<-1>(nsTSubstrin...",
          "file": "dom/base/TextDirectiveUtil.h",
          "line": 554,
          "raw": "0  xul.dll  mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<-1>(nsTSubstrin...  dom/base/TextDirectiveUtil.h:554"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::dom::RangeBasedTextDirectiveCreator::FindEndMatchCommonSubstringLeng...",
          "file": "dom/base/TextDirectiveCreator.cpp",
          "line": 624,
          "raw": "1  xul.dll  mozilla::dom::RangeBasedTextDirectiveCreator::FindEndMatchCommonSubstringLeng...  dom/base/TextDirectiveCreator.cpp:624"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "mozilla::dom::RangeBasedTextDirectiveCreator::FindAllMatchingCandidates()",
          "file": "dom/base/TextDirectiveCreator.cpp",
          "line": 575,
          "raw": "2  xul.dll  mozilla::dom::RangeBasedTextDirectiveCreator::FindAllMatchingCandidates()  dom/base/TextDirectiveCreator.cpp:575"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "mozilla::dom::TextDirectiveCreator::CreateTextDirectiveFromRange(mozilla::dom...",
          "file": "dom/base/TextDirectiveCreator.cpp",
          "line": 57,
          "raw": "3  xul.dll  mozilla::dom::TextDirectiveCreator::CreateTextDirectiveFromRange(mozilla::dom...  dom/base/TextDirectiveCreator.cpp:57"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "mozilla::dom::FragmentDirective::CreateTextDirectiveForRanges(mozilla::dom::S...",
          "file": "dom/base/FragmentDirective.cpp",
          "line": 465,
          "raw": "4  xul.dll  mozilla::dom::FragmentDirective::CreateTextDirectiveForRanges(mozilla::dom::S...  dom/base/FragmentDirective.cpp:465"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges(JSConte...",
          "file": "dom/bindings/FragmentDirectiveBinding.cpp",
          "line": 194,
          "raw": "5  xul.dll  mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges(JSConte...  dom/bindings/FragmentDirectiveBinding.cpp:194"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges_promise...",
          "file": "dom/bindings/FragmentDirectiveBinding.cpp",
          "line": 205,
          "raw": "5  xul.dll  mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges_promise...  dom/bindings/FragmentDirectiveBinding.cpp:205"
        },
        {
          "frame_index": 6,
          "module": "xul.dll",
          "function": "mozilla::dom::binding_detail::GenericMethod<mozilla::dom::binding_detail::Nor...",
          "file": "dom/bindings/BindingUtils.cpp",
          "line": 3308,
          "raw": "6  xul.dll  mozilla::dom::binding_detail::GenericMethod<mozilla::dom::binding_detail::Nor...  dom/bindings/BindingUtils.cpp:3308"
        },
        {
          "frame_index": 7,
          "module": "xul.dll",
          "function": "CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::...",
          "file": "js/src/vm/Interpreter.cpp",
          "line": 501,
          "raw": "7  xul.dll  CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::...  js/src/vm/Interpreter.cpp:501"
        },
        {
          "frame_index": 7,
          "module": "xul.dll",
          "function": "js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstru...",
          "file": "js/src/vm/Interpreter.cpp",
          "line": 597,
          "raw": "7  xul.dll  js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstru...  js/src/vm/Interpreter.cpp:597"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}