{
  "bug_id": "1990034",
  "summary": "Crash in [@ mozilla::StyleGenericSize<T>::AsLengthPercentage]",
  "status": "VERIFIED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "Layout",
  "version": "unspecified",
  "severity": "S2",
  "priority": "--",
  "creation_time": "2025-09-22T18:06:20Z",
  "last_change_time": "2025-11-20T06:07:26Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::StyleGenericSize<T>::AsLengthPercentage]",
  "crash_signatures": [
    "mozilla::StyleGenericSize<T>::AsLengthPercentage"
  ],
  "keywords": [
    "crash",
    "regression"
  ],
  "regressed_by": [
    1988938
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1990034",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/335e62af-a2c2-43bb-a0ec-4a9b80250922",
      "crash_id": "335e62af-a2c2-43bb-a0ec-4a9b80250922",
      "comment_index": 0,
      "comment_text": "Crash report: https://crash-stats.mozilla.org/report/index/335e62af-a2c2-43bb-a0ec-4a9b80250922\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(IsLengthPercentage())\n```\n\nTop 10 frames:\n```\n0  xul.dll  AnnotateMozCrashReason(char const*)  mfbt/Assertions.h:59\n0  xul.dll  mozilla::StyleGenericSize<mozilla::StyleLengthPercentageUnion>::AsLengthPerce...  layout/style/ServoStyleConsts.h:14122\n0  xul.dll  nsLayoutUtils::ComputeBSizeValueHandlingStretch(int, int, int, int, mozilla::...  layout/base/nsLayoutUtils.h:1615\n0  xul.dll  nsIFrame::ComputeBSizeValueAsPercentageBasis(mozilla::StyleGenericSize<mozill...  layout/generic/nsIFrame.cpp:6991\n0  xul.dll  nsIFrame::ComputeISizeValue(gfxContext*, const mozilla::WritingMode, mozilla:...  layout/generic/nsIFrame.cpp:7345\n1  xul.dll  nsIFrame::ComputeISizeValue(gfxContext*, const mozilla::WritingMode, mozilla:...  layout/generic/nsIFrame.h:5054\n1  xul.dll  mozilla::SizeComputationInput::ComputeISizeValue(mozilla::LogicalSize const&,...  layout/generic/ReflowInput.cpp:367\n1  xul.dll  mozilla::ReflowInput::ComputeMinMaxValues(mozilla::LogicalSize const&)  layout/generic/ReflowInput.cpp:3093\n1  xul.dll  mozilla::ReflowInput::InitConstraints(nsPresContext*, mozilla::Maybe<mozilla:...  layout/generic/ReflowInput.cpp:2346\n1  xul.dll  mozilla::ReflowInput::Init(nsPresContext*, mozilla::Maybe<mozilla::LogicalSiz...  layout/generic/ReflowInput.cpp:490\n```\n\n\nThere are actually 3 crash reports from what looks like the same user (based on hardware) submitted within ~2 minutes, likely attempting to load the same site again and then giving up:\nbp-335e62af-a2c2-43bb-a0ec-4a9b80250922 \t\nbp-6099fa6a-3892-41bf-8ffa-032d90250922\nbp-d455247d-b8b4-425f-bcee-5bfe80250922\n\nThere's no URL or comment included in the crash report, but the backtrace & source links might be enough to go on...\n\nNote that this is the same crash signature as bug 1989368 (and likely same regressor, which added a new non-`LengthPercentage` type of size); but that bug is specific to table layout, whereas this one does not seem to be, based on the backtrace.  Hence, filing separately."
    }
  ],
  "socorro_crash_ids": [
    "335e62af-a2c2-43bb-a0ec-4a9b80250922"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17682818,
      "comment_count": 0,
      "creator": "dholbert@mozilla.com",
      "creation_time": "2025-09-22T18:06:20Z",
      "raw_text": "Crash report: https://crash-stats.mozilla.org/report/index/335e62af-a2c2-43bb-a0ec-4a9b80250922\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(IsLengthPercentage())\n```\n\nTop 10 frames:\n```\n0  xul.dll  AnnotateMozCrashReason(char const*)  mfbt/Assertions.h:59\n0  xul.dll  mozilla::StyleGenericSize<mozilla::StyleLengthPercentageUnion>::AsLengthPerce...  layout/style/ServoStyleConsts.h:14122\n0  xul.dll  nsLayoutUtils::ComputeBSizeValueHandlingStretch(int, int, int, int, mozilla::...  layout/base/nsLayoutUtils.h:1615\n0  xul.dll  nsIFrame::ComputeBSizeValueAsPercentageBasis(mozilla::StyleGenericSize<mozill...  layout/generic/nsIFrame.cpp:6991\n0  xul.dll  nsIFrame::ComputeISizeValue(gfxContext*, const mozilla::WritingMode, mozilla:...  layout/generic/nsIFrame.cpp:7345\n1  xul.dll  nsIFrame::ComputeISizeValue(gfxContext*, const mozilla::WritingMode, mozilla:...  layout/generic/nsIFrame.h:5054\n1  xul.dll  mozilla::SizeComputationInput::ComputeISizeValue(mozilla::LogicalSize const&,...  layout/generic/ReflowInput.cpp:367\n1  xul.dll  mozilla::ReflowInput::ComputeMinMaxValues(mozilla::LogicalSize const&)  layout/generic/ReflowInput.cpp:3093\n1  xul.dll  mozilla::ReflowInput::InitConstraints(nsPresContext*, mozilla::Maybe<mozilla:...  layout/generic/ReflowInput.cpp:2346\n1  xul.dll  mozilla::ReflowInput::Init(nsPresContext*, mozilla::Maybe<mozilla::LogicalSiz...  layout/generic/ReflowInput.cpp:490\n```\n\n\nThere are actually 3 crash reports from what looks like the same user (based on hardware) submitted within ~2 minutes, likely attempting to load the same site again and then giving up:\nbp-335e62af-a2c2-43bb-a0ec-4a9b80250922 \t\nbp-6099fa6a-3892-41bf-8ffa-032d90250922\nbp-d455247d-b8b4-425f-bcee-5bfe80250922\n\nThere's no URL or comment included in the crash report, but the backtrace & source links might be enough to go on...\n\nNote that this is the same crash signature as bug 1989368 (and likely same regressor, which added a new non-`LengthPercentage` type of size); but that bug is specific to table layout, whereas this one does not seem to be, based on the backtrace.  Hence, filing separately.",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "ns[A-Z]\\w+::\\w+",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "AnnotateMozCrashReason(char const*)",
          "file": "mfbt/Assertions.h",
          "line": 59,
          "raw": "0  xul.dll  AnnotateMozCrashReason(char const*)  mfbt/Assertions.h:59"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "mozilla::StyleGenericSize<mozilla::StyleLengthPercentageUnion>::AsLengthPerce...",
          "file": "layout/style/ServoStyleConsts.h",
          "line": 14122,
          "raw": "0  xul.dll  mozilla::StyleGenericSize<mozilla::StyleLengthPercentageUnion>::AsLengthPerce...  layout/style/ServoStyleConsts.h:14122"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "nsLayoutUtils::ComputeBSizeValueHandlingStretch(int, int, int, int, mozilla::...",
          "file": "layout/base/nsLayoutUtils.h",
          "line": 1615,
          "raw": "0  xul.dll  nsLayoutUtils::ComputeBSizeValueHandlingStretch(int, int, int, int, mozilla::...  layout/base/nsLayoutUtils.h:1615"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "nsIFrame::ComputeBSizeValueAsPercentageBasis(mozilla::StyleGenericSize<mozill...",
          "file": "layout/generic/nsIFrame.cpp",
          "line": 6991,
          "raw": "0  xul.dll  nsIFrame::ComputeBSizeValueAsPercentageBasis(mozilla::StyleGenericSize<mozill...  layout/generic/nsIFrame.cpp:6991"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "nsIFrame::ComputeISizeValue(gfxContext*, const mozilla::WritingMode, mozilla:...",
          "file": "layout/generic/nsIFrame.cpp",
          "line": 7345,
          "raw": "0  xul.dll  nsIFrame::ComputeISizeValue(gfxContext*, const mozilla::WritingMode, mozilla:...  layout/generic/nsIFrame.cpp:7345"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "nsIFrame::ComputeISizeValue(gfxContext*, const mozilla::WritingMode, mozilla:...",
          "file": "layout/generic/nsIFrame.h",
          "line": 5054,
          "raw": "1  xul.dll  nsIFrame::ComputeISizeValue(gfxContext*, const mozilla::WritingMode, mozilla:...  layout/generic/nsIFrame.h:5054"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::SizeComputationInput::ComputeISizeValue(mozilla::LogicalSize const&,...",
          "file": "layout/generic/ReflowInput.cpp",
          "line": 367,
          "raw": "1  xul.dll  mozilla::SizeComputationInput::ComputeISizeValue(mozilla::LogicalSize const&,...  layout/generic/ReflowInput.cpp:367"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::ReflowInput::ComputeMinMaxValues(mozilla::LogicalSize const&)",
          "file": "layout/generic/ReflowInput.cpp",
          "line": 3093,
          "raw": "1  xul.dll  mozilla::ReflowInput::ComputeMinMaxValues(mozilla::LogicalSize const&)  layout/generic/ReflowInput.cpp:3093"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::ReflowInput::InitConstraints(nsPresContext*, mozilla::Maybe<mozilla:...",
          "file": "layout/generic/ReflowInput.cpp",
          "line": 2346,
          "raw": "1  xul.dll  mozilla::ReflowInput::InitConstraints(nsPresContext*, mozilla::Maybe<mozilla:...  layout/generic/ReflowInput.cpp:2346"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::ReflowInput::Init(nsPresContext*, mozilla::Maybe<mozilla::LogicalSiz...",
          "file": "layout/generic/ReflowInput.cpp",
          "line": 490,
          "raw": "1  xul.dll  mozilla::ReflowInput::Init(nsPresContext*, mozilla::Maybe<mozilla::LogicalSiz...  layout/generic/ReflowInput.cpp:490"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}