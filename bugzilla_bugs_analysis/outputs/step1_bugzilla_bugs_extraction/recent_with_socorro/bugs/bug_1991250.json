{
  "bug_id": "1991250",
  "summary": "Crash in [@ mozilla::LinkedListElement<T>::setPreviousUnsafe] with dom.script_loader.navigation_cache =TRUE (STR in comment 6)",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "JavaScript Engine",
  "version": "unspecified",
  "severity": "S4",
  "priority": "P1",
  "creation_time": "2025-09-27T03:15:31Z",
  "last_change_time": "2025-10-14T15:44:21Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::LinkedListElement<T>::setPreviousUnsafe]",
  "crash_signatures": [
    "mozilla::LinkedListElement<T>::setPreviousUnsafe"
  ],
  "keywords": [
    "crash",
    "regression"
  ],
  "regressed_by": [
    1980152
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1991250",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/10c2ee8a-0313-4b52-be52-8a31e0250927",
      "crash_id": "10c2ee8a-0313-4b52-be52-8a31e0250927",
      "comment_index": 0,
      "comment_text": "Crash report: https://crash-stats.mozilla.org/report/index/10c2ee8a-0313-4b52-be52-8a31e0250927\n\nMOZ_CRASH Reason:\n```\nMOZ_RELEASE_ASSERT(!listElem->isInList())\n```\n\nTop 10 frames:\n```\n0  xul.dll  mozilla::LinkedListElement<JS::loader::ScriptLoadRequest>::setPreviousUnsafe(...  mfbt/LinkedList.h:334\n0  xul.dll  mozilla::LinkedList<JS::loader::ScriptLoadRequest>::insertBack(JS::loader::Sc...  mfbt/LinkedList.h:526\n0  xul.dll  JS::loader::ScriptLoadRequestList::AppendElement(JS::loader::ScriptLoadRequest*)  js/loader/ScriptLoadRequestList.cpp:42\n0  xul.dll  mozilla::dom::ScriptLoader::CalculateCacheFlag(JS::loader::ScriptLoadRequest*)  dom/script/ScriptLoader.cpp:2875\n1  xul.dll  mozilla::dom::ModuleLoader::CompileJavaScriptModule(JSContext*, JS::CompileOp...  dom/script/ModuleLoader.cpp:236\n1  xul.dll  mozilla::dom::ModuleLoader::CompileFetchedModule(JSContext*, JS::Handle<JSObj...  dom/script/ModuleLoader.cpp:223\n2  xul.dll  JS::loader::ModuleLoaderBase::CreateModuleScript(JS::loader::ModuleLoadRequest*)  js/loader/ModuleLoaderBase.cpp:977\n2  xul.dll  JS::loader::ModuleLoaderBase::OnFetchComplete(JS::loader::ModuleLoadRequest*,...  js/loader/ModuleLoaderBase.cpp:748\n3  xul.dll  JS::loader::ModuleLoadRequest::OnFetchComplete(nsresult)  js/loader/ModuleLoadRequest.h:105\n3  xul.dll  mozilla::dom::ScriptLoader::PrepareLoadedRequest(JS::loader::ScriptLoadReques...  dom/script/ScriptLoader.cpp:4689\n```\n\n\nGetting this when opening https://www.tomshardware.com/. \n\nRepros with all addons disabled. Does not repro on a fresh profile.\n\nEdit: I dont repro now.  The crash had something to do with dom.script_loader.navigation_cache = TRUE"
    }
  ],
  "socorro_crash_ids": [
    "10c2ee8a-0313-4b52-be52-8a31e0250927"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17690844,
      "comment_count": 0,
      "creator": "mayankleoboy1@gmail.com",
      "creation_time": "2025-09-27T03:15:31Z",
      "raw_text": "Crash report: https://crash-stats.mozilla.org/report/index/10c2ee8a-0313-4b52-be52-8a31e0250927\n\nMOZ_CRASH Reason:\n```\nMOZ_RELEASE_ASSERT(!listElem->isInList())\n```\n\nTop 10 frames:\n```\n0  xul.dll  mozilla::LinkedListElement<JS::loader::ScriptLoadRequest>::setPreviousUnsafe(...  mfbt/LinkedList.h:334\n0  xul.dll  mozilla::LinkedList<JS::loader::ScriptLoadRequest>::insertBack(JS::loader::Sc...  mfbt/LinkedList.h:526\n0  xul.dll  JS::loader::ScriptLoadRequestList::AppendElement(JS::loader::ScriptLoadRequest*)  js/loader/ScriptLoadRequestList.cpp:42\n0  xul.dll  mozilla::dom::ScriptLoader::CalculateCacheFlag(JS::loader::ScriptLoadRequest*)  dom/script/ScriptLoader.cpp:2875\n1  xul.dll  mozilla::dom::ModuleLoader::CompileJavaScriptModule(JSContext*, JS::CompileOp...  dom/script/ModuleLoader.cpp:236\n1  xul.dll  mozilla::dom::ModuleLoader::CompileFetchedModule(JSContext*, JS::Handle<JSObj...  dom/script/ModuleLoader.cpp:223\n2  xul.dll  JS::loader::ModuleLoaderBase::CreateModuleScript(JS::loader::ModuleLoadRequest*)  js/loader/ModuleLoaderBase.cpp:977\n2  xul.dll  JS::loader::ModuleLoaderBase::OnFetchComplete(JS::loader::ModuleLoadRequest*,...  js/loader/ModuleLoaderBase.cpp:748\n3  xul.dll  JS::loader::ModuleLoadRequest::OnFetchComplete(nsresult)  js/loader/ModuleLoadRequest.h:105\n3  xul.dll  mozilla::dom::ScriptLoader::PrepareLoadedRequest(JS::loader::ScriptLoadReques...  dom/script/ScriptLoader.cpp:4689\n```\n\n\nGetting this when opening https://www.tomshardware.com/. \n\nRepros with all addons disabled. Does not repro on a fresh profile.\n\nEdit: I dont repro now.  The crash had something to do with dom.script_loader.navigation_cache = TRUE",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "mozilla::LinkedListElement<JS::loader::ScriptLoadRequest>::setPreviousUnsafe(...",
          "file": "mfbt/LinkedList.h",
          "line": 334,
          "raw": "0  xul.dll  mozilla::LinkedListElement<JS::loader::ScriptLoadRequest>::setPreviousUnsafe(...  mfbt/LinkedList.h:334"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "mozilla::LinkedList<JS::loader::ScriptLoadRequest>::insertBack(JS::loader::Sc...",
          "file": "mfbt/LinkedList.h",
          "line": 526,
          "raw": "0  xul.dll  mozilla::LinkedList<JS::loader::ScriptLoadRequest>::insertBack(JS::loader::Sc...  mfbt/LinkedList.h:526"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "JS::loader::ScriptLoadRequestList::AppendElement(JS::loader::ScriptLoadRequest*)",
          "file": "js/loader/ScriptLoadRequestList.cpp",
          "line": 42,
          "raw": "0  xul.dll  JS::loader::ScriptLoadRequestList::AppendElement(JS::loader::ScriptLoadRequest*)  js/loader/ScriptLoadRequestList.cpp:42"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "mozilla::dom::ScriptLoader::CalculateCacheFlag(JS::loader::ScriptLoadRequest*)",
          "file": "dom/script/ScriptLoader.cpp",
          "line": 2875,
          "raw": "0  xul.dll  mozilla::dom::ScriptLoader::CalculateCacheFlag(JS::loader::ScriptLoadRequest*)  dom/script/ScriptLoader.cpp:2875"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::dom::ModuleLoader::CompileJavaScriptModule(JSContext*, JS::CompileOp...",
          "file": "dom/script/ModuleLoader.cpp",
          "line": 236,
          "raw": "1  xul.dll  mozilla::dom::ModuleLoader::CompileJavaScriptModule(JSContext*, JS::CompileOp...  dom/script/ModuleLoader.cpp:236"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::dom::ModuleLoader::CompileFetchedModule(JSContext*, JS::Handle<JSObj...",
          "file": "dom/script/ModuleLoader.cpp",
          "line": 223,
          "raw": "1  xul.dll  mozilla::dom::ModuleLoader::CompileFetchedModule(JSContext*, JS::Handle<JSObj...  dom/script/ModuleLoader.cpp:223"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "JS::loader::ModuleLoaderBase::CreateModuleScript(JS::loader::ModuleLoadRequest*)",
          "file": "js/loader/ModuleLoaderBase.cpp",
          "line": 977,
          "raw": "2  xul.dll  JS::loader::ModuleLoaderBase::CreateModuleScript(JS::loader::ModuleLoadRequest*)  js/loader/ModuleLoaderBase.cpp:977"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "JS::loader::ModuleLoaderBase::OnFetchComplete(JS::loader::ModuleLoadRequest*,...",
          "file": "js/loader/ModuleLoaderBase.cpp",
          "line": 748,
          "raw": "2  xul.dll  JS::loader::ModuleLoaderBase::OnFetchComplete(JS::loader::ModuleLoadRequest*,...  js/loader/ModuleLoaderBase.cpp:748"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "JS::loader::ModuleLoadRequest::OnFetchComplete(nsresult)",
          "file": "js/loader/ModuleLoadRequest.h",
          "line": 105,
          "raw": "3  xul.dll  JS::loader::ModuleLoadRequest::OnFetchComplete(nsresult)  js/loader/ModuleLoadRequest.h:105"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "mozilla::dom::ScriptLoader::PrepareLoadedRequest(JS::loader::ScriptLoadReques...",
          "file": "dom/script/ScriptLoader.cpp",
          "line": 4689,
          "raw": "3  xul.dll  mozilla::dom::ScriptLoader::PrepareLoadedRequest(JS::loader::ScriptLoadReques...  dom/script/ScriptLoader.cpp:4689"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}