{
  "bug_id": "1992304",
  "summary": "Crash in [@ mozilla::AnchorPosReferenceData::Lookup]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "Disability Access APIs",
  "version": "unspecified",
  "severity": "--",
  "priority": "--",
  "creation_time": "2025-10-03T00:41:15Z",
  "last_change_time": "2025-10-14T21:05:14Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::AnchorPosReferenceData::Lookup]",
  "crash_signatures": [
    "mozilla::AnchorPosReferenceData::Lookup"
  ],
  "keywords": [
    "crash",
    "regression"
  ],
  "regressed_by": [
    1987945
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1992304",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/b123d847-de07-4b77-aaa5-e85670251001",
      "crash_id": "b123d847-de07-4b77-aaa5-e85670251001",
      "comment_index": 0,
      "comment_text": "\nCrash report: https://crash-stats.mozilla.org/report/index/b123d847-de07-4b77-aaa5-e85670251001\n\n\n\nReason: ```EXCEPTION_ACCESS_VIOLATION_READ```\n\n\nTop 10 frames of crashing thread:\n```\n0  xul.dll  PLDHashTable::EntryStore::IsAllocated const  xpcom/ds/PLDHashTable.h:327\n0  xul.dll  PLDHashTable::Search const  xpcom/ds/PLDHashTable.cpp:495\n1  xul.dll  nsTHashtable<nsBaseHashtableET<nsRefPtrHashKey<const nsAtom>, mozilla::Maybe<mozilla::AnchorPosResolutionData> > >::GetEntry const  xpcom/ds/nsTHashtable.h:290\n1  xul.dll  nsBaseHashtable<nsRefPtrHashKey<const nsAtom>, mozilla::Maybe<mozilla::AnchorPosResolutionData>, mozilla::Maybe<mozilla::AnchorPosResolutionData>, nsDefaultConverter<mozilla::Maybe<mozilla::AnchorPosResolutionData>, mozilla::Maybe<mozilla::AnchorPosResolutionData> > >::Lookup const  xpcom/ds/nsBaseHashtable.h:654\n1  xul.dll  mozilla::AnchorPosReferenceData::Lookup const  layout/base/AnchorPositioningUtils.cpp:384\n1  xul.dll  nsCoreUtils::GetPositionedFrameForAnchor  accessible/base/nsCoreUtils.cpp:728\n2  xul.dll  nsAccessibilityService::NotifyAnchorRemoved  accessible/base/nsAccessibilityService.cpp:703\n3  xul.dll  mozilla::PresShell::RemoveAnchorPosAnchor  layout/base/PresShell.cpp:12127\n4  xul.dll  nsIFrame::Destroy  layout/generic/nsIFrame.cpp:918\n5  xul.dll  nsContainerFrame::RemoveFrame  layout/generic/nsContainerFrame.cpp:188\n```\n\n\n\nBy querying Nightly crashes reported within the last 2 months, here are some insights about the signature:\n\n- **First crash report:** 2025-10-01\n- **Process type:** Content\n- **Is startup crash:** No\n- **Has user comments:** No\n- **Is null crash:** Yes - all crashes happened on null or near null memory address\n\n\n\n\n\n\nBy analyzing the backtrace, the regression may have been introduced by a patch to fix Bug 1987945.\n\n\n\n\n:eeejay, since you are the author of the potential regressor, could you please take a look?"
    }
  ],
  "socorro_crash_ids": [
    "b123d847-de07-4b77-aaa5-e85670251001"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17700150,
      "comment_count": 0,
      "creator": "release-mgmt-account-bot@mozilla.tld",
      "creation_time": "2025-10-03T00:41:15Z",
      "raw_text": "\nCrash report: https://crash-stats.mozilla.org/report/index/b123d847-de07-4b77-aaa5-e85670251001\n\n\n\nReason: ```EXCEPTION_ACCESS_VIOLATION_READ```\n\n\nTop 10 frames of crashing thread:\n```\n0  xul.dll  PLDHashTable::EntryStore::IsAllocated const  xpcom/ds/PLDHashTable.h:327\n0  xul.dll  PLDHashTable::Search const  xpcom/ds/PLDHashTable.cpp:495\n1  xul.dll  nsTHashtable<nsBaseHashtableET<nsRefPtrHashKey<const nsAtom>, mozilla::Maybe<mozilla::AnchorPosResolutionData> > >::GetEntry const  xpcom/ds/nsTHashtable.h:290\n1  xul.dll  nsBaseHashtable<nsRefPtrHashKey<const nsAtom>, mozilla::Maybe<mozilla::AnchorPosResolutionData>, mozilla::Maybe<mozilla::AnchorPosResolutionData>, nsDefaultConverter<mozilla::Maybe<mozilla::AnchorPosResolutionData>, mozilla::Maybe<mozilla::AnchorPosResolutionData> > >::Lookup const  xpcom/ds/nsBaseHashtable.h:654\n1  xul.dll  mozilla::AnchorPosReferenceData::Lookup const  layout/base/AnchorPositioningUtils.cpp:384\n1  xul.dll  nsCoreUtils::GetPositionedFrameForAnchor  accessible/base/nsCoreUtils.cpp:728\n2  xul.dll  nsAccessibilityService::NotifyAnchorRemoved  accessible/base/nsAccessibilityService.cpp:703\n3  xul.dll  mozilla::PresShell::RemoveAnchorPosAnchor  layout/base/PresShell.cpp:12127\n4  xul.dll  nsIFrame::Destroy  layout/generic/nsIFrame.cpp:918\n5  xul.dll  nsContainerFrame::RemoveFrame  layout/generic/nsContainerFrame.cpp:188\n```\n\n\n\nBy querying Nightly crashes reported within the last 2 months, here are some insights about the signature:\n\n- **First crash report:** 2025-10-01\n- **Process type:** Content\n- **Is startup crash:** No\n- **Has user comments:** No\n- **Is null crash:** Yes - all crashes happened on null or near null memory address\n\n\n\n\n\n\nBy analyzing the backtrace, the regression may have been introduced by a patch to fix Bug 1987945.\n\n\n\n\n:eeejay, since you are the author of the potential regressor, could you please take a look?",
      "matched_patterns": [
        "ns[A-Z]\\w+::\\w+",
        "(?i)(crash|stack)\\s*(trace|dump|report)",
        "(?i)crashing\\s+thread"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "PLDHashTable::EntryStore::IsAllocated const",
          "file": "xpcom/ds/PLDHashTable.h",
          "line": 327,
          "raw": "0  xul.dll  PLDHashTable::EntryStore::IsAllocated const  xpcom/ds/PLDHashTable.h:327"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "PLDHashTable::Search const",
          "file": "xpcom/ds/PLDHashTable.cpp",
          "line": 495,
          "raw": "0  xul.dll  PLDHashTable::Search const  xpcom/ds/PLDHashTable.cpp:495"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "nsTHashtable<nsBaseHashtableET<nsRefPtrHashKey<const nsAtom>, mozilla::Maybe<mozilla::AnchorPosResolutionData> > >::GetEntry const",
          "file": "xpcom/ds/nsTHashtable.h",
          "line": 290,
          "raw": "1  xul.dll  nsTHashtable<nsBaseHashtableET<nsRefPtrHashKey<const nsAtom>, mozilla::Maybe<mozilla::AnchorPosResolutionData> > >::GetEntry const  xpcom/ds/nsTHashtable.h:290"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "nsBaseHashtable<nsRefPtrHashKey<const nsAtom>, mozilla::Maybe<mozilla::AnchorPosResolutionData>, mozilla::Maybe<mozilla::AnchorPosResolutionData>, nsDefaultConverter<mozilla::Maybe<mozilla::AnchorPosResolutionData>, mozilla::Maybe<mozilla::AnchorPosResolutionData> > >::Lookup const",
          "file": "xpcom/ds/nsBaseHashtable.h",
          "line": 654,
          "raw": "1  xul.dll  nsBaseHashtable<nsRefPtrHashKey<const nsAtom>, mozilla::Maybe<mozilla::AnchorPosResolutionData>, mozilla::Maybe<mozilla::AnchorPosResolutionData>, nsDefaultConverter<mozilla::Maybe<mozilla::AnchorPosResolutionData>, mozilla::Maybe<mozilla::AnchorPosResolutionData> > >::Lookup const  xpcom/ds/nsBaseHashtable.h:654"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::AnchorPosReferenceData::Lookup const",
          "file": "layout/base/AnchorPositioningUtils.cpp",
          "line": 384,
          "raw": "1  xul.dll  mozilla::AnchorPosReferenceData::Lookup const  layout/base/AnchorPositioningUtils.cpp:384"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "nsCoreUtils::GetPositionedFrameForAnchor",
          "file": "accessible/base/nsCoreUtils.cpp",
          "line": 728,
          "raw": "1  xul.dll  nsCoreUtils::GetPositionedFrameForAnchor  accessible/base/nsCoreUtils.cpp:728"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "nsAccessibilityService::NotifyAnchorRemoved",
          "file": "accessible/base/nsAccessibilityService.cpp",
          "line": 703,
          "raw": "2  xul.dll  nsAccessibilityService::NotifyAnchorRemoved  accessible/base/nsAccessibilityService.cpp:703"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "mozilla::PresShell::RemoveAnchorPosAnchor",
          "file": "layout/base/PresShell.cpp",
          "line": 12127,
          "raw": "3  xul.dll  mozilla::PresShell::RemoveAnchorPosAnchor  layout/base/PresShell.cpp:12127"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "nsIFrame::Destroy",
          "file": "layout/generic/nsIFrame.cpp",
          "line": 918,
          "raw": "4  xul.dll  nsIFrame::Destroy  layout/generic/nsIFrame.cpp:918"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "nsContainerFrame::RemoveFrame",
          "file": "layout/generic/nsContainerFrame.cpp",
          "line": 188,
          "raw": "5  xul.dll  nsContainerFrame::RemoveFrame  layout/generic/nsContainerFrame.cpp:188"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}