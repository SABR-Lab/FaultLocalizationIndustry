{
  "bug_id": "1992580",
  "summary": "Fenix Crash in [@ mozilla::dom::BrowsingContext::LoadURI] after MOZ_DIAGNOSTIC_ASSERT(sourceBC)",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "DOM: Navigation",
  "version": "unspecified",
  "severity": "S2",
  "priority": "--",
  "creation_time": "2025-10-04T20:33:51Z",
  "last_change_time": "2025-12-11T10:15:42Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::dom::BrowsingContext::LoadURI]",
  "crash_signatures": [
    "mozilla::dom::BrowsingContext::LoadURI"
  ],
  "keywords": [
    "crash",
    "topcrash"
  ],
  "regressed_by": [],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1992580",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/2cce1d2d-3339-4891-9a9c-7fc230251004",
      "crash_id": "2cce1d2d-3339-4891-9a9c-7fc230251004",
      "comment_index": 0,
      "comment_text": "Fission-related possibly?\n\nCrash report: https://crash-stats.mozilla.org/report/index/2cce1d2d-3339-4891-9a9c-7fc230251004\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(sourceBC)\n```\n\nTop 10 frames:\n```\n0  libxul.so  MOZ_CrashSequence(void*, long)  mfbt/Assertions.h:242\n0  libxul.so  mozilla::dom::BrowsingContext::LoadURI(nsDocShellLoadState*, bool)  docshell/base/BrowsingContext.cpp:2255\n1  libxul.so  mozilla::dom::BrowsingContext::Navigate(nsIURI*, nsIPrincipal&, mozilla::Erro...  docshell/base/BrowsingContext.cpp:2499\n2  libxul.so  mozilla::dom::LocationBase::SetURI(nsIURI*, nsIPrincipal&, mozilla::ErrorResu...  dom/base/LocationBase.cpp:33\n2  libxul.so  mozilla::dom::LocationBase::SetHrefWithBase(nsTSubstring<char> const&, nsIURI...  dom/base/LocationBase.cpp:97\n3  libxul.so  mozilla::dom::Location_Binding::set_href(JSContext*, JS::Handle<JSObject*>, v...  dom/bindings/LocationBinding.cpp:0\n4  libxul.so  mozilla::dom::binding_detail::GenericSetter<mozilla::dom::binding_detail::Cro...  dom/bindings/BindingUtils.cpp:3255\n5  libxul.so  CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::...  js/src/vm/Interpreter.cpp:490\n5  libxul.so  js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstru...  js/src/vm/Interpreter.cpp:586\n5  libxul.so  InternalCall(JSContext*, js::AnyInvokeArgs const&, js::CallReason)  js/src/vm/Interpreter.cpp:653\n```"
    }
  ],
  "socorro_crash_ids": [
    "2cce1d2d-3339-4891-9a9c-7fc230251004"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17701939,
      "comment_count": 0,
      "creator": "ryanvm@gmail.com",
      "creation_time": "2025-10-04T20:33:51Z",
      "raw_text": "Fission-related possibly?\n\nCrash report: https://crash-stats.mozilla.org/report/index/2cce1d2d-3339-4891-9a9c-7fc230251004\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(sourceBC)\n```\n\nTop 10 frames:\n```\n0  libxul.so  MOZ_CrashSequence(void*, long)  mfbt/Assertions.h:242\n0  libxul.so  mozilla::dom::BrowsingContext::LoadURI(nsDocShellLoadState*, bool)  docshell/base/BrowsingContext.cpp:2255\n1  libxul.so  mozilla::dom::BrowsingContext::Navigate(nsIURI*, nsIPrincipal&, mozilla::Erro...  docshell/base/BrowsingContext.cpp:2499\n2  libxul.so  mozilla::dom::LocationBase::SetURI(nsIURI*, nsIPrincipal&, mozilla::ErrorResu...  dom/base/LocationBase.cpp:33\n2  libxul.so  mozilla::dom::LocationBase::SetHrefWithBase(nsTSubstring<char> const&, nsIURI...  dom/base/LocationBase.cpp:97\n3  libxul.so  mozilla::dom::Location_Binding::set_href(JSContext*, JS::Handle<JSObject*>, v...  dom/bindings/LocationBinding.cpp:0\n4  libxul.so  mozilla::dom::binding_detail::GenericSetter<mozilla::dom::binding_detail::Cro...  dom/bindings/BindingUtils.cpp:3255\n5  libxul.so  CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::...  js/src/vm/Interpreter.cpp:490\n5  libxul.so  js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstru...  js/src/vm/Interpreter.cpp:586\n5  libxul.so  InternalCall(JSContext*, js::AnyInvokeArgs const&, js::CallReason)  js/src/vm/Interpreter.cpp:653\n```",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "MOZ_CrashSequence(void*, long)",
          "file": "mfbt/Assertions.h",
          "line": 242,
          "raw": "0  libxul.so  MOZ_CrashSequence(void*, long)  mfbt/Assertions.h:242"
        },
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "mozilla::dom::BrowsingContext::LoadURI(nsDocShellLoadState*, bool)",
          "file": "docshell/base/BrowsingContext.cpp",
          "line": 2255,
          "raw": "0  libxul.so  mozilla::dom::BrowsingContext::LoadURI(nsDocShellLoadState*, bool)  docshell/base/BrowsingContext.cpp:2255"
        },
        {
          "frame_index": 1,
          "module": "libxul.so",
          "function": "mozilla::dom::BrowsingContext::Navigate(nsIURI*, nsIPrincipal&, mozilla::Erro...",
          "file": "docshell/base/BrowsingContext.cpp",
          "line": 2499,
          "raw": "1  libxul.so  mozilla::dom::BrowsingContext::Navigate(nsIURI*, nsIPrincipal&, mozilla::Erro...  docshell/base/BrowsingContext.cpp:2499"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::dom::LocationBase::SetURI(nsIURI*, nsIPrincipal&, mozilla::ErrorResu...",
          "file": "dom/base/LocationBase.cpp",
          "line": 33,
          "raw": "2  libxul.so  mozilla::dom::LocationBase::SetURI(nsIURI*, nsIPrincipal&, mozilla::ErrorResu...  dom/base/LocationBase.cpp:33"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::dom::LocationBase::SetHrefWithBase(nsTSubstring<char> const&, nsIURI...",
          "file": "dom/base/LocationBase.cpp",
          "line": 97,
          "raw": "2  libxul.so  mozilla::dom::LocationBase::SetHrefWithBase(nsTSubstring<char> const&, nsIURI...  dom/base/LocationBase.cpp:97"
        },
        {
          "frame_index": 3,
          "module": "libxul.so",
          "function": "mozilla::dom::Location_Binding::set_href(JSContext*, JS::Handle<JSObject*>, v...",
          "file": "dom/bindings/LocationBinding.cpp",
          "line": 0,
          "raw": "3  libxul.so  mozilla::dom::Location_Binding::set_href(JSContext*, JS::Handle<JSObject*>, v...  dom/bindings/LocationBinding.cpp:0"
        },
        {
          "frame_index": 4,
          "module": "libxul.so",
          "function": "mozilla::dom::binding_detail::GenericSetter<mozilla::dom::binding_detail::Cro...",
          "file": "dom/bindings/BindingUtils.cpp",
          "line": 3255,
          "raw": "4  libxul.so  mozilla::dom::binding_detail::GenericSetter<mozilla::dom::binding_detail::Cro...  dom/bindings/BindingUtils.cpp:3255"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::...",
          "file": "js/src/vm/Interpreter.cpp",
          "line": 490,
          "raw": "5  libxul.so  CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::...  js/src/vm/Interpreter.cpp:490"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstru...",
          "file": "js/src/vm/Interpreter.cpp",
          "line": 586,
          "raw": "5  libxul.so  js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstru...  js/src/vm/Interpreter.cpp:586"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "InternalCall(JSContext*, js::AnyInvokeArgs const&, js::CallReason)",
          "file": "js/src/vm/Interpreter.cpp",
          "line": 653,
          "raw": "5  libxul.so  InternalCall(JSContext*, js::AnyInvokeArgs const&, js::CallReason)  js/src/vm/Interpreter.cpp:653"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}