{
  "bug_id": "1997294",
  "summary": "Crash in [@ mozilla::dom::RTCDataChannel::SetMaxMessageSize]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "WebRTC",
  "version": "unspecified",
  "severity": "S2",
  "priority": "P2",
  "creation_time": "2025-10-30T10:29:24Z",
  "last_change_time": "2025-11-12T15:24:51Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::dom::RTCDataChannel::SetMaxMessageSize]",
  "crash_signatures": [
    "mozilla::dom::RTCDataChannel::SetMaxMessageSize"
  ],
  "keywords": [
    "crash",
    "regression",
    "topcrash"
  ],
  "regressed_by": [
    1988096
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1997294",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/1abb351d-9d78-4bd7-b7bc-25f270251030",
      "crash_id": "1abb351d-9d78-4bd7-b7bc-25f270251030",
      "comment_index": 0,
      "comment_text": "38 content crashes from 15+ installs of Firefox Nightly 146.0a1 20251029214904 on different operating systems.\n\nByron, which change caused this and this be fixed before the next Nightly starts to build at 10pm UTC?\n\nCrash report: https://crash-stats.mozilla.org/report/index/1abb351d-9d78-4bd7-b7bc-25f270251030\n\nReason:\n```\nSIGSEGV / SEGV_MAPERR\n```\n\nTop 10 frames:\n```\n0  libxul.so  mozilla::dom::RTCDataChannel::SetMaxMessageSize(double)  dom/media/webrtc/jsapi/RTCDataChannel.cpp:286\n1  libxul.so  mozilla::DataChannelConnection::SetMaxMessageSize(unsigned long)  netwerk/sctp/datachannel/DataChannel.cpp:184\n2  libxul.so  mozilla::PeerConnectionImpl::MaybeInitializeDataChannel()  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:984\n3  libxul.so  mozilla::PeerConnectionImpl::UpdateRTCDtlsTransports()  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:4174\n4  libxul.so  mozilla::PeerConnectionImpl::DoSetDescriptionSuccessPostProcessing(mozilla::d...  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:2964\n4  libxul.so  mozilla::detail::RunnableFunction<mozilla::PeerConnectionImpl::DoSetDescripti...  xpcom/threads/nsThreadUtils.h:549\n5  libxul.so  mozilla::RunnableTask::Run()  xpcom/threads/TaskController.cpp:705\n5  libxul.so  mozilla::TaskController::RunTask(mozilla::Task*)  xpcom/threads/TaskController.cpp:196\n5  libxul.so  mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::det...  xpcom/threads/TaskController.cpp:1325\n5  libxul.so  mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detai...  xpcom/threads/TaskController.cpp:1148\n```"
    }
  ],
  "socorro_crash_ids": [
    "1abb351d-9d78-4bd7-b7bc-25f270251030"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17740218,
      "comment_count": 0,
      "creator": "aryx.bugmail@gmx-topmail.de",
      "creation_time": "2025-10-30T10:29:24Z",
      "raw_text": "38 content crashes from 15+ installs of Firefox Nightly 146.0a1 20251029214904 on different operating systems.\n\nByron, which change caused this and this be fixed before the next Nightly starts to build at 10pm UTC?\n\nCrash report: https://crash-stats.mozilla.org/report/index/1abb351d-9d78-4bd7-b7bc-25f270251030\n\nReason:\n```\nSIGSEGV / SEGV_MAPERR\n```\n\nTop 10 frames:\n```\n0  libxul.so  mozilla::dom::RTCDataChannel::SetMaxMessageSize(double)  dom/media/webrtc/jsapi/RTCDataChannel.cpp:286\n1  libxul.so  mozilla::DataChannelConnection::SetMaxMessageSize(unsigned long)  netwerk/sctp/datachannel/DataChannel.cpp:184\n2  libxul.so  mozilla::PeerConnectionImpl::MaybeInitializeDataChannel()  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:984\n3  libxul.so  mozilla::PeerConnectionImpl::UpdateRTCDtlsTransports()  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:4174\n4  libxul.so  mozilla::PeerConnectionImpl::DoSetDescriptionSuccessPostProcessing(mozilla::d...  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:2964\n4  libxul.so  mozilla::detail::RunnableFunction<mozilla::PeerConnectionImpl::DoSetDescripti...  xpcom/threads/nsThreadUtils.h:549\n5  libxul.so  mozilla::RunnableTask::Run()  xpcom/threads/TaskController.cpp:705\n5  libxul.so  mozilla::TaskController::RunTask(mozilla::Task*)  xpcom/threads/TaskController.cpp:196\n5  libxul.so  mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::det...  xpcom/threads/TaskController.cpp:1325\n5  libxul.so  mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detai...  xpcom/threads/TaskController.cpp:1148\n```",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "mozilla::dom::RTCDataChannel::SetMaxMessageSize(double)",
          "file": "dom/media/webrtc/jsapi/RTCDataChannel.cpp",
          "line": 286,
          "raw": "0  libxul.so  mozilla::dom::RTCDataChannel::SetMaxMessageSize(double)  dom/media/webrtc/jsapi/RTCDataChannel.cpp:286"
        },
        {
          "frame_index": 1,
          "module": "libxul.so",
          "function": "mozilla::DataChannelConnection::SetMaxMessageSize(unsigned long)",
          "file": "netwerk/sctp/datachannel/DataChannel.cpp",
          "line": 184,
          "raw": "1  libxul.so  mozilla::DataChannelConnection::SetMaxMessageSize(unsigned long)  netwerk/sctp/datachannel/DataChannel.cpp:184"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::PeerConnectionImpl::MaybeInitializeDataChannel()",
          "file": "dom/media/webrtc/jsapi/PeerConnectionImpl.cpp",
          "line": 984,
          "raw": "2  libxul.so  mozilla::PeerConnectionImpl::MaybeInitializeDataChannel()  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:984"
        },
        {
          "frame_index": 3,
          "module": "libxul.so",
          "function": "mozilla::PeerConnectionImpl::UpdateRTCDtlsTransports()",
          "file": "dom/media/webrtc/jsapi/PeerConnectionImpl.cpp",
          "line": 4174,
          "raw": "3  libxul.so  mozilla::PeerConnectionImpl::UpdateRTCDtlsTransports()  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:4174"
        },
        {
          "frame_index": 4,
          "module": "libxul.so",
          "function": "mozilla::PeerConnectionImpl::DoSetDescriptionSuccessPostProcessing(mozilla::d...",
          "file": "dom/media/webrtc/jsapi/PeerConnectionImpl.cpp",
          "line": 2964,
          "raw": "4  libxul.so  mozilla::PeerConnectionImpl::DoSetDescriptionSuccessPostProcessing(mozilla::d...  dom/media/webrtc/jsapi/PeerConnectionImpl.cpp:2964"
        },
        {
          "frame_index": 4,
          "module": "libxul.so",
          "function": "mozilla::detail::RunnableFunction<mozilla::PeerConnectionImpl::DoSetDescripti...",
          "file": "xpcom/threads/nsThreadUtils.h",
          "line": 549,
          "raw": "4  libxul.so  mozilla::detail::RunnableFunction<mozilla::PeerConnectionImpl::DoSetDescripti...  xpcom/threads/nsThreadUtils.h:549"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::RunnableTask::Run()",
          "file": "xpcom/threads/TaskController.cpp",
          "line": 705,
          "raw": "5  libxul.so  mozilla::RunnableTask::Run()  xpcom/threads/TaskController.cpp:705"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::TaskController::RunTask(mozilla::Task*)",
          "file": "xpcom/threads/TaskController.cpp",
          "line": 196,
          "raw": "5  libxul.so  mozilla::TaskController::RunTask(mozilla::Task*)  xpcom/threads/TaskController.cpp:196"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::det...",
          "file": "xpcom/threads/TaskController.cpp",
          "line": 1325,
          "raw": "5  libxul.so  mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::det...  xpcom/threads/TaskController.cpp:1325"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detai...",
          "file": "xpcom/threads/TaskController.cpp",
          "line": 1148,
          "raw": "5  libxul.so  mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detai...  xpcom/threads/TaskController.cpp:1148"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}