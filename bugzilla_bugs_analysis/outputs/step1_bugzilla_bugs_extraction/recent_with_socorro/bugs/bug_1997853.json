{
  "bug_id": "1997853",
  "summary": "Crash in [@ mozilla::dom::Navigation::InnerFireNavigateEvent]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "DOM: Navigation",
  "version": "unspecified",
  "severity": "S2",
  "priority": "--",
  "creation_time": "2025-11-03T09:18:58Z",
  "last_change_time": "2025-12-11T12:35:49Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::dom::Navigation::InnerFireNavigateEvent]",
  "crash_signatures": [
    "mozilla::dom::Navigation::InnerFireNavigateEvent"
  ],
  "keywords": [
    "crash",
    "topcrash"
  ],
  "regressed_by": [],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1997853",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/ab42b01b-9b72-46ae-b51c-8a9760251103",
      "crash_id": "ab42b01b-9b72-46ae-b51c-8a9760251103",
      "comment_index": 0,
      "comment_text": "Crash report: https://crash-stats.mozilla.org/report/index/ab42b01b-9b72-46ae-b51c-8a9760251103\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(!mOngoingNavigateEvent)\n```\n\nTop 10 frames:\n```\n0  libxul.so  MOZ_CrashSequence(void*, long)  mfbt/Assertions.h:242\n0  libxul.so  mozilla::dom::Navigation::InnerFireNavigateEvent(JSContext*, mozilla::dom::Na...  dom/navigation/Navigation.cpp:1603\n1  libxul.so  mozilla::dom::Navigation::FireTraverseNavigateEvent(JSContext*, mozilla::dom:...  dom/navigation/Navigation.cpp:950\n2  libxul.so  nsDocShell::MaybeFireTraversableTraverseHistory(mozilla::dom::SessionHistoryI...  docshell/base/nsDocShell.cpp:12708\n3  libxul.so  mozilla::dom::ContentChild::RecvDispatchNavigateToTraversable(mozilla::dom::M...  dom/ipc/ContentChild.cpp:4424\n4  libxul.so  mozilla::dom::PContentChild::OnMessageReceived(IPC::Message const&)  ipc/ipdl/PContentChild.cpp:14159\n5  libxul.so  mozilla::ipc::MessageChannel::DispatchAsyncMessage(mozilla::ipc::ActorLifecyc...  ipc/glue/MessageChannel.cpp:1794\n5  libxul.so  mozilla::ipc::MessageChannel::DispatchMessage(mozilla::ipc::ActorLifecyclePro...  ipc/glue/MessageChannel.cpp:1720\n5  libxul.so  mozilla::ipc::MessageChannel::RunMessage(mozilla::ipc::ActorLifecycleProxy*, ...  ipc/glue/MessageChannel.cpp:1509\n5  libxul.so  mozilla::ipc::MessageChannel::MessageTask::Run()  ipc/glue/MessageChannel.cpp:1611\n```\nThe first affected build id is 20251101164325, so this might be a regression caused by bug 1970123 even though the dates don't align perfectly (that bug landed the 28th of October, but given the modest nightly userbase the delay might just be because the crash volume is low). Jan could you have a look please? Note that for some reason this only seem to affect Firefox for Android."
    }
  ],
  "socorro_crash_ids": [
    "ab42b01b-9b72-46ae-b51c-8a9760251103"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17745426,
      "comment_count": 0,
      "creator": "gsvelto@mozilla.com",
      "creation_time": "2025-11-03T09:18:58Z",
      "raw_text": "Crash report: https://crash-stats.mozilla.org/report/index/ab42b01b-9b72-46ae-b51c-8a9760251103\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(!mOngoingNavigateEvent)\n```\n\nTop 10 frames:\n```\n0  libxul.so  MOZ_CrashSequence(void*, long)  mfbt/Assertions.h:242\n0  libxul.so  mozilla::dom::Navigation::InnerFireNavigateEvent(JSContext*, mozilla::dom::Na...  dom/navigation/Navigation.cpp:1603\n1  libxul.so  mozilla::dom::Navigation::FireTraverseNavigateEvent(JSContext*, mozilla::dom:...  dom/navigation/Navigation.cpp:950\n2  libxul.so  nsDocShell::MaybeFireTraversableTraverseHistory(mozilla::dom::SessionHistoryI...  docshell/base/nsDocShell.cpp:12708\n3  libxul.so  mozilla::dom::ContentChild::RecvDispatchNavigateToTraversable(mozilla::dom::M...  dom/ipc/ContentChild.cpp:4424\n4  libxul.so  mozilla::dom::PContentChild::OnMessageReceived(IPC::Message const&)  ipc/ipdl/PContentChild.cpp:14159\n5  libxul.so  mozilla::ipc::MessageChannel::DispatchAsyncMessage(mozilla::ipc::ActorLifecyc...  ipc/glue/MessageChannel.cpp:1794\n5  libxul.so  mozilla::ipc::MessageChannel::DispatchMessage(mozilla::ipc::ActorLifecyclePro...  ipc/glue/MessageChannel.cpp:1720\n5  libxul.so  mozilla::ipc::MessageChannel::RunMessage(mozilla::ipc::ActorLifecycleProxy*, ...  ipc/glue/MessageChannel.cpp:1509\n5  libxul.so  mozilla::ipc::MessageChannel::MessageTask::Run()  ipc/glue/MessageChannel.cpp:1611\n```\nThe first affected build id is 20251101164325, so this might be a regression caused by bug 1970123 even though the dates don't align perfectly (that bug landed the 28th of October, but given the modest nightly userbase the delay might just be because the crash volume is low). Jan could you have a look please? Note that for some reason this only seem to affect Firefox for Android.",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "ns[A-Z]\\w+::\\w+",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "MOZ_CrashSequence(void*, long)",
          "file": "mfbt/Assertions.h",
          "line": 242,
          "raw": "0  libxul.so  MOZ_CrashSequence(void*, long)  mfbt/Assertions.h:242"
        },
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "mozilla::dom::Navigation::InnerFireNavigateEvent(JSContext*, mozilla::dom::Na...",
          "file": "dom/navigation/Navigation.cpp",
          "line": 1603,
          "raw": "0  libxul.so  mozilla::dom::Navigation::InnerFireNavigateEvent(JSContext*, mozilla::dom::Na...  dom/navigation/Navigation.cpp:1603"
        },
        {
          "frame_index": 1,
          "module": "libxul.so",
          "function": "mozilla::dom::Navigation::FireTraverseNavigateEvent(JSContext*, mozilla::dom:...",
          "file": "dom/navigation/Navigation.cpp",
          "line": 950,
          "raw": "1  libxul.so  mozilla::dom::Navigation::FireTraverseNavigateEvent(JSContext*, mozilla::dom:...  dom/navigation/Navigation.cpp:950"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "nsDocShell::MaybeFireTraversableTraverseHistory(mozilla::dom::SessionHistoryI...",
          "file": "docshell/base/nsDocShell.cpp",
          "line": 12708,
          "raw": "2  libxul.so  nsDocShell::MaybeFireTraversableTraverseHistory(mozilla::dom::SessionHistoryI...  docshell/base/nsDocShell.cpp:12708"
        },
        {
          "frame_index": 3,
          "module": "libxul.so",
          "function": "mozilla::dom::ContentChild::RecvDispatchNavigateToTraversable(mozilla::dom::M...",
          "file": "dom/ipc/ContentChild.cpp",
          "line": 4424,
          "raw": "3  libxul.so  mozilla::dom::ContentChild::RecvDispatchNavigateToTraversable(mozilla::dom::M...  dom/ipc/ContentChild.cpp:4424"
        },
        {
          "frame_index": 4,
          "module": "libxul.so",
          "function": "mozilla::dom::PContentChild::OnMessageReceived(IPC::Message const&)",
          "file": "ipc/ipdl/PContentChild.cpp",
          "line": 14159,
          "raw": "4  libxul.so  mozilla::dom::PContentChild::OnMessageReceived(IPC::Message const&)  ipc/ipdl/PContentChild.cpp:14159"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::ipc::MessageChannel::DispatchAsyncMessage(mozilla::ipc::ActorLifecyc...",
          "file": "ipc/glue/MessageChannel.cpp",
          "line": 1794,
          "raw": "5  libxul.so  mozilla::ipc::MessageChannel::DispatchAsyncMessage(mozilla::ipc::ActorLifecyc...  ipc/glue/MessageChannel.cpp:1794"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::ipc::MessageChannel::DispatchMessage(mozilla::ipc::ActorLifecyclePro...",
          "file": "ipc/glue/MessageChannel.cpp",
          "line": 1720,
          "raw": "5  libxul.so  mozilla::ipc::MessageChannel::DispatchMessage(mozilla::ipc::ActorLifecyclePro...  ipc/glue/MessageChannel.cpp:1720"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::ipc::MessageChannel::RunMessage(mozilla::ipc::ActorLifecycleProxy*, ...",
          "file": "ipc/glue/MessageChannel.cpp",
          "line": 1509,
          "raw": "5  libxul.so  mozilla::ipc::MessageChannel::RunMessage(mozilla::ipc::ActorLifecycleProxy*, ...  ipc/glue/MessageChannel.cpp:1509"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::ipc::MessageChannel::MessageTask::Run()",
          "file": "ipc/glue/MessageChannel.cpp",
          "line": 1611,
          "raw": "5  libxul.so  mozilla::ipc::MessageChannel::MessageTask::Run()  ipc/glue/MessageChannel.cpp:1611"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}