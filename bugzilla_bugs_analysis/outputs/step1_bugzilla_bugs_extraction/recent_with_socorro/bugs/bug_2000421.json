{
  "bug_id": "2000421",
  "summary": "Crash in [@ libgobject-2.0.so.0]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "Widget: Gtk",
  "version": "Firefox 147",
  "severity": "--",
  "priority": "--",
  "creation_time": "2025-11-16T06:24:55Z",
  "last_change_time": "2025-11-18T19:38:43Z",
  "is_recent": true,
  "crash_signature_raw": "[@ libgobject-2.0.so.0] [@ g_type_check_instance_cast]",
  "crash_signatures": [
    "libgobject-2.0.so.0",
    "g_type_check_instance_cast"
  ],
  "keywords": [
    "regression"
  ],
  "regressed_by": [
    1998657
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=2000421",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/3dd10302-c94b-4601-8887-df6af0251116",
      "crash_id": "3dd10302-c94b-4601-8887-df6af0251116",
      "comment_index": 0,
      "comment_text": "I ran Firefox 147.0a1 20251115204042 on Wayland in Plasma 6.5.2 in a Fedora 43 KDE installation. I had previously enabled the menu bar. I had three tabs open. I closed two of the tabs individually. I closed Firefox. Firefox crashed in libgobject-2.0.so.0@0x2ea08 according to the trace. Using gdb /usr/lib64/libgobject-2.0.so.0, that address is in g_type_check_instance_cast in glib2-0:2.86.1-5.fc43.x86_64 as follows.\n\n(gdb) l *0x2ea08\n0x2ea08 is in g_type_check_instance_cast (../gobject/gtype.c:3949).\n3944          if (type_instance->g_class)\n3945            {\n3946              TypeNode *node, *iface;\n3947              gboolean is_instantiatable, check;\n3948              \n3949              node = lookup_type_node_I (type_instance->g_class->g_type);\n3950              is_instantiatable = node && node->is_instantiatable;\n3951              iface = lookup_type_node_I (iface_type);\n3952              check = is_instantiatable && iface && type_node_conforms_to_U (node, iface, TRUE, FALSE);\n3953              if (check)\n\nThis was the first crash of this type that I've seen. The crash address was 0xe5e5e5e5e5e5e5e5 which might indicate the memory had been freed.\n\nCrash report: https://crash-stats.mozilla.org/report/index/3dd10302-c94b-4601-8887-df6af0251116\n\nReason:\n```\nSIGSEGV / SI_KERNEL\n```\n\nTop 10 frames:\n```\n0  libgobject-2.0.so.0  libgobject-2.0.so.0@0x2ea08\n1  libxul.so  nsWindow::Destroy()  widget/gtk/nsWindow.cpp:744\n2  libxul.so  mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void (FdWatcher:...  xpcom/threads/nsThreadUtils.h:1083\n2  libxul.so  std::__invoke_impl<void, mozilla::detail::RunnableMethodArguments<>::apply<Fd...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/bits/invoke.h:60\n2  libxul.so  std::__invoke<mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, vo...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/bits/invoke.h:95\n2  libxul.so  _ZSt12__apply_implIZN7mozilla6detail23RunnableMethodArgumentsIJEE5applyI9FdWa...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/tuple:1740\n2  libxul.so  std::apply<mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void ...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/tuple:1751\n2  libxul.so  mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void (FdWatcher:...  xpcom/threads/nsThreadUtils.h:1081\n2  libxul.so  mozilla::detail::RunnableMethodImpl<FdWatcher*, void (FdWatcher::*)(), true, ...  xpcom/threads/nsThreadUtils.h:1132\n3  libxul.so  mozilla::RunnableTask::Run()  xpcom/threads/TaskController.cpp:705\n```"
    }
  ],
  "socorro_crash_ids": [
    "3dd10302-c94b-4601-8887-df6af0251116"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17764282,
      "comment_count": 0,
      "creator": "matt.fagnani@bell.net",
      "creation_time": "2025-11-16T06:24:55Z",
      "raw_text": "I ran Firefox 147.0a1 20251115204042 on Wayland in Plasma 6.5.2 in a Fedora 43 KDE installation. I had previously enabled the menu bar. I had three tabs open. I closed two of the tabs individually. I closed Firefox. Firefox crashed in libgobject-2.0.so.0@0x2ea08 according to the trace. Using gdb /usr/lib64/libgobject-2.0.so.0, that address is in g_type_check_instance_cast in glib2-0:2.86.1-5.fc43.x86_64 as follows.\n\n(gdb) l *0x2ea08\n0x2ea08 is in g_type_check_instance_cast (../gobject/gtype.c:3949).\n3944          if (type_instance->g_class)\n3945            {\n3946              TypeNode *node, *iface;\n3947              gboolean is_instantiatable, check;\n3948              \n3949              node = lookup_type_node_I (type_instance->g_class->g_type);\n3950              is_instantiatable = node && node->is_instantiatable;\n3951              iface = lookup_type_node_I (iface_type);\n3952              check = is_instantiatable && iface && type_node_conforms_to_U (node, iface, TRUE, FALSE);\n3953              if (check)\n\nThis was the first crash of this type that I've seen. The crash address was 0xe5e5e5e5e5e5e5e5 which might indicate the memory had been freed.\n\nCrash report: https://crash-stats.mozilla.org/report/index/3dd10302-c94b-4601-8887-df6af0251116\n\nReason:\n```\nSIGSEGV / SI_KERNEL\n```\n\nTop 10 frames:\n```\n0  libgobject-2.0.so.0  libgobject-2.0.so.0@0x2ea08\n1  libxul.so  nsWindow::Destroy()  widget/gtk/nsWindow.cpp:744\n2  libxul.so  mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void (FdWatcher:...  xpcom/threads/nsThreadUtils.h:1083\n2  libxul.so  std::__invoke_impl<void, mozilla::detail::RunnableMethodArguments<>::apply<Fd...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/bits/invoke.h:60\n2  libxul.so  std::__invoke<mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, vo...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/bits/invoke.h:95\n2  libxul.so  _ZSt12__apply_implIZN7mozilla6detail23RunnableMethodArgumentsIJEE5applyI9FdWa...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/tuple:1740\n2  libxul.so  std::apply<mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void ...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/tuple:1751\n2  libxul.so  mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void (FdWatcher:...  xpcom/threads/nsThreadUtils.h:1081\n2  libxul.so  mozilla::detail::RunnableMethodImpl<FdWatcher*, void (FdWatcher::*)(), true, ...  xpcom/threads/nsThreadUtils.h:1132\n3  libxul.so  mozilla::RunnableTask::Run()  xpcom/threads/TaskController.cpp:705\n```",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "ns[A-Z]\\w+::\\w+",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 1,
          "module": "libxul.so",
          "function": "nsWindow::Destroy()",
          "file": "widget/gtk/nsWindow.cpp",
          "line": 744,
          "raw": "1  libxul.so  nsWindow::Destroy()  widget/gtk/nsWindow.cpp:744"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void (FdWatcher:...",
          "file": "xpcom/threads/nsThreadUtils.h",
          "line": 1083,
          "raw": "2  libxul.so  mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void (FdWatcher:...  xpcom/threads/nsThreadUtils.h:1083"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "std::__invoke_impl<void, mozilla::detail::RunnableMethodArguments<>::apply<Fd...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/bits/invoke.h:60",
          "file": "",
          "line": null,
          "raw": "2  libxul.so  std::__invoke_impl<void, mozilla::detail::RunnableMethodArguments<>::apply<Fd...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/bits/invoke.h:60"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "std::__invoke<mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, vo...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/bits/invoke.h:95",
          "file": "",
          "line": null,
          "raw": "2  libxul.so  std::__invoke<mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, vo...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/bits/invoke.h:95"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "_ZSt12__apply_implIZN7mozilla6detail23RunnableMethodArgumentsIJEE5applyI9FdWa...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/tuple:1740",
          "file": "",
          "line": null,
          "raw": "2  libxul.so  _ZSt12__apply_implIZN7mozilla6detail23RunnableMethodArgumentsIJEE5applyI9FdWa...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/tuple:1740"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "std::apply<mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void ...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/tuple:1751",
          "file": "",
          "line": null,
          "raw": "2  libxul.so  std::apply<mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void ...  /builds/worker/fetches/sysroot-x86_64-linux-gnu/usr/include/c++/10/tuple:1751"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void (FdWatcher:...",
          "file": "xpcom/threads/nsThreadUtils.h",
          "line": 1081,
          "raw": "2  libxul.so  mozilla::detail::RunnableMethodArguments<>::apply<FdWatcher, void (FdWatcher:...  xpcom/threads/nsThreadUtils.h:1081"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::detail::RunnableMethodImpl<FdWatcher*, void (FdWatcher::*)(), true, ...",
          "file": "xpcom/threads/nsThreadUtils.h",
          "line": 1132,
          "raw": "2  libxul.so  mozilla::detail::RunnableMethodImpl<FdWatcher*, void (FdWatcher::*)(), true, ...  xpcom/threads/nsThreadUtils.h:1132"
        },
        {
          "frame_index": 3,
          "module": "libxul.so",
          "function": "mozilla::RunnableTask::Run()",
          "file": "xpcom/threads/TaskController.cpp",
          "line": 705,
          "raw": "3  libxul.so  mozilla::RunnableTask::Run()  xpcom/threads/TaskController.cpp:705"
        }
      ],
      "frame_count": 9
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 9
}