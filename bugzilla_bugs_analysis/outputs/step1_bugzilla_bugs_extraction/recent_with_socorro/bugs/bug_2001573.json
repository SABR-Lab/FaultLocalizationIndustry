{
  "bug_id": "2001573",
  "summary": "Crash in [@ mozilla::net::HttpConnectionUDP::Close]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "Networking: HTTP",
  "version": "unspecified",
  "severity": "S3",
  "priority": "P2",
  "creation_time": "2025-11-21T09:46:53Z",
  "last_change_time": "2025-12-09T20:18:47Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::net::HttpConnectionUDP::Close]",
  "crash_signatures": [
    "mozilla::net::HttpConnectionUDP::Close"
  ],
  "keywords": [
    "crash",
    "regression",
    "topcrash"
  ],
  "regressed_by": [],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=2001573",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/3c9657a9-3ceb-4a23-973b-461690251121",
      "crash_id": "3c9657a9-3ceb-4a23-973b-461690251121",
      "comment_index": 0,
      "comment_text": "10 crashes from 5 installs of Firefox 147.0a1 20251120203629 on macOS and Windows\n\nCrash report: https://crash-stats.mozilla.org/report/index/3c9657a9-3ceb-4a23-973b-461690251121\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(!mHttp3Session || mHttp3Session->IsClosed()) (Http3Session should already be closed)\n```\n\nTop 10 frames:\n```\n0  xul.dll  mozilla::net::HttpConnectionUDP::Close(nsresult, bool)  netwerk/protocol/http/HttpConnectionUDP.cpp:622\n1  xul.dll  mozilla::net::nsHttpConnectionMgr::OnMsgReclaimConnection(mozilla::net::HttpC...  netwerk/protocol/http/nsHttpConnectionMgr.cpp:2584\n2  xul.dll  mozilla::net::nsHttpConnectionMgr::ReclaimConnection::<lambda_49>::operator()...  netwerk/protocol/http/nsHttpConnectionMgr.cpp:569\n2  xul.dll  mozilla::detail::RunnableFunction<`lambda at /builds/worker/checkouts/gecko/n...  xpcom/threads/nsThreadUtils.h:549\n3  xul.dll  nsThread::ProcessNextEvent(bool, bool*)  xpcom/threads/nsThread.cpp:1158\n3  xul.dll  NS_ProcessNextEvent(nsIThread*, bool)  xpcom/threads/nsThreadUtils.cpp:461\n4  xul.dll  mozilla::net::nsSocketTransportService::Run()  netwerk/base/nsSocketTransportService2.cpp:1212\n5  xul.dll  nsThread::ProcessNextEvent(bool, bool*)  xpcom/threads/nsThread.cpp:1158\n5  xul.dll  NS_ProcessNextEvent(nsIThread*, bool)  xpcom/threads/nsThreadUtils.cpp:461\n6  xul.dll  mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*)  ipc/glue/MessagePump.cpp:299\n```"
    }
  ],
  "socorro_crash_ids": [
    "3c9657a9-3ceb-4a23-973b-461690251121"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17773741,
      "comment_count": 0,
      "creator": "aryx.bugmail@gmx-topmail.de",
      "creation_time": "2025-11-21T09:46:53Z",
      "raw_text": "10 crashes from 5 installs of Firefox 147.0a1 20251120203629 on macOS and Windows\n\nCrash report: https://crash-stats.mozilla.org/report/index/3c9657a9-3ceb-4a23-973b-461690251121\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(!mHttp3Session || mHttp3Session->IsClosed()) (Http3Session should already be closed)\n```\n\nTop 10 frames:\n```\n0  xul.dll  mozilla::net::HttpConnectionUDP::Close(nsresult, bool)  netwerk/protocol/http/HttpConnectionUDP.cpp:622\n1  xul.dll  mozilla::net::nsHttpConnectionMgr::OnMsgReclaimConnection(mozilla::net::HttpC...  netwerk/protocol/http/nsHttpConnectionMgr.cpp:2584\n2  xul.dll  mozilla::net::nsHttpConnectionMgr::ReclaimConnection::<lambda_49>::operator()...  netwerk/protocol/http/nsHttpConnectionMgr.cpp:569\n2  xul.dll  mozilla::detail::RunnableFunction<`lambda at /builds/worker/checkouts/gecko/n...  xpcom/threads/nsThreadUtils.h:549\n3  xul.dll  nsThread::ProcessNextEvent(bool, bool*)  xpcom/threads/nsThread.cpp:1158\n3  xul.dll  NS_ProcessNextEvent(nsIThread*, bool)  xpcom/threads/nsThreadUtils.cpp:461\n4  xul.dll  mozilla::net::nsSocketTransportService::Run()  netwerk/base/nsSocketTransportService2.cpp:1212\n5  xul.dll  nsThread::ProcessNextEvent(bool, bool*)  xpcom/threads/nsThread.cpp:1158\n5  xul.dll  NS_ProcessNextEvent(nsIThread*, bool)  xpcom/threads/nsThreadUtils.cpp:461\n6  xul.dll  mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*)  ipc/glue/MessagePump.cpp:299\n```",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "ns[A-Z]\\w+::\\w+",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "mozilla::net::HttpConnectionUDP::Close(nsresult, bool)",
          "file": "netwerk/protocol/http/HttpConnectionUDP.cpp",
          "line": 622,
          "raw": "0  xul.dll  mozilla::net::HttpConnectionUDP::Close(nsresult, bool)  netwerk/protocol/http/HttpConnectionUDP.cpp:622"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozilla::net::nsHttpConnectionMgr::OnMsgReclaimConnection(mozilla::net::HttpC...",
          "file": "netwerk/protocol/http/nsHttpConnectionMgr.cpp",
          "line": 2584,
          "raw": "1  xul.dll  mozilla::net::nsHttpConnectionMgr::OnMsgReclaimConnection(mozilla::net::HttpC...  netwerk/protocol/http/nsHttpConnectionMgr.cpp:2584"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "mozilla::net::nsHttpConnectionMgr::ReclaimConnection::<lambda_49>::operator()...",
          "file": "netwerk/protocol/http/nsHttpConnectionMgr.cpp",
          "line": 569,
          "raw": "2  xul.dll  mozilla::net::nsHttpConnectionMgr::ReclaimConnection::<lambda_49>::operator()...  netwerk/protocol/http/nsHttpConnectionMgr.cpp:569"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "mozilla::detail::RunnableFunction<`lambda at /builds/worker/checkouts/gecko/n...",
          "file": "xpcom/threads/nsThreadUtils.h",
          "line": 549,
          "raw": "2  xul.dll  mozilla::detail::RunnableFunction<`lambda at /builds/worker/checkouts/gecko/n...  xpcom/threads/nsThreadUtils.h:549"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "nsThread::ProcessNextEvent(bool, bool*)",
          "file": "xpcom/threads/nsThread.cpp",
          "line": 1158,
          "raw": "3  xul.dll  nsThread::ProcessNextEvent(bool, bool*)  xpcom/threads/nsThread.cpp:1158"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "NS_ProcessNextEvent(nsIThread*, bool)",
          "file": "xpcom/threads/nsThreadUtils.cpp",
          "line": 461,
          "raw": "3  xul.dll  NS_ProcessNextEvent(nsIThread*, bool)  xpcom/threads/nsThreadUtils.cpp:461"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "mozilla::net::nsSocketTransportService::Run()",
          "file": "netwerk/base/nsSocketTransportService2.cpp",
          "line": 1212,
          "raw": "4  xul.dll  mozilla::net::nsSocketTransportService::Run()  netwerk/base/nsSocketTransportService2.cpp:1212"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "nsThread::ProcessNextEvent(bool, bool*)",
          "file": "xpcom/threads/nsThread.cpp",
          "line": 1158,
          "raw": "5  xul.dll  nsThread::ProcessNextEvent(bool, bool*)  xpcom/threads/nsThread.cpp:1158"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "NS_ProcessNextEvent(nsIThread*, bool)",
          "file": "xpcom/threads/nsThreadUtils.cpp",
          "line": 461,
          "raw": "5  xul.dll  NS_ProcessNextEvent(nsIThread*, bool)  xpcom/threads/nsThreadUtils.cpp:461"
        },
        {
          "frame_index": 6,
          "module": "xul.dll",
          "function": "mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*)",
          "file": "ipc/glue/MessagePump.cpp",
          "line": 299,
          "raw": "6  xul.dll  mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*)  ipc/glue/MessagePump.cpp:299"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}