{
  "bug_id": "2001756",
  "summary": "Crash in [@ js::jit::ObjectKeysReplacer::escapes]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "JavaScript Engine: JIT",
  "version": "unspecified",
  "severity": "--",
  "priority": "--",
  "creation_time": "2025-11-22T00:20:05Z",
  "last_change_time": "2025-12-14T18:40:46Z",
  "is_recent": true,
  "crash_signature_raw": "[@ js::jit::ObjectKeysReplacer::escapes]\r\n[@ js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)]",
  "crash_signatures": [
    "js::jit::ObjectKeysReplacer::escapes",
    "js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)"
  ],
  "keywords": [
    "crash",
    "regression"
  ],
  "regressed_by": [
    1995077
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=2001756",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/4501e9f6-4228-46c2-b3a7-1231b0251121",
      "crash_id": "4501e9f6-4228-46c2-b3a7-1231b0251121",
      "comment_index": 0,
      "comment_text": "Crash report: https://crash-stats.mozilla.org/report/index/4501e9f6-4228-46c2-b3a7-1231b0251121\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(shape == guard->shape())\n```\n\nTop 10 frames:\n```\n0  xul.dll  js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)  js/src/jit/ScalarReplacement.cpp:3898\n1  xul.dll  js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)  js/src/jit/ScalarReplacement.cpp:3898\n2  xul.dll  js::jit::ReplaceObjectKeys(js::jit::MIRGenerator const*, js::jit::MIRGraph&)  js/src/jit/ScalarReplacement.cpp:4212\n2  xul.dll  js::jit::OptimizeMIR(js::jit::MIRGenerator*)  js/src/jit/Ion.cpp:1091\n3  xul.dll  js::jit::CompileBackEnd(js::jit::MIRGenerator*, js::jit::WarpSnapshot*)  js/src/jit/Ion.cpp:1683\n4  xul.dll  js::jit::IonCompileTask::runTask()  js/src/jit/IonCompileTask.cpp:52\n4  xul.dll  js::jit::IonCompileTask::runHelperThreadTask(js::AutoLockHelperThreadState&)  js/src/jit/IonCompileTask.cpp:30\n5  xul.dll  js::GlobalHelperThreadState::runTaskLocked(JS::HelperThreadTask*, js::AutoLoc...  js/src/vm/HelperThreads.cpp:668\n5  xul.dll  js::GlobalHelperThreadState::runOneTask(JS::HelperThreadTask*, js::AutoLockHe...  js/src/vm/HelperThreads.cpp:624\n5  xul.dll  JS::RunHelperThreadTask(JS::HelperThreadTask*)  js/src/vm/HelperThreads.cpp:613\n```\n\nLooks like this was just added in bug 1995077."
    }
  ],
  "socorro_crash_ids": [
    "4501e9f6-4228-46c2-b3a7-1231b0251121"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17774912,
      "comment_count": 0,
      "creator": "continuation@gmail.com",
      "creation_time": "2025-11-22T00:20:05Z",
      "raw_text": "Crash report: https://crash-stats.mozilla.org/report/index/4501e9f6-4228-46c2-b3a7-1231b0251121\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(shape == guard->shape())\n```\n\nTop 10 frames:\n```\n0  xul.dll  js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)  js/src/jit/ScalarReplacement.cpp:3898\n1  xul.dll  js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)  js/src/jit/ScalarReplacement.cpp:3898\n2  xul.dll  js::jit::ReplaceObjectKeys(js::jit::MIRGenerator const*, js::jit::MIRGraph&)  js/src/jit/ScalarReplacement.cpp:4212\n2  xul.dll  js::jit::OptimizeMIR(js::jit::MIRGenerator*)  js/src/jit/Ion.cpp:1091\n3  xul.dll  js::jit::CompileBackEnd(js::jit::MIRGenerator*, js::jit::WarpSnapshot*)  js/src/jit/Ion.cpp:1683\n4  xul.dll  js::jit::IonCompileTask::runTask()  js/src/jit/IonCompileTask.cpp:52\n4  xul.dll  js::jit::IonCompileTask::runHelperThreadTask(js::AutoLockHelperThreadState&)  js/src/jit/IonCompileTask.cpp:30\n5  xul.dll  js::GlobalHelperThreadState::runTaskLocked(JS::HelperThreadTask*, js::AutoLoc...  js/src/vm/HelperThreads.cpp:668\n5  xul.dll  js::GlobalHelperThreadState::runOneTask(JS::HelperThreadTask*, js::AutoLockHe...  js/src/vm/HelperThreads.cpp:624\n5  xul.dll  JS::RunHelperThreadTask(JS::HelperThreadTask*)  js/src/vm/HelperThreads.cpp:613\n```\n\nLooks like this was just added in bug 1995077.",
      "matched_patterns": [
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)",
          "file": "js/src/jit/ScalarReplacement.cpp",
          "line": 3898,
          "raw": "0  xul.dll  js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)  js/src/jit/ScalarReplacement.cpp:3898"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)",
          "file": "js/src/jit/ScalarReplacement.cpp",
          "line": 3898,
          "raw": "1  xul.dll  js::jit::ObjectKeysReplacer::escapes(js::jit::MInstruction*)  js/src/jit/ScalarReplacement.cpp:3898"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "js::jit::ReplaceObjectKeys(js::jit::MIRGenerator const*, js::jit::MIRGraph&)",
          "file": "js/src/jit/ScalarReplacement.cpp",
          "line": 4212,
          "raw": "2  xul.dll  js::jit::ReplaceObjectKeys(js::jit::MIRGenerator const*, js::jit::MIRGraph&)  js/src/jit/ScalarReplacement.cpp:4212"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "js::jit::OptimizeMIR(js::jit::MIRGenerator*)",
          "file": "js/src/jit/Ion.cpp",
          "line": 1091,
          "raw": "2  xul.dll  js::jit::OptimizeMIR(js::jit::MIRGenerator*)  js/src/jit/Ion.cpp:1091"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "js::jit::CompileBackEnd(js::jit::MIRGenerator*, js::jit::WarpSnapshot*)",
          "file": "js/src/jit/Ion.cpp",
          "line": 1683,
          "raw": "3  xul.dll  js::jit::CompileBackEnd(js::jit::MIRGenerator*, js::jit::WarpSnapshot*)  js/src/jit/Ion.cpp:1683"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "js::jit::IonCompileTask::runTask()",
          "file": "js/src/jit/IonCompileTask.cpp",
          "line": 52,
          "raw": "4  xul.dll  js::jit::IonCompileTask::runTask()  js/src/jit/IonCompileTask.cpp:52"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "js::jit::IonCompileTask::runHelperThreadTask(js::AutoLockHelperThreadState&)",
          "file": "js/src/jit/IonCompileTask.cpp",
          "line": 30,
          "raw": "4  xul.dll  js::jit::IonCompileTask::runHelperThreadTask(js::AutoLockHelperThreadState&)  js/src/jit/IonCompileTask.cpp:30"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "js::GlobalHelperThreadState::runTaskLocked(JS::HelperThreadTask*, js::AutoLoc...",
          "file": "js/src/vm/HelperThreads.cpp",
          "line": 668,
          "raw": "5  xul.dll  js::GlobalHelperThreadState::runTaskLocked(JS::HelperThreadTask*, js::AutoLoc...  js/src/vm/HelperThreads.cpp:668"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "js::GlobalHelperThreadState::runOneTask(JS::HelperThreadTask*, js::AutoLockHe...",
          "file": "js/src/vm/HelperThreads.cpp",
          "line": 624,
          "raw": "5  xul.dll  js::GlobalHelperThreadState::runOneTask(JS::HelperThreadTask*, js::AutoLockHe...  js/src/vm/HelperThreads.cpp:624"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "JS::RunHelperThreadTask(JS::HelperThreadTask*)",
          "file": "js/src/vm/HelperThreads.cpp",
          "line": 613,
          "raw": "5  xul.dll  JS::RunHelperThreadTask(JS::HelperThreadTask*)  js/src/vm/HelperThreads.cpp:613"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}