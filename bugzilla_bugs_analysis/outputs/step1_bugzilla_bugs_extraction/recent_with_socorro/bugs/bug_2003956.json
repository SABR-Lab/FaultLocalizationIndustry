{
  "bug_id": "2003956",
  "summary": "Crash in [@ mozilla::MustConsumeMicroTask::~MustConsumeMicroTask]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "JavaScript Engine",
  "version": "unspecified",
  "severity": "--",
  "priority": "--",
  "creation_time": "2025-12-04T00:23:10Z",
  "last_change_time": "2025-12-10T19:44:10Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::MustConsumeMicroTask::~MustConsumeMicroTask]",
  "crash_signatures": [
    "mozilla::MustConsumeMicroTask::~MustConsumeMicroTask"
  ],
  "keywords": [
    "crash",
    "regression"
  ],
  "regressed_by": [
    1997192
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=2003956",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/e4403339-c02f-4e94-8e4b-dde830251203",
      "crash_id": "e4403339-c02f-4e94-8e4b-dde830251203",
      "comment_index": 0,
      "comment_text": "Crash report: https://crash-stats.mozilla.org/report/index/e4403339-c02f-4e94-8e4b-dde830251203\n\nMOZ_CRASH Reason:\n```\nMOZ_CRASH(Didn't consume MicroTask)\n```\n\nTop 10 frames:\n```\n0  libxul.so  MOZ_CrashSequence(void*, long)  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/Assertions.h:237\n0  libxul.so  mozilla::MustConsumeMicroTask::~MustConsumeMicroTask()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h:127\n0  libxul.so  JS::Rooted<mozilla::MustConsumeMicroTask>::~Rooted()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/js/RootingAPI.h:1228\n0  libxul.so  mozilla::CycleCollectedJSContext::PerformMicroTaskCheckPoint(bool)  /usr/src/debug/firefox-nightly/mozilla-central/xpcom/base/CycleCollectedJSContext.cpp:1264\n1  libxul.so  mozilla::CycleCollectedJSContext::LeaveMicroTask()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h:445\n1  libxul.so  mozilla::dom::CallSetup::~CallSetup()  /usr/src/debug/firefox-nightly/mozilla-central/dom/bindings/CallbackObject.cpp:490\n2  libxul.so  mozilla::dom::MessageListener::ReceiveMessage(mozilla::dom::ReceiveMessageArg...  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/dom/MessageManagerBinding.h:580\n2  libxul.so  mozilla::dom::JSActor::CallReceiveMessage(JSContext*, mozilla::dom::JSActorMe...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp:292\n3  libxul.so  mozilla::dom::JSActor::ReceiveMessage(JSContext*, mozilla::dom::JSActorMessag...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp:308\n3  libxul.so  mozilla::dom::JSActorManager::ReceiveRawMessage(mozilla::dom::JSActorMessageM...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActorManager.cpp:215\n```"
    }
  ],
  "socorro_crash_ids": [
    "e4403339-c02f-4e94-8e4b-dde830251203"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17792407,
      "comment_count": 0,
      "creator": "ryanvm@gmail.com",
      "creation_time": "2025-12-04T00:23:10Z",
      "raw_text": "Crash report: https://crash-stats.mozilla.org/report/index/e4403339-c02f-4e94-8e4b-dde830251203\n\nMOZ_CRASH Reason:\n```\nMOZ_CRASH(Didn't consume MicroTask)\n```\n\nTop 10 frames:\n```\n0  libxul.so  MOZ_CrashSequence(void*, long)  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/Assertions.h:237\n0  libxul.so  mozilla::MustConsumeMicroTask::~MustConsumeMicroTask()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h:127\n0  libxul.so  JS::Rooted<mozilla::MustConsumeMicroTask>::~Rooted()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/js/RootingAPI.h:1228\n0  libxul.so  mozilla::CycleCollectedJSContext::PerformMicroTaskCheckPoint(bool)  /usr/src/debug/firefox-nightly/mozilla-central/xpcom/base/CycleCollectedJSContext.cpp:1264\n1  libxul.so  mozilla::CycleCollectedJSContext::LeaveMicroTask()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h:445\n1  libxul.so  mozilla::dom::CallSetup::~CallSetup()  /usr/src/debug/firefox-nightly/mozilla-central/dom/bindings/CallbackObject.cpp:490\n2  libxul.so  mozilla::dom::MessageListener::ReceiveMessage(mozilla::dom::ReceiveMessageArg...  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/dom/MessageManagerBinding.h:580\n2  libxul.so  mozilla::dom::JSActor::CallReceiveMessage(JSContext*, mozilla::dom::JSActorMe...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp:292\n3  libxul.so  mozilla::dom::JSActor::ReceiveMessage(JSContext*, mozilla::dom::JSActorMessag...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp:308\n3  libxul.so  mozilla::dom::JSActorManager::ReceiveRawMessage(mozilla::dom::JSActorMessageM...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActorManager.cpp:215\n```",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "MOZ_CrashSequence(void*, long)",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/Assertions.h",
          "line": 237,
          "raw": "0  libxul.so  MOZ_CrashSequence(void*, long)  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/Assertions.h:237"
        },
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "mozilla::MustConsumeMicroTask::~MustConsumeMicroTask()",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h",
          "line": 127,
          "raw": "0  libxul.so  mozilla::MustConsumeMicroTask::~MustConsumeMicroTask()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h:127"
        },
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "JS::Rooted<mozilla::MustConsumeMicroTask>::~Rooted()",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/js/RootingAPI.h",
          "line": 1228,
          "raw": "0  libxul.so  JS::Rooted<mozilla::MustConsumeMicroTask>::~Rooted()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/js/RootingAPI.h:1228"
        },
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "mozilla::CycleCollectedJSContext::PerformMicroTaskCheckPoint(bool)",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/base/CycleCollectedJSContext.cpp",
          "line": 1264,
          "raw": "0  libxul.so  mozilla::CycleCollectedJSContext::PerformMicroTaskCheckPoint(bool)  /usr/src/debug/firefox-nightly/mozilla-central/xpcom/base/CycleCollectedJSContext.cpp:1264"
        },
        {
          "frame_index": 1,
          "module": "libxul.so",
          "function": "mozilla::CycleCollectedJSContext::LeaveMicroTask()",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h",
          "line": 445,
          "raw": "1  libxul.so  mozilla::CycleCollectedJSContext::LeaveMicroTask()  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h:445"
        },
        {
          "frame_index": 1,
          "module": "libxul.so",
          "function": "mozilla::dom::CallSetup::~CallSetup()",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/bindings/CallbackObject.cpp",
          "line": 490,
          "raw": "1  libxul.so  mozilla::dom::CallSetup::~CallSetup()  /usr/src/debug/firefox-nightly/mozilla-central/dom/bindings/CallbackObject.cpp:490"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::dom::MessageListener::ReceiveMessage(mozilla::dom::ReceiveMessageArg...",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/dom/MessageManagerBinding.h",
          "line": 580,
          "raw": "2  libxul.so  mozilla::dom::MessageListener::ReceiveMessage(mozilla::dom::ReceiveMessageArg...  /usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/dom/MessageManagerBinding.h:580"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::dom::JSActor::CallReceiveMessage(JSContext*, mozilla::dom::JSActorMe...",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp",
          "line": 292,
          "raw": "2  libxul.so  mozilla::dom::JSActor::CallReceiveMessage(JSContext*, mozilla::dom::JSActorMe...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp:292"
        },
        {
          "frame_index": 3,
          "module": "libxul.so",
          "function": "mozilla::dom::JSActor::ReceiveMessage(JSContext*, mozilla::dom::JSActorMessag...",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp",
          "line": 308,
          "raw": "3  libxul.so  mozilla::dom::JSActor::ReceiveMessage(JSContext*, mozilla::dom::JSActorMessag...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp:308"
        },
        {
          "frame_index": 3,
          "module": "libxul.so",
          "function": "mozilla::dom::JSActorManager::ReceiveRawMessage(mozilla::dom::JSActorMessageM...",
          "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActorManager.cpp",
          "line": 215,
          "raw": "3  libxul.so  mozilla::dom::JSActorManager::ReceiveRawMessage(mozilla::dom::JSActorMessageM...  /usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActorManager.cpp:215"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}