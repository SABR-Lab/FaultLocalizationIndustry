{
  "bug_id": "2004939",
  "summary": "Crash in [@ mozilla::net::HostRecordQueue::AddToEvictionQ]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "Networking",
  "version": "Firefox 148",
  "severity": "--",
  "priority": "--",
  "creation_time": "2025-12-09T13:52:33Z",
  "last_change_time": "2025-12-11T15:48:14Z",
  "is_recent": true,
  "crash_signature_raw": "[@ mozilla::net::HostRecordQueue::AddToEvictionQ]",
  "crash_signatures": [
    "mozilla::net::HostRecordQueue::AddToEvictionQ"
  ],
  "keywords": [
    "crash",
    "regression",
    "topcrash"
  ],
  "regressed_by": [
    1999691
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=2004939",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/3f3c00cf-6bcd-480b-a083-7ad950251209",
      "crash_id": "3f3c00cf-6bcd-480b-a083-7ad950251209",
      "comment_index": 0,
      "comment_text": "Crash report: https://crash-stats.mozilla.org/report/index/3f3c00cf-6bcd-480b-a083-7ad950251209\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(!inEvictionQ) (Already in eviction queue)\n```\n\nTop 10 frames:\n```\n0  xul.dll  mozilla::net::HostRecordQueue::AddToEvictionQ(nsHostRecord*, unsigned int, ns...  netwerk/dns/HostRecordQueue.cpp:47\n1  xul.dll  nsHostResolver::AddToEvictionQ(nsHostRecord*, mozilla::detail::BaseAutoLock<m...  netwerk/dns/nsHostResolver.cpp:1356\n1  xul.dll  nsHostResolver::FromUnspecEntry(nsHostRecord*, nsTSubstring<char> const&, nsT...  netwerk/dns/nsHostResolver.cpp:781\n1  xul.dll  nsHostResolver::ResolveHost(nsTSubstring<char> const&, nsTSubstring<char> con...  netwerk/dns/nsHostResolver.cpp:592\n2  xul.dll  nsDNSService::AsyncResolveInternal(nsTSubstring<char> const&, unsigned short,...  netwerk/dns/nsDNSService2.cpp:1072\n3  xul.dll  mozilla::net::DnsAndConnectSocket::TransportSetup::ResolveHost(mozilla::net::...  netwerk/protocol/http/DnsAndConnectSocket.cpp:1379\n4  xul.dll  mozilla::net::DnsAndConnectSocket::TransportSetup::Init(mozilla::net::DnsAndC...  netwerk/protocol/http/DnsAndConnectSocket.cpp:933\n4  xul.dll  mozilla::net::DnsAndConnectSocket::SetupEvent(mozilla::net::DnsAndConnectSock...  netwerk/protocol/http/DnsAndConnectSocket.cpp:249\n5  xul.dll  mozilla::net::DnsAndConnectSocket::Init(mozilla::net::ConnectionEntry*)  netwerk/protocol/http/DnsAndConnectSocket.cpp:128\n5  xul.dll  mozilla::net::ConnectionEntry::CreateDnsAndConnectSocket(mozilla::net::nsAHtt...  netwerk/protocol/http/ConnectionEntry.cpp:1083\n```\n\nCrash happens randomly by reloading pages.\nFrom Top 10 frames, apparently, this is regression from Bug 1999691"
    }
  ],
  "socorro_crash_ids": [
    "3f3c00cf-6bcd-480b-a083-7ad950251209"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 17799939,
      "comment_count": 0,
      "creator": "yamadat501@gmail.com",
      "creation_time": "2025-12-09T13:52:33Z",
      "raw_text": "Crash report: https://crash-stats.mozilla.org/report/index/3f3c00cf-6bcd-480b-a083-7ad950251209\n\nMOZ_CRASH Reason:\n```\nMOZ_DIAGNOSTIC_ASSERT(!inEvictionQ) (Already in eviction queue)\n```\n\nTop 10 frames:\n```\n0  xul.dll  mozilla::net::HostRecordQueue::AddToEvictionQ(nsHostRecord*, unsigned int, ns...  netwerk/dns/HostRecordQueue.cpp:47\n1  xul.dll  nsHostResolver::AddToEvictionQ(nsHostRecord*, mozilla::detail::BaseAutoLock<m...  netwerk/dns/nsHostResolver.cpp:1356\n1  xul.dll  nsHostResolver::FromUnspecEntry(nsHostRecord*, nsTSubstring<char> const&, nsT...  netwerk/dns/nsHostResolver.cpp:781\n1  xul.dll  nsHostResolver::ResolveHost(nsTSubstring<char> const&, nsTSubstring<char> con...  netwerk/dns/nsHostResolver.cpp:592\n2  xul.dll  nsDNSService::AsyncResolveInternal(nsTSubstring<char> const&, unsigned short,...  netwerk/dns/nsDNSService2.cpp:1072\n3  xul.dll  mozilla::net::DnsAndConnectSocket::TransportSetup::ResolveHost(mozilla::net::...  netwerk/protocol/http/DnsAndConnectSocket.cpp:1379\n4  xul.dll  mozilla::net::DnsAndConnectSocket::TransportSetup::Init(mozilla::net::DnsAndC...  netwerk/protocol/http/DnsAndConnectSocket.cpp:933\n4  xul.dll  mozilla::net::DnsAndConnectSocket::SetupEvent(mozilla::net::DnsAndConnectSock...  netwerk/protocol/http/DnsAndConnectSocket.cpp:249\n5  xul.dll  mozilla::net::DnsAndConnectSocket::Init(mozilla::net::ConnectionEntry*)  netwerk/protocol/http/DnsAndConnectSocket.cpp:128\n5  xul.dll  mozilla::net::ConnectionEntry::CreateDnsAndConnectSocket(mozilla::net::nsAHtt...  netwerk/protocol/http/ConnectionEntry.cpp:1083\n```\n\nCrash happens randomly by reloading pages.\nFrom Top 10 frames, apparently, this is regression from Bug 1999691",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "ns[A-Z]\\w+::\\w+",
        "(?i)(crash|stack)\\s*(trace|dump|report)"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "mozilla::net::HostRecordQueue::AddToEvictionQ(nsHostRecord*, unsigned int, ns...",
          "file": "netwerk/dns/HostRecordQueue.cpp",
          "line": 47,
          "raw": "0  xul.dll  mozilla::net::HostRecordQueue::AddToEvictionQ(nsHostRecord*, unsigned int, ns...  netwerk/dns/HostRecordQueue.cpp:47"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "nsHostResolver::AddToEvictionQ(nsHostRecord*, mozilla::detail::BaseAutoLock<m...",
          "file": "netwerk/dns/nsHostResolver.cpp",
          "line": 1356,
          "raw": "1  xul.dll  nsHostResolver::AddToEvictionQ(nsHostRecord*, mozilla::detail::BaseAutoLock<m...  netwerk/dns/nsHostResolver.cpp:1356"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "nsHostResolver::FromUnspecEntry(nsHostRecord*, nsTSubstring<char> const&, nsT...",
          "file": "netwerk/dns/nsHostResolver.cpp",
          "line": 781,
          "raw": "1  xul.dll  nsHostResolver::FromUnspecEntry(nsHostRecord*, nsTSubstring<char> const&, nsT...  netwerk/dns/nsHostResolver.cpp:781"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "nsHostResolver::ResolveHost(nsTSubstring<char> const&, nsTSubstring<char> con...",
          "file": "netwerk/dns/nsHostResolver.cpp",
          "line": 592,
          "raw": "1  xul.dll  nsHostResolver::ResolveHost(nsTSubstring<char> const&, nsTSubstring<char> con...  netwerk/dns/nsHostResolver.cpp:592"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "nsDNSService::AsyncResolveInternal(nsTSubstring<char> const&, unsigned short,...",
          "file": "netwerk/dns/nsDNSService2.cpp",
          "line": 1072,
          "raw": "2  xul.dll  nsDNSService::AsyncResolveInternal(nsTSubstring<char> const&, unsigned short,...  netwerk/dns/nsDNSService2.cpp:1072"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "mozilla::net::DnsAndConnectSocket::TransportSetup::ResolveHost(mozilla::net::...",
          "file": "netwerk/protocol/http/DnsAndConnectSocket.cpp",
          "line": 1379,
          "raw": "3  xul.dll  mozilla::net::DnsAndConnectSocket::TransportSetup::ResolveHost(mozilla::net::...  netwerk/protocol/http/DnsAndConnectSocket.cpp:1379"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "mozilla::net::DnsAndConnectSocket::TransportSetup::Init(mozilla::net::DnsAndC...",
          "file": "netwerk/protocol/http/DnsAndConnectSocket.cpp",
          "line": 933,
          "raw": "4  xul.dll  mozilla::net::DnsAndConnectSocket::TransportSetup::Init(mozilla::net::DnsAndC...  netwerk/protocol/http/DnsAndConnectSocket.cpp:933"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "mozilla::net::DnsAndConnectSocket::SetupEvent(mozilla::net::DnsAndConnectSock...",
          "file": "netwerk/protocol/http/DnsAndConnectSocket.cpp",
          "line": 249,
          "raw": "4  xul.dll  mozilla::net::DnsAndConnectSocket::SetupEvent(mozilla::net::DnsAndConnectSock...  netwerk/protocol/http/DnsAndConnectSocket.cpp:249"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "mozilla::net::DnsAndConnectSocket::Init(mozilla::net::ConnectionEntry*)",
          "file": "netwerk/protocol/http/DnsAndConnectSocket.cpp",
          "line": 128,
          "raw": "5  xul.dll  mozilla::net::DnsAndConnectSocket::Init(mozilla::net::ConnectionEntry*)  netwerk/protocol/http/DnsAndConnectSocket.cpp:128"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "mozilla::net::ConnectionEntry::CreateDnsAndConnectSocket(mozilla::net::nsAHtt...",
          "file": "netwerk/protocol/http/ConnectionEntry.cpp",
          "line": 1083,
          "raw": "5  xul.dll  mozilla::net::ConnectionEntry::CreateDnsAndConnectSocket(mozilla::net::nsAHtt...  netwerk/protocol/http/ConnectionEntry.cpp:1083"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10
}