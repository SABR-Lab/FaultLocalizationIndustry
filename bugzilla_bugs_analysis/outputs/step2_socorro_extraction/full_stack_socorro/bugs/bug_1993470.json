{
  "bug_id": "1993470",
  "summary": "Crash in [@ mozilla::wr::DCSurfaceVideo::AttachExternalImage]",
  "product": "Core",
  "component": "Graphics: WebRender",
  "creation_time": "2025-10-09T13:14:52Z",
  "crash_signatures": [
    "mozilla::wr::DCSurfaceVideo::AttachExternalImage"
  ],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1993470",
  "socorro_crash_ids": [
    "bea71c4e-c32b-4f1f-9e47-de6cc0251008"
  ],
  "stack_source": "socorro",
  "crash_id": "bea71c4e-c32b-4f1f-9e47-de6cc0251008",
  "socorro_metadata": {
    "signature": "",
    "crash_reason": "",
    "moz_crash_reason": "",
    "crashing_thread": {
      "index": 7,
      "name": "Renderer"
    }
  },
  "stack_trace": {
    "source": "socorro",
    "crash_id": "bea71c4e-c32b-4f1f-9e47-de6cc0251008",
    "frames": [
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "mozilla::wr::DCSurfaceVideo::AttachExternalImage(mozilla::wr::ExternalImageId)",
        "source": "gfx/webrender_bindings/DCLayerTree.cpp:1966",
        "file": "gfx/webrender_bindings/DCLayerTree.cpp",
        "line": 1966,
        "trust": "context"
      },
      {
        "frame_index": 1,
        "module": "xul.dll",
        "function": "webrender_bindings::bindings::impl$24::begin_frame(webrender_bindings::bindings::WrLayerCompositor*, webrender::composite::CompositorInputConfig*)",
        "source": "gfx/webrender_bindings/src/bindings.rs:1748",
        "file": "gfx/webrender_bindings/src/bindings.rs",
        "line": 1748,
        "trust": "cfi"
      },
      {
        "frame_index": 2,
        "module": "xul.dll",
        "function": "webrender::renderer::Renderer::composite_simple(webrender::composite::CompositeState*, euclid::size::Size2D<i32, webrender_api::units::DevicePixel>, enum2$<webrender::device::gl::DrawTarget>, euclid::transform3d::Transform3D<f32, euclid::UnknownUnit, euclid::UnknownUnit>*, webrender::renderer::RenderResults*, enum2$<core::option::Option<enum2$<webrender::renderer::PartialPresentMode> > >, euclid::size::Size2D<i32, webrender_api::units::DevicePixel>)",
        "source": "gfx/wr/webrender/src/renderer/mod.rs:3953",
        "file": "gfx/wr/webrender/src/renderer/mod.rs",
        "line": 3953,
        "trust": "cfi"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "webrender::renderer::Renderer::composite_frame(webrender::frame_builder::Frame*, enum2$<core::option::Option<euclid::size::Size2D<i32, webrender_api::units::DevicePixel> > >, webrender::renderer::RenderResults*, enum2$<core::option::Option<enum2$<webrender::renderer::PartialPresentMode> > >)",
        "source": "gfx/wr/webrender/src/renderer/mod.rs:5541",
        "file": "gfx/wr/webrender/src/renderer/mod.rs",
        "line": 5541,
        "trust": "inlined"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "webrender::renderer::Renderer::draw_frame(webrender::frame_builder::Frame*, enum2$<core::option::Option<euclid::size::Size2D<i32, webrender_api::units::DevicePixel> > >, unsigned long long, webrender::renderer::RenderResults*)",
        "source": "gfx/wr/webrender/src/renderer/mod.rs:5463",
        "file": "gfx/wr/webrender/src/renderer/mod.rs",
        "line": 5463,
        "trust": "cfi"
      },
      {
        "frame_index": 4,
        "module": "xul.dll",
        "function": "webrender::renderer::Renderer::render_impl(webrender_api::DocumentId, webrender::internal_types::RenderedDocument*, enum2$<core::option::Option<euclid::size::Size2D<i32, webrender_api::units::DevicePixel> > >, unsigned long long)",
        "source": "gfx/wr/webrender/src/renderer/mod.rs:1710",
        "file": "gfx/wr/webrender/src/renderer/mod.rs",
        "line": 1710,
        "trust": "cfi"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "webrender::renderer::Renderer::render(euclid::size::Size2D<i32, webrender_api::units::DevicePixel>, unsigned long long)",
        "source": "gfx/wr/webrender/src/renderer/mod.rs:1399",
        "file": "gfx/wr/webrender/src/renderer/mod.rs",
        "line": 1399,
        "trust": "cfi"
      },
      {
        "frame_index": 6,
        "module": "xul.dll",
        "function": "webrender_bindings::bindings::wr_renderer_render(webrender::renderer::Renderer*, int, int, unsigned long long, webrender::renderer::RendererStats*, thin_vec::ThinVec<euclid::box2d::Box2D<i32, webrender_api::units::DevicePixel> >*)",
        "source": "gfx/webrender_bindings/src/bindings.rs:652",
        "file": "gfx/webrender_bindings/src/bindings.rs",
        "line": 652,
        "trust": "cfi"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "mozilla::wr::RendererOGL::UpdateAndRender(mozilla::Maybe<mozilla::gfx::IntSizeTyped<mozilla::gfx::UnknownUnits> > const&, mozilla::Maybe<mozilla::wr::ImageFormat> const&, mozilla::Maybe<mozilla::Range<unsigned char> > const&, bool*, mozilla::wr::FrameReadyParams const&, mozilla::wr::RendererStats*)",
        "source": "gfx/webrender_bindings/RendererOGL.cpp:230",
        "file": "gfx/webrender_bindings/RendererOGL.cpp",
        "line": 230,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "mozilla::wr::RenderThread::UpdateAndRender(mozilla::wr::WrWindowId, mozilla::layers::BaseTransactionId<mozilla::VsyncIdType> const&, mozilla::TimeStamp const&, mozilla::wr::FrameReadyParams const&, mozilla::Maybe<mozilla::gfx::IntSizeTyped<mozilla::gfx::UnknownUnits> > const&, mozilla::Maybe<mozilla::wr::ImageFormat> const&, mozilla::Maybe<mozilla::Range<unsigned char> > const&, mozilla::wr::RendererStats*, bool*)",
        "source": "gfx/webrender_bindings/RenderThread.cpp:849",
        "file": "gfx/webrender_bindings/RenderThread.cpp",
        "line": 849,
        "trust": "cfi"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "mozilla::wr::RenderThread::HandleFrameOneDocInner(mozilla::wr::WrWindowId, mozilla::wr::FrameReadyParams const&, mozilla::Maybe<mozilla::wr::FramePublishId>)",
        "source": "gfx/webrender_bindings/RenderThread.cpp:663",
        "file": "gfx/webrender_bindings/RenderThread.cpp",
        "line": 663,
        "trust": "cfi"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "mozilla::wr::RenderThread::HandleFrameOneDoc(mozilla::wr::WrWindowId, mozilla::wr::FrameReadyParams const&, mozilla::Maybe<mozilla::wr::FramePublishId>)",
        "source": "gfx/webrender_bindings/RenderThread.cpp:611",
        "file": "gfx/webrender_bindings/RenderThread.cpp",
        "line": 611,
        "trust": "inlined"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "mozilla::wr::RenderThread::WrNotifierEvent_HandleNewFrameReady(mozilla::wr::WrWindowId, mozilla::wr::FramePublishId, mozilla::wr::FrameReadyParams const&)",
        "source": "gfx/webrender_bindings/RenderThread.cpp:573",
        "file": "gfx/webrender_bindings/RenderThread.cpp",
        "line": 573,
        "trust": "inlined"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "mozilla::wr::RenderThread::HandleWrNotifierEvents(mozilla::wr::WrWindowId)",
        "source": "gfx/webrender_bindings/RenderThread.cpp:536",
        "file": "gfx/webrender_bindings/RenderThread.cpp",
        "line": 536,
        "trust": "cfi"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "mozilla::detail::RunnableMethodArguments<mozilla::wr::WrWindowId>::apply<mozilla::wr::RenderThread, void (mozilla::wr::RenderThread::*)(mozilla::wr::WrWindowId)>::<lambda_1>::operator()(StoreCopyPassByConstLRef<mozilla::wr::WrWindowId>&) const",
        "source": "xpcom/threads/nsThreadUtils.h:1083",
        "file": "xpcom/threads/nsThreadUtils.h",
        "line": 1083,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "std::invoke(mozilla::detail::RunnableMethodArguments<mozilla::wr::WrWindowId>::apply<mozilla::wr::RenderThread, void (mozilla::wr::RenderThread::*)(mozilla::wr::WrWindowId)>::<lambda_1>&&, StoreCopyPassByConstLRef<mozilla::wr::WrWindowId>&)",
        "source": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/type_traits:1739",
        "file": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/type_traits",
        "line": 1739,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "std::_Apply_impl(mozilla::detail::RunnableMethodArguments<mozilla::wr::WrWindowId>::apply<mozilla::wr::RenderThread, void (mozilla::wr::RenderThread::*)(mozilla::wr::WrWindowId)>::<lambda_1>&&, std::tuple<StoreCopyPassByConstLRef<mozilla::wr::WrWindowId> >&, std::integer_sequence<unsigned long long, 0>)",
        "source": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/tuple:1077",
        "file": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/tuple",
        "line": 1077,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "std::apply(mozilla::detail::RunnableMethodArguments<mozilla::wr::WrWindowId>::apply<mozilla::wr::RenderThread, void (mozilla::wr::RenderThread::*)(mozilla::wr::WrWindowId)>::<lambda_1>&&, std::tuple<StoreCopyPassByConstLRef<mozilla::wr::WrWindowId> >&)",
        "source": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/tuple:1088",
        "file": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/tuple",
        "line": 1088,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "mozilla::detail::RunnableMethodArguments<mozilla::wr::WrWindowId>::apply(mozilla::wr::RenderThread*, void (mozilla::wr::RenderThread::*)(mozilla::wr::WrWindowId))",
        "source": "xpcom/threads/nsThreadUtils.h:1081",
        "file": "xpcom/threads/nsThreadUtils.h",
        "line": 1081,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "mozilla::detail::RunnableMethodImpl<mozilla::wr::RenderThread*, void (mozilla::wr::RenderThread::*)(mozilla::wr::WrWindowId), 1, 0, mozilla::wr::WrWindowId>::Run()",
        "source": "xpcom/threads/nsThreadUtils.h:1132",
        "file": "xpcom/threads/nsThreadUtils.h",
        "line": 1132,
        "trust": "cfi"
      },
      {
        "frame_index": 11,
        "module": "xul.dll",
        "function": "nsThread::ProcessNextEvent(bool, bool*)",
        "source": "xpcom/threads/nsThread.cpp:1151",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 1151,
        "trust": "inlined"
      },
      {
        "frame_index": 11,
        "module": "xul.dll",
        "function": "NS_ProcessNextEvent(nsIThread*, bool)",
        "source": "xpcom/threads/nsThreadUtils.cpp:462",
        "file": "xpcom/threads/nsThreadUtils.cpp",
        "line": 462,
        "trust": "cfi"
      },
      {
        "frame_index": 12,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*)",
        "source": "ipc/glue/MessagePump.cpp:329",
        "file": "ipc/glue/MessagePump.cpp",
        "line": 329,
        "trust": "cfi"
      },
      {
        "frame_index": 13,
        "module": "xul.dll",
        "function": "MessageLoop::RunInternal()",
        "source": "ipc/chromium/src/base/message_loop.cc:368",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 368,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "xul.dll",
        "function": "MessageLoop::RunHandler()",
        "source": "ipc/chromium/src/base/message_loop.cc:361",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 361,
        "trust": "cfi"
      },
      {
        "frame_index": 14,
        "module": "xul.dll",
        "function": "MessageLoop::Run()",
        "source": "ipc/chromium/src/base/message_loop.cc:343",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 343,
        "trust": "inlined"
      },
      {
        "frame_index": 14,
        "module": "xul.dll",
        "function": "nsThread::ThreadFunc(void*)",
        "source": "xpcom/threads/nsThread.cpp:366",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 366,
        "trust": "cfi"
      },
      {
        "frame_index": 15,
        "module": "nss3.dll",
        "function": "_PR_NativeRunThread(void*)",
        "source": "nsprpub/pr/src/threads/combined/pruthr.c:382",
        "file": "nsprpub/pr/src/threads/combined/pruthr.c",
        "line": 382,
        "trust": "cfi"
      },
      {
        "frame_index": 16,
        "module": "nss3.dll",
        "function": "pr_root(void*)",
        "source": "nsprpub/pr/src/md/windows/w95thred.c:129",
        "file": "nsprpub/pr/src/md/windows/w95thred.c",
        "line": 129,
        "trust": "cfi"
      },
      {
        "frame_index": 17,
        "module": "ucrtbase.dll",
        "function": "thread_start<unsigned int (__cdecl*)(void*), 1>",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 18,
        "module": "kernel32.dll",
        "function": "BaseThreadInitThunk",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 19,
        "module": "mozglue.dll",
        "function": "mozilla::interceptor::FuncHook<mozilla::interceptor::WindowsDllInterceptor<mozilla::interceptor::VMSharingPolicyShared>, void (*)(int, void*, void*)>::operator()(int&, void*&, void*&) const",
        "source": "toolkit/xre/dllservices/mozglue/nsWindowsDllInterceptor.h:149",
        "file": "toolkit/xre/dllservices/mozglue/nsWindowsDllInterceptor.h",
        "line": 149,
        "trust": "inlined"
      },
      {
        "frame_index": 19,
        "module": "mozglue.dll",
        "function": "patched_BaseThreadInitThunk(int, void*, void*)",
        "source": "toolkit/xre/dllservices/mozglue/WindowsDllBlocklist.cpp:562",
        "file": "toolkit/xre/dllservices/mozglue/WindowsDllBlocklist.cpp",
        "line": 562,
        "trust": "cfi"
      },
      {
        "frame_index": 20,
        "module": "ntdll.dll",
        "function": "RtlUserThreadStart",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      }
    ],
    "frame_count": 34
  }
}