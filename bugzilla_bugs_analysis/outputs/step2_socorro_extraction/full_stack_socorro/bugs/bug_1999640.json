{
  "bug_id": "1999640",
  "summary": "Crash in [@ mozilla::camera::AggregateCapturer::Create::<T>::operator()]",
  "product": "Core",
  "component": "WebRTC: Audio/Video",
  "creation_time": "2025-11-12T09:36:25Z",
  "crash_signatures": [
    "mozilla::camera::AggregateCapturer::Create::<T>::operator()"
  ],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1999640",
  "socorro_crash_ids": [
    "1260f4bd-064a-4ae9-9dbd-b03cb0251112"
  ],
  "stack_source": "socorro",
  "crash_id": "1260f4bd-064a-4ae9-9dbd-b03cb0251112",
  "socorro_metadata": {
    "signature": "",
    "crash_reason": "",
    "moz_crash_reason": "",
    "crashing_thread": {
      "index": 108,
      "name": "VideoCapture"
    }
  },
  "stack_trace": {
    "source": "socorro",
    "crash_id": "1260f4bd-064a-4ae9-9dbd-b03cb0251112",
    "frames": [
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "mozilla::camera::AggregateCapturer::Create::<lambda_2>::operator()(mozilla::camera::VideoEngine::CaptureEntry&) const",
        "source": "dom/media/systemservices/CamerasParent.cpp:404",
        "file": "dom/media/systemservices/CamerasParent.cpp",
        "line": 404,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "std::invoke(mozilla::camera::AggregateCapturer::Create::<lambda_2>&, mozilla::camera::VideoEngine::CaptureEntry&)",
        "source": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/type_traits:1739",
        "file": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/type_traits",
        "line": 1739,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "std::_Func_impl_no_alloc<`lambda at /builds/worker/checkouts/gecko/dom/media/systemservices/CamerasParent.cpp:403:33', void, mozilla::camera::VideoEngine::CaptureEntry&>::_Do_call(mozilla::camera::VideoEngine::CaptureEntry&)",
        "source": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/functional:905",
        "file": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/functional",
        "line": 905,
        "trust": "context"
      },
      {
        "frame_index": 1,
        "module": "xul.dll",
        "function": "mozilla::camera::AggregateCapturer::Create(nsISerialEventTarget*, mozilla::camera::CaptureEngine, mozilla::camera::VideoEngine*, nsTString<char> const&, unsigned long long, nsTArray<webrtc::VideoCaptureCapability>&&, mozilla::camera::CamerasParent*)",
        "source": "dom/media/systemservices/CamerasParent.cpp:403",
        "file": "dom/media/systemservices/CamerasParent.cpp",
        "line": 403,
        "trust": "cfi"
      },
      {
        "frame_index": 2,
        "module": "xul.dll",
        "function": "mozilla::camera::CamerasParent::GetOrCreateCapturer(mozilla::camera::CaptureEngine, unsigned long long, nsTString<char> const&, nsTArray<webrtc::VideoCaptureCapability>&&)",
        "source": "dom/media/systemservices/CamerasParent.cpp:1356",
        "file": "dom/media/systemservices/CamerasParent.cpp",
        "line": 1356,
        "trust": "cfi"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::camera::CamerasParent::RecvAllocateCapture::<lambda_9>::operator()(mozilla::MozPromise<bool, bool, 1>::ResolveOrRejectValue&&) const",
        "source": "dom/media/systemservices/CamerasParent.cpp:1139",
        "file": "dom/media/systemservices/CamerasParent.cpp",
        "line": 1139,
        "trust": "inlined"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::MozPromise<bool, bool, 1>::InvokeMethod(mozilla::camera::CamerasParent::RecvAllocateCapture::<lambda_9>*, RefPtr<mozilla::MozPromise<std::tuple<int, int>, bool, 1> > (mozilla::camera::CamerasParent::RecvAllocateCapture::<lambda_9>::*)(mozilla::MozPromise<bool, bool, 1>::ResolveOrRejectValue&&), mozilla::MozPromise<bool, bool, 1>::ResolveOrRejectValue&&)",
        "source": "xpcom/threads/MozPromise.h:669",
        "file": "xpcom/threads/MozPromise.h",
        "line": 669,
        "trust": "inlined"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::MozPromise<bool, bool, 1>::InvokeCallbackMethod(mozilla::camera::CamerasParent::RecvAllocateCapture::<lambda_9>*, RefPtr<mozilla::MozPromise<std::tuple<int, int>, bool, 1> > (mozilla::camera::CamerasParent::RecvAllocateCapture::<lambda_9>::*)(mozilla::MozPromise<bool, bool, 1>::ResolveOrRejectValue&&), mozilla::MozPromise<bool, bool, 1>::ResolveOrRejectValue&&)",
        "source": "xpcom/threads/MozPromise.h:681",
        "file": "xpcom/threads/MozPromise.h",
        "line": 681,
        "trust": "inlined"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::MozPromise<bool, bool, 1>::ThenValue<`lambda at /builds/worker/checkouts/gecko/dom/media/systemservices/CamerasParent.cpp:1113:11'>::DoResolveOrRejectInternal(mozilla::MozPromise<bool, bool, 1>::ResolveOrRejectValue&)",
        "source": "xpcom/threads/MozPromise.h:939",
        "file": "xpcom/threads/MozPromise.h",
        "line": 939,
        "trust": "cfi"
      },
      {
        "frame_index": 4,
        "module": "xul.dll",
        "function": "mozilla::MozPromise<bool, bool, 0>::ThenValueBase::DoResolveOrReject(mozilla::MozPromise<bool, bool, 0>::ResolveOrRejectValue&)",
        "source": "xpcom/threads/MozPromise.h:638",
        "file": "xpcom/threads/MozPromise.h",
        "line": 638,
        "trust": "inlined"
      },
      {
        "frame_index": 4,
        "module": "xul.dll",
        "function": "mozilla::MozPromise<bool, bool, 0>::ThenValueBase::ResolveOrRejectRunnable::Run()",
        "source": "xpcom/threads/MozPromise.h:505",
        "file": "xpcom/threads/MozPromise.h",
        "line": 505,
        "trust": "cfi"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "nsThread::ProcessNextEvent(bool, bool*)",
        "source": "xpcom/threads/nsThread.cpp:1160",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 1160,
        "trust": "inlined"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "NS_ProcessNextEvent(nsIThread*, bool)",
        "source": "xpcom/threads/nsThreadUtils.cpp:461",
        "file": "xpcom/threads/nsThreadUtils.cpp",
        "line": 461,
        "trust": "cfi"
      },
      {
        "frame_index": 6,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessagePumpForNonMainUIThreads::DoRunLoop()",
        "source": "ipc/glue/MessagePump_windows.cpp:38",
        "file": "ipc/glue/MessagePump_windows.cpp",
        "line": 38,
        "trust": "cfi"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "base::MessagePumpWin::RunWithDispatcher(base::MessagePump::Delegate*, base::MessagePumpWin::Dispatcher*)",
        "source": "ipc/chromium/src/base/message_pump_win.cc:59",
        "file": "ipc/chromium/src/base/message_pump_win.cc",
        "line": 59,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "base::MessagePumpWin::Run(base::MessagePump::Delegate*)",
        "source": "ipc/chromium/src/base/message_pump_win.h:79",
        "file": "ipc/chromium/src/base/message_pump_win.h",
        "line": 79,
        "trust": "cfi"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "MessageLoop::RunInternal()",
        "source": "ipc/chromium/src/base/message_loop.cc:368",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 368,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "MessageLoop::RunHandler()",
        "source": "ipc/chromium/src/base/message_loop.cc:361",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 361,
        "trust": "cfi"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "MessageLoop::Run()",
        "source": "ipc/chromium/src/base/message_loop.cc:343",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 343,
        "trust": "inlined"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "nsThread::ThreadFunc(void*)",
        "source": "xpcom/threads/nsThread.cpp:375",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 375,
        "trust": "cfi"
      },
      {
        "frame_index": 10,
        "module": "nss3.dll",
        "function": "_PR_NativeRunThread(void*)",
        "source": "nsprpub/pr/src/threads/combined/pruthr.c:382",
        "file": "nsprpub/pr/src/threads/combined/pruthr.c",
        "line": 382,
        "trust": "cfi"
      },
      {
        "frame_index": 11,
        "module": "nss3.dll",
        "function": "pr_root(void*)",
        "source": "nsprpub/pr/src/md/windows/w95thred.c:129",
        "file": "nsprpub/pr/src/md/windows/w95thred.c",
        "line": 129,
        "trust": "cfi"
      },
      {
        "frame_index": 12,
        "module": "ucrtbase.dll",
        "function": "thread_start<unsigned int (__cdecl*)(void*), 1>",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 13,
        "module": "kernel32.dll",
        "function": "BaseThreadInitThunk",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 14,
        "module": "mozglue.dll",
        "function": "mozilla::interceptor::FuncHook<mozilla::interceptor::WindowsDllInterceptor<mozilla::interceptor::VMSharingPolicyShared>, void (*)(int, void*, void*)>::operator()(int&, void*&, void*&) const",
        "source": "toolkit/xre/dllservices/mozglue/nsWindowsDllInterceptor.h:144",
        "file": "toolkit/xre/dllservices/mozglue/nsWindowsDllInterceptor.h",
        "line": 144,
        "trust": "inlined"
      },
      {
        "frame_index": 14,
        "module": "mozglue.dll",
        "function": "patched_BaseThreadInitThunk(int, void*, void*)",
        "source": "toolkit/xre/dllservices/mozglue/WindowsDllBlocklist.cpp:566",
        "file": "toolkit/xre/dllservices/mozglue/WindowsDllBlocklist.cpp",
        "line": 566,
        "trust": "cfi"
      },
      {
        "frame_index": 15,
        "module": "ntdll.dll",
        "function": "RtlUserThreadStart",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      }
    ],
    "frame_count": 27
  }
}