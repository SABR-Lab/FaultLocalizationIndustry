{
  "bug_id": "2004939",
  "summary": "Crash in [@ mozilla::net::HostRecordQueue::AddToEvictionQ]",
  "product": "Core",
  "component": "Networking",
  "creation_time": "2025-12-09T13:52:33Z",
  "crash_signatures": [
    "mozilla::net::HostRecordQueue::AddToEvictionQ"
  ],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=2004939",
  "socorro_crash_ids": [
    "3f3c00cf-6bcd-480b-a083-7ad950251209"
  ],
  "stack_source": "socorro",
  "crash_id": "3f3c00cf-6bcd-480b-a083-7ad950251209",
  "socorro_metadata": {
    "signature": "",
    "crash_reason": "",
    "moz_crash_reason": "",
    "crashing_thread": {
      "index": 10,
      "name": "Socket Thread"
    }
  },
  "stack_trace": {
    "source": "socorro",
    "crash_id": "3f3c00cf-6bcd-480b-a083-7ad950251209",
    "frames": [
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "mozilla::net::HostRecordQueue::AddToEvictionQ(nsHostRecord*, unsigned int, nsRefCountedHashtable<nsGenericHashKey<nsHostKey>, RefPtr<nsHostRecord> >&, mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "netwerk/dns/HostRecordQueue.cpp:47",
        "file": "netwerk/dns/HostRecordQueue.cpp",
        "line": 47,
        "trust": "context"
      },
      {
        "frame_index": 1,
        "module": "xul.dll",
        "function": "nsHostResolver::AddToEvictionQ(nsHostRecord*, mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "netwerk/dns/nsHostResolver.cpp:1356",
        "file": "netwerk/dns/nsHostResolver.cpp",
        "line": 1356,
        "trust": "inlined"
      },
      {
        "frame_index": 1,
        "module": "xul.dll",
        "function": "nsHostResolver::FromUnspecEntry(nsHostRecord*, nsTSubstring<char> const&, nsTSubstring<char> const&, nsTSubstring<char> const&, unsigned short, nsIDNSService::DNSFlags, unsigned short, bool, nsresult&, mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "netwerk/dns/nsHostResolver.cpp:781",
        "file": "netwerk/dns/nsHostResolver.cpp",
        "line": 781,
        "trust": "inlined"
      },
      {
        "frame_index": 1,
        "module": "xul.dll",
        "function": "nsHostResolver::ResolveHost(nsTSubstring<char> const&, nsTSubstring<char> const&, int, unsigned short, mozilla::OriginAttributes const&, nsIDNSService::DNSFlags, unsigned short, nsResolveHostCallback*)",
        "source": "netwerk/dns/nsHostResolver.cpp:592",
        "file": "netwerk/dns/nsHostResolver.cpp",
        "line": 592,
        "trust": "cfi"
      },
      {
        "frame_index": 2,
        "module": "xul.dll",
        "function": "nsDNSService::AsyncResolveInternal(nsTSubstring<char> const&, unsigned short, nsIDNSService::DNSFlags, nsIDNSAdditionalInfo*, nsIDNSListener*, nsIEventTarget*, mozilla::OriginAttributes const&, nsICancelable**)",
        "source": "netwerk/dns/nsDNSService2.cpp:1072",
        "file": "netwerk/dns/nsDNSService2.cpp",
        "line": 1072,
        "trust": "cfi"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::net::DnsAndConnectSocket::TransportSetup::ResolveHost(mozilla::net::DnsAndConnectSocket*)",
        "source": "netwerk/protocol/http/DnsAndConnectSocket.cpp:1379",
        "file": "netwerk/protocol/http/DnsAndConnectSocket.cpp",
        "line": 1379,
        "trust": "cfi"
      },
      {
        "frame_index": 4,
        "module": "xul.dll",
        "function": "mozilla::net::DnsAndConnectSocket::TransportSetup::Init(mozilla::net::DnsAndConnectSocket*)",
        "source": "netwerk/protocol/http/DnsAndConnectSocket.cpp:933",
        "file": "netwerk/protocol/http/DnsAndConnectSocket.cpp",
        "line": 933,
        "trust": "inlined"
      },
      {
        "frame_index": 4,
        "module": "xul.dll",
        "function": "mozilla::net::DnsAndConnectSocket::SetupEvent(mozilla::net::DnsAndConnectSocket::SetupEvents)",
        "source": "netwerk/protocol/http/DnsAndConnectSocket.cpp:249",
        "file": "netwerk/protocol/http/DnsAndConnectSocket.cpp",
        "line": 249,
        "trust": "cfi"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "mozilla::net::DnsAndConnectSocket::Init(mozilla::net::ConnectionEntry*)",
        "source": "netwerk/protocol/http/DnsAndConnectSocket.cpp:128",
        "file": "netwerk/protocol/http/DnsAndConnectSocket.cpp",
        "line": 128,
        "trust": "inlined"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "mozilla::net::ConnectionEntry::CreateDnsAndConnectSocket(mozilla::net::nsAHttpTransaction*, unsigned int, bool, bool, bool, bool, mozilla::net::PendingTransactionInfo*)",
        "source": "netwerk/protocol/http/ConnectionEntry.cpp:1083",
        "file": "netwerk/protocol/http/ConnectionEntry.cpp",
        "line": 1083,
        "trust": "cfi"
      },
      {
        "frame_index": 6,
        "module": "xul.dll",
        "function": "mozilla::net::nsHttpConnectionMgr::MakeNewConnection(mozilla::net::ConnectionEntry*, mozilla::net::PendingTransactionInfo*)",
        "source": "netwerk/protocol/http/nsHttpConnectionMgr.cpp:1344",
        "file": "netwerk/protocol/http/nsHttpConnectionMgr.cpp",
        "line": 1344,
        "trust": "inlined"
      },
      {
        "frame_index": 6,
        "module": "xul.dll",
        "function": "mozilla::net::nsHttpConnectionMgr::TryDispatchTransaction(mozilla::net::ConnectionEntry*, bool, mozilla::net::PendingTransactionInfo*)",
        "source": "netwerk/protocol/http/nsHttpConnectionMgr.cpp:1559",
        "file": "netwerk/protocol/http/nsHttpConnectionMgr.cpp",
        "line": 1559,
        "trust": "cfi"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "mozilla::net::nsHttpConnectionMgr::ProcessNewTransaction(mozilla::net::nsHttpTransaction*)",
        "source": "netwerk/protocol/http/nsHttpConnectionMgr.cpp:1935",
        "file": "netwerk/protocol/http/nsHttpConnectionMgr.cpp",
        "line": 1935,
        "trust": "cfi"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "mozilla::net::nsHttpConnectionMgr::OnMsgNewTransaction(int, mozilla::net::ARefBase*)",
        "source": "netwerk/protocol/http/nsHttpConnectionMgr.cpp:2230",
        "file": "netwerk/protocol/http/nsHttpConnectionMgr.cpp",
        "line": 2230,
        "trust": "cfi"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "RefPtr<mozilla::net::nsHttpConnectionMgr>::Proxy<void, int, mozilla::net::ARefBase*>::operator()(int&, RefPtr<mozilla::net::ARefBase>&)",
        "source": "mfbt/RefPtr.h:358",
        "file": "mfbt/RefPtr.h",
        "line": 358,
        "trust": "inlined"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "mozilla::net::ConnEvent::Run()",
        "source": "netwerk/protocol/http/nsHttpConnectionMgr.cpp:209",
        "file": "netwerk/protocol/http/nsHttpConnectionMgr.cpp",
        "line": 209,
        "trust": "cfi"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "nsThread::ProcessNextEvent(bool, bool*)",
        "source": "xpcom/threads/nsThread.cpp:1158",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 1158,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "NS_ProcessNextEvent(nsIThread*, bool)",
        "source": "xpcom/threads/nsThreadUtils.cpp:461",
        "file": "xpcom/threads/nsThreadUtils.cpp",
        "line": 461,
        "trust": "cfi"
      },
      {
        "frame_index": 11,
        "module": "xul.dll",
        "function": "mozilla::net::nsSocketTransportService::Run()",
        "source": "netwerk/base/nsSocketTransportService2.cpp:1212",
        "file": "netwerk/base/nsSocketTransportService2.cpp",
        "line": 1212,
        "trust": "cfi"
      },
      {
        "frame_index": 12,
        "module": "xul.dll",
        "function": "nsThread::ProcessNextEvent(bool, bool*)",
        "source": "xpcom/threads/nsThread.cpp:1158",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 1158,
        "trust": "inlined"
      },
      {
        "frame_index": 12,
        "module": "xul.dll",
        "function": "NS_ProcessNextEvent(nsIThread*, bool)",
        "source": "xpcom/threads/nsThreadUtils.cpp:461",
        "file": "xpcom/threads/nsThreadUtils.cpp",
        "line": 461,
        "trust": "cfi"
      },
      {
        "frame_index": 13,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*)",
        "source": "ipc/glue/MessagePump.cpp:299",
        "file": "ipc/glue/MessagePump.cpp",
        "line": 299,
        "trust": "cfi"
      },
      {
        "frame_index": 14,
        "module": "xul.dll",
        "function": "MessageLoop::RunInternal()",
        "source": "ipc/chromium/src/base/message_loop.cc:368",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 368,
        "trust": "inlined"
      },
      {
        "frame_index": 14,
        "module": "xul.dll",
        "function": "MessageLoop::RunHandler()",
        "source": "ipc/chromium/src/base/message_loop.cc:361",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 361,
        "trust": "cfi"
      },
      {
        "frame_index": 15,
        "module": "xul.dll",
        "function": "MessageLoop::Run()",
        "source": "ipc/chromium/src/base/message_loop.cc:343",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 343,
        "trust": "inlined"
      },
      {
        "frame_index": 15,
        "module": "xul.dll",
        "function": "nsThread::ThreadFunc(void*)",
        "source": "xpcom/threads/nsThread.cpp:373",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 373,
        "trust": "cfi"
      },
      {
        "frame_index": 16,
        "module": "nss3.dll",
        "function": "_PR_NativeRunThread(void*)",
        "source": "nsprpub/pr/src/threads/combined/pruthr.c:382",
        "file": "nsprpub/pr/src/threads/combined/pruthr.c",
        "line": 382,
        "trust": "cfi"
      },
      {
        "frame_index": 17,
        "module": "nss3.dll",
        "function": "pr_root(void*)",
        "source": "nsprpub/pr/src/md/windows/w95thred.c:129",
        "file": "nsprpub/pr/src/md/windows/w95thred.c",
        "line": 129,
        "trust": "cfi"
      },
      {
        "frame_index": 18,
        "module": "ucrtbase.dll",
        "function": "thread_start<unsigned int (__cdecl*)(void*), 1>",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 19,
        "module": "kernel32.dll",
        "function": "BaseThreadInitThunk",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 20,
        "module": "mozglue.dll",
        "function": "mozilla::interceptor::FuncHook<mozilla::interceptor::WindowsDllInterceptor<mozilla::interceptor::VMSharingPolicyShared>, void (*)(int, void*, void*)>::operator()(int&, void*&, void*&) const",
        "source": "toolkit/xre/dllservices/mozglue/nsWindowsDllInterceptor.h:144",
        "file": "toolkit/xre/dllservices/mozglue/nsWindowsDllInterceptor.h",
        "line": 144,
        "trust": "inlined"
      },
      {
        "frame_index": 20,
        "module": "mozglue.dll",
        "function": "patched_BaseThreadInitThunk(int, void*, void*)",
        "source": "toolkit/xre/dllservices/mozglue/WindowsDllBlocklist.cpp:566",
        "file": "toolkit/xre/dllservices/mozglue/WindowsDllBlocklist.cpp",
        "line": 566,
        "trust": "cfi"
      },
      {
        "frame_index": 21,
        "module": "ntdll.dll",
        "function": "RtlUserThreadStart",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      }
    ],
    "frame_count": 33
  }
}