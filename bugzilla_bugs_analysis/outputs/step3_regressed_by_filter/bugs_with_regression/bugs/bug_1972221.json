{
  "bug_id": "1972221",
  "summary": "Startup crash [@ mozilla::dom::quota::QuotaManager::GetOriginStateMetadata ]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Core",
  "component": "Storage: Quota Manager",
  "version": "Firefox 141",
  "severity": "S2",
  "priority": "P1",
  "creation_time": "2025-06-15T12:28:09Z",
  "last_change_time": "2025-09-09T09:24:13Z",
  "is_recent": false,
  "crash_signature_raw": "[@ mozilla::dom::quota::QuotaManager::GetOriginStateMetadata ]",
  "crash_signatures": [
    "mozilla::dom::quota::QuotaManager::GetOriginStateMetadata"
  ],
  "keywords": [
    "regression",
    "topcrash"
  ],
  "regressed_by": [
    "1962133"
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1972221",
  "socorro_links": [],
  "socorro_crash_ids": [],
  "has_socorro_link": false,
  "has_direct_crash_id": false,
  "stack_traces": [
    {
      "comment_id": 17537940,
      "comment_count": 0,
      "creator": "viktor_jaegerskuepper@freenet.de",
      "creation_time": "2025-06-15T12:28:09Z",
      "raw_text": "Crash ID: daf6aadb-d6b1-4496-9969-2cd670250615\n\nAfter the latest Nightly version (2025-06-15-09-03-40) was downloaded, I closed Firefox and started it again, but it crashed immediately. For some reason it is not recognized as a startup crash (Startup Crash: False)\n\nMOZ_CRASH Reason (Sanitized): MOZ_DIAGNOSTIC_ASSERT(mTemporaryStorageInitializedInternal)\nCrash Reason: SIGSEGV / SEGV_MAPERR\n\nFrames from crashing thread:\n\n0 \tlibxul.so \tMOZ_CrashSequence(void*, long) \tmfbt/Assertions.h:248 \tinlined\n0 \tlibxul.so \tmozilla::dom::quota::QuotaManager::GetOriginStateMetadata(mozilla::dom::quota::OriginMetadata const&) \tdom/quota/ActorsParent.cpp:7249 \tcontext\n1 \tlibxul.so \tmozilla::dom::quota::PersistOp::DoDirectoryWork(mozilla::dom::quota::QuotaManager&)::$_1::operator()() const \tdom/quota/OriginOperations.cpp:3576 \tinlined\n1 \tlibxul.so \tmozilla::dom::quota::PersistOp::DoDirectoryWork(mozilla::dom::quota::QuotaManager&) \tdom/quota/OriginOperations.cpp:3576 \tcfi\n2 \tlibxul.so \tmozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::operator()(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const \tdom/quota/OriginOperationBase.cpp:98 \tinlined\n2 \tlibxul.so \tmozilla::MozPromise<bool, nsresult, false>::InvokeMethod<mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&>(mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0*, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) \txpcom/threads/MozPromise.h:652 \tinlined\n2 \tlibxul.so \tmozilla::MozPromise<bool, nsresult, false>::InvokeCallbackMethod<true, mozilla::MozPromise<bool, nsresult, false>, mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&>(mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0*, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) \txpcom/threads/MozPromise.h:664 \tinlined\n2 \tlibxul.so \tmozilla::MozPromise<bool, nsresult, false>::ThenValue<mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0>::DoResolveOrRejectInternal(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue&) \txpcom/threads/MozPromise.h:923 \tcfi\n3 \tlibxul.so \tmozilla::MozPromise<bool, nsresult, false>::ThenValueBase::DoResolveOrReject(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue&) \txpcom/threads/MozPromise.h:621 \tinlined\n3 \tlibxul.so \tmozilla::MozPromise<bool, mozilla::ipc::ResponseRejectReason, true>::ThenValueBase::ResolveOrRejectRunnable::Run() \txpcom/threads/MozPromise.h:488 \tcfi\n4 \tlibxul.so \tnsThread::ProcessNextEvent(bool, bool*) \txpcom/threads/nsThread.cpp:1153 \tinlined\n4 \tlibxul.so \tNS_ProcessNextEvent(nsIThread*, bool) \txpcom/threads/nsThreadUtils.cpp:480 \tcfi\n5 \tlibxul.so \tmozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) \tipc/glue/MessagePump.cpp:329 \tcfi\n6 \tlibxul.so \tMessageLoop::RunInternal() \tipc/chromium/src/base/message_loop.cc:369 \tinlined\n6 \tlibxul.so \tMessageLoop::RunHandler() \tipc/chromium/src/base/message_loop.cc:362 \tinlined\n6 \tlibxul.so \tMessageLoop::Run() \tipc/chromium/src/base/message_loop.cc:344 \tinlined\n6 \tlibxul.so \tnsThread::ThreadFunc(void*) \txpcom/threads/nsThread.cpp:366 \tcfi\n7 \tlibnspr4.so \t_pt_root \tnsprpub/pr/src/pthreads/ptthread.c:191 \tcfi\n8 \tfirefox-bin \tset_alt_signal_stack_and_start(PthreadCreateParams*) \tmozglue/interposers/pthread_create_interposer.cpp:81 \tcfi\n9 \tlibc.so.6 \tstart_thread \t/usr/src/debug/glibc/glibc/nptl/pthread_create.c:448 \tcfi\n10 \tlibc.so.6 \t__GI___clone3 \t/usr/src/debug/glibc/glibc/sysdeps/unix/sysv/linux/x86_64/clone3.S:78 \tcfi",
      "matched_patterns": [
        "mozilla::\\S+::\\S+\\s*\\(",
        "ns[A-Z]\\w+::\\w+",
        "(?i)crashing\\s+thread"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "MOZ_CrashSequence(void*, long) \tmfbt/Assertions.h:248",
          "file": "",
          "line": null,
          "raw": "0 \tlibxul.so \tMOZ_CrashSequence(void*, long) \tmfbt/Assertions.h:248 \tinlined"
        },
        {
          "frame_index": 0,
          "module": "libxul.so",
          "function": "mozilla::dom::quota::QuotaManager::GetOriginStateMetadata(mozilla::dom::quota::OriginMetadata const&) \tdom/quota/ActorsParent.cpp:7249",
          "file": "",
          "line": null,
          "raw": "0 \tlibxul.so \tmozilla::dom::quota::QuotaManager::GetOriginStateMetadata(mozilla::dom::quota::OriginMetadata const&) \tdom/quota/ActorsParent.cpp:7249 \tcontext"
        },
        {
          "frame_index": 1,
          "module": "libxul.so",
          "function": "mozilla::dom::quota::PersistOp::DoDirectoryWork(mozilla::dom::quota::QuotaManager&)::$_1::operator()() const \tdom/quota/OriginOperations.cpp:3576",
          "file": "",
          "line": null,
          "raw": "1 \tlibxul.so \tmozilla::dom::quota::PersistOp::DoDirectoryWork(mozilla::dom::quota::QuotaManager&)::$_1::operator()() const \tdom/quota/OriginOperations.cpp:3576 \tinlined"
        },
        {
          "frame_index": 1,
          "module": "libxul.so",
          "function": "mozilla::dom::quota::PersistOp::DoDirectoryWork(mozilla::dom::quota::QuotaManager&) \tdom/quota/OriginOperations.cpp:3576",
          "file": "",
          "line": null,
          "raw": "1 \tlibxul.so \tmozilla::dom::quota::PersistOp::DoDirectoryWork(mozilla::dom::quota::QuotaManager&) \tdom/quota/OriginOperations.cpp:3576 \tcfi"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::operator()(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const \tdom/quota/OriginOperationBase.cpp:98",
          "file": "",
          "line": null,
          "raw": "2 \tlibxul.so \tmozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::operator()(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const \tdom/quota/OriginOperationBase.cpp:98 \tinlined"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::MozPromise<bool, nsresult, false>::InvokeMethod<mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&>(mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0*, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) \txpcom/threads/MozPromise.h:652",
          "file": "",
          "line": null,
          "raw": "2 \tlibxul.so \tmozilla::MozPromise<bool, nsresult, false>::InvokeMethod<mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&>(mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0*, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) \txpcom/threads/MozPromise.h:652 \tinlined"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::MozPromise<bool, nsresult, false>::InvokeCallbackMethod<true, mozilla::MozPromise<bool, nsresult, false>, mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&>(mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0*, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) \txpcom/threads/MozPromise.h:664",
          "file": "",
          "line": null,
          "raw": "2 \tlibxul.so \tmozilla::MozPromise<bool, nsresult, false>::InvokeCallbackMethod<true, mozilla::MozPromise<bool, nsresult, false>, mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&>(mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0*, RefPtr<mozilla::MozPromise<bool, nsresult, false> > (mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0::*)(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) const, mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue const&) \txpcom/threads/MozPromise.h:664 \tinlined"
        },
        {
          "frame_index": 2,
          "module": "libxul.so",
          "function": "mozilla::MozPromise<bool, nsresult, false>::ThenValue<mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0>::DoResolveOrRejectInternal(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue&) \txpcom/threads/MozPromise.h:923",
          "file": "",
          "line": null,
          "raw": "2 \tlibxul.so \tmozilla::MozPromise<bool, nsresult, false>::ThenValue<mozilla::dom::quota::OriginOperationBase::RunImmediately()::$_0>::DoResolveOrRejectInternal(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue&) \txpcom/threads/MozPromise.h:923 \tcfi"
        },
        {
          "frame_index": 3,
          "module": "libxul.so",
          "function": "mozilla::MozPromise<bool, nsresult, false>::ThenValueBase::DoResolveOrReject(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue&) \txpcom/threads/MozPromise.h:621",
          "file": "",
          "line": null,
          "raw": "3 \tlibxul.so \tmozilla::MozPromise<bool, nsresult, false>::ThenValueBase::DoResolveOrReject(mozilla::MozPromise<bool, nsresult, false>::ResolveOrRejectValue&) \txpcom/threads/MozPromise.h:621 \tinlined"
        },
        {
          "frame_index": 3,
          "module": "libxul.so",
          "function": "mozilla::MozPromise<bool, mozilla::ipc::ResponseRejectReason, true>::ThenValueBase::ResolveOrRejectRunnable::Run() \txpcom/threads/MozPromise.h:488",
          "file": "",
          "line": null,
          "raw": "3 \tlibxul.so \tmozilla::MozPromise<bool, mozilla::ipc::ResponseRejectReason, true>::ThenValueBase::ResolveOrRejectRunnable::Run() \txpcom/threads/MozPromise.h:488 \tcfi"
        },
        {
          "frame_index": 4,
          "module": "libxul.so",
          "function": "nsThread::ProcessNextEvent(bool, bool*) \txpcom/threads/nsThread.cpp:1153",
          "file": "",
          "line": null,
          "raw": "4 \tlibxul.so \tnsThread::ProcessNextEvent(bool, bool*) \txpcom/threads/nsThread.cpp:1153 \tinlined"
        },
        {
          "frame_index": 4,
          "module": "libxul.so",
          "function": "NS_ProcessNextEvent(nsIThread*, bool) \txpcom/threads/nsThreadUtils.cpp:480",
          "file": "",
          "line": null,
          "raw": "4 \tlibxul.so \tNS_ProcessNextEvent(nsIThread*, bool) \txpcom/threads/nsThreadUtils.cpp:480 \tcfi"
        },
        {
          "frame_index": 5,
          "module": "libxul.so",
          "function": "mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) \tipc/glue/MessagePump.cpp:329",
          "file": "",
          "line": null,
          "raw": "5 \tlibxul.so \tmozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*) \tipc/glue/MessagePump.cpp:329 \tcfi"
        },
        {
          "frame_index": 6,
          "module": "libxul.so",
          "function": "MessageLoop::RunInternal() \tipc/chromium/src/base/message_loop.cc:369",
          "file": "",
          "line": null,
          "raw": "6 \tlibxul.so \tMessageLoop::RunInternal() \tipc/chromium/src/base/message_loop.cc:369 \tinlined"
        },
        {
          "frame_index": 6,
          "module": "libxul.so",
          "function": "MessageLoop::RunHandler() \tipc/chromium/src/base/message_loop.cc:362",
          "file": "",
          "line": null,
          "raw": "6 \tlibxul.so \tMessageLoop::RunHandler() \tipc/chromium/src/base/message_loop.cc:362 \tinlined"
        },
        {
          "frame_index": 6,
          "module": "libxul.so",
          "function": "MessageLoop::Run() \tipc/chromium/src/base/message_loop.cc:344",
          "file": "",
          "line": null,
          "raw": "6 \tlibxul.so \tMessageLoop::Run() \tipc/chromium/src/base/message_loop.cc:344 \tinlined"
        },
        {
          "frame_index": 6,
          "module": "libxul.so",
          "function": "nsThread::ThreadFunc(void*) \txpcom/threads/nsThread.cpp:366",
          "file": "",
          "line": null,
          "raw": "6 \tlibxul.so \tnsThread::ThreadFunc(void*) \txpcom/threads/nsThread.cpp:366 \tcfi"
        },
        {
          "frame_index": 7,
          "module": "libnspr4.so",
          "function": "_pt_root \tnsprpub/pr/src/pthreads/ptthread.c:191",
          "file": "",
          "line": null,
          "raw": "7 \tlibnspr4.so \t_pt_root \tnsprpub/pr/src/pthreads/ptthread.c:191 \tcfi"
        }
      ],
      "frame_count": 18
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 18,
  "regressor_count": 1,
  "source": "step1",
  "bugzilla_status": "RESOLVED",
  "bugzilla_resolution": "FIXED",
  "bugzilla_lookup_timestamp": "2025-12-15T15:53:28.604679"
}