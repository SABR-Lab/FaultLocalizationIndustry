{
  "bug_id": "1993904",
  "summary": "Crash in [@ nsLocalFile::MoveOrCopyAsSingleFileOrDir] from IsDirectory",
  "product": "Core",
  "component": "XPCOM",
  "creation_time": "2025-10-13T08:24:30Z",
  "crash_signatures": [
    "nsLocalFile::MoveOrCopyAsSingleFileOrDir"
  ],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1993904",
  "socorro_crash_ids": [
    "b57aead6-569c-49e3-895e-19d5e0251012"
  ],
  "stack_source": "socorro",
  "crash_id": "b57aead6-569c-49e3-895e-19d5e0251012",
  "socorro_metadata": {
    "signature": "",
    "crash_reason": "",
    "moz_crash_reason": "",
    "crashing_thread": {
      "index": 0,
      "name": "MainThread"
    }
  },
  "stack_trace": {
    "source": "socorro",
    "crash_id": "b57aead6-569c-49e3-895e-19d5e0251012",
    "frames": [
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "nsLocalFile::MoveOrCopyAsSingleFileOrDir(nsIFile*, nsTSubstring<char16_t> const&, unsigned int)",
        "source": "xpcom/io/nsLocalFileWin.cpp:1872",
        "file": "xpcom/io/nsLocalFileWin.cpp",
        "line": 1872,
        "trust": "context"
      },
      {
        "frame_index": 1,
        "module": "xul.dll",
        "function": "nsLocalFile::RenameTo(nsIFile*, nsTSubstring<char16_t> const&)",
        "source": "xpcom/io/nsLocalFileWin.cpp:2317",
        "file": "xpcom/io/nsLocalFileWin.cpp",
        "line": 2317,
        "trust": "cfi"
      },
      {
        "frame_index": 2,
        "module": "xul.dll",
        "function": "nsLocalFile::RenameToNative(nsIFile*, nsTSubstring<char> const&)",
        "source": "xpcom/io/nsLocalFileWin.cpp:2326",
        "file": "xpcom/io/nsLocalFileWin.cpp",
        "line": 2326,
        "trust": "cfi"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::net::CacheFileIOManager::SyncRemoveAllCacheFiles::<lambda_8>::operator()() const",
        "source": "netwerk/cache2/CacheFileIOManager.cpp:4484",
        "file": "netwerk/cache2/CacheFileIOManager.cpp",
        "line": 4484,
        "trust": "inlined"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::net::CacheFileIOManager::SyncRemoveAllCacheFiles()",
        "source": "netwerk/cache2/CacheFileIOManager.cpp:4456",
        "file": "netwerk/cache2/CacheFileIOManager.cpp",
        "line": 4456,
        "trust": "cfi"
      },
      {
        "frame_index": 4,
        "module": "xul.dll",
        "function": "mozilla::net::CacheFileIOManager::Shutdown()",
        "source": "netwerk/cache2/CacheFileIOManager.cpp:1322",
        "file": "netwerk/cache2/CacheFileIOManager.cpp",
        "line": 1322,
        "trust": "cfi"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "mozilla::net::CacheObserver::Observe(nsISupports*, char const*, char16_t const*)",
        "source": "netwerk/cache2/CacheObserver.cpp:225",
        "file": "netwerk/cache2/CacheObserver.cpp",
        "line": 225,
        "trust": "cfi"
      },
      {
        "frame_index": 6,
        "module": "xul.dll",
        "function": "nsObserverList::NotifyObservers(nsISupports*, char const*, char16_t const*)",
        "source": "xpcom/ds/nsObserverList.cpp:71",
        "file": "xpcom/ds/nsObserverList.cpp",
        "line": 71,
        "trust": "inlined"
      },
      {
        "frame_index": 6,
        "module": "xul.dll",
        "function": "nsObserverService::NotifyObservers(nsISupports*, char const*, char16_t const*)",
        "source": "xpcom/ds/nsObserverService.cpp:288",
        "file": "xpcom/ds/nsObserverService.cpp",
        "line": 288,
        "trust": "cfi"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "mozilla::AppShutdown::AdvanceShutdownPhaseInternal(mozilla::ShutdownPhase, bool, char16_t const*, nsCOMPtr<nsISupports> const&)",
        "source": "xpcom/base/AppShutdown.cpp:442",
        "file": "xpcom/base/AppShutdown.cpp",
        "line": 442,
        "trust": "cfi"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "mozilla::AppShutdown::AdvanceShutdownPhase(mozilla::ShutdownPhase, char16_t const*, nsCOMPtr<nsISupports> const&)",
        "source": "xpcom/base/AppShutdown.cpp:465",
        "file": "xpcom/base/AppShutdown.cpp",
        "line": 465,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "nsXREDirProvider::DoShutdown()",
        "source": "toolkit/xre/nsXREDirProvider.cpp:694",
        "file": "toolkit/xre/nsXREDirProvider.cpp",
        "line": 694,
        "trust": "cfi"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "ScopedXPCOMStartup::~ScopedXPCOMStartup()",
        "source": "toolkit/xre/nsAppRunner.cpp:2016",
        "file": "toolkit/xre/nsAppRunner.cpp",
        "line": 2016,
        "trust": "cfi"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "std::default_delete<ScopedXPCOMStartup>::operator()(ScopedXPCOMStartup*) const",
        "source": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/memory:3139",
        "file": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/memory",
        "line": 3139,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "std::unique_ptr<ScopedXPCOMStartup, std::default_delete<ScopedXPCOMStartup> >::reset(ScopedXPCOMStartup*)",
        "source": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/memory:3284",
        "file": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/memory",
        "line": 3284,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "std::unique_ptr<ScopedXPCOMStartup, std::default_delete<ScopedXPCOMStartup> >::operator=(void*)",
        "source": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/memory:3185",
        "file": "/builds/worker/fetches/vs/VC/Tools/MSVC/14.39.33519/include/memory",
        "line": 3185,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "XREMain::XRE_main(int, char**, mozilla::BootstrapConfig const&)",
        "source": "toolkit/xre/nsAppRunner.cpp:6215",
        "file": "toolkit/xre/nsAppRunner.cpp",
        "line": 6215,
        "trust": "cfi"
      },
      {
        "frame_index": 11,
        "module": "xul.dll",
        "function": "XRE_main(int, char**, mozilla::BootstrapConfig const&)",
        "source": "toolkit/xre/nsAppRunner.cpp:6251",
        "file": "toolkit/xre/nsAppRunner.cpp",
        "line": 6251,
        "trust": "cfi"
      },
      {
        "frame_index": 12,
        "module": "firefox.exe",
        "function": "do_main(int, char**, char**)",
        "source": "browser/app/nsBrowserApp.cpp:229",
        "file": "browser/app/nsBrowserApp.cpp",
        "line": 229,
        "trust": "inlined"
      },
      {
        "frame_index": 12,
        "module": "firefox.exe",
        "function": "NS_internal_main(int, char**, char**)",
        "source": "browser/app/nsBrowserApp.cpp:487",
        "file": "browser/app/nsBrowserApp.cpp",
        "line": 487,
        "trust": "inlined"
      },
      {
        "frame_index": 12,
        "module": "firefox.exe",
        "function": "wmain(int, wchar_t**)",
        "source": "toolkit/xre/nsWindowsWMain.cpp:150",
        "file": "toolkit/xre/nsWindowsWMain.cpp",
        "line": 150,
        "trust": "cfi"
      },
      {
        "frame_index": 13,
        "module": "firefox.exe",
        "function": "invoke_main()",
        "source": "/builds/worker/workspace/obj-build/browser/app/D:/a/_work/1/s/src/vctools/crt/vcstartup/src/startup/exe_common.inl:90",
        "file": "/builds/worker/workspace/obj-build/browser/app/D:/a/_work/1/s/src/vctools/crt/vcstartup/src/startup/exe_common.inl",
        "line": 90,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "firefox.exe",
        "function": "__scrt_common_main_seh()",
        "source": "/builds/worker/workspace/obj-build/browser/app/D:/a/_work/1/s/src/vctools/crt/vcstartup/src/startup/exe_common.inl:288",
        "file": "/builds/worker/workspace/obj-build/browser/app/D:/a/_work/1/s/src/vctools/crt/vcstartup/src/startup/exe_common.inl",
        "line": 288,
        "trust": "cfi"
      },
      {
        "frame_index": 14,
        "module": "kernel32.dll",
        "function": "BaseThreadInitThunk",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 15,
        "module": "ntdll.dll",
        "function": "RtlUserThreadStart",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      }
    ],
    "frame_count": 25
  },
  "regressed_by": [
    "1980886"
  ],
  "regressor_count": 1,
  "source": "step2",
  "bugzilla_status": "RESOLVED",
  "bugzilla_resolution": "FIXED",
  "bugzilla_lookup_timestamp": "2025-12-15T15:53:28.605973"
}