{
  "bug_id": "2002697",
  "summary": "Crash in [@ mozilla::gmp::GMPProcessParent::Delete]",
  "product": "Core",
  "component": "Audio/Video: GMP",
  "creation_time": "2025-11-27T04:41:39Z",
  "crash_signatures": [
    "mozilla::gmp::GMPProcessParent::Delete"
  ],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=2002697",
  "socorro_crash_ids": [
    "73cbfd08-a9c5-41ed-81a7-1108b0251127"
  ],
  "stack_source": "socorro",
  "crash_id": "73cbfd08-a9c5-41ed-81a7-1108b0251127",
  "socorro_metadata": {
    "signature": "",
    "crash_reason": "",
    "moz_crash_reason": "",
    "crashing_thread": {
      "index": 40,
      "name": "GMPThread"
    }
  },
  "stack_trace": {
    "source": "socorro",
    "crash_id": "73cbfd08-a9c5-41ed-81a7-1108b0251127",
    "frames": [
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "nsCOMPtr<nsITimer>::assign_assuming_AddRef(nsITimer*)",
        "source": "xpcom/base/nsCOMPtr.h:317",
        "file": "xpcom/base/nsCOMPtr.h",
        "line": 317,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "nsCOMPtr<nsITimer>::assign_with_AddRef(nsITimer*)",
        "source": "xpcom/base/nsCOMPtr.h:813",
        "file": "xpcom/base/nsCOMPtr.h",
        "line": 813,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "nsCOMPtr<nsITimer>::operator=(nsCOMPtr<nsITimer> const&)",
        "source": "mfbt/RefPtr.h:187",
        "file": "mfbt/RefPtr.h",
        "line": 187,
        "trust": "context"
      },
      {
        "frame_index": 1,
        "module": "xul.dll",
        "function": "mozilla::gmp::GMPProcessParent::Delete(nsCOMPtr<nsIRunnable>)",
        "source": "dom/media/gmp/GMPProcessParent.cpp:247",
        "file": "dom/media/gmp/GMPProcessParent.cpp",
        "line": 247,
        "trust": "cfi"
      },
      {
        "frame_index": 2,
        "module": "xul.dll",
        "function": "mozilla::gmp::GMPParent::DeleteProcess()",
        "source": "dom/media/gmp/GMPParent.cpp:673",
        "file": "dom/media/gmp/GMPParent.cpp",
        "line": 673,
        "trust": "cfi"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::MozPromise<nsTString<char>, mozilla::ipc::ResponseRejectReason, 1>::ThenValue<`lambda at /builds/worker/checkouts/gecko/dom/media/gmp/GMPParent.cpp:643:11', `lambda at /builds/worker/checkouts/gecko/dom/media/gmp/GMPParent.cpp:659:11'>::DoResolveOrRejectInternal(mozilla::MozPromise<nsTString<char>, mozilla::ipc::ResponseRejectReason, 1>::ResolveOrRejectValue&)",
        "source": "xpcom/threads/MozPromise.h:872",
        "file": "xpcom/threads/MozPromise.h",
        "line": 872,
        "trust": "cfi"
      },
      {
        "frame_index": 4,
        "module": "xul.dll",
        "function": "mozilla::MozPromise<nsTAutoStringN<char16_t, 64>, nsresult, 0>::ThenValueBase::ResolveOrRejectRunnable::Run()",
        "source": "xpcom/threads/MozPromise.h:505",
        "file": "xpcom/threads/MozPromise.h",
        "line": 505,
        "trust": "cfi"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "mozilla::SimpleTaskQueue::DrainTasks()",
        "source": "xpcom/threads/TaskDispatcher.h:48",
        "file": "xpcom/threads/TaskDispatcher.h",
        "line": 48,
        "trust": "inlined"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "nsThread::DrainDirectTasks()",
        "source": "xpcom/threads/nsThread.cpp:1383",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 1383,
        "trust": "inlined"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "nsThread::ProcessNextEvent(bool, bool*)",
        "source": "xpcom/threads/nsThread.cpp:1190",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 1190,
        "trust": "inlined"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "NS_ProcessNextEvent(nsIThread*, bool)",
        "source": "xpcom/threads/nsThreadUtils.cpp:462",
        "file": "xpcom/threads/nsThreadUtils.cpp",
        "line": 462,
        "trust": "cfi"
      },
      {
        "frame_index": 6,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessagePumpForNonMainThreads::Run(base::MessagePump::Delegate*)",
        "source": "ipc/glue/MessagePump.cpp:329",
        "file": "ipc/glue/MessagePump.cpp",
        "line": 329,
        "trust": "cfi"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "MessageLoop::RunInternal()",
        "source": "ipc/chromium/src/base/message_loop.cc:368",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 368,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "MessageLoop::RunHandler()",
        "source": "ipc/chromium/src/base/message_loop.cc:361",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 361,
        "trust": "cfi"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "MessageLoop::Run()",
        "source": "ipc/chromium/src/base/message_loop.cc:343",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 343,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "nsThread::ThreadFunc(void*)",
        "source": "xpcom/threads/nsThread.cpp:376",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 376,
        "trust": "cfi"
      },
      {
        "frame_index": 9,
        "module": "nss3.dll",
        "function": "_PR_NativeRunThread(void*)",
        "source": "nsprpub/pr/src/threads/combined/pruthr.c:382",
        "file": "nsprpub/pr/src/threads/combined/pruthr.c",
        "line": 382,
        "trust": "cfi"
      },
      {
        "frame_index": 10,
        "module": "nss3.dll",
        "function": "pr_root(void*)",
        "source": "nsprpub/pr/src/md/windows/w95thred.c:129",
        "file": "nsprpub/pr/src/md/windows/w95thred.c",
        "line": 129,
        "trust": "cfi"
      },
      {
        "frame_index": 11,
        "module": "ucrtbase.dll",
        "function": "thread_start<unsigned int (__cdecl*)(void*), 1>",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 12,
        "module": "kernel32.dll",
        "function": "BaseThreadInitThunk",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 13,
        "module": "mozglue.dll",
        "function": "mozilla::interceptor::FuncHook<mozilla::interceptor::WindowsDllInterceptor<mozilla::interceptor::VMSharingPolicyShared>, void (*)(int, void*, void*)>::operator()(int&, void*&, void*&) const",
        "source": "toolkit/xre/dllservices/mozglue/nsWindowsDllInterceptor.h:149",
        "file": "toolkit/xre/dllservices/mozglue/nsWindowsDllInterceptor.h",
        "line": 149,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "mozglue.dll",
        "function": "patched_BaseThreadInitThunk(int, void*, void*)",
        "source": "toolkit/xre/dllservices/mozglue/WindowsDllBlocklist.cpp:567",
        "file": "toolkit/xre/dllservices/mozglue/WindowsDllBlocklist.cpp",
        "line": 567,
        "trust": "cfi"
      },
      {
        "frame_index": 14,
        "module": "ntdll.dll",
        "function": "RtlUserThreadStart",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      }
    ],
    "frame_count": 23
  },
  "regressed_by": [
    "1851870"
  ],
  "regressor_count": 1,
  "source": "step2",
  "bugzilla_status": "RESOLVED",
  "bugzilla_resolution": "FIXED",
  "bugzilla_lookup_timestamp": "2025-12-15T15:53:28.605987"
}