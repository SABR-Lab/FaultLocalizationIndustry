{
  "bug_id": "2003956",
  "summary": "Crash in [@ mozilla::MustConsumeMicroTask::~MustConsumeMicroTask]",
  "product": "Core",
  "component": "JavaScript Engine",
  "creation_time": "2025-12-04T00:23:10Z",
  "crash_signatures": [
    "mozilla::MustConsumeMicroTask::~MustConsumeMicroTask"
  ],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=2003956",
  "socorro_crash_ids": [
    "e4403339-c02f-4e94-8e4b-dde830251203"
  ],
  "stack_source": "socorro",
  "crash_id": "e4403339-c02f-4e94-8e4b-dde830251203",
  "socorro_metadata": {
    "signature": "",
    "crash_reason": "",
    "moz_crash_reason": "",
    "crashing_thread": {
      "index": 0,
      "name": "WebExtensions"
    }
  },
  "stack_trace": {
    "source": "socorro",
    "crash_id": "e4403339-c02f-4e94-8e4b-dde830251203",
    "frames": [
      {
        "frame_index": 0,
        "module": "libxul.so",
        "function": "MOZ_CrashSequence(void*, long)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/Assertions.h:237",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/Assertions.h",
        "line": 237,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "libxul.so",
        "function": "mozilla::MustConsumeMicroTask::~MustConsumeMicroTask()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h:127",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h",
        "line": 127,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "libxul.so",
        "function": "JS::Rooted<mozilla::MustConsumeMicroTask>::~Rooted()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/js/RootingAPI.h:1228",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/js/RootingAPI.h",
        "line": 1228,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "libxul.so",
        "function": "mozilla::CycleCollectedJSContext::PerformMicroTaskCheckPoint(bool)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/base/CycleCollectedJSContext.cpp:1264",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/base/CycleCollectedJSContext.cpp",
        "line": 1264,
        "trust": "context"
      },
      {
        "frame_index": 1,
        "module": "libxul.so",
        "function": "mozilla::CycleCollectedJSContext::LeaveMicroTask()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h:445",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/CycleCollectedJSContext.h",
        "line": 445,
        "trust": "inlined"
      },
      {
        "frame_index": 1,
        "module": "libxul.so",
        "function": "mozilla::dom::CallSetup::~CallSetup()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/dom/bindings/CallbackObject.cpp:490",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/bindings/CallbackObject.cpp",
        "line": 490,
        "trust": "cfi"
      },
      {
        "frame_index": 2,
        "module": "libxul.so",
        "function": "mozilla::dom::MessageListener::ReceiveMessage(mozilla::dom::ReceiveMessageArgument const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&, char const*, mozilla::dom::CallbackObjectBase::ExceptionHandling, JS::Realm*)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/dom/MessageManagerBinding.h:580",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/dist/include/mozilla/dom/MessageManagerBinding.h",
        "line": 580,
        "trust": "inlined"
      },
      {
        "frame_index": 2,
        "module": "libxul.so",
        "function": "mozilla::dom::JSActor::CallReceiveMessage(JSContext*, mozilla::dom::JSActorMessageMeta const&, JS::Handle<JS::Value>, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp:292",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp",
        "line": 292,
        "trust": "cfi"
      },
      {
        "frame_index": 3,
        "module": "libxul.so",
        "function": "mozilla::dom::JSActor::ReceiveMessage(JSContext*, mozilla::dom::JSActorMessageMeta const&, JS::Handle<JS::Value>, mozilla::ErrorResult&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp:308",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActor.cpp",
        "line": 308,
        "trust": "inlined"
      },
      {
        "frame_index": 3,
        "module": "libxul.so",
        "function": "mozilla::dom::JSActorManager::ReceiveRawMessage(mozilla::dom::JSActorMessageMeta const&, mozilla::dom::JSIPCValue&&, std::unique_ptr<mozilla::dom::ipc::StructuredCloneData, std::default_delete<mozilla::dom::ipc::StructuredCloneData> >)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActorManager.cpp:215",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/jsactor/JSActorManager.cpp",
        "line": 215,
        "trust": "cfi"
      },
      {
        "frame_index": 4,
        "module": "libxul.so",
        "function": "mozilla::dom::WindowGlobalChild::RecvRawMessage(mozilla::dom::JSActorMessageMeta const&, mozilla::dom::JSIPCValue&&, std::unique_ptr<mozilla::dom::ClonedMessageData, std::default_delete<mozilla::dom::ClonedMessageData> > const&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/WindowGlobalChild.cpp:581",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/dom/ipc/WindowGlobalChild.cpp",
        "line": 581,
        "trust": "inlined"
      },
      {
        "frame_index": 4,
        "module": "libxul.so",
        "function": "mozilla::dom::PWindowGlobalChild::OnMessageReceived(IPC::Message const&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/obj/ipc/ipdl/PWindowGlobalChild.cpp:1942",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/ipc/ipdl/PWindowGlobalChild.cpp",
        "line": 1942,
        "trust": "cfi"
      },
      {
        "frame_index": 5,
        "module": "libxul.so",
        "function": "mozilla::dom::PContentChild::OnMessageReceived(IPC::Message const&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/obj/ipc/ipdl/PContentChild.cpp:8476",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/obj/ipc/ipdl/PContentChild.cpp",
        "line": 8476,
        "trust": "cfi"
      },
      {
        "frame_index": 6,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessageChannel::DispatchAsyncMessage(mozilla::ipc::ActorLifecycleProxy*, IPC::Message const&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessageChannel.cpp:1793",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessageChannel.cpp",
        "line": 1793,
        "trust": "inlined"
      },
      {
        "frame_index": 6,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessageChannel::DispatchMessage(mozilla::ipc::ActorLifecycleProxy*, std::unique_ptr<IPC::Message, std::default_delete<IPC::Message> >)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessageChannel.cpp:1719",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessageChannel.cpp",
        "line": 1719,
        "trust": "inlined"
      },
      {
        "frame_index": 6,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessageChannel::RunMessage(mozilla::ipc::ActorLifecycleProxy*, mozilla::ipc::MessageChannel::MessageTask&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessageChannel.cpp:1508",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessageChannel.cpp",
        "line": 1508,
        "trust": "inlined"
      },
      {
        "frame_index": 6,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessageChannel::MessageTask::Run()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessageChannel.cpp:1610",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessageChannel.cpp",
        "line": 1610,
        "trust": "cfi"
      },
      {
        "frame_index": 7,
        "module": "libxul.so",
        "function": "mozilla::RunnableTask::Run()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp:705",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp",
        "line": 705,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "libxul.so",
        "function": "mozilla::TaskController::RunTask(mozilla::Task*)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp:196",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp",
        "line": 196,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "libxul.so",
        "function": "mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp:1325",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp",
        "line": 1325,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "libxul.so",
        "function": "mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp:1148",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp",
        "line": 1148,
        "trust": "cfi"
      },
      {
        "frame_index": 8,
        "module": "libxul.so",
        "function": "mozilla::TaskController::ProcessPendingMTTask(bool)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp:641",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp",
        "line": 641,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "libxul.so",
        "function": "mozilla::TaskController::TaskController()::$_0::operator()() const",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp:333",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/TaskController.cpp",
        "line": 333,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "libxul.so",
        "function": "mozilla::detail::RunnableFunction<mozilla::TaskController::TaskController()::$_0>::Run()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/nsThreadUtils.h:549",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/nsThreadUtils.h",
        "line": 549,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "libxul.so",
        "function": "nsThread::ProcessNextEvent(bool, bool*)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/nsThread.cpp:1164",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/nsThread.cpp",
        "line": 1164,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "libxul.so",
        "function": "NS_ProcessNextEvent(nsIThread*, bool)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/nsThreadUtils.cpp:461",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/xpcom/threads/nsThreadUtils.cpp",
        "line": 461,
        "trust": "cfi"
      },
      {
        "frame_index": 9,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessagePump.cpp:85",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessagePump.cpp",
        "line": 85,
        "trust": "cfi"
      },
      {
        "frame_index": 10,
        "module": "libxul.so",
        "function": "MessageLoop::RunInternal()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc:368",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc",
        "line": 368,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "libxul.so",
        "function": "MessageLoop::RunHandler()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc:361",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc",
        "line": 361,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "libxul.so",
        "function": "MessageLoop::Run()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc:343",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc",
        "line": 343,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "libxul.so",
        "function": "nsBaseAppShell::Run()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/widget/nsBaseAppShell.cpp:152",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/widget/nsBaseAppShell.cpp",
        "line": 152,
        "trust": "cfi"
      },
      {
        "frame_index": 11,
        "module": "libxul.so",
        "function": "nsAppShell::Run()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/widget/gtk/nsAppShell.cpp:555",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/widget/gtk/nsAppShell.cpp",
        "line": 555,
        "trust": "cfi"
      },
      {
        "frame_index": 12,
        "module": "libxul.so",
        "function": "XRE_RunAppShell()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/toolkit/xre/nsEmbedFunctions.cpp:656",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/toolkit/xre/nsEmbedFunctions.cpp",
        "line": 656,
        "trust": "inlined"
      },
      {
        "frame_index": 12,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessagePumpForChildProcess::Run(base::MessagePump::Delegate*)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessagePump.cpp:235",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/glue/MessagePump.cpp",
        "line": 235,
        "trust": "cfi"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "MessageLoop::RunInternal()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc:368",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc",
        "line": 368,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "MessageLoop::RunHandler()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc:361",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc",
        "line": 361,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "MessageLoop::Run()",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc:343",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/ipc/chromium/src/base/message_loop.cc",
        "line": 343,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "XRE_InitChildProcess(int, char**, XREChildData const*)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/toolkit/xre/nsEmbedFunctions.cpp:594",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/toolkit/xre/nsEmbedFunctions.cpp",
        "line": 594,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "mozilla::BootstrapImpl::XRE_InitChildProcess(int, char**, XREChildData const*)",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/toolkit/xre/Bootstrap.cpp:60",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/toolkit/xre/Bootstrap.cpp",
        "line": 60,
        "trust": "cfi"
      },
      {
        "frame_index": 14,
        "module": "firefox",
        "function": "main",
        "source": "/usr/src/debug/firefox-nightly/mozilla-central/browser/app/nsBrowserApp.cpp:465",
        "file": "/usr/src/debug/firefox-nightly/mozilla-central/browser/app/nsBrowserApp.cpp",
        "line": 465,
        "trust": "cfi"
      },
      {
        "frame_index": 15,
        "module": "libc.so.6",
        "function": "__libc_start_call_main",
        "source": "/usr/src/debug/glibc/glibc/sysdeps/nptl/libc_start_call_main.h:58",
        "file": "/usr/src/debug/glibc/glibc/sysdeps/nptl/libc_start_call_main.h",
        "line": 58,
        "trust": "cfi"
      },
      {
        "frame_index": 16,
        "module": "libc.so.6",
        "function": "__libc_start_main_alias_2",
        "source": "/usr/src/debug/glibc/glibc/csu/libc-start.c:360",
        "file": "/usr/src/debug/glibc/glibc/csu/libc-start.c",
        "line": 360,
        "trust": "cfi"
      },
      {
        "frame_index": 17,
        "module": "firefox",
        "function": "_start",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      }
    ],
    "frame_count": 43
  },
  "regressed_by": [
    "1997192"
  ],
  "regressor_count": 1,
  "source": "step2",
  "bugzilla_status": "RESOLVED",
  "bugzilla_resolution": "FIXED",
  "bugzilla_lookup_timestamp": "2025-12-15T15:53:28.606288"
}