{
  "bug_id": "1819723",
  "summary": "Crash in [@ alloc::string::String::truncate]",
  "status": "RESOLVED",
  "resolution": "FIXED",
  "product": "Firefox",
  "component": "General",
  "version": "Firefox 112",
  "severity": "--",
  "priority": "--",
  "creation_time": "2023-03-01T19:54:38Z",
  "last_change_time": "2023-03-02T18:08:13Z",
  "is_recent": false,
  "crash_signature_raw": "[@ alloc::string::String::truncate]",
  "crash_signatures": [
    "alloc::string::String::truncate"
  ],
  "keywords": [
    "crash",
    "regression"
  ],
  "regressed_by": [
    "1818349"
  ],
  "regressions": [],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1819723",
  "socorro_links": [
    {
      "url": "https://crash-stats.mozilla.org/report/index/a570ac60-3856-4fa6-b6c6-f80b70230301",
      "crash_id": "a570ac60-3856-4fa6-b6c6-f80b70230301",
      "comment_index": 0,
      "comment_text": "Crash report: https://crash-stats.mozilla.org/report/index/a570ac60-3856-4fa6-b6c6-f80b70230301\n\nMOZ_CRASH Reason: ```assertion failed: self.is_char_boundary(new_len)```\n\nTop 10 frames of crashing thread:\n```\n0  xul.dll  MOZ_Crash  mfbt/Assertions.h:261\n0  xul.dll  RustMozCrash  mozglue/static/rust/wrappers.cpp:17\n1  xul.dll  mozglue_static::panic_hook  mozglue/static/rust/lib.rs:91\n2  xul.dll  core::ops::function::Fn::call<void   /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/ops/function.rs:337\n3  xul.dll  alloc::boxed::impl$47::call  library/alloc/src/boxed.rs:2032\n3  xul.dll  std::panicking::rust_panic_with_hook  library/std/src/panicking.rs:692\n4  xul.dll  std::panicking::begin_panic_handler::closure$0  library/std/src/panicking.rs:577\n5  xul.dll  std::sys_common::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic_handler::closure_env$0, never$>  library/std/src/sys_common/backtrace.rs:137\n6  xul.dll  std::panicking::begin_panic_handler  library/std/src/panicking.rs:575\n7  xul.dll  core::panicking::panic_fmt  library/core/src/panicking.rs:64\n```"
    }
  ],
  "socorro_crash_ids": [
    "a570ac60-3856-4fa6-b6c6-f80b70230301"
  ],
  "has_socorro_link": true,
  "has_direct_crash_id": true,
  "stack_traces": [
    {
      "comment_id": 16306341,
      "comment_count": 0,
      "creator": "dsmith@mozilla.com",
      "creation_time": "2023-03-01T19:54:38Z",
      "raw_text": "Crash report: https://crash-stats.mozilla.org/report/index/a570ac60-3856-4fa6-b6c6-f80b70230301\n\nMOZ_CRASH Reason: ```assertion failed: self.is_char_boundary(new_len)```\n\nTop 10 frames of crashing thread:\n```\n0  xul.dll  MOZ_Crash  mfbt/Assertions.h:261\n0  xul.dll  RustMozCrash  mozglue/static/rust/wrappers.cpp:17\n1  xul.dll  mozglue_static::panic_hook  mozglue/static/rust/lib.rs:91\n2  xul.dll  core::ops::function::Fn::call<void   /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/ops/function.rs:337\n3  xul.dll  alloc::boxed::impl$47::call  library/alloc/src/boxed.rs:2032\n3  xul.dll  std::panicking::rust_panic_with_hook  library/std/src/panicking.rs:692\n4  xul.dll  std::panicking::begin_panic_handler::closure$0  library/std/src/panicking.rs:577\n5  xul.dll  std::sys_common::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic_handler::closure_env$0, never$>  library/std/src/sys_common/backtrace.rs:137\n6  xul.dll  std::panicking::begin_panic_handler  library/std/src/panicking.rs:575\n7  xul.dll  core::panicking::panic_fmt  library/core/src/panicking.rs:64\n```",
      "matched_patterns": [
        "(?i)(crash|stack)\\s*(trace|dump|report)",
        "(?i)crashing\\s+thread"
      ],
      "parsed_frames": [
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "MOZ_Crash",
          "file": "mfbt/Assertions.h",
          "line": 261,
          "raw": "0  xul.dll  MOZ_Crash  mfbt/Assertions.h:261"
        },
        {
          "frame_index": 0,
          "module": "xul.dll",
          "function": "RustMozCrash",
          "file": "mozglue/static/rust/wrappers.cpp",
          "line": 17,
          "raw": "0  xul.dll  RustMozCrash  mozglue/static/rust/wrappers.cpp:17"
        },
        {
          "frame_index": 1,
          "module": "xul.dll",
          "function": "mozglue_static::panic_hook",
          "file": "mozglue/static/rust/lib.rs",
          "line": 91,
          "raw": "1  xul.dll  mozglue_static::panic_hook  mozglue/static/rust/lib.rs:91"
        },
        {
          "frame_index": 2,
          "module": "xul.dll",
          "function": "core::ops::function::Fn::call<void",
          "file": "/rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/ops/function.rs",
          "line": 337,
          "raw": "2  xul.dll  core::ops::function::Fn::call<void   /rustc/fc594f15669680fa70d255faec3ca3fb507c3405/library/core/src/ops/function.rs:337"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "alloc::boxed::impl$47::call",
          "file": "library/alloc/src/boxed.rs",
          "line": 2032,
          "raw": "3  xul.dll  alloc::boxed::impl$47::call  library/alloc/src/boxed.rs:2032"
        },
        {
          "frame_index": 3,
          "module": "xul.dll",
          "function": "std::panicking::rust_panic_with_hook",
          "file": "library/std/src/panicking.rs",
          "line": 692,
          "raw": "3  xul.dll  std::panicking::rust_panic_with_hook  library/std/src/panicking.rs:692"
        },
        {
          "frame_index": 4,
          "module": "xul.dll",
          "function": "std::panicking::begin_panic_handler::closure$0",
          "file": "library/std/src/panicking.rs",
          "line": 577,
          "raw": "4  xul.dll  std::panicking::begin_panic_handler::closure$0  library/std/src/panicking.rs:577"
        },
        {
          "frame_index": 5,
          "module": "xul.dll",
          "function": "std::sys_common::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic_handler::closure_env$0, never$>",
          "file": "library/std/src/sys_common/backtrace.rs",
          "line": 137,
          "raw": "5  xul.dll  std::sys_common::backtrace::__rust_end_short_backtrace<std::panicking::begin_panic_handler::closure_env$0, never$>  library/std/src/sys_common/backtrace.rs:137"
        },
        {
          "frame_index": 6,
          "module": "xul.dll",
          "function": "std::panicking::begin_panic_handler",
          "file": "library/std/src/panicking.rs",
          "line": 575,
          "raw": "6  xul.dll  std::panicking::begin_panic_handler  library/std/src/panicking.rs:575"
        },
        {
          "frame_index": 7,
          "module": "xul.dll",
          "function": "core::panicking::panic_fmt",
          "file": "library/core/src/panicking.rs",
          "line": 64,
          "raw": "7  xul.dll  core::panicking::panic_fmt  library/core/src/panicking.rs:64"
        }
      ],
      "frame_count": 10
    }
  ],
  "has_stack_traces": true,
  "stack_trace_count": 1,
  "total_parsed_frames": 10,
  "regressor_count": 1,
  "source": "step1",
  "bugzilla_status": "RESOLVED",
  "bugzilla_resolution": "FIXED",
  "bugzilla_lookup_timestamp": "2025-12-15T15:53:28.604974",
  "fixing_commit_count": 1,
  "category": "single_commit",
  "commit_source": "local",
  "fixing_commit": {
    "commit_hash": "2147c5c81edf9cd56c19e7e92dfebfcd77329978",
    "short_hash": "2147c5c81edf",
    "description": "Backed out changesets b05343a5b533 and 57b2cda7e0db (bug 1818349) for causing bug 1819723.",
    "author": "Ryan VanderMeulen <ryanvm@gmail.com>",
    "pushdate": "2023-03-01 17:52 -0500",
    "files": [
      ".cargo/config.in",
      "Cargo.lock",
      "Cargo.toml",
      "testing/tps/tps/testrunner.py",
      "third_party/rust/error-support-macros/.cargo-checksum.json",
      "third_party/rust/error-support-macros/src/argument.rs",
      "third_party/rust/error-support-macros/src/lib.rs",
      "third_party/rust/sync15/.cargo-checksum.json",
      "third_party/rust/sync15/src/client/coll_state.rs",
      "third_party/rust/sync15/src/client/coll_update.rs",
      "third_party/rust/sync15/src/client/mod.rs",
      "third_party/rust/sync15/src/client/storage_client.rs",
      "third_party/rust/sync15/src/client/sync.rs",
      "third_party/rust/sync15/src/clients_engine/engine.rs",
      "third_party/rust/sync15/src/engine/changeset.rs",
      "third_party/rust/sync15/src/engine/mod.rs",
      "third_party/rust/sync15/src/engine/request.rs",
      "third_party/rust/sync15/src/engine/sync_engine.rs",
      "third_party/rust/sync15/src/lib.rs",
      "third_party/rust/tabs/.cargo-checksum.json",
      "third_party/rust/tabs/src/storage.rs",
      "third_party/rust/tabs/src/sync/bridge.rs",
      "third_party/rust/tabs/src/sync/engine.rs",
      "third_party/rust/tabs/src/sync/full_sync.rs"
    ],
    "file_count": 24,
    "components": []
  },
  "regressor_analysis": [
    {
      "regressor_bug_id": "1818349",
      "total_commits": 5,
      "matching_commits_count": 5,
      "matching_commits": [
        {
          "commit_hash": "2147c5c81edf9cd56c19e7e92dfebfcd77329978",
          "short_hash": "2147c5c81edf",
          "description": "Backed out changesets b05343a5b533 and 57b2cda7e0db (bug 1818349) for causing bug 1819723.",
          "author": "Ryan VanderMeulen <ryanvm@gmail.com>",
          "pushdate": "2023-03-01 17:52 -0500",
          "files_modified": [
            ".cargo/config.in",
            "Cargo.lock",
            "Cargo.toml",
            "testing/tps/tps/testrunner.py",
            "third_party/rust/error-support-macros/.cargo-checksum.json",
            "third_party/rust/error-support-macros/src/argument.rs",
            "third_party/rust/error-support-macros/src/lib.rs",
            "third_party/rust/sync15/.cargo-checksum.json",
            "third_party/rust/sync15/src/client/coll_state.rs",
            "third_party/rust/sync15/src/client/coll_update.rs",
            "third_party/rust/sync15/src/client/mod.rs",
            "third_party/rust/sync15/src/client/storage_client.rs",
            "third_party/rust/sync15/src/client/sync.rs",
            "third_party/rust/sync15/src/clients_engine/engine.rs",
            "third_party/rust/sync15/src/engine/changeset.rs",
            "third_party/rust/sync15/src/engine/mod.rs",
            "third_party/rust/sync15/src/engine/request.rs",
            "third_party/rust/sync15/src/engine/sync_engine.rs",
            "third_party/rust/sync15/src/lib.rs",
            "third_party/rust/tabs/.cargo-checksum.json",
            "third_party/rust/tabs/src/storage.rs",
            "third_party/rust/tabs/src/sync/bridge.rs",
            "third_party/rust/tabs/src/sync/engine.rs",
            "third_party/rust/tabs/src/sync/full_sync.rs"
          ],
          "file_overlap_count": 24,
          "overlapping_files": [
            "third_party/rust/sync15/src/client/coll_update.rs",
            "third_party/rust/sync15/src/client/mod.rs",
            "third_party/rust/sync15/.cargo-checksum.json",
            "third_party/rust/sync15/src/client/sync.rs",
            "Cargo.toml",
            "third_party/rust/sync15/src/client/storage_client.rs",
            "third_party/rust/sync15/src/clients_engine/engine.rs",
            "third_party/rust/error-support-macros/src/argument.rs",
            "testing/tps/tps/testrunner.py",
            "third_party/rust/tabs/.cargo-checksum.json",
            "third_party/rust/tabs/src/sync/bridge.rs",
            "third_party/rust/error-support-macros/.cargo-checksum.json",
            "third_party/rust/tabs/src/storage.rs",
            "Cargo.lock",
            "third_party/rust/sync15/src/engine/sync_engine.rs",
            "third_party/rust/sync15/src/engine/mod.rs",
            "third_party/rust/sync15/src/client/coll_state.rs",
            "third_party/rust/sync15/src/engine/request.rs",
            "third_party/rust/tabs/src/sync/engine.rs",
            "third_party/rust/error-support-macros/src/lib.rs",
            "third_party/rust/tabs/src/sync/full_sync.rs",
            ".cargo/config.in",
            "third_party/rust/sync15/src/lib.rs",
            "third_party/rust/sync15/src/engine/changeset.rs"
          ],
          "components": []
        },
        {
          "commit_hash": "57b2cda7e0db8b07fcc1e09113ce26add178c68a",
          "short_hash": "57b2cda7e0db",
          "description": "Bug 1818349 Part 1: Vendor new version of application-services r=markh\n\nDifferential Revision: https://phabricator.services.mozilla.com/D171181",
          "author": "Sammy Khamis <skhamis@mozilla.com>",
          "pushdate": "2023-03-01 03:56:13",
          "files_modified": [
            ".cargo/config.in",
            "Cargo.lock",
            "Cargo.toml",
            "third_party/rust/error-support-macros/.cargo-checksum.json",
            "third_party/rust/error-support-macros/src/argument.rs",
            "third_party/rust/error-support-macros/src/lib.rs",
            "third_party/rust/sync15/.cargo-checksum.json",
            "third_party/rust/sync15/src/client/coll_state.rs",
            "third_party/rust/sync15/src/client/coll_update.rs",
            "third_party/rust/sync15/src/client/mod.rs",
            "third_party/rust/sync15/src/client/storage_client.rs",
            "third_party/rust/sync15/src/client/sync.rs",
            "third_party/rust/sync15/src/clients_engine/engine.rs",
            "third_party/rust/sync15/src/engine/changeset.rs",
            "third_party/rust/sync15/src/engine/mod.rs",
            "third_party/rust/sync15/src/engine/request.rs",
            "third_party/rust/sync15/src/engine/sync_engine.rs",
            "third_party/rust/sync15/src/lib.rs",
            "third_party/rust/tabs/.cargo-checksum.json",
            "third_party/rust/tabs/src/storage.rs",
            "third_party/rust/tabs/src/sync/bridge.rs",
            "third_party/rust/tabs/src/sync/engine.rs",
            "third_party/rust/tabs/src/sync/full_sync.rs"
          ],
          "file_overlap_count": 23,
          "overlapping_files": [
            "third_party/rust/sync15/src/client/coll_update.rs",
            "third_party/rust/sync15/src/client/mod.rs",
            "third_party/rust/sync15/.cargo-checksum.json",
            "third_party/rust/sync15/src/client/sync.rs",
            "Cargo.toml",
            "third_party/rust/sync15/src/client/storage_client.rs",
            "third_party/rust/sync15/src/clients_engine/engine.rs",
            "third_party/rust/error-support-macros/src/argument.rs",
            "third_party/rust/tabs/.cargo-checksum.json",
            "third_party/rust/tabs/src/sync/bridge.rs",
            "third_party/rust/error-support-macros/.cargo-checksum.json",
            "third_party/rust/tabs/src/storage.rs",
            "Cargo.lock",
            "third_party/rust/sync15/src/engine/sync_engine.rs",
            "third_party/rust/sync15/src/engine/mod.rs",
            "third_party/rust/sync15/src/client/coll_state.rs",
            "third_party/rust/sync15/src/engine/request.rs",
            "third_party/rust/tabs/src/sync/engine.rs",
            "third_party/rust/error-support-macros/src/lib.rs",
            "third_party/rust/tabs/src/sync/full_sync.rs",
            ".cargo/config.in",
            "third_party/rust/sync15/src/lib.rs",
            "third_party/rust/sync15/src/engine/changeset.rs"
          ],
          "components": [
            "Firefox Build System::General"
          ]
        },
        {
          "commit_hash": "3326192e8db60772cb3d6a0f7987dc093c8ef35a",
          "short_hash": "3326192e8db6",
          "description": "Bug 1818349 Part 1: Vendor new version of application-services r=markh\n\nDifferential Revision: https://phabricator.services.mozilla.com/D171181",
          "author": "Sammy Khamis <skhamis@mozilla.com>",
          "pushdate": "2023-03-07 16:07:33",
          "files_modified": [
            ".cargo/config.in",
            "Cargo.lock",
            "Cargo.toml",
            "third_party/rust/error-support-macros/.cargo-checksum.json",
            "third_party/rust/error-support-macros/src/argument.rs",
            "third_party/rust/error-support-macros/src/lib.rs",
            "third_party/rust/sync15/.cargo-checksum.json",
            "third_party/rust/sync15/src/client/coll_state.rs",
            "third_party/rust/sync15/src/client/coll_update.rs",
            "third_party/rust/sync15/src/client/mod.rs",
            "third_party/rust/sync15/src/client/storage_client.rs",
            "third_party/rust/sync15/src/client/sync.rs",
            "third_party/rust/sync15/src/clients_engine/engine.rs",
            "third_party/rust/sync15/src/engine/changeset.rs",
            "third_party/rust/sync15/src/engine/mod.rs",
            "third_party/rust/sync15/src/engine/request.rs",
            "third_party/rust/sync15/src/engine/sync_engine.rs",
            "third_party/rust/sync15/src/lib.rs",
            "third_party/rust/tabs/.cargo-checksum.json",
            "third_party/rust/tabs/src/storage.rs",
            "third_party/rust/tabs/src/sync/bridge.rs",
            "third_party/rust/tabs/src/sync/engine.rs",
            "third_party/rust/tabs/src/sync/full_sync.rs"
          ],
          "file_overlap_count": 23,
          "overlapping_files": [
            "third_party/rust/sync15/src/client/coll_update.rs",
            "third_party/rust/sync15/src/client/mod.rs",
            "third_party/rust/sync15/.cargo-checksum.json",
            "third_party/rust/sync15/src/client/sync.rs",
            "Cargo.toml",
            "third_party/rust/sync15/src/client/storage_client.rs",
            "third_party/rust/sync15/src/clients_engine/engine.rs",
            "third_party/rust/error-support-macros/src/argument.rs",
            "third_party/rust/tabs/.cargo-checksum.json",
            "third_party/rust/tabs/src/sync/bridge.rs",
            "third_party/rust/error-support-macros/.cargo-checksum.json",
            "third_party/rust/tabs/src/storage.rs",
            "Cargo.lock",
            "third_party/rust/sync15/src/engine/sync_engine.rs",
            "third_party/rust/sync15/src/engine/mod.rs",
            "third_party/rust/sync15/src/client/coll_state.rs",
            "third_party/rust/sync15/src/engine/request.rs",
            "third_party/rust/tabs/src/sync/engine.rs",
            "third_party/rust/error-support-macros/src/lib.rs",
            "third_party/rust/tabs/src/sync/full_sync.rs",
            ".cargo/config.in",
            "third_party/rust/sync15/src/lib.rs",
            "third_party/rust/sync15/src/engine/changeset.rs"
          ],
          "components": [
            "Firefox Build System::General"
          ]
        },
        {
          "commit_hash": "b05343a5b5333cc4eb4a15deac29eb3f5e0d1eec",
          "short_hash": "b05343a5b533",
          "description": "Bug 1818349 Part 2: Update tabs TPS tests to allow using data: schema r=markh\n\nDepends on D171181\n\nDifferential Revision: https://phabricator.services.mozilla.com/D171182",
          "author": "Sammy Khamis <skhamis@mozilla.com>",
          "pushdate": "2023-03-01 03:56:13",
          "files_modified": [
            "testing/tps/tps/testrunner.py"
          ],
          "file_overlap_count": 1,
          "overlapping_files": [
            "testing/tps/tps/testrunner.py"
          ],
          "components": [
            "Testing::General"
          ]
        },
        {
          "commit_hash": "021c186452092d42720c7ba05f51299ad1026dd8",
          "short_hash": "021c18645209",
          "description": "Bug 1818349 Part 2: Update tabs TPS tests to allow using data: schema r=markh\n\nDifferential Revision: https://phabricator.services.mozilla.com/D171182",
          "author": "Sammy Khamis <skhamis@mozilla.com>",
          "pushdate": "2023-03-07 16:07:33",
          "files_modified": [
            "testing/tps/tps/testrunner.py"
          ],
          "file_overlap_count": 1,
          "overlapping_files": [
            "testing/tps/tps/testrunner.py"
          ],
          "components": [
            "Testing::General"
          ]
        }
      ],
      "commit_source": "bugbug+local"
    }
  ],
  "total_matching_regressor_commits": 5
}