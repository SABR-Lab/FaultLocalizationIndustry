{
  "bug_id": "1989891",
  "summary": "Crash in [@ mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<T>]",
  "product": "Core",
  "component": "DOM: Navigation",
  "creation_time": "2025-09-22T08:20:28Z",
  "crash_signatures": [
    "mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<T>"
  ],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1989891",
  "socorro_crash_ids": [
    "85998ad3-d168-407b-b2bb-453450250910"
  ],
  "stack_source": "socorro",
  "crash_id": "85998ad3-d168-407b-b2bb-453450250910",
  "socorro_metadata": {
    "signature": "",
    "crash_reason": "",
    "moz_crash_reason": "",
    "crashing_thread": {
      "index": 0,
      "name": "MainThread"
    }
  },
  "stack_trace": {
    "source": "socorro",
    "crash_id": "85998ad3-d168-407b-b2bb-453450250910",
    "frames": [
      {
        "frame_index": 0,
        "module": "xul.dll",
        "function": "mozilla::dom::TextDirectiveUtil::ComputeCommonSubstringLength<-1>(nsTSubstring<char16_t> const&, mozilla::RangeBoundaryBase<nsCOMPtr<nsINode>, nsCOMPtr<nsIContent> > const&)",
        "source": "dom/base/TextDirectiveUtil.h:554",
        "file": "dom/base/TextDirectiveUtil.h",
        "line": 554,
        "trust": "context"
      },
      {
        "frame_index": 1,
        "module": "xul.dll",
        "function": "mozilla::dom::RangeBasedTextDirectiveCreator::FindEndMatchCommonSubstringLengths(nsTArray<RefPtr<mozilla::dom::AbstractRange> > const&)",
        "source": "dom/base/TextDirectiveCreator.cpp:624",
        "file": "dom/base/TextDirectiveCreator.cpp",
        "line": 624,
        "trust": "cfi"
      },
      {
        "frame_index": 2,
        "module": "xul.dll",
        "function": "mozilla::dom::RangeBasedTextDirectiveCreator::FindAllMatchingCandidates()",
        "source": "dom/base/TextDirectiveCreator.cpp:575",
        "file": "dom/base/TextDirectiveCreator.cpp",
        "line": 575,
        "trust": "cfi"
      },
      {
        "frame_index": 3,
        "module": "xul.dll",
        "function": "mozilla::dom::TextDirectiveCreator::CreateTextDirectiveFromRange(mozilla::dom::Document*, mozilla::dom::AbstractRange*, mozilla::dom::TimeoutWatchdog const*)",
        "source": "dom/base/TextDirectiveCreator.cpp:57",
        "file": "dom/base/TextDirectiveCreator.cpp",
        "line": 57,
        "trust": "cfi"
      },
      {
        "frame_index": 4,
        "module": "xul.dll",
        "function": "mozilla::dom::FragmentDirective::CreateTextDirectiveForRanges(mozilla::dom::Sequence<mozilla::OwningNonNull<nsRange> > const&)",
        "source": "dom/base/FragmentDirective.cpp:465",
        "file": "dom/base/FragmentDirective.cpp",
        "line": 465,
        "trust": "cfi"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges(JSContext*, JS::Handle<JSObject*>, void*, JSJitMethodCallArgs const&)",
        "source": "dom/bindings/FragmentDirectiveBinding.cpp:194",
        "file": "dom/bindings/FragmentDirectiveBinding.cpp",
        "line": 194,
        "trust": "inlined"
      },
      {
        "frame_index": 5,
        "module": "xul.dll",
        "function": "mozilla::dom::FragmentDirective_Binding::createTextDirectiveForRanges_promiseWrapper(JSContext*, JS::Handle<JSObject*>, void*, JSJitMethodCallArgs const&)",
        "source": "dom/bindings/FragmentDirectiveBinding.cpp:205",
        "file": "dom/bindings/FragmentDirectiveBinding.cpp",
        "line": 205,
        "trust": "cfi"
      },
      {
        "frame_index": 6,
        "module": "xul.dll",
        "function": "mozilla::dom::binding_detail::GenericMethod<mozilla::dom::binding_detail::NormalThisPolicy, mozilla::dom::binding_detail::ConvertExceptionsToPromises>(JSContext*, unsigned int, JS::Value*)",
        "source": "dom/bindings/BindingUtils.cpp:3308",
        "file": "dom/bindings/BindingUtils.cpp",
        "line": 3308,
        "trust": "cfi"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "CallJSNative(JSContext*, bool (*)(JSContext*, unsigned int, JS::Value*), js::CallReason, JS::CallArgs const&)",
        "source": "js/src/vm/Interpreter.cpp:501",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 501,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstruct, js::CallReason)",
        "source": "js/src/vm/Interpreter.cpp:597",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 597,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "InternalCall(JSContext*, js::AnyInvokeArgs const&, js::CallReason)",
        "source": "js/src/vm/Interpreter.cpp:664",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 664,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "js::CallFromStack(JSContext*, JS::CallArgs const&, js::CallReason)",
        "source": "js/src/vm/Interpreter.cpp:669",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 669,
        "trust": "inlined"
      },
      {
        "frame_index": 7,
        "module": "xul.dll",
        "function": "js::Interpret(JSContext*, js::RunState&)",
        "source": "js/src/vm/Interpreter.cpp:3287",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 3287,
        "trust": "cfi"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "MaybeEnterInterpreterTrampoline(JSContext*, js::RunState&)",
        "source": "js/src/vm/Interpreter.cpp:395",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 395,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "js::RunScript(JSContext*, js::RunState&)",
        "source": "js/src/vm/Interpreter.cpp:471",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 471,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstruct, js::CallReason)",
        "source": "js/src/vm/Interpreter.cpp:629",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 629,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "InternalCall(JSContext*, js::AnyInvokeArgs const&, js::CallReason)",
        "source": "js/src/vm/Interpreter.cpp:664",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 664,
        "trust": "inlined"
      },
      {
        "frame_index": 8,
        "module": "xul.dll",
        "function": "js::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, js::AnyInvokeArgs const&, JS::MutableHandle<JS::Value>, js::CallReason)",
        "source": "js/src/vm/Interpreter.cpp:696",
        "file": "js/src/vm/Interpreter.cpp",
        "line": 696,
        "trust": "cfi"
      },
      {
        "frame_index": 9,
        "module": "xul.dll",
        "function": "JS::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, JS::HandleValueArray const&, JS::MutableHandle<JS::Value>)",
        "source": "js/src/vm/CallAndConstruct.cpp:119",
        "file": "js/src/vm/CallAndConstruct.cpp",
        "line": 119,
        "trust": "cfi"
      },
      {
        "frame_index": 10,
        "module": "xul.dll",
        "function": "mozilla::dom::MessageListener::ReceiveMessage(mozilla::dom::BindingCallContext&, JS::Handle<JS::Value>, mozilla::dom::ReceiveMessageArgument const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&)",
        "source": "dom/bindings/MessageManagerBinding.cpp:5756",
        "file": "dom/bindings/MessageManagerBinding.cpp",
        "line": 5756,
        "trust": "cfi"
      },
      {
        "frame_index": 11,
        "module": "xul.dll",
        "function": "mozilla::dom::MessageListener::ReceiveMessage(mozilla::dom::ReceiveMessageArgument const&, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&, char const*, mozilla::dom::CallbackObjectBase::ExceptionHandling, JS::Realm*)",
        "source": "dist/include/mozilla/dom/MessageManagerBinding.h:579",
        "file": "dist/include/mozilla/dom/MessageManagerBinding.h",
        "line": 579,
        "trust": "inlined"
      },
      {
        "frame_index": 11,
        "module": "xul.dll",
        "function": "mozilla::dom::JSActor::CallReceiveMessage(JSContext*, mozilla::dom::JSActorMessageMeta const&, JS::Handle<JS::Value>, JS::MutableHandle<JS::Value>, mozilla::ErrorResult&)",
        "source": "dom/ipc/jsactor/JSActor.cpp:289",
        "file": "dom/ipc/jsactor/JSActor.cpp",
        "line": 289,
        "trust": "cfi"
      },
      {
        "frame_index": 12,
        "module": "xul.dll",
        "function": "mozilla::dom::JSActor::ReceiveQuery(JSContext*, mozilla::dom::JSActorMessageMeta const&, JS::Handle<JS::Value>, mozilla::ErrorResult&)",
        "source": "dom/ipc/jsactor/JSActor.cpp:326",
        "file": "dom/ipc/jsactor/JSActor.cpp",
        "line": 326,
        "trust": "inlined"
      },
      {
        "frame_index": 12,
        "module": "xul.dll",
        "function": "mozilla::dom::JSActorManager::ReceiveRawMessage(mozilla::dom::JSActorMessageMeta const&, std::unique_ptr<mozilla::dom::ipc::StructuredCloneData, std::default_delete<mozilla::dom::ipc::StructuredCloneData> >, std::unique_ptr<mozilla::dom::ipc::StructuredCloneData, std::default_delete<mozilla::dom::ipc::StructuredCloneData> >)",
        "source": "dom/ipc/jsactor/JSActorManager.cpp:230",
        "file": "dom/ipc/jsactor/JSActorManager.cpp",
        "line": 230,
        "trust": "cfi"
      },
      {
        "frame_index": 13,
        "module": "xul.dll",
        "function": "mozilla::dom::WindowGlobalChild::RecvRawMessage(mozilla::dom::JSActorMessageMeta const&, std::unique_ptr<mozilla::dom::ClonedMessageData, std::default_delete<mozilla::dom::ClonedMessageData> > const&, std::unique_ptr<mozilla::dom::ClonedMessageData, std::default_delete<mozilla::dom::ClonedMessageData> > const&)",
        "source": "dom/ipc/WindowGlobalChild.cpp:584",
        "file": "dom/ipc/WindowGlobalChild.cpp",
        "line": 584,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "xul.dll",
        "function": "mozilla::dom::PWindowGlobalChild::OnMessageReceived(IPC::Message const&)",
        "source": "ipc/ipdl/PWindowGlobalChild.cpp:1918",
        "file": "ipc/ipdl/PWindowGlobalChild.cpp",
        "line": 1918,
        "trust": "cfi"
      },
      {
        "frame_index": 14,
        "module": "xul.dll",
        "function": "mozilla::dom::PContentChild::OnMessageReceived(IPC::Message const&)",
        "source": "ipc/ipdl/PContentChild.cpp:8472",
        "file": "ipc/ipdl/PContentChild.cpp",
        "line": 8472,
        "trust": "cfi"
      },
      {
        "frame_index": 15,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessageChannel::DispatchAsyncMessage(mozilla::ipc::ActorLifecycleProxy*, IPC::Message const&)",
        "source": "ipc/glue/MessageChannel.cpp:1797",
        "file": "ipc/glue/MessageChannel.cpp",
        "line": 1797,
        "trust": "inlined"
      },
      {
        "frame_index": 15,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessageChannel::DispatchMessage(mozilla::ipc::ActorLifecycleProxy*, std::unique_ptr<IPC::Message, std::default_delete<IPC::Message> >)",
        "source": "ipc/glue/MessageChannel.cpp:1723",
        "file": "ipc/glue/MessageChannel.cpp",
        "line": 1723,
        "trust": "inlined"
      },
      {
        "frame_index": 15,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessageChannel::RunMessage(mozilla::ipc::ActorLifecycleProxy*, mozilla::ipc::MessageChannel::MessageTask&)",
        "source": "ipc/glue/MessageChannel.cpp:1512",
        "file": "ipc/glue/MessageChannel.cpp",
        "line": 1512,
        "trust": "cfi"
      },
      {
        "frame_index": 16,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessageChannel::MessageTask::Run()",
        "source": "ipc/glue/MessageChannel.cpp:1614",
        "file": "ipc/glue/MessageChannel.cpp",
        "line": 1614,
        "trust": "inlined"
      },
      {
        "frame_index": 16,
        "module": "xul.dll",
        "function": "mozilla::RunnableTask::Run()",
        "source": "xpcom/threads/TaskController.cpp:703",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 703,
        "trust": "inlined"
      },
      {
        "frame_index": 16,
        "module": "xul.dll",
        "function": "mozilla::TaskController::RunTask(mozilla::Task*)",
        "source": "xpcom/threads/TaskController.cpp:196",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 196,
        "trust": "inlined"
      },
      {
        "frame_index": 16,
        "module": "xul.dll",
        "function": "mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "xpcom/threads/TaskController.cpp:1323",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 1323,
        "trust": "cfi"
      },
      {
        "frame_index": 17,
        "module": "xul.dll",
        "function": "mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "xpcom/threads/TaskController.cpp:1146",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 1146,
        "trust": "inlined"
      },
      {
        "frame_index": 17,
        "module": "xul.dll",
        "function": "mozilla::TaskController::ProcessPendingMTTask(bool)",
        "source": "xpcom/threads/TaskController.cpp:639",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 639,
        "trust": "inlined"
      },
      {
        "frame_index": 17,
        "module": "xul.dll",
        "function": "mozilla::TaskController::TaskController::<lambda_6>::operator()() const",
        "source": "xpcom/threads/TaskController.cpp:333",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 333,
        "trust": "inlined"
      },
      {
        "frame_index": 17,
        "module": "xul.dll",
        "function": "mozilla::detail::RunnableFunction<`lambda at /builds/worker/checkouts/gecko/xpcom/threads/TaskController.cpp:333:7'>::Run()",
        "source": "xpcom/threads/nsThreadUtils.h:549",
        "file": "xpcom/threads/nsThreadUtils.h",
        "line": 549,
        "trust": "inlined"
      },
      {
        "frame_index": 17,
        "module": "xul.dll",
        "function": "nsThread::ProcessNextEvent(bool, bool*)",
        "source": "xpcom/threads/nsThread.cpp:1157",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 1157,
        "trust": "inlined"
      },
      {
        "frame_index": 17,
        "module": "xul.dll",
        "function": "NS_ProcessNextEvent(nsIThread*, bool)",
        "source": "xpcom/threads/nsThreadUtils.cpp:462",
        "file": "xpcom/threads/nsThreadUtils.cpp",
        "line": 462,
        "trust": "cfi"
      },
      {
        "frame_index": 18,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*)",
        "source": "ipc/glue/MessagePump.cpp:85",
        "file": "ipc/glue/MessagePump.cpp",
        "line": 85,
        "trust": "cfi"
      },
      {
        "frame_index": 19,
        "module": "xul.dll",
        "function": "MessageLoop::RunInternal()",
        "source": "ipc/chromium/src/base/message_loop.cc:373",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 373,
        "trust": "inlined"
      },
      {
        "frame_index": 19,
        "module": "xul.dll",
        "function": "MessageLoop::RunHandler()",
        "source": "ipc/chromium/src/base/message_loop.cc:366",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 366,
        "trust": "cfi"
      },
      {
        "frame_index": 20,
        "module": "xul.dll",
        "function": "MessageLoop::Run()",
        "source": "ipc/chromium/src/base/message_loop.cc:348",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 348,
        "trust": "inlined"
      },
      {
        "frame_index": 20,
        "module": "xul.dll",
        "function": "nsBaseAppShell::Run()",
        "source": "widget/nsBaseAppShell.cpp:148",
        "file": "widget/nsBaseAppShell.cpp",
        "line": 148,
        "trust": "cfi"
      },
      {
        "frame_index": 21,
        "module": "xul.dll",
        "function": "nsAppShell::Run()",
        "source": "widget/windows/nsAppShell.cpp:673",
        "file": "widget/windows/nsAppShell.cpp",
        "line": 673,
        "trust": "cfi"
      },
      {
        "frame_index": 22,
        "module": "xul.dll",
        "function": "XRE_RunAppShell()",
        "source": "toolkit/xre/nsEmbedFunctions.cpp:657",
        "file": "toolkit/xre/nsEmbedFunctions.cpp",
        "line": 657,
        "trust": "inlined"
      },
      {
        "frame_index": 22,
        "module": "xul.dll",
        "function": "mozilla::ipc::MessagePumpForChildProcess::Run(base::MessagePump::Delegate*)",
        "source": "ipc/glue/MessagePump.cpp:235",
        "file": "ipc/glue/MessagePump.cpp",
        "line": 235,
        "trust": "cfi"
      },
      {
        "frame_index": 23,
        "module": "xul.dll",
        "function": "MessageLoop::RunInternal()",
        "source": "ipc/chromium/src/base/message_loop.cc:373",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 373,
        "trust": "inlined"
      },
      {
        "frame_index": 23,
        "module": "xul.dll",
        "function": "MessageLoop::RunHandler()",
        "source": "ipc/chromium/src/base/message_loop.cc:366",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 366,
        "trust": "cfi"
      },
      {
        "frame_index": 24,
        "module": "xul.dll",
        "function": "MessageLoop::Run()",
        "source": "ipc/chromium/src/base/message_loop.cc:348",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 348,
        "trust": "inlined"
      },
      {
        "frame_index": 24,
        "module": "xul.dll",
        "function": "XRE_InitChildProcess(int, char**, XREChildData const*)",
        "source": "toolkit/xre/nsEmbedFunctions.cpp:595",
        "file": "toolkit/xre/nsEmbedFunctions.cpp",
        "line": 595,
        "trust": "inlined"
      },
      {
        "frame_index": 24,
        "module": "xul.dll",
        "function": "mozilla::BootstrapImpl::XRE_InitChildProcess(int, char**, XREChildData const*)",
        "source": "toolkit/xre/Bootstrap.cpp:60",
        "file": "toolkit/xre/Bootstrap.cpp",
        "line": 60,
        "trust": "cfi"
      },
      {
        "frame_index": 25,
        "module": "firefox.exe",
        "function": "NS_internal_main(int, char**, char**)",
        "source": "browser/app/nsBrowserApp.cpp:420",
        "file": "browser/app/nsBrowserApp.cpp",
        "line": 420,
        "trust": "inlined"
      },
      {
        "frame_index": 25,
        "module": "firefox.exe",
        "function": "wmain(int, wchar_t**)",
        "source": "toolkit/xre/nsWindowsWMain.cpp:150",
        "file": "toolkit/xre/nsWindowsWMain.cpp",
        "line": 150,
        "trust": "cfi"
      },
      {
        "frame_index": 26,
        "module": "firefox.exe",
        "function": "invoke_main()",
        "source": "/builds/worker/workspace/obj-build/browser/app/D:/a/_work/1/s/src/vctools/crt/vcstartup/src/startup/exe_common.inl:90",
        "file": "/builds/worker/workspace/obj-build/browser/app/D:/a/_work/1/s/src/vctools/crt/vcstartup/src/startup/exe_common.inl",
        "line": 90,
        "trust": "inlined"
      },
      {
        "frame_index": 26,
        "module": "firefox.exe",
        "function": "__scrt_common_main_seh()",
        "source": "/builds/worker/workspace/obj-build/browser/app/D:/a/_work/1/s/src/vctools/crt/vcstartup/src/startup/exe_common.inl:288",
        "file": "/builds/worker/workspace/obj-build/browser/app/D:/a/_work/1/s/src/vctools/crt/vcstartup/src/startup/exe_common.inl",
        "line": 288,
        "trust": "cfi"
      },
      {
        "frame_index": 27,
        "module": "kernel32.dll",
        "function": "BaseThreadInitThunk",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      },
      {
        "frame_index": 28,
        "module": "ntdll.dll",
        "function": "RtlUserThreadStart",
        "source": "",
        "file": "",
        "line": null,
        "trust": "cfi"
      }
    ],
    "frame_count": 59
  },
  "regressed_by": [
    "1979588"
  ],
  "regressor_count": 1,
  "source": "step2",
  "bugzilla_status": "RESOLVED",
  "bugzilla_resolution": "FIXED",
  "bugzilla_lookup_timestamp": "2025-12-15T15:53:28.605819",
  "fixing_commit_count": 1,
  "category": "single_commit",
  "commit_source": "local",
  "fixing_commit": {
    "commit_hash": "5fe5a185035e90b142f267c768f8b019256f25d9",
    "short_hash": "5fe5a185035e",
    "description": "Bug 1989891 - Text Fragments: Ensure context terms don't start/end with whitespace when reaching maximum length. r=smaug",
    "author": "Jan-Niklas Jaeschke <jjaschke@mozilla.com>",
    "pushdate": "2025-09-23 17:35 +0000",
    "files": [
      "dom/base/TextDirectiveCreator.cpp",
      "dom/base/test/test_text-fragments-create-text-directive.html"
    ],
    "file_count": 2,
    "components": []
  },
  "regressor_analysis": [
    {
      "regressor_bug_id": "1979588",
      "total_commits": 3,
      "matching_commits_count": 3,
      "matching_commits": [
        {
          "commit_hash": "729990f9affbcbc05925bf1cbc5749016664bc3f",
          "short_hash": "729990f9affb",
          "description": "Bug 1979588 - Text Fragments: Correctly deal with long words at end of range for range-based matching. r=dom-core,smaug\n\nThe range-based approach for creating a text directive uses the word breaker algorithm\nto identify where to split between `start` and `end` term. If the range ends with a word\nwhich is over 50% of the length content, the algorithm would return wordEnd=length,\nwhich would result in the `end` term being empty, which is not allowed.\n\nThis patch fixes this case by choosing the word begin position in this case.\n\nDifferential Revision: https://phabricator.services.mozilla.com/D263867",
          "author": "Jan-Niklas Jaeschke <jjaschke@mozilla.com>",
          "pushdate": "2025-09-09 20:57:47",
          "files_modified": [
            "dom/base/TextDirectiveCreator.cpp",
            "dom/base/TextDirectiveUtil.h",
            "dom/base/test/test_text-fragments-create-text-directive.html"
          ],
          "file_overlap_count": 2,
          "overlapping_files": [
            "dom/base/test/test_text-fragments-create-text-directive.html",
            "dom/base/TextDirectiveCreator.cpp"
          ],
          "components": [
            "Core::DOM: Core & HTML"
          ]
        },
        {
          "commit_hash": "b1fda3f9af8ae58da0ea4a24078dd75b784e79cf",
          "short_hash": "b1fda3f9af8a",
          "description": "Revert \"Bug 1979588 - Text Fragments: Correctly deal with long words at end of range for range-based matching. r=dom-core,smaug\" for causing crashes (bug 1987845) as part of the Nightly merge operations\n\nThis reverts commit 7db1bf44de9eb0bcf7b68ff1b5206fc801432ee0.",
          "author": "Cosmin Sabou <csabou@mozilla.com>",
          "pushdate": "2025-09-10 09:37:11",
          "files_modified": [
            "dom/base/TextDirectiveCreator.cpp",
            "dom/base/TextDirectiveUtil.h",
            "dom/base/test/test_text-fragments-create-text-directive.html"
          ],
          "file_overlap_count": 2,
          "overlapping_files": [
            "dom/base/test/test_text-fragments-create-text-directive.html",
            "dom/base/TextDirectiveCreator.cpp"
          ],
          "components": [
            "Core::DOM: Core & HTML"
          ]
        },
        {
          "commit_hash": "a9560be525c8880189debb175e8ad3fa9e56ba49",
          "short_hash": "a9560be525c8",
          "description": "Bug 1979588 - Text Fragments: Correctly deal with long words at end of range for range-based matching. r=dom-core,smaug\n\nThe range-based approach for creating a text directive uses the word breaker algorithm\nto identify where to split between `start` and `end` term. If the range ends with a word\nwhich is over 50% of the length content, the algorithm would return wordEnd=length,\nwhich would result in the `end` term being empty, which is not allowed.\n\nThis patch fixes this case by choosing the word begin position in this case.\n\nDifferential Revision: https://phabricator.services.mozilla.com/D263867",
          "author": "Jan-Niklas Jaeschke <jjaschke@mozilla.com>",
          "pushdate": "2025-09-10 21:28:29",
          "files_modified": [
            "dom/base/TextDirectiveCreator.cpp",
            "dom/base/TextDirectiveUtil.h",
            "dom/base/test/test_text-fragments-create-text-directive.html"
          ],
          "file_overlap_count": 2,
          "overlapping_files": [
            "dom/base/test/test_text-fragments-create-text-directive.html",
            "dom/base/TextDirectiveCreator.cpp"
          ],
          "components": [
            "Core::DOM: Core & HTML"
          ]
        }
      ],
      "commit_source": "bugbug"
    }
  ],
  "total_matching_regressor_commits": 3
}