{
  "bug_id": "1992635",
  "summary": "Crash in [@ mozilla::PresShell::GetRootFrame]",
  "product": "Core",
  "component": "Audio/Video",
  "creation_time": "2025-10-05T23:40:23Z",
  "crash_signatures": [
    "mozilla::PresShell::GetRootFrame"
  ],
  "bugzilla_url": "https://bugzilla.mozilla.org/show_bug.cgi?id=1992635",
  "socorro_crash_ids": [
    "ca8649f4-5e13-4854-928f-676e30250923"
  ],
  "stack_source": "socorro",
  "crash_id": "ca8649f4-5e13-4854-928f-676e30250923",
  "socorro_metadata": {
    "signature": "",
    "crash_reason": "",
    "moz_crash_reason": "",
    "crashing_thread": {
      "index": 13,
      "name": "Web Content"
    }
  },
  "stack_trace": {
    "source": "socorro",
    "crash_id": "ca8649f4-5e13-4854-928f-676e30250923",
    "frames": [
      {
        "frame_index": 0,
        "module": "libxul.so",
        "function": "std::__ndk1::unique_ptr<nsCSSFrameConstructor, std::__ndk1::default_delete<nsCSSFrameConstructor> >::operator->[abi:nn190000]() const",
        "source": "/builds/worker/fetches/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/__memory/unique_ptr.h:259",
        "file": "/builds/worker/fetches/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/include/c++/v1/__memory/unique_ptr.h",
        "line": 259,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "libxul.so",
        "function": "mozilla::PresShell::GetRootFrame() const",
        "source": "layout/base/PresShell.h:454",
        "file": "layout/base/PresShell.h",
        "line": 454,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "libxul.so",
        "function": "mozilla::dom::UIEvent::GetLayerPoint() const",
        "source": "dom/events/UIEvent.cpp:154",
        "file": "dom/events/UIEvent.cpp",
        "line": 154,
        "trust": "inlined"
      },
      {
        "frame_index": 0,
        "module": "libxul.so",
        "function": "mozilla::dom::UIEvent::DuplicatePrivateData()",
        "source": "dom/events/UIEvent.cpp:169",
        "file": "dom/events/UIEvent.cpp",
        "line": 169,
        "trust": "context"
      },
      {
        "frame_index": 1,
        "module": "libxul.so",
        "function": "mozilla::EventDispatcher::Dispatch(mozilla::dom::EventTarget*, nsPresContext*, mozilla::WidgetEvent*, mozilla::dom::Event*, nsEventStatus*, mozilla::EventDispatchingCallback*, nsTArray<mozilla::dom::EventTarget*>*)",
        "source": "dom/events/EventDispatcher.cpp:1348",
        "file": "dom/events/EventDispatcher.cpp",
        "line": 1348,
        "trust": "cfi"
      },
      {
        "frame_index": 2,
        "module": "libxul.so",
        "function": "mozilla::PresShell::EventHandler::DispatchTouchEventToDOM(mozilla::WidgetEvent*, nsEventStatus*, nsPresShellEventCB*, bool)",
        "source": "layout/base/PresShell.cpp:10043",
        "file": "layout/base/PresShell.cpp",
        "line": 10043,
        "trust": "cfi"
      },
      {
        "frame_index": 3,
        "module": "libxul.so",
        "function": "mozilla::PresShell::EventHandler::DispatchEvent(mozilla::EventStateManager*, mozilla::WidgetEvent*, bool, nsEventStatus*, nsIContent*)",
        "source": "layout/base/PresShell.cpp:9503",
        "file": "layout/base/PresShell.cpp",
        "line": 9503,
        "trust": "inlined"
      },
      {
        "frame_index": 3,
        "module": "libxul.so",
        "function": "mozilla::PresShell::EventHandler::HandleEventWithCurrentEventInfo(mozilla::WidgetEvent*, nsEventStatus*, bool, nsIContent*)",
        "source": "layout/base/PresShell.cpp:9398",
        "file": "layout/base/PresShell.cpp",
        "line": 9398,
        "trust": "cfi"
      },
      {
        "frame_index": 4,
        "module": "libxul.so",
        "function": "mozilla::PresShell::EventHandler::HandleEventUsingCoordinates(AutoWeakFrame&, mozilla::WidgetGUIEvent*, nsEventStatus*, bool)",
        "source": "layout/base/PresShell.cpp:7961",
        "file": "layout/base/PresShell.cpp",
        "line": 7961,
        "trust": "cfi"
      },
      {
        "frame_index": 5,
        "module": "libxul.so",
        "function": "mozilla::PresShell::HandleEvent(nsIFrame*, mozilla::WidgetGUIEvent*, bool, nsEventStatus*)",
        "source": "layout/base/PresShell.cpp:7646",
        "file": "layout/base/PresShell.cpp",
        "line": 7646,
        "trust": "cfi"
      },
      {
        "frame_index": 6,
        "module": "libxul.so",
        "function": "nsViewManager::DispatchEvent(mozilla::WidgetGUIEvent*, nsView*, nsEventStatus*)",
        "source": "view/nsViewManager.cpp:611",
        "file": "view/nsViewManager.cpp",
        "line": 611,
        "trust": "cfi"
      },
      {
        "frame_index": 7,
        "module": "libxul.so",
        "function": "nsView::HandleEvent(mozilla::WidgetGUIEvent*, bool)",
        "source": "view/nsView.cpp:983",
        "file": "view/nsView.cpp",
        "line": 983,
        "trust": "cfi"
      },
      {
        "frame_index": 8,
        "module": "libxul.so",
        "function": "mozilla::widget::PuppetWidget::DispatchEvent(mozilla::WidgetGUIEvent*, nsEventStatus&)",
        "source": "widget/PuppetWidget.cpp:309",
        "file": "widget/PuppetWidget.cpp",
        "line": 309,
        "trust": "cfi"
      },
      {
        "frame_index": 9,
        "module": "libxul.so",
        "function": "mozilla::layers::APZCCallbackHelper::DispatchWidgetEvent(mozilla::WidgetGUIEvent&)",
        "source": "gfx/layers/apz/util/APZCCallbackHelper.cpp:538",
        "file": "gfx/layers/apz/util/APZCCallbackHelper.cpp",
        "line": 538,
        "trust": "cfi"
      },
      {
        "frame_index": 10,
        "module": "libxul.so",
        "function": "mozilla::dom::BrowserChild::DispatchWidgetEventViaAPZ(mozilla::WidgetGUIEvent&)",
        "source": "dom/ipc/BrowserChild.cpp:1841",
        "file": "dom/ipc/BrowserChild.cpp",
        "line": 1841,
        "trust": "inlined"
      },
      {
        "frame_index": 10,
        "module": "libxul.so",
        "function": "mozilla::dom::BrowserChild::RecvRealTouchEvent(mozilla::WidgetTouchEvent const&, mozilla::layers::ScrollableLayerGuid const&, unsigned long const&, nsEventStatus const&)",
        "source": "dom/ipc/BrowserChild.cpp:1973",
        "file": "dom/ipc/BrowserChild.cpp",
        "line": 1973,
        "trust": "cfi"
      },
      {
        "frame_index": 11,
        "module": "libxul.so",
        "function": "mozilla::dom::PBrowserChild::OnMessageReceived(IPC::Message const&)",
        "source": "ipc/ipdl/PBrowserChild.cpp:6037",
        "file": "ipc/ipdl/PBrowserChild.cpp",
        "line": 6037,
        "trust": "cfi"
      },
      {
        "frame_index": 12,
        "module": "libxul.so",
        "function": "mozilla::dom::PContentChild::OnMessageReceived(IPC::Message const&)",
        "source": "ipc/ipdl/PContentChild.cpp:8400",
        "file": "ipc/ipdl/PContentChild.cpp",
        "line": 8400,
        "trust": "cfi"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessageChannel::DispatchAsyncMessage(mozilla::ipc::ActorLifecycleProxy*, IPC::Message const&)",
        "source": "ipc/glue/MessageChannel.cpp:1797",
        "file": "ipc/glue/MessageChannel.cpp",
        "line": 1797,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessageChannel::DispatchMessage(mozilla::ipc::ActorLifecycleProxy*, std::__ndk1::unique_ptr<IPC::Message, std::__ndk1::default_delete<IPC::Message> >)",
        "source": "ipc/glue/MessageChannel.cpp:1723",
        "file": "ipc/glue/MessageChannel.cpp",
        "line": 1723,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessageChannel::RunMessage(mozilla::ipc::ActorLifecycleProxy*, mozilla::ipc::MessageChannel::MessageTask&)",
        "source": "ipc/glue/MessageChannel.cpp:1512",
        "file": "ipc/glue/MessageChannel.cpp",
        "line": 1512,
        "trust": "inlined"
      },
      {
        "frame_index": 13,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessageChannel::MessageTask::Run()",
        "source": "ipc/glue/MessageChannel.cpp:1614",
        "file": "ipc/glue/MessageChannel.cpp",
        "line": 1614,
        "trust": "cfi"
      },
      {
        "frame_index": 14,
        "module": "libxul.so",
        "function": "mozilla::RunnableTask::Run()",
        "source": "xpcom/threads/TaskController.cpp:705",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 705,
        "trust": "inlined"
      },
      {
        "frame_index": 14,
        "module": "libxul.so",
        "function": "mozilla::TaskController::RunTask(mozilla::Task*)",
        "source": "xpcom/threads/TaskController.cpp:196",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 196,
        "trust": "inlined"
      },
      {
        "frame_index": 14,
        "module": "libxul.so",
        "function": "mozilla::TaskController::DoExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "xpcom/threads/TaskController.cpp:1325",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 1325,
        "trust": "inlined"
      },
      {
        "frame_index": 14,
        "module": "libxul.so",
        "function": "mozilla::TaskController::ExecuteNextTaskOnlyMainThreadInternal(mozilla::detail::BaseAutoLock<mozilla::Mutex&> const&)",
        "source": "xpcom/threads/TaskController.cpp:1148",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 1148,
        "trust": "cfi"
      },
      {
        "frame_index": 15,
        "module": "libxul.so",
        "function": "mozilla::TaskController::ProcessPendingMTTask(bool)",
        "source": "xpcom/threads/TaskController.cpp:641",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 641,
        "trust": "inlined"
      },
      {
        "frame_index": 15,
        "module": "libxul.so",
        "function": "mozilla::TaskController::TaskController()::$_1::operator()() const",
        "source": "xpcom/threads/TaskController.cpp:336",
        "file": "xpcom/threads/TaskController.cpp",
        "line": 336,
        "trust": "inlined"
      },
      {
        "frame_index": 15,
        "module": "libxul.so",
        "function": "mozilla::detail::RunnableFunction<mozilla::TaskController::TaskController()::$_1>::Run()",
        "source": "xpcom/threads/nsThreadUtils.h:549",
        "file": "xpcom/threads/nsThreadUtils.h",
        "line": 549,
        "trust": "cfi"
      },
      {
        "frame_index": 16,
        "module": "libxul.so",
        "function": "nsThread::ProcessNextEvent(bool, bool*)",
        "source": "xpcom/threads/nsThread.cpp:1157",
        "file": "xpcom/threads/nsThread.cpp",
        "line": 1157,
        "trust": "inlined"
      },
      {
        "frame_index": 16,
        "module": "libxul.so",
        "function": "NS_ProcessNextEvent(nsIThread*, bool)",
        "source": "xpcom/threads/nsThreadUtils.cpp:462",
        "file": "xpcom/threads/nsThreadUtils.cpp",
        "line": 462,
        "trust": "cfi"
      },
      {
        "frame_index": 17,
        "module": "libxul.so",
        "function": "mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*)",
        "source": "ipc/glue/MessagePump.cpp:107",
        "file": "ipc/glue/MessagePump.cpp",
        "line": 107,
        "trust": "cfi"
      },
      {
        "frame_index": 18,
        "module": "libxul.so",
        "function": "MessageLoop::RunInternal()",
        "source": "ipc/chromium/src/base/message_loop.cc:373",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 373,
        "trust": "inlined"
      },
      {
        "frame_index": 18,
        "module": "libxul.so",
        "function": "MessageLoop::RunHandler()",
        "source": "ipc/chromium/src/base/message_loop.cc:366",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 366,
        "trust": "inlined"
      },
      {
        "frame_index": 18,
        "module": "libxul.so",
        "function": "MessageLoop::Run()",
        "source": "ipc/chromium/src/base/message_loop.cc:348",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 348,
        "trust": "cfi"
      },
      {
        "frame_index": 19,
        "module": "libxul.so",
        "function": "nsBaseAppShell::Run()",
        "source": "widget/nsBaseAppShell.cpp:148",
        "file": "widget/nsBaseAppShell.cpp",
        "line": 148,
        "trust": "cfi"
      },
      {
        "frame_index": 20,
        "module": "libxul.so",
        "function": "XRE_RunAppShell()",
        "source": "toolkit/xre/nsEmbedFunctions.cpp:657",
        "file": "toolkit/xre/nsEmbedFunctions.cpp",
        "line": 657,
        "trust": "cfi"
      },
      {
        "frame_index": 21,
        "module": "libxul.so",
        "function": "MessageLoop::RunInternal()",
        "source": "ipc/chromium/src/base/message_loop.cc:373",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 373,
        "trust": "inlined"
      },
      {
        "frame_index": 21,
        "module": "libxul.so",
        "function": "MessageLoop::RunHandler()",
        "source": "ipc/chromium/src/base/message_loop.cc:366",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 366,
        "trust": "inlined"
      },
      {
        "frame_index": 21,
        "module": "libxul.so",
        "function": "MessageLoop::Run()",
        "source": "ipc/chromium/src/base/message_loop.cc:348",
        "file": "ipc/chromium/src/base/message_loop.cc",
        "line": 348,
        "trust": "cfi"
      },
      {
        "frame_index": 22,
        "module": "libxul.so",
        "function": "XRE_InitChildProcess(int, char**, XREChildData const*)",
        "source": "toolkit/xre/nsEmbedFunctions.cpp:595",
        "file": "toolkit/xre/nsEmbedFunctions.cpp",
        "line": 595,
        "trust": "cfi"
      },
      {
        "frame_index": 23,
        "module": "libmozglue.so",
        "function": "Java_org_mozilla_gecko_mozglue_GeckoLoader_nativeRun",
        "source": "mozglue/android/APKOpen.cpp:472",
        "file": "mozglue/android/APKOpen.cpp",
        "line": 472,
        "trust": "cfi"
      },
      {
        "frame_index": 26,
        "module": "libart.so",
        "function": "art_quick_invoke_stub",
        "source": "",
        "file": "",
        "line": null,
        "trust": "scan"
      },
      {
        "frame_index": 27,
        "module": "libart.so",
        "function": "art::ArtMethod::Invoke(art::Thread*, unsigned int*, unsigned int, art::JValue*, char const*)",
        "source": "",
        "file": "",
        "line": null,
        "trust": "scan"
      },
      {
        "frame_index": 28,
        "module": "libart.so",
        "function": "art::Thread::CreateCallback(void*)",
        "source": "",
        "file": "",
        "line": null,
        "trust": "scan"
      },
      {
        "frame_index": 29,
        "module": "libart.so",
        "function": "art::Thread::CreateCallbackWithUffdGc(void*)",
        "source": "",
        "file": "",
        "line": null,
        "trust": "scan"
      },
      {
        "frame_index": 33,
        "module": "libart.so",
        "function": "art::RuntimeCallbacks::DdmPublishChunk(unsigned int, art::ArrayRef<unsigned char const> const&)::$_0::operator()() const [clone .__uniq] [clone .14038455983609747804623791479376661822]",
        "source": "",
        "file": "",
        "line": null,
        "trust": "scan"
      }
    ],
    "frame_count": 47
  },
  "regressed_by": [
    "1975653"
  ],
  "regressor_count": 1,
  "source": "step2",
  "bugzilla_status": "RESOLVED",
  "bugzilla_resolution": "FIXED",
  "bugzilla_lookup_timestamp": "2025-12-15T15:53:28.605796",
  "fixing_commit_count": 1,
  "category": "single_commit",
  "commit_source": "local",
  "fixing_commit": {
    "commit_hash": "50799186256cb8f8b7d1dd660ac25a19287db973",
    "short_hash": "50799186256c",
    "description": "Bug 1992635 - Make GetLayerPoint use the target frame's pres shell. r=smaug",
    "author": "Emilio Cobos \u00c1lvarez <emilio@crisal.io>",
    "pushdate": "2025-10-07 06:18 +0000",
    "files": [
      "dom/events/UIEvent.cpp"
    ],
    "file_count": 1,
    "components": []
  },
  "regressor_analysis": [
    {
      "regressor_bug_id": "1975653",
      "total_commits": 1,
      "matching_commits_count": 1,
      "matching_commits": [
        {
          "commit_hash": "fb06ff1a6aa5ebfbb72cf0711063379d091537ed",
          "short_hash": "fb06ff1a6aa5",
          "description": "Bug 1975653 - Tweak behavior of layerX/layerY to be in root coordinate space. r=jrmuizel,masayuki",
          "author": "Emilio Cobos \u00c1lvarez <emilio@crisal.io>",
          "pushdate": "2025-09-16 23:00 +0000",
          "files_modified": [
            "dom/events/UIEvent.cpp",
            "testing/web-platform/tests/uievents/mouse/layer-coords-transform.html"
          ],
          "file_overlap_count": 1,
          "overlapping_files": [
            "dom/events/UIEvent.cpp"
          ],
          "components": []
        }
      ],
      "commit_source": "local"
    }
  ],
  "total_matching_regressor_commits": 1
}