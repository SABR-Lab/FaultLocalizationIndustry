# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: third_party/rust/mp4parse/src/macros.rs
# Commit: da557d1806dd
# Full Hash: da557d1806dd9e1e519e00a4481b2e075f722ae8
# Author: Butkovits Atila <abutkovits@mozilla.com>
# Date: 2023-01-27 22:54 +0200
# Regressor Bug: 1788119
# File Overlap Count: 1
# Overlapping Files: Cargo.lock
# Description:
#   Backed out 5 changesets (bug 1788119) for causing bustages complaining about AVIFDecodedData. CLOSED TREE
# ==============================================================================

diff -r d980bebc6d26 -r da557d1806dd third_party/rust/mp4parse/src/macros.rs
--- a/third_party/rust/mp4parse/src/macros.rs	Fri Jan 27 20:35:34 2023 +0000
+++ b/third_party/rust/mp4parse/src/macros.rs	Fri Jan 27 22:54:08 2023 +0200
@@ -6,7 +6,7 @@
     ( $src:expr ) => {
         if $src.limit() > 0 {
             debug!("bad parser state: {} content bytes left", $src.limit());
-            return Status::CheckParserStateErr.into();
+            return Err(Error::InvalidData("unread box content or bad parser sync"));
         }
     };
 }