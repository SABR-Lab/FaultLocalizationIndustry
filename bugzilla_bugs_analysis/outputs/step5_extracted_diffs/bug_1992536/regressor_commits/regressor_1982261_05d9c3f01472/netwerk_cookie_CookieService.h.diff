# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: netwerk/cookie/CookieService.h
# Commit: 05d9c3f01472
# Full Hash: 05d9c3f0147288e19525104a250b23f2de1339aa
# Author: Andrea Marchesini <amarchesini@mozilla.com>
# Date: 2025-09-16 10:40 +0000
# Regressor Bug: 1982261
# File Overlap Count: 1
# Overlapping Files: netwerk/cookie/CookieService.cpp
# Description:
#   Bug 1982261 - CookieServiceParent logs about invalid cookies instead of crashing, r=valentin,cookie-reviewers
# ==============================================================================

diff -r 157cf44ea0d8 -r 05d9c3f01472 netwerk/cookie/CookieService.h
--- a/netwerk/cookie/CookieService.h	Tue Sep 16 10:23:08 2025 +0000
+++ b/netwerk/cookie/CookieService.h	Tue Sep 16 10:40:49 2025 +0000
@@ -16,6 +16,7 @@
 #include "ThirdPartyCookieBlockingExceptions.h"
 
 #include "nsString.h"
+#include "nsICookieValidation.h"
 #include "nsIMemoryReporter.h"
 #include "mozilla/MemoryReporting.h"
 #include "mozilla/MozPromise.h"
@@ -100,11 +101,11 @@
                   const nsACString& aName, const nsACString& aPath,
                   bool aFromHttp, const nsID* aOperationID);
 
-  bool SetCookiesFromIPC(const nsACString& aBaseDomain,
-                         const OriginAttributes& aAttrs, nsIURI* aHostURI,
-                         bool aFromHttp, bool aIsThirdParty,
-                         const nsTArray<CookieStruct>& aCookies,
-                         dom::BrowsingContext* aBrowsingContext);
+  nsICookieValidation::ValidationError SetCookiesFromIPC(
+      const nsACString& aBaseDomain, const OriginAttributes& aAttrs,
+      nsIURI* aHostURI, bool aFromHttp, bool aIsThirdParty,
+      const nsTArray<CookieStruct>& aCookies,
+      dom::BrowsingContext* aBrowsingContext);
 
  protected:
   virtual ~CookieService();