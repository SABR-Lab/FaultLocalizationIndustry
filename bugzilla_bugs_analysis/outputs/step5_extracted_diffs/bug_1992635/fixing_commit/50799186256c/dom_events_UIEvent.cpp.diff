# ==============================================================================
# FIXING COMMIT DIFF
# ==============================================================================
# File: dom/events/UIEvent.cpp
# Commit: 50799186256c
# Full Hash: 50799186256cb8f8b7d1dd660ac25a19287db973
# Author: Emilio Cobos √Ålvarez <emilio@crisal.io>
# Date: 2025-10-07 06:18 +0000
# Description:
#   Bug 1992635 - Make GetLayerPoint use the target frame's pres shell. r=smaug
# ==============================================================================

diff -r 069b3c837fda -r 50799186256c dom/events/UIEvent.cpp
--- a/dom/events/UIEvent.cpp	Tue Oct 07 02:27:19 2025 -0400
+++ b/dom/events/UIEvent.cpp	Tue Oct 07 06:18:18 2025 +0000
@@ -151,7 +151,7 @@
   }
   // NOTE(emilio): This matches Blink to my knowledge, but it's generally not
   // super-well specified, see https://github.com/w3c/uievents/issues/398
-  RelativeTo root{mPresContext->PresShell()->GetRootFrame()};
+  RelativeTo root{targetFrame->PresShell()->GetRootFrame()};
   const nsPoint rootPoint =
       nsLayoutUtils::GetEventCoordinatesRelativeTo(mEvent, root);
   nsIFrame* layer = nsLayoutUtils::GetClosestLayer(targetFrame);
