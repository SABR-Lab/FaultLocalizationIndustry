# ==============================================================================
# REGRESSOR COMMIT DIFF
# ==============================================================================
# File: third_party/rust/ron/tests/481_number_underscores_suffixes.rs
# Commit: 3f167f8b3137
# Full Hash: 3f167f8b313749f50f135e189e5854bef7ac0c73
# Author: Erich Gubler <erichdongubler@gmail.com>
# Date: 2025-10-03 18:08 +0000
# Regressor Bug: 1991551
# File Overlap Count: 23
# Overlapping Files: third_party/rust/wgpu-hal/Cargo.toml, supply-chain/audits.toml, third_party/rust/naga/src/back/spv/writer.rs, third_party/rust/naga/src/back/msl/writer.rs, third_party/rust/wgpu-types/src/lib.rs
# Description:
#   Bug 1991551 - build(webgpu): update WGPU to 8c4aebc0c1b75e3f7412dfc180745a0717fc30ec r=webgpu-reviewers,supply-chain-reviewers,nical
# ==============================================================================

diff -r 823439f307a0 -r 3f167f8b3137 third_party/rust/ron/tests/481_number_underscores_suffixes.rs
--- a/third_party/rust/ron/tests/481_number_underscores_suffixes.rs	Fri Oct 03 18:01:30 2025 +0000
+++ b/third_party/rust/ron/tests/481_number_underscores_suffixes.rs	Fri Oct 03 18:08:29 2025 +0000
@@ -10,14 +10,21 @@
         ron::from_str::<u8>("_0b1"),
         Err(ron::error::SpannedError {
             code: ron::Error::UnderscoreAtBeginning,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<u8>("_0b1_u8"),
         Err(ron::error::SpannedError {
             code: ron::Error::UnderscoreAtBeginning,
-            position: ron::error::Position { line: 1, col: 1 },
+            // ? Start before end ?
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 6 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         })
     );
     assert_eq!(
@@ -27,7 +34,10 @@
                 digit: '2',
                 base: 2
             },
-            position: ron::error::Position { line: 1, col: 3 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 3 },
+                end: ron::error::Position { line: 1, col: 3 },
+            }
         })
     );
     assert_eq!(
@@ -37,7 +47,10 @@
                 digit: '2',
                 base: 2
             },
-            position: ron::error::Position { line: 1, col: 4 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 4 },
+                end: ron::error::Position { line: 1, col: 4 },
+            }
         })
     );
 
@@ -46,7 +59,10 @@
         ron::from_str::<u8>("_0o5"),
         Err(ron::error::SpannedError {
             code: ron::Error::UnderscoreAtBeginning,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         })
     );
     assert_eq!(
@@ -56,7 +72,10 @@
                 digit: 'A',
                 base: 8
             },
-            position: ron::error::Position { line: 1, col: 3 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 3 },
+                end: ron::error::Position { line: 1, col: 3 },
+            }
         })
     );
 
@@ -65,14 +84,20 @@
         ron::from_str::<u8>("_0xF"),
         Err(ron::error::SpannedError {
             code: ron::Error::UnderscoreAtBeginning,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<u8>("0xZ"),
         Err(ron::error::SpannedError {
             code: ron::Error::ExpectedInteger,
-            position: ron::error::Position { line: 1, col: 3 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 3 },
+            }
         })
     );
 
@@ -81,7 +106,10 @@
         ron::from_str::<u8>("_123"),
         Err(ron::error::SpannedError {
             code: ron::Error::UnderscoreAtBeginning,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         })
     );
     assert_eq!(
@@ -91,7 +119,10 @@
                 digit: 'a',
                 base: 10
             },
-            position: ron::error::Position { line: 1, col: 3 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 3 },
+            }
         })
     );
 }
@@ -104,14 +135,20 @@
         ron::from_str::<f32>("_286"),
         Err(ron::error::SpannedError {
             code: ron::Error::UnderscoreAtBeginning,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<f32>("2a86"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
 
@@ -120,7 +157,10 @@
         ron::from_str::<f32>("2_18__6_._"),
         Err(ron::error::SpannedError {
             code: ron::Error::FloatUnderscore,
-            position: ron::error::Position { line: 1, col: 10 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 10 },
+            }
         })
     );
     assert_eq!(
@@ -133,7 +173,10 @@
         ron::from_str::<f32>("._3__7_"),
         Err(ron::error::SpannedError {
             code: ron::Error::FloatUnderscore,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
 
@@ -145,7 +188,10 @@
         ron::from_str::<f64>("2_18__6_.3__7_e+____"),
         Err(ron::error::SpannedError {
             code: ron::Error::ExpectedFloat,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         })
     );
 }
@@ -191,7 +237,7 @@
         + serde::Serialize
         + serde::de::DeserializeOwned
         + PartialEq
-        + std::fmt::Debug,
+        + core::fmt::Debug,
 >(
     n: T,
     suffix: &str,
@@ -226,28 +272,40 @@
         ron::from_str::<ron::Value>("-1u8"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 5 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 5 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<ron::Value>("-1u16"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 6 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 6 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<ron::Value>("-1u32"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 6 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 6 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<ron::Value>("-1u64"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 6 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 6 },
+            }
         })
     );
     #[cfg(feature = "integer128")]
@@ -255,7 +313,10 @@
         ron::from_str::<ron::Value>("-1u128"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 7 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 7 },
+            }
         })
     );
 
@@ -263,28 +324,40 @@
         ron::from_str::<u8>("-1u8"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 5 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 3 },
+                end: ron::error::Position { line: 1, col: 5 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<u16>("-1u16"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 6 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 3 },
+                end: ron::error::Position { line: 1, col: 6 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<u32>("-1u32"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 6 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 3 },
+                end: ron::error::Position { line: 1, col: 6 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<u64>("-1u64"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 6 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 3 },
+                end: ron::error::Position { line: 1, col: 6 },
+            }
         })
     );
     #[cfg(feature = "integer128")]
@@ -292,7 +365,10 @@
         ron::from_str::<u128>("-1u128"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 7 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 3 },
+                end: ron::error::Position { line: 1, col: 7 },
+            }
         })
     );
 }
@@ -303,14 +379,20 @@
         ron::from_str::<ron::Value>("1u7"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<ron::Value>("1f17"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
     #[cfg(not(feature = "integer128"))]
@@ -318,7 +400,10 @@
         ron::from_str::<ron::Value>("1u128"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
     #[cfg(not(feature = "integer128"))]
@@ -326,7 +411,10 @@
         ron::from_str::<ron::Value>("1i128"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
 
@@ -334,14 +422,20 @@
         ron::from_str::<u8>("1u7"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
     assert_eq!(
         ron::from_str::<f32>("1f17"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
     #[cfg(not(feature = "integer128"))]
@@ -349,7 +443,10 @@
         ron::from_str::<u64>("1u128"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
     #[cfg(not(feature = "integer128"))]
@@ -357,7 +454,10 @@
         ron::from_str::<i64>("1i128"),
         Err(ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 2 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 2 },
+            }
         })
     );
 }
@@ -371,7 +471,10 @@
                 expected: String::from("an 8-bit unsigned integer"),
                 found: String::from("1i32")
             },
-            position: ron::error::Position { line: 1, col: 5 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 5 },
+            }
         })
     );
 
@@ -379,7 +482,10 @@
         ron::from_str::<i64>("-1u8"),
         Err(ron::error::SpannedError {
             code: ron::Error::IntegerOutOfBounds,
-            position: ron::error::Position { line: 1, col: 5 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 3 },
+                end: ron::error::Position { line: 1, col: 5 },
+            }
         })
     );
 
@@ -390,7 +496,10 @@
                 expected: String::from("a 32-bit floating point number"),
                 found: String::from("1f64")
             },
-            position: ron::error::Position { line: 1, col: 5 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 5 },
+            }
         })
     );
 
@@ -401,7 +510,10 @@
                 expected: String::from("a 64-bit floating point number"),
                 found: String::from("1f32")
             },
-            position: ron::error::Position { line: 1, col: 5 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 2 },
+                end: ron::error::Position { line: 1, col: 5 },
+            }
         })
     );
 
@@ -429,7 +541,7 @@
     test_mismatch! { i128, u128 }
 }
 
-fn check_number_type_mismatch<T: std::fmt::Debug + serde::de::DeserializeOwned>(suffix: &str) {
+fn check_number_type_mismatch<T: core::fmt::Debug + serde::de::DeserializeOwned>(suffix: &str) {
     let ron = format!("0{suffix}");
 
     if suffix.starts_with(std::any::type_name::<T>()) {
@@ -442,7 +554,7 @@
     println!("{:?} {}", err, suffix);
 
     assert_eq!(
-        err.position,
+        err.span.end,
         ron::error::Position {
             line: 1,
             col: 2 + suffix.len()
@@ -460,7 +572,10 @@
         ron::from_str::<f32>("NaNf32a").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::ExpectedFloat,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         }
     );
 
@@ -468,7 +583,10 @@
         ron::from_str::<f64>("-inff64a").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::ExpectedFloat,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         }
     );
 
@@ -476,7 +594,10 @@
         ron::from_str::<f32>("+NaNf17").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::ExpectedFloat,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         }
     );
 }
@@ -487,21 +608,32 @@
         ron::from_str::<f32>("1ee3").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::ExpectedFloat,
-            position: ron::error::Position { line: 1, col: 1 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 1 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         }
     );
     assert_eq!(
         ron::from_str::<f32>("1ee3f32").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::ExpectedFloat,
-            position: ron::error::Position { line: 1, col: 1 },
+            // ? Start before end ?
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 5 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         }
     );
     assert_eq!(
         ron::from_str::<f64>("1ee3f64").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::ExpectedFloat,
-            position: ron::error::Position { line: 1, col: 1 },
+            // ? Start before end ?
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 5 },
+                end: ron::error::Position { line: 1, col: 1 },
+            }
         }
     );
 }
@@ -538,7 +670,10 @@
         ron::from_str::<ron::Value>("true(false)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 5 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 5 },
+                end: ron::error::Position { line: 1, col: 5 },
+            }
         }
     );
 
@@ -548,7 +683,10 @@
         ron::from_str::<ron::Value>("false(true)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 6 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 6 },
+                end: ron::error::Position { line: 1, col: 6 },
+            }
         }
     );
 
@@ -565,7 +703,10 @@
         ron::from_str::<ron::Value>("None(true)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 5 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 5 },
+                end: ron::error::Position { line: 1, col: 5 },
+            }
         }
     );
 
@@ -575,7 +716,10 @@
         ron::from_str::<ron::Value>("inf(false)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 4 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 4 },
+                end: ron::error::Position { line: 1, col: 4 },
+            }
         }
     );
 
@@ -591,7 +735,10 @@
         ron::from_str::<ron::Value>("inff32(false)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 7 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 7 },
+                end: ron::error::Position { line: 1, col: 7 },
+            }
         }
     );
 
@@ -607,7 +754,10 @@
         ron::from_str::<ron::Value>("inff64(false)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 7 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 7 },
+                end: ron::error::Position { line: 1, col: 7 },
+            }
         }
     );
 
@@ -617,7 +767,10 @@
         ron::from_str::<ron::Value>("NaN(true)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 4 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 4 },
+                end: ron::error::Position { line: 1, col: 4 },
+            }
         }
     );
 
@@ -630,7 +783,10 @@
         ron::from_str::<ron::Value>("NaNf32(true)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 7 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 7 },
+                end: ron::error::Position { line: 1, col: 7 },
+            }
         }
     );
 
@@ -643,7 +799,10 @@
         ron::from_str::<ron::Value>("NaNf64(true)").unwrap_err(),
         ron::error::SpannedError {
             code: ron::Error::TrailingCharacters,
-            position: ron::error::Position { line: 1, col: 7 },
+            span: ron::error::Span {
+                start: ron::error::Position { line: 1, col: 7 },
+                end: ron::error::Position { line: 1, col: 7 },
+            }
         }
     );
 }