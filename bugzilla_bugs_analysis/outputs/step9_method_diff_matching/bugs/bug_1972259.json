{
  "bug_id": "1972259",
  "processing_timestamp": "2025-12-16T09:31:57.977175",
  "files": [
    {
      "filepath": "dom/view-transitions/ViewTransition.cpp",
      "fixing_commits": [
        {
          "commit_hash": "d0a241d0c9b6",
          "full_hash": "d0a241d0c9b60dd81a2de262111995582864544c",
          "parent_hash": "a8e744a89b81ba904f1ee1eadfcb8175e0f880e2",
          "commit_type": "fixing",
          "filepath": "dom/view-transitions/ViewTransition.cpp",
          "diff_found": true,
          "diff_path": "/Users/sidiqafekrat/Mozilla_crashAnalyzer_BugBug/method2_bugzilla_bugs/outputs/step5_extracted_diffs/bug_1972259/fixing_commit/d0a241d0c9b6/dom_view-transitions_ViewTransition.cpp.diff",
          "methods_count": 55,
          "matched_methods": {
            "fully_modified": [],
            "partially_modified": [
              {
                "name": "pty());\n\n  // S",
                "type": "method",
                "start_line": 1200,
                "end_line": 1288,
                "line_count": 89,
                "signature": "Maybe<SkipTransitionReason> ViewTransition::CaptureOldState() { MOZ_ASSERT(mNamedElements.IsEmpty()); ",
                "changed_lines": [
                  1259,
                  1260,
                  1261,
                  1262,
                  1263,
                  1264,
                  1265,
                  1266,
                  1267
                ],
                "overlap_count": 9,
                "overlap_percentage": 10.1
              },
              {
                "name": "ue> aUpdateCal",
                "type": "method",
                "start_line": 1575,
                "end_line": 1684,
                "line_count": 110,
                "signature": "void ViewTransition::SkipTransition( SkipTransitionReason aReason, JS::Handle<JS::Value> aUpdateCallbackRejectReason) {",
                "changed_lines": [
                  1632,
                  1633,
                  1634,
                  1635,
                  1636,
                  1637
                ],
                "overlap_count": 6,
                "overlap_percentage": 5.5
              }
            ],
            "unmodified": [
              {
                "name": "SetCaptured",
                "type": "function",
                "start_line": 40,
                "end_line": 46,
                "line_count": 7,
                "signature": "static void SetCaptured(nsIFrame* aFrame, bool aCaptured) { aFrame->AddOrRemoveStateBits(NS_FRAME_CAPTURED_IN_VIEW_TRANSITION, aCaptured); aFrame->InvalidateFrameSubtree();"
              },
              {
                "name": "EffectiveTransform",
                "type": "function",
                "start_line": 56,
                "end_line": 81,
                "line_count": 26,
                "signature": "static CSSToCSSMatrix4x4Flagged EffectiveTransform(nsIFrame* aFrame) { CSSToCSSMatrix4x4Flagged matrix; if (aFrame->GetSize().IsEmpty() || aFrame->Style()->IsRootElementStyle()) {"
              },
              {
                "name": "pturedRect(c",
                "type": "function",
                "start_line": 88,
                "end_line": 93,
                "line_count": 6,
                "signature": "static inline nsRect CapturedRect(const nsIFrame* aFrame) { return aFrame->Style()->IsRootElementStyle() ? ViewTransition::SnapshotContainingBlockRect("
              },
              {
                "name": "pturedSize(c",
                "type": "function",
                "start_line": 94,
                "end_line": 99,
                "line_count": 6,
                "signature": "static inline nsSize CapturedSize(const nsIFrame* aFrame, const nsSize& aSnapshotContainingBlockSize) { return aFrame->Style()->IsRootElementStyle()"
              },
              {
                "name": "ptureFallbackSnapshot(\n",
                "type": "function",
                "start_line": 101,
                "end_line": 137,
                "line_count": 37,
                "signature": "static RefPtr<gfx::DataSourceSurface> CaptureFallbackSnapshot( nsIFrame* aFrame) { VT_LOG_DEBUG(\"CaptureFallbackSnapshot(%s)\", aFrame->ListTag().get());"
              },
              {
                "name": "dSnapshotData()",
                "type": "function",
                "start_line": 147,
                "end_line": 147,
                "line_count": 1,
                "signature": "OldSnapshotData() = default;  explicit OldSnapshotData(nsIFrame* aFrame,"
              },
              {
                "name": "dSnapshotData(n",
                "type": "function",
                "start_line": 149,
                "end_line": 155,
                "line_count": 7,
                "signature": "explicit OldSnapshotData(nsIFrame* aFrame, const nsSize& aSnapshotContainingBlockSize) : mSize(CapturedSize(aFrame, aSnapshotContainingBlockSize)) {"
              },
              {
                "name": "sureKey(l",
                "type": "method",
                "start_line": 157,
                "end_line": 184,
                "line_count": 28,
                "signature": "void EnsureKey(layers::RenderRootStateManager* aManager, wr::IpcResourceUpdateQueue& aResources) { if (mImageKey != kNoKey) {"
              },
              {
                "name": "pturedElementOldState(n",
                "type": "function",
                "start_line": 213,
                "end_line": 224,
                "line_count": 12,
                "signature": "CapturedElementOldState(nsIFrame* aFrame, const nsSize& aSnapshotContainingBlockSize) : mSnapshot(aFrame, aSnapshotContainingBlockSize),"
              },
              {
                "name": "pturedElementOldState()",
                "type": "function",
                "start_line": 226,
                "end_line": 226,
                "line_count": 1,
                "signature": "CapturedElementOldState() = default; }; "
              },
              {
                "name": "pturedElement()",
                "type": "function",
                "start_line": 236,
                "end_line": 236,
                "line_count": 1,
                "signature": "CapturedElement() = default;  CapturedElement(nsIFrame* aFrame, const nsSize& aSnapshotContainingBlockSize,"
              },
              {
                "name": "pturedElement(n",
                "type": "function",
                "start_line": 238,
                "end_line": 241,
                "line_count": 4,
                "signature": "CapturedElement(nsIFrame* aFrame, const nsSize& aSnapshotContainingBlockSize, StyleViewTransitionClass&& aClassList) : mOldState(aFrame, aSnapshotContainingBlockSize),"
              },
              {
                "name": "ptureClassList(S",
                "type": "method",
                "start_line": 258,
                "end_line": 260,
                "line_count": 3,
                "signature": "void CaptureClassList(StyleViewTransitionClass&& aClassList) { mClassList = std::move(aClassList); }"
              },
              {
                "name": "plCycleCollectionTraverse(\n",
                "type": "function",
                "start_line": 271,
                "end_line": 276,
                "line_count": 6,
                "signature": "static inline void ImplCycleCollectionTraverse( nsCycleCollectionTraversalCallback& aCb, const ViewTransition::CapturedElement& aField, const char* aName,"
              },
              {
                "name": "ewTransition(D",
                "type": "method",
                "start_line": 292,
                "end_line": 294,
                "line_count": 3,
                "signature": "ViewTransition::ViewTransition(Document& aDoc, ViewTransitionUpdateCallback* aCb) : mDocument(&aDoc), mUpdateCallback(aCb) {}"
              },
              {
                "name": "tOldSize(n",
                "type": "method",
                "start_line": 304,
                "end_line": 310,
                "line_count": 7,
                "signature": "Maybe<nsSize> ViewTransition::GetOldSize(nsAtom* aName) const { auto* el = mNamedElements.Get(aName); if (NS_WARN_IF(!el)) {"
              },
              {
                "name": "tNewSize(n",
                "type": "method",
                "start_line": 312,
                "end_line": 318,
                "line_count": 7,
                "signature": "Maybe<nsSize> ViewTransition::GetNewSize(nsAtom* aName) const { auto* el = mNamedElements.Get(aName); if (NS_WARN_IF(!el)) {"
              },
              {
                "name": "ybeScheduleUpdateCallback()",
                "type": "method",
                "start_line": 405,
                "end_line": 419,
                "line_count": 15,
                "signature": "void ViewTransition::MaybeScheduleUpdateCallback() { // 1. If transition\u2019s phase is \"done\", then abort these steps. // Note: This happens if transition was skipped before this point."
              },
              {
                "name": "UpdateCallback(Err",
                "type": "method",
                "start_line": 422,
                "end_line": 527,
                "line_count": 106,
                "signature": "void ViewTransition::CallUpdateCallback(ErrorResult& aRv) { MOZ_ASSERT(mDocument); // Step 1:  Assert: transition's phase is \"done\", or before"
              },
              {
                "name": "eoutTimer() {\n  i",
                "type": "method",
                "start_line": 529,
                "end_line": 534,
                "line_count": 6,
                "signature": "void ViewTransition::ClearTimeoutTimer() { if (mTimeoutTimer) { mTimeoutTimer->Cancel();"
              },
              {
                "name": "allback(nsITime",
                "type": "method",
                "start_line": 536,
                "end_line": 540,
                "line_count": 5,
                "signature": "void ViewTransition::TimeoutCallback(nsITimer* aTimer, void* aClosure) { RefPtr vt = static_cast<ViewTransition*>(aClosure); MOZ_DIAGNOSTIC_ASSERT(aTimer == vt->mTimeoutTimer);"
              },
              {
                "name": ") {\n  C",
                "type": "method",
                "start_line": 542,
                "end_line": 547,
                "line_count": 6,
                "signature": "void ViewTransition::Timeout() { ClearTimeoutTimer(); if (mPhase != Phase::Done && mDocument) {"
              },
              {
                "name": "do(Documen",
                "type": "function",
                "start_line": 549,
                "end_line": 565,
                "line_count": 17,
                "signature": "static already_AddRefed<Element> MakePseudo(Document& aDoc, PseudoStyleType aType, nsAtom* aName) {"
              },
              {
                "name": "StyleLo",
                "type": "function",
                "start_line": 567,
                "end_line": 574,
                "line_count": 8,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const nsACString& aValue) { return Servo_DeclarationBlock_SetPropertyById("
              },
              {
                "name": "StyleLo",
                "type": "function",
                "start_line": 576,
                "end_line": 579,
                "line_count": 4,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document*, nsCSSPropertyID aProp, float aLength, nsCSSUnit aUnit) { return Servo_DeclarationBlock_SetLengthValue(aDecls, aProp, aLength, aUnit)"
              },
              {
                "name": "StyleLo",
                "type": "function",
                "start_line": 581,
                "end_line": 590,
                "line_count": 10,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document*, nsCSSPropertyID aProp, const CSSToCSSMatrix4x4Flagged& aM) { MOZ_ASSERT(aProp == eCSSProperty_transform);"
              },
              {
                "name": "StyleLo",
                "type": "function",
                "start_line": 592,
                "end_line": 595,
                "line_count": 4,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const StyleWritingModeProperty aWM) { return Servo_DeclarationBlock_SetKeywordValue(aDecls, aProp, (int3"
              },
              {
                "name": "StyleLo",
                "type": "function",
                "start_line": 597,
                "end_line": 601,
                "line_count": 5,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const StyleDirection aDirection) { return Servo_DeclarationBlock_SetKeywordValue(aDecls, aProp,"
              },
              {
                "name": "StyleLo",
                "type": "function",
                "start_line": 603,
                "end_line": 608,
                "line_count": 6,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const StyleTextOrientation aTextOrientation) {"
              },
              {
                "name": "StyleLo",
                "type": "function",
                "start_line": 610,
                "end_line": 613,
                "line_count": 4,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const StyleBlend aBlend) { return Servo_DeclarationBlock_SetKeywordValue(aDecls, aProp, (int32_t)aBlend)"
              },
              {
                "name": "\n    St",
                "type": "function",
                "start_line": 615,
                "end_line": 620,
                "line_count": 6,
                "signature": "static bool SetProp( StyleLockedDeclarationBlock* aDecls, Document*, nsCSSPropertyID aProp, const StyleOwnedSlice<mozilla::StyleFilter>& aBackdropFilters) {"
              },
              {
                "name": "StyleLo",
                "type": "function",
                "start_line": 622,
                "end_line": 626,
                "line_count": 5,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document*, nsCSSPropertyID aProp, const StyleColorScheme& aColorScheme) {"
              },
              {
                "name": "upKeyframes(\n    Do",
                "type": "function",
                "start_line": 636,
                "end_line": 683,
                "line_count": 48,
                "signature": "static nsTArray<Keyframe> BuildGroupKeyframes( Document* aDoc, const CSSToCSSMatrix4x4Flagged& aTransform, const nsSize& aSize, const StyleOwnedSlice<StyleFilter>& aBackdropFilters) {"
              },
              {
                "name": "Keyframes(\n    ns",
                "type": "method",
                "start_line": 685,
                "end_line": 703,
                "line_count": 19,
                "signature": "bool ViewTransition::GetGroupKeyframes( nsAtom* aAnimationName, const StyleComputedTimingFunction& aTimingFunction, nsTArray<Keyframe>& aResult) {"
              },
              {
                "name": "ssList(\n    ns",
                "type": "method",
                "start_line": 707,
                "end_line": 736,
                "line_count": 30,
                "signature": "bool ViewTransition::MatchClassList( nsAtom* aTransitionName, const nsTArray<StyleAtom>& aPtNameAndClassSelector) const {"
              },
              {
                "name": "ASSERT(!mSnapshotContainingBl",
                "type": "method",
                "start_line": 751,
                "end_line": 900,
                "line_count": 150,
                "signature": "void ViewTransition::SetupTransitionPseudoElements() { MOZ_ASSERT(!mSnapshotContainingBlock); "
              },
              {
                "name": "ion) {\n  // 1. For each t",
                "type": "method",
                "start_line": 903,
                "end_line": 973,
                "line_count": 71,
                "signature": "bool ViewTransition::UpdatePseudoElementStyles(bool aNeedsInvalidation) { // 1. For each transitionName -> capturedElement of transition's \"named // elements\"."
              },
              {
                "name": "e is \"do",
                "type": "method",
                "start_line": 976,
                "end_line": 1028,
                "line_count": 53,
                "signature": "void ViewTransition::Activate() { // Step 1: If transition's phase is \"done\", then return. if (mPhase == Phase::Done) {"
              },
              {
                "name": ";\n  MOZ_ASSERT(mDocument",
                "type": "method",
                "start_line": 1031,
                "end_line": 1050,
                "line_count": 20,
                "signature": "void ViewTransition::PerformPendingOperations() { MOZ_ASSERT(mDocument); MOZ_ASSERT(mDocument->GetActiveViewTransition() == this);"
              },
              {
                "name": "// FIXME: Bug 1960762. Twea",
                "type": "method",
                "start_line": 1053,
                "end_line": 1056,
                "line_count": 4,
                "signature": "nsRect ViewTransition::SnapshotContainingBlockRect(nsPresContext* aPc) { // FIXME: Bug 1960762. Tweak this for mobile OS. return aPc ? aPc->GetVisibleArea() : nsRect();"
              },
              {
                "name": "t* pc = mDocument->GetPresC",
                "type": "method",
                "start_line": 1059,
                "end_line": 1062,
                "line_count": 4,
                "signature": "nsRect ViewTransition::SnapshotContainingBlockRect() const { nsPresContext* pc = mDocument->GetPresContext(); return SnapshotContainingBlockRect(pc);"
              },
              {
                "name": "aCb) {\n  if (!aCb",
                "type": "function",
                "start_line": 1155,
                "end_line": 1167,
                "line_count": 13,
                "signature": "static bool ForEachChildFrame(nsIFrame* aFrame, const Callback& aCb) { if (!aCb(aFrame)) { return false;"
              },
              {
                "name": "  PresShell*",
                "type": "function",
                "start_line": 1170,
                "end_line": 1180,
                "line_count": 11,
                "signature": "static void ForEachFrame(Document* aDoc, const Callback& aCb) { PresShell* ps = aDoc->GetPresShell(); if (!ps) {"
              },
              {
                "name": "me) {\n  return aFrame->Sty",
                "type": "function",
                "start_line": 1194,
                "end_line": 1197,
                "line_count": 4,
                "signature": "static StyleViewTransitionClass DocumentScopedClassListFor( const nsIFrame* aFrame) { return aFrame->StyleUIReset()->mViewTransitionClass;"
              },
              {
                "name": "tionNames;\n  Ma",
                "type": "method",
                "start_line": 1291,
                "end_line": 1337,
                "line_count": 47,
                "signature": "Maybe<SkipTransitionReason> ViewTransition::CaptureNewState() { nsTHashSet<nsAtom*> usedTransitionNames; Maybe<SkipTransitionReason> result;"
              },
              {
                "name": "nsiti",
                "type": "method",
                "start_line": 1340,
                "end_line": 1360,
                "line_count": 21,
                "signature": "void ViewTransition::Setup() { // Step 2: Capture the old state for transition. if (auto skipReason = CaptureOldState()) {"
              },
              {
                "name": "e animation",
                "type": "method",
                "start_line": 1363,
                "end_line": 1401,
                "line_count": 39,
                "signature": "void ViewTransition::HandleFrame() { // Steps 1-3: Steps 1-3: Compute active animations. const bool hasActiveAnimations = CheckForActiveAnimations();"
              },
              {
                "name": "oot, const AnimationTimeline& aDocTim",
                "type": "function",
                "start_line": 1403,
                "end_line": 1449,
                "line_count": 47,
                "signature": "static bool CheckForActiveAnimationsForEachPseudo( const Element& aRoot, const AnimationTimeline& aDocTimeline, const AnimationEventDispatcher& aDispatcher,"
              },
              {
                "name": "cPrefs::dom_viewTransiti",
                "type": "method",
                "start_line": 1454,
                "end_line": 1500,
                "line_count": 47,
                "signature": "bool ViewTransition::CheckForActiveAnimations() const { MOZ_ASSERT(mDocument); "
              },
              {
                "name": "to* element = entr",
                "type": "method",
                "start_line": 1502,
                "end_line": 1512,
                "line_count": 11,
                "signature": "void ViewTransition::ClearNamedElements() { for (auto& entry : mNamedElements) { if (auto* element = entry.GetData()->mNewElement.get()) {"
              },
              {
                "name": "return;\n  }\n\n  auto* data = aRoot",
                "type": "function",
                "start_line": 1514,
                "end_line": 1524,
                "line_count": 11,
                "signature": "static void ClearViewTransitionsAnimationData(Element* aRoot) { if (!aRoot) { return;"
              },
              {
                "name": "ERT(mDocument);\n  MOZ",
                "type": "method",
                "start_line": 1527,
                "end_line": 1567,
                "line_count": 41,
                "signature": "void ViewTransition::ClearActiveTransition(bool aIsDocumentHidden) { // Steps 1-2 MOZ_ASSERT(mDocument);"
              },
              {
                "name": " JS::Undefined",
                "type": "method",
                "start_line": 1569,
                "end_line": 1571,
                "line_count": 3,
                "signature": "void ViewTransition::SkipTransition(SkipTransitionReason aReason) { SkipTransition(aReason, JS::UndefinedHandleValue); }"
              }
            ]
          },
          "hunks_count": 2,
          "hunk_ranges": [
            "@@ -1259,9 @@",
            "@@ -1632,6 @@"
          ]
        }
      ],
      "regressor_commits": [
        {
          "commit_hash": "4022112ed77b",
          "full_hash": "4022112ed77b0e7998e9fdfdcd0a048f4cabffce",
          "parent_hash": "81ebaa847d42f8c8d8d49a7e93188655d8351c9f",
          "commit_type": "regressor",
          "filepath": "dom/view-transitions/ViewTransition.cpp",
          "diff_found": true,
          "diff_path": "/Users/sidiqafekrat/Mozilla_crashAnalyzer_BugBug/method2_bugzilla_bugs/outputs/step5_extracted_diffs/bug_1972259/regressor_commits/regressor_1953823_4022112ed77b/dom_view-transitions_ViewTransition.cpp.diff",
          "methods_count": 48,
          "matched_methods": {
            "fully_modified": [
              {
                "name": "ningBlockRect() const {\n  n",
                "type": "method",
                "start_line": 943,
                "end_line": 948,
                "line_count": 6,
                "signature": "nsRect ViewTransition::SnapshotContainingBlockRect() const { nsPresContext* pc = mDocument->GetPresContext(); // TODO(emilio): Ensure this is correct with Android's dynamic toolbar and",
                "changed_lines": [
                  943,
                  944,
                  945,
                  946,
                  947,
                  948
                ],
                "overlap_count": 6,
                "overlap_percentage": 100.0
              }
            ],
            "partially_modified": [
              {
                "name": "CaptureFallbackSnapshot",
                "type": "function",
                "start_line": 63,
                "end_line": 93,
                "line_count": 31,
                "signature": "static RefPtr<gfx::DataSourceSurface> CaptureFallbackSnapshot( nsIFrame* aFrame) { const nsRect rect = aFrame->InkOverflowRectRelativeToSelf();",
                "changed_lines": [
                  63,
                  64,
                  65,
                  66,
                  67,
                  68,
                  69,
                  70,
                  81,
                  82,
                  83,
                  84,
                  85,
                  86,
                  87
                ],
                "overlap_count": 15,
                "overlap_percentage": 48.4
              },
              {
                "name": "Operations() {\n  MOZ_ASS",
                "type": "method",
                "start_line": 921,
                "end_line": 940,
                "line_count": 20,
                "signature": "void ViewTransition::PerformPendingOperations() { MOZ_ASSERT(mDocument); MOZ_ASSERT(mDocument->GetActiveViewTransition() == this);",
                "changed_lines": [
                  940
                ],
                "overlap_count": 1,
                "overlap_percentage": 5.0
              },
              {
                "name": "e() {\n  MOZ_ASS",
                "type": "method",
                "start_line": 1081,
                "end_line": 1149,
                "line_count": 69,
                "signature": "Maybe<SkipTransitionReason> ViewTransition::CaptureOldState() { MOZ_ASSERT(mNamedElements.IsEmpty()); ",
                "changed_lines": [
                  1120,
                  1121,
                  1122,
                  1123,
                  1124,
                  1125,
                  1126,
                  1127,
                  1128,
                  1129,
                  1130,
                  1131,
                  1132,
                  1133,
                  1142,
                  1143,
                  1144,
                  1145,
                  1146,
                  1147,
                  1148
                ],
                "overlap_count": 21,
                "overlap_percentage": 30.4
              },
              {
                "name": "e() {\n  nsTHash",
                "type": "method",
                "start_line": 1152,
                "end_line": 1190,
                "line_count": 39,
                "signature": "Maybe<SkipTransitionReason> ViewTransition::CaptureNewState() { nsTHashSet<nsAtom*> usedTransitionNames; Maybe<SkipTransitionReason> result;",
                "changed_lines": [
                  1183,
                  1184,
                  1185,
                  1186,
                  1187,
                  1188,
                  1189
                ],
                "overlap_count": 7,
                "overlap_percentage": 17.9
              },
              {
                "name": "& entry : mNamedEl",
                "type": "method",
                "start_line": 1355,
                "end_line": 1365,
                "line_count": 11,
                "signature": "void ViewTransition::ClearNamedElements() { for (auto& entry : mNamedElements) { if (auto* element = entry.GetData()->mNewElement.get()) {",
                "changed_lines": [
                  1356,
                  1357,
                  1358,
                  1359,
                  1360,
                  1361,
                  1362
                ],
                "overlap_count": 7,
                "overlap_percentage": 63.6
              }
            ],
            "unmodified": [
              {
                "name": "EffectiveTransform",
                "type": "function",
                "start_line": 44,
                "end_line": 61,
                "line_count": 18,
                "signature": "static CSSToCSSMatrix4x4Flagged EffectiveTransform(nsIFrame* aFrame) { CSSToCSSMatrix4x4Flagged matrix; if (aFrame->GetSize().IsEmpty() || aFrame->Style()->IsRootElementStyle()) {"
              },
              {
                "name": "OldSnapshotData",
                "type": "function",
                "start_line": 123,
                "end_line": 123,
                "line_count": 1,
                "signature": "OldSnapshotData() = default;  explicit OldSnapshotData(nsIFrame* aFrame)"
              },
              {
                "name": "OldSnapshotData",
                "type": "function",
                "start_line": 125,
                "end_line": 133,
                "line_count": 9,
                "signature": "explicit OldSnapshotData(nsIFrame* aFrame) : mSize(aFrame->InkOverflowRectRelativeToSelf().Size()), mManager(GetWRStateManagerFor(aFrame)) {"
              },
              {
                "name": "EnsureKey",
                "type": "method",
                "start_line": 135,
                "end_line": 156,
                "line_count": 22,
                "signature": "void EnsureKey(layers::RenderRootStateManager* aManager, wr::IpcResourceUpdateQueue& aResources) { if (mImageKey != kNoKey) {"
              },
              {
                "name": "CapturedElementOldState",
                "type": "function",
                "start_line": 185,
                "end_line": 198,
                "line_count": 14,
                "signature": "CapturedElementOldState(nsIFrame* aFrame, const nsSize& aSnapshotContainingBlockSize) : mSnapshot(aFrame),"
              },
              {
                "name": "CapturedElementOldState",
                "type": "function",
                "start_line": 200,
                "end_line": 200,
                "line_count": 1,
                "signature": "CapturedElementOldState() = default; }; "
              },
              {
                "name": "CapturedElement",
                "type": "function",
                "start_line": 210,
                "end_line": 210,
                "line_count": 1,
                "signature": "CapturedElement() = default;  CapturedElement(nsIFrame* aFrame, const nsSize& aSnapshotContainingBlockSize)"
              },
              {
                "name": "CapturedElement",
                "type": "function",
                "start_line": 212,
                "end_line": 213,
                "line_count": 2,
                "signature": "CapturedElement(nsIFrame* aFrame, const nsSize& aSnapshotContainingBlockSize) : mOldState(aFrame, aSnapshotContainingBlockSize) {} "
              },
              {
                "name": "ImplCycleCollectionTraverse",
                "type": "function",
                "start_line": 235,
                "end_line": 240,
                "line_count": 6,
                "signature": "static inline void ImplCycleCollectionTraverse( nsCycleCollectionTraversalCallback& aCb, const ViewTransition::CapturedElement& aField, const char* aName,"
              },
              {
                "name": "ViewTransition",
                "type": "method",
                "start_line": 256,
                "end_line": 258,
                "line_count": 3,
                "signature": "ViewTransition::ViewTransition(Document& aDoc, ViewTransitionUpdateCallback* aCb) : mDocument(&aDoc), mUpdateCallback(aCb) {}"
              },
              {
                "name": "GetOldSize",
                "type": "method",
                "start_line": 262,
                "end_line": 268,
                "line_count": 7,
                "signature": "Maybe<nsSize> ViewTransition::GetOldSize(nsAtom* aName) const { auto* el = mNamedElements.Get(aName); if (NS_WARN_IF(!el)) {"
              },
              {
                "name": "GetNewSize",
                "type": "method",
                "start_line": 270,
                "end_line": 276,
                "line_count": 7,
                "signature": "Maybe<nsSize> ViewTransition::GetNewSize(nsAtom* aName) const { auto* el = mNamedElements.Get(aName); if (NS_WARN_IF(!el)) {"
              },
              {
                "name": "MaybeScheduleUpdateCallback",
                "type": "method",
                "start_line": 360,
                "end_line": 374,
                "line_count": 15,
                "signature": "void ViewTransition::MaybeScheduleUpdateCallback() { // 1. If transition\u2019s phase is \"done\", then abort these steps. // Note: This happens if transition was skipped before this point."
              },
              {
                "name": "llUpdateCallback(E",
                "type": "method",
                "start_line": 377,
                "end_line": 482,
                "line_count": 106,
                "signature": "void ViewTransition::CallUpdateCallback(ErrorResult& aRv) { MOZ_ASSERT(mDocument); // Step 1:  Assert: transition's phase is \"done\", or before"
              },
              {
                "name": "imeoutTimer() {\n ",
                "type": "method",
                "start_line": 484,
                "end_line": 489,
                "line_count": 6,
                "signature": "void ViewTransition::ClearTimeoutTimer() { if (mTimeoutTimer) { mTimeoutTimer->Cancel();"
              },
              {
                "name": "tCallback(nsITi",
                "type": "method",
                "start_line": 491,
                "end_line": 495,
                "line_count": 5,
                "signature": "void ViewTransition::TimeoutCallback(nsITimer* aTimer, void* aClosure) { RefPtr vt = static_cast<ViewTransition*>(aClosure); MOZ_DIAGNOSTIC_ASSERT(aTimer == vt->mTimeoutTimer);"
              },
              {
                "name": "t() {\n ",
                "type": "method",
                "start_line": 497,
                "end_line": 502,
                "line_count": 6,
                "signature": "void ViewTransition::Timeout() { ClearTimeoutTimer(); if (mPhase != Phase::Done && mDocument) {"
              },
              {
                "name": "eudo(Docum",
                "type": "function",
                "start_line": 504,
                "end_line": 521,
                "line_count": 18,
                "signature": "static already_AddRefed<Element> MakePseudo(Document& aDoc, PseudoStyleType aType, nsAtom* aName) {"
              },
              {
                "name": "p(Style",
                "type": "function",
                "start_line": 523,
                "end_line": 530,
                "line_count": 8,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const nsACString& aValue) { return Servo_DeclarationBlock_SetPropertyById("
              },
              {
                "name": "p(Style",
                "type": "function",
                "start_line": 532,
                "end_line": 535,
                "line_count": 4,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document*, nsCSSPropertyID aProp, float aLength, nsCSSUnit aUnit) { return Servo_DeclarationBlock_SetLengthValue(aDecls, aProp, aLength, aUnit)"
              },
              {
                "name": "p(Style",
                "type": "function",
                "start_line": 537,
                "end_line": 546,
                "line_count": 10,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document*, nsCSSPropertyID aProp, const CSSToCSSMatrix4x4Flagged& aM) { MOZ_ASSERT(aProp == eCSSProperty_transform);"
              },
              {
                "name": "p(Style",
                "type": "function",
                "start_line": 548,
                "end_line": 551,
                "line_count": 4,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const StyleWritingModeProperty aWM) { return Servo_DeclarationBlock_SetKeywordValue(aDecls, aProp, (int3"
              },
              {
                "name": "p(Style",
                "type": "function",
                "start_line": 553,
                "end_line": 557,
                "line_count": 5,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const StyleDirection aDirection) { return Servo_DeclarationBlock_SetKeywordValue(aDecls, aProp,"
              },
              {
                "name": "p(Style",
                "type": "function",
                "start_line": 559,
                "end_line": 564,
                "line_count": 6,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const StyleTextOrientation aTextOrientation) {"
              },
              {
                "name": "p(Style",
                "type": "function",
                "start_line": 566,
                "end_line": 569,
                "line_count": 4,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document* aDoc, nsCSSPropertyID aProp, const StyleBlend aBlend) { return Servo_DeclarationBlock_SetKeywordValue(aDecls, aProp, (int32_t)aBlend)"
              },
              {
                "name": "p(\n    ",
                "type": "function",
                "start_line": 571,
                "end_line": 576,
                "line_count": 6,
                "signature": "static bool SetProp( StyleLockedDeclarationBlock* aDecls, Document*, nsCSSPropertyID aProp, const StyleOwnedSlice<mozilla::StyleFilter>& aBackdropFilters) {"
              },
              {
                "name": "p(Style",
                "type": "function",
                "start_line": 578,
                "end_line": 582,
                "line_count": 5,
                "signature": "static bool SetProp(StyleLockedDeclarationBlock* aDecls, Document*, nsCSSPropertyID aProp, const StyleColorScheme& aColorScheme) {"
              },
              {
                "name": "roupKeyframes(\n    ",
                "type": "function",
                "start_line": 593,
                "end_line": 631,
                "line_count": 39,
                "signature": "static nsTArray<Keyframe> BuildGroupKeyframes( Document* aDoc, const CSSToCSSMatrix4x4Flagged& aTransform, const nsSize& aSize) {"
              },
              {
                "name": "upKeyframes(nsAto",
                "type": "method",
                "start_line": 633,
                "end_line": 645,
                "line_count": 13,
                "signature": "bool ViewTransition::GetGroupKeyframes(nsAtom* aAnimationName, nsTArray<Keyframe>& aResult) const { MOZ_ASSERT(StringBeginsWith(nsDependentAtomString(aAnimationName),"
              },
              {
                "name": "ransitionPseudoElements() {\n ",
                "type": "method",
                "start_line": 648,
                "end_line": 791,
                "line_count": 144,
                "signature": "void ViewTransition::SetupTransitionPseudoElements() { MOZ_ASSERT(!mViewTransitionRoot); "
              },
              {
                "name": "ElementStyles(bool aNeeds",
                "type": "method",
                "start_line": 794,
                "end_line": 865,
                "line_count": 72,
                "signature": "bool ViewTransition::UpdatePseudoElementStyles(bool aNeedsInvalidation) { // 1. For each transitionName -> capturedElement of transition's \"named // elements\"."
              },
              {
                "name": " // Step",
                "type": "method",
                "start_line": 868,
                "end_line": 918,
                "line_count": 51,
                "signature": "void ViewTransition::Activate() { // Step 1: If transition's phase is \"done\", then return. if (mPhase == Phase::Done) {"
              },
              {
                "name": "ame(nsIFrame* aFr",
                "type": "function",
                "start_line": 1040,
                "end_line": 1052,
                "line_count": 13,
                "signature": "static bool ForEachChildFrame(nsIFrame* aFrame, const Callback& aCb) { if (!aCb(aFrame)) { return false;"
              },
              {
                "name": "ocument* aDo",
                "type": "function",
                "start_line": 1055,
                "end_line": 1065,
                "line_count": 11,
                "signature": "static void ForEachFrame(Document* aDoc, const Callback& aCb) { PresShell* ps = aDoc->GetPresShell(); if (!ps) {"
              },
              {
                "name": " Step",
                "type": "method",
                "start_line": 1193,
                "end_line": 1213,
                "line_count": 21,
                "signature": "void ViewTransition::Setup() { // Step 2: Capture the old state for transition. if (auto skipReason = CaptureOldState()) {"
              },
              {
                "name": "// Steps 1-",
                "type": "method",
                "start_line": 1216,
                "end_line": 1254,
                "line_count": 39,
                "signature": "void ViewTransition::HandleFrame() { // Steps 1-3: Steps 1-3: Compute active animations. const bool hasActiveAnimations = CheckForActiveAnimations();"
              },
              {
                "name": "nsForEachPseudo(\n    const Element& a",
                "type": "function",
                "start_line": 1256,
                "end_line": 1302,
                "line_count": 47,
                "signature": "static bool CheckForActiveAnimationsForEachPseudo( const Element& aRoot, const AnimationTimeline& aDocTimeline, const AnimationEventDispatcher& aDispatcher,"
              },
              {
                "name": "\n  MOZ_ASSERT(mDocument)",
                "type": "method",
                "start_line": 1307,
                "end_line": 1353,
                "line_count": 47,
                "signature": "bool ViewTransition::CheckForActiveAnimations() const { MOZ_ASSERT(mDocument); "
              },
              {
                "name": "Element* aRoot) {\n  if (!aRoot) {",
                "type": "function",
                "start_line": 1367,
                "end_line": 1377,
                "line_count": 11,
                "signature": "static void ClearViewTransitionsAnimationData(Element* aRoot) { if (!aRoot) { return;"
              },
              {
                "name": "mentHidden) {\n  // St",
                "type": "method",
                "start_line": 1380,
                "end_line": 1413,
                "line_count": 34,
                "signature": "void ViewTransition::ClearActiveTransition(bool aIsDocumentHidden) { // Steps 1-2 MOZ_ASSERT(mDocument);"
              },
              {
                "name": "n aReason) {\n ",
                "type": "method",
                "start_line": 1415,
                "end_line": 1417,
                "line_count": 3,
                "signature": "void ViewTransition::SkipTransition(SkipTransitionReason aReason) { SkipTransition(aReason, JS::UndefinedHandleValue); }"
              },
              {
                "name": "Reason aReason",
                "type": "method",
                "start_line": 1421,
                "end_line": 1526,
                "line_count": 106,
                "signature": "void ViewTransition::SkipTransition( SkipTransitionReason aReason, JS::Handle<JS::Value> aUpdateCallbackRejectReason) {"
              }
            ]
          },
          "hunks_count": 8,
          "hunk_ranges": [
            "@@ -28,11 @@",
            "@@ -62,9 @@",
            "@@ -81,7 @@",
            "@@ -940,11 @@",
            "@@ -1120,14 @@",
            "@@ -1142,7 @@",
            "@@ -1183,7 @@",
            "@@ -1356,7 @@"
          ]
        }
      ]
    },
    {
      "filepath": "dom/view-transitions/ViewTransition.h",
      "fixing_commits": [
        {
          "commit_hash": "d0a241d0c9b6",
          "full_hash": "d0a241d0c9b60dd81a2de262111995582864544c",
          "parent_hash": "a8e744a89b81ba904f1ee1eadfcb8175e0f880e2",
          "commit_type": "fixing",
          "filepath": "dom/view-transitions/ViewTransition.h",
          "diff_found": true,
          "diff_path": "/Users/sidiqafekrat/Mozilla_crashAnalyzer_BugBug/method2_bugzilla_bugs/outputs/step5_extracted_diffs/bug_1972259/fixing_commit/d0a241d0c9b6/dom_view-transitions_ViewTransition.h.diff",
          "methods_count": 0,
          "matched_methods": {
            "fully_modified": [],
            "partially_modified": [],
            "unmodified": []
          },
          "hunks_count": 1,
          "hunk_ranges": [
            "@@ -66,6 @@"
          ]
        }
      ],
      "regressor_commits": [
        {
          "commit_hash": "4022112ed77b",
          "full_hash": "4022112ed77b0e7998e9fdfdcd0a048f4cabffce",
          "parent_hash": "81ebaa847d42f8c8d8d49a7e93188655d8351c9f",
          "commit_type": "regressor",
          "filepath": "dom/view-transitions/ViewTransition.h",
          "diff_found": true,
          "diff_path": "/Users/sidiqafekrat/Mozilla_crashAnalyzer_BugBug/method2_bugzilla_bugs/outputs/step5_extracted_diffs/bug_1972259/regressor_commits/regressor_1953823_4022112ed77b/dom_view-transitions_ViewTransition.h.diff",
          "methods_count": 0,
          "matched_methods": {
            "fully_modified": [],
            "partially_modified": [],
            "unmodified": []
          },
          "hunks_count": 1,
          "hunk_ranges": [
            "@@ -104,6 @@"
          ]
        }
      ]
    }
  ],
  "summary": {
    "total_files": 2,
    "total_commits": 4,
    "diffs_found": 4,
    "methods_fully_modified": 1,
    "methods_partially_modified": 7,
    "methods_unmodified": 95
  }
}